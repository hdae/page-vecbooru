function JN(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function rM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R0={exports:{}},yg={};var IS;function ej(){if(IS)return yg;IS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:e,type:i,key:l,ref:r!==void 0?r:null,props:o}}return yg.Fragment=t,yg.jsx=n,yg.jsxs=n,yg}var OS;function tj(){return OS||(OS=1,R0.exports=ej()),R0.exports}var Te=tj(),F0={exports:{}},fn={};var DS;function nj(){if(DS)return fn;DS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.iterator;function _(G){return G===null||typeof G!="object"?null:(G=m&&G[m]||G["@@iterator"],typeof G=="function"?G:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,D={};function T(G,H,V){this.props=G,this.context=H,this.refs=D,this.updater=V||v}T.prototype.isReactComponent={},T.prototype.setState=function(G,H){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,H,"setState")},T.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function E(){}E.prototype=T.prototype;function A(G,H,V){this.props=G,this.context=H,this.refs=D,this.updater=V||v}var $=A.prototype=new E;$.constructor=A,b($,T.prototype),$.isPureReactComponent=!0;var P=Array.isArray;function C(){}var S={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function N(G,H,V){var U=V.ref;return{$$typeof:e,type:G,key:H,ref:U!==void 0?U:null,props:V}}function j(G,H){return N(G.type,H,G.props)}function X(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function Y(G){var H={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(V){return H[V]})}var K=/\/+/g;function se(G,H){return typeof G=="object"&&G!==null&&G.key!=null?Y(""+G.key):H.toString(36)}function oe(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(C,C):(G.status="pending",G.then(function(H){G.status==="pending"&&(G.status="fulfilled",G.value=H)},function(H){G.status==="pending"&&(G.status="rejected",G.reason=H)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function W(G,H,V,U,ce){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var ke=!1;if(G===null)ke=!0;else switch(ve){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(G.$$typeof){case e:case t:ke=!0;break;case p:return ke=G._init,W(ke(G._payload),H,V,U,ce)}}if(ke)return ce=ce(G),ke=U===""?"."+se(G,0):U,P(ce)?(V="",ke!=null&&(V=ke.replace(K,"$&/")+"/"),W(ce,H,V,"",function(Be){return Be})):ce!=null&&(X(ce)&&(ce=j(ce,V+(ce.key==null||G&&G.key===ce.key?"":(""+ce.key).replace(K,"$&/")+"/")+ke)),H.push(ce)),1;ke=0;var Le=U===""?".":U+":";if(P(G))for(var Xe=0;Xe<G.length;Xe++)U=G[Xe],ve=Le+se(U,Xe),ke+=W(U,H,V,ve,ce);else if(Xe=_(G),typeof Xe=="function")for(G=Xe.call(G),Xe=0;!(U=G.next()).done;)U=U.value,ve=Le+se(U,Xe++),ke+=W(U,H,V,ve,ce);else if(ve==="object"){if(typeof G.then=="function")return W(oe(G),H,V,U,ce);throw H=String(G),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ne(G,H,V){if(G==null)return G;var U=[],ce=0;return W(G,U,"","",function(ve){return H.call(V,ve,ce++)}),U}function ae(G){if(G._status===-1){var H=G._result;H=H(),H.then(function(V){(G._status===0||G._status===-1)&&(G._status=1,G._result=V)},function(V){(G._status===0||G._status===-1)&&(G._status=2,G._result=V)}),G._status===-1&&(G._status=0,G._result=H)}if(G._status===1)return G._result.default;throw G._result}var ge=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ye={map:ne,forEach:function(G,H,V){ne(G,function(){H.apply(this,arguments)},V)},count:function(G){var H=0;return ne(G,function(){H++}),H},toArray:function(G){return ne(G,function(H){return H})||[]},only:function(G){if(!X(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return fn.Activity=h,fn.Children=ye,fn.Component=T,fn.Fragment=n,fn.Profiler=r,fn.PureComponent=A,fn.StrictMode=i,fn.Suspense=d,fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,fn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return S.H.useMemoCache(G)}},fn.cache=function(G){return function(){return G.apply(null,arguments)}},fn.cacheSignal=function(){return null},fn.cloneElement=function(G,H,V){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var U=b({},G.props),ce=G.key;if(H!=null)for(ve in H.key!==void 0&&(ce=""+H.key),H)!O.call(H,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&H.ref===void 0||(U[ve]=H[ve]);var ve=arguments.length-2;if(ve===1)U.children=V;else if(1<ve){for(var ke=Array(ve),Le=0;Le<ve;Le++)ke[Le]=arguments[Le+2];U.children=ke}return N(G.type,ce,U)},fn.createContext=function(G){return G={$$typeof:l,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},fn.createElement=function(G,H,V){var U,ce={},ve=null;if(H!=null)for(U in H.key!==void 0&&(ve=""+H.key),H)O.call(H,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(ce[U]=H[U]);var ke=arguments.length-2;if(ke===1)ce.children=V;else if(1<ke){for(var Le=Array(ke),Xe=0;Xe<ke;Xe++)Le[Xe]=arguments[Xe+2];ce.children=Le}if(G&&G.defaultProps)for(U in ke=G.defaultProps,ke)ce[U]===void 0&&(ce[U]=ke[U]);return N(G,ve,ce)},fn.createRef=function(){return{current:null}},fn.forwardRef=function(G){return{$$typeof:c,render:G}},fn.isValidElement=X,fn.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:ae}},fn.memo=function(G,H){return{$$typeof:f,type:G,compare:H===void 0?null:H}},fn.startTransition=function(G){var H=S.T,V={};S.T=V;try{var U=G(),ce=S.S;ce!==null&&ce(V,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(C,ge)}catch(ve){ge(ve)}finally{H!==null&&V.types!==null&&(H.types=V.types),S.T=H}},fn.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},fn.use=function(G){return S.H.use(G)},fn.useActionState=function(G,H,V){return S.H.useActionState(G,H,V)},fn.useCallback=function(G,H){return S.H.useCallback(G,H)},fn.useContext=function(G){return S.H.useContext(G)},fn.useDebugValue=function(){},fn.useDeferredValue=function(G,H){return S.H.useDeferredValue(G,H)},fn.useEffect=function(G,H){return S.H.useEffect(G,H)},fn.useEffectEvent=function(G){return S.H.useEffectEvent(G)},fn.useId=function(){return S.H.useId()},fn.useImperativeHandle=function(G,H,V){return S.H.useImperativeHandle(G,H,V)},fn.useInsertionEffect=function(G,H){return S.H.useInsertionEffect(G,H)},fn.useLayoutEffect=function(G,H){return S.H.useLayoutEffect(G,H)},fn.useMemo=function(G,H){return S.H.useMemo(G,H)},fn.useOptimistic=function(G,H){return S.H.useOptimistic(G,H)},fn.useReducer=function(G,H,V){return S.H.useReducer(G,H,V)},fn.useRef=function(G){return S.H.useRef(G)},fn.useState=function(G){return S.H.useState(G)},fn.useSyncExternalStore=function(G,H,V){return S.H.useSyncExternalStore(G,H,V)},fn.useTransition=function(){return S.H.useTransition()},fn.version="19.2.3",fn}var zS;function p_(){return zS||(zS=1,F0.exports=nj()),F0.exports}var Q=p_();const Fh=rM(Q),VC=JN({__proto__:null,default:Fh},[Q]);var N0={exports:{}},bg={},j0={exports:{}},B0={};var LS;function rj(){return LS||(LS=1,(function(e){function t(W,ne){var ae=W.length;W.push(ne);e:for(;0<ae;){var ge=ae-1>>>1,ye=W[ge];if(0<r(ye,ne))W[ge]=ne,W[ae]=ye,ae=ge;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ne=W[0],ae=W.pop();if(ae!==ne){W[0]=ae;e:for(var ge=0,ye=W.length,G=ye>>>1;ge<G;){var H=2*(ge+1)-1,V=W[H],U=H+1,ce=W[U];if(0>r(V,ae))U<ye&&0>r(ce,V)?(W[ge]=ce,W[U]=ae,ge=U):(W[ge]=V,W[H]=ae,ge=H);else if(U<ye&&0>r(ce,ae))W[ge]=ce,W[U]=ae,ge=U;else break e}}return ne}function r(W,ne){var ae=W.sortIndex-ne.sortIndex;return ae!==0?ae:W.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,h=null,m=3,_=!1,v=!1,b=!1,D=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(W){for(var ne=n(f);ne!==null;){if(ne.callback===null)i(f);else if(ne.startTime<=W)i(f),ne.sortIndex=ne.expirationTime,t(d,ne);else break;ne=n(f)}}function P(W){if(b=!1,$(W),!v)if(n(d)!==null)v=!0,C||(C=!0,Y());else{var ne=n(f);ne!==null&&oe(P,ne.startTime-W)}}var C=!1,S=-1,O=5,N=-1;function j(){return D?!0:!(e.unstable_now()-N<O)}function X(){if(D=!1,C){var W=e.unstable_now();N=W;var ne=!0;try{e:{v=!1,b&&(b=!1,E(S),S=-1),_=!0;var ae=m;try{t:{for($(W),h=n(d);h!==null&&!(h.expirationTime>W&&j());){var ge=h.callback;if(typeof ge=="function"){h.callback=null,m=h.priorityLevel;var ye=ge(h.expirationTime<=W);if(W=e.unstable_now(),typeof ye=="function"){h.callback=ye,$(W),ne=!0;break t}h===n(d)&&i(d),$(W)}else i(d);h=n(d)}if(h!==null)ne=!0;else{var G=n(f);G!==null&&oe(P,G.startTime-W),ne=!1}}break e}finally{h=null,m=ae,_=!1}ne=void 0}}finally{ne?Y():C=!1}}}var Y;if(typeof A=="function")Y=function(){A(X)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,se=K.port2;K.port1.onmessage=X,Y=function(){se.postMessage(null)}}else Y=function(){T(X,0)};function oe(W,ne){S=T(function(){W(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var ae=m;m=ne;try{return W()}finally{m=ae}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(W,ne){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ae=m;m=W;try{return ne()}finally{m=ae}},e.unstable_scheduleCallback=function(W,ne,ae){var ge=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ge+ae:ge):ae=ge,W){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ae+ye,W={id:p++,callback:ne,priorityLevel:W,startTime:ae,expirationTime:ye,sortIndex:-1},ae>ge?(W.sortIndex=ae,t(f,W),n(d)===null&&W===n(f)&&(b?(E(S),S=-1):b=!0,oe(P,ae-ge))):(W.sortIndex=ye,t(d,W),v||_||(v=!0,C||(C=!0,Y()))),W},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(W){var ne=m;return function(){var ae=m;m=ne;try{return W.apply(this,arguments)}finally{m=ae}}}})(B0)),B0}var RS;function ij(){return RS||(RS=1,j0.exports=rj()),j0.exports}var U0={exports:{}},Bi={};var FS;function aj(){if(FS)return Bi;FS=1;var e=p_();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:d,containerInfo:f,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Bi.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},Bi.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},Bi.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Bi.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Bi.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,h=c(p,f.crossOrigin),m=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:_}):p==="script"&&i.d.X(d,{crossOrigin:h,integrity:m,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Bi.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Bi.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,h=c(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Bi.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Bi.requestFormReset=function(d){i.d.r(d)},Bi.unstable_batchedUpdates=function(d,f){return d(f)},Bi.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},Bi.useFormStatus=function(){return l.H.useHostTransitionStatus()},Bi.version="19.2.3",Bi}var NS;function GC(){if(NS)return U0.exports;NS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),U0.exports=aj(),U0.exports}var jS;function oj(){if(jS)return bg;jS=1;var e=ij(),t=p_(),n=GC();function i(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,u=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(u=s.return),a=s.return;while(a)}return s.tag===3?u:null}function l(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function c(a){if(a.tag===31){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function d(a){if(o(a)!==a)throw Error(i(188))}function f(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(i(188));return s!==a?null:a}for(var u=a,g=s;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(g=y.return,g!==null){u=g;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return d(y),a;if(x===g)return d(y),s;x=x.sibling}throw Error(i(188))}if(u.return!==g.return)u=y,g=x;else{for(var F=!1,ee=y.child;ee;){if(ee===u){F=!0,u=y,g=x;break}if(ee===g){F=!0,g=y,u=x;break}ee=ee.sibling}if(!F){for(ee=x.child;ee;){if(ee===u){F=!0,u=x,g=y;break}if(ee===g){F=!0,g=x,u=y;break}ee=ee.sibling}if(!F)throw Error(i(189))}}if(u.alternate!==g)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?a:s}function p(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=p(a),s!==null)return s;a=a.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Y(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var K=Symbol.for("react.client.reference");function se(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===K?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case T:return"Profiler";case D:return"StrictMode";case P:return"Suspense";case C:return"SuspenseList";case N:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case v:return"Portal";case A:return a.displayName||"Context";case E:return(a._context.displayName||"Context")+".Consumer";case $:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case S:return s=a.displayName||null,s!==null?s:se(a.type)||"Memo";case O:s=a._payload,a=a._init;try{return se(a(s))}catch{}}return null}var oe=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},ge=[],ye=-1;function G(a){return{current:a}}function H(a){0>ye||(a.current=ge[ye],ge[ye]=null,ye--)}function V(a,s){ye++,ge[ye]=a.current,a.current=s}var U=G(null),ce=G(null),ve=G(null),ke=G(null);function Le(a,s){switch(V(ve,s),V(ce,a),V(U,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?tn(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=tn(s),a=Lt(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}H(U),V(U,a)}function Xe(){H(U),H(ce),H(ve)}function Be(a){a.memoizedState!==null&&V(ke,a);var s=U.current,u=Lt(s,a.type);s!==u&&(V(ce,a),V(U,u))}function ue(a){ce.current===a&&(H(U),H(ce)),ke.current===a&&(H(ke),pg._currentValue=ae)}var Z,Se;function Re(a){if(Z===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Z=s&&s[1]||"",Se=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+a+Se}var Ve=!1;function Ge(a,s){if(!a||Ve)return"";Ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(He){var Ne=He}Reflect.construct(a,[],it)}else{try{it.call()}catch(He){Ne=He}a.call(it.prototype)}}else{try{throw Error()}catch(He){Ne=He}(it=a())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(He){if(He&&Ne&&typeof He.stack=="string")return[He.stack,Ne.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=g.DetermineComponentFrameRoot(),F=x[0],ee=x[1];if(F&&ee){var _e=F.split(`
`),De=ee.split(`
`);for(y=g=0;g<_e.length&&!_e[g].includes("DetermineComponentFrameRoot");)g++;for(;y<De.length&&!De[y].includes("DetermineComponentFrameRoot");)y++;if(g===_e.length||y===De.length)for(g=_e.length-1,y=De.length-1;1<=g&&0<=y&&_e[g]!==De[y];)y--;for(;1<=g&&0<=y;g--,y--)if(_e[g]!==De[y]){if(g!==1||y!==1)do if(g--,y--,0>y||_e[g]!==De[y]){var Je=`
`+_e[g].replace(" at new "," at ");return a.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",a.displayName)),Je}while(1<=g&&0<=y);break}}}finally{Ve=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?Re(u):""}function Ke(a,s){switch(a.tag){case 26:case 27:case 5:return Re(a.type);case 16:return Re("Lazy");case 13:return a.child!==s&&s!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Ge(a.type,!1);case 11:return Ge(a.type.render,!1);case 1:return Ge(a.type,!0);case 31:return Re("Activity");default:return""}}function Ie(a){try{var s="",u=null;do s+=Ke(a,u),u=a,a=a.return;while(a);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var nt=Object.prototype.hasOwnProperty,Ae=e.unstable_scheduleCallback,We=e.unstable_cancelCallback,ft=e.unstable_shouldYield,Fe=e.unstable_requestPaint,ot=e.unstable_now,rt=e.unstable_getCurrentPriorityLevel,St=e.unstable_ImmediatePriority,Tt=e.unstable_UserBlockingPriority,ut=e.unstable_NormalPriority,et=e.unstable_LowPriority,kt=e.unstable_IdlePriority,jt=e.log,Cn=e.unstable_setDisableYieldValue,Qt=null,kn=null;function Mr(a){if(typeof jt=="function"&&Cn(a),kn&&typeof kn.setStrictMode=="function")try{kn.setStrictMode(Qt,a)}catch{}}var an=Math.clz32?Math.clz32:as,_i=Math.log,is=Math.LN2;function as(a){return a>>>=0,a===0?32:31-(_i(a)/is|0)|0}var pa=256,Jn=262144,Ir=4194304;function Yr(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ra(a,s,u){var g=a.pendingLanes;if(g===0)return 0;var y=0,x=a.suspendedLanes,F=a.pingedLanes;a=a.warmLanes;var ee=g&134217727;return ee!==0?(g=ee&~x,g!==0?y=Yr(g):(F&=ee,F!==0?y=Yr(F):u||(u=ee&~a,u!==0&&(y=Yr(u))))):(ee=g&~x,ee!==0?y=Yr(ee):F!==0?y=Yr(F):u||(u=g&~a,u!==0&&(y=Yr(u)))),y===0?0:s!==0&&s!==y&&(s&x)===0&&(x=y&-y,u=s&-s,x>=u||x===32&&(u&4194048)!==0)?s:y}function Bt(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function Wn(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ga(){var a=Ir;return Ir<<=1,(Ir&62914560)===0&&(Ir=4194304),a}function ia(a){for(var s=[],u=0;31>u;u++)s.push(a);return s}function ei(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Xt(a,s,u,g,y,x){var F=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var ee=a.entanglements,_e=a.expirationTimes,De=a.hiddenUpdates;for(u=F&~u;0<u;){var Je=31-an(u),it=1<<Je;ee[Je]=0,_e[Je]=-1;var Ne=De[Je];if(Ne!==null)for(De[Je]=null,Je=0;Je<Ne.length;Je++){var He=Ne[Je];He!==null&&(He.lane&=-536870913)}u&=~it}g!==0&&_a(a,g,0),x!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=x&~(F&~s))}function _a(a,s,u){a.pendingLanes|=s,a.suspendedLanes&=~s;var g=31-an(s);a.entangledLanes|=s,a.entanglements[g]=a.entanglements[g]|1073741824|u&261930}function L(a,s){var u=a.entangledLanes|=s;for(a=a.entanglements;u;){var g=31-an(u),y=1<<g;y&s|a[g]&s&&(a[g]|=s),u&=~y}}function de(a,s){var u=s&-s;return u=(u&42)!==0?1:J(u),(u&(a.suspendedLanes|s))!==0?0:u}function J(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function le(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function fe(){var a=ne.p;return a!==0?a:(a=window.event,a===void 0?32:SS(a.type))}function xe(a,s){var u=ne.p;try{return ne.p=a,s()}finally{ne.p=u}}var je=Math.random().toString(36).slice(2),mt="__reactFiber$"+je,Et="__reactProps$"+je,_t="__reactContainer$"+je,Gt="__reactEvents$"+je,yt="__reactListeners$"+je,rn="__reactHandles$"+je,cn="__reactResources$"+je,fr="__reactMarker$"+je;function hr(a){delete a[mt],delete a[Et],delete a[Gt],delete a[yt],delete a[rn]}function Hn(a){var s=a[mt];if(s)return s;for(var u=a.parentNode;u;){if(s=u[_t]||u[mt]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(a=Kr(a);a!==null;){if(u=a[mt])return u;a=Kr(a)}return s}a=u,u=a.parentNode}return null}function mr(a){if(a=a[mt]||a[_t]){var s=a.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return a}return null}function Ai(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(i(33))}function Or(a){var s=a[cn];return s||(s=a[cn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function er(a){a[fr]=!0}var ti=new Set,ni={};function ri(a,s){or(a,s),or(a+"Capture",s)}function or(a,s){for(ni[a]=s,a=0;a<s.length;a++)ti.add(s[a])}var Tr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mi={},Hi={};function So(a){return nt.call(Hi,a)?!0:nt.call(Mi,a)?!1:Tr.test(a)?Hi[a]=!0:(Mi[a]=!0,!1)}function Ki(a,s,u){if(So(s))if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+u)}}function qi(a,s,u){if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+u)}}function ii(a,s,u,g){if(g===null)a.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(s,u,""+g)}}function $r(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ci(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lt(a,s,u){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,s);if(!a.hasOwnProperty(s)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var y=g.get,x=g.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return y.call(this)},set:function(F){u=""+F,x.call(this,F)}}),Object.defineProperty(a,s,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(F){u=""+F},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function dt(a){if(!a._valueTracker){var s=ci(a)?"checked":"value";a._valueTracker=lt(a,s,""+a[s])}}function Ct(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var u=s.getValue(),g="";return a&&(g=ci(a)?a.checked?"true":"false":a.value),a=g,a!==u?(s.setValue(a),!0):!1}function An(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Eo=/[\n"\\]/g;function Nr(a){return a.replace(Eo,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function va(a,s,u,g,y,x,F,ee){a.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?a.type=F:a.removeAttribute("type"),s!=null?F==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+$r(s)):a.value!==""+$r(s)&&(a.value=""+$r(s)):F!=="submit"&&F!=="reset"||a.removeAttribute("value"),s!=null?Me(a,F,$r(s)):u!=null?Me(a,F,$r(u)):g!=null&&a.removeAttribute("value"),y==null&&x!=null&&(a.defaultChecked=!!x),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?a.name=""+$r(ee):a.removeAttribute("name")}function Zs(a,s,u,g,y,x,F,ee){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),s!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||s!=null)){dt(a);return}u=u!=null?""+$r(u):"",s=s!=null?""+$r(s):u,ee||s===a.value||(a.value=s),a.defaultValue=s}g=g??y,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=ee?a.checked:!!g,a.defaultChecked=!!g,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(a.name=F),dt(a)}function Me(a,s,u){s==="number"&&An(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function R(a,s,u,g){if(a=a.options,s){s={};for(var y=0;y<u.length;y++)s["$"+u[y]]=!0;for(u=0;u<a.length;u++)y=s.hasOwnProperty("$"+a[u].value),a[u].selected!==y&&(a[u].selected=y),y&&g&&(a[u].defaultSelected=!0)}else{for(u=""+$r(u),s=null,y=0;y<a.length;y++){if(a[y].value===u){a[y].selected=!0,g&&(a[y].defaultSelected=!0);return}s!==null||a[y].disabled||(s=a[y])}s!==null&&(s.selected=!0)}}function ie(a,s,u){if(s!=null&&(s=""+$r(s),s!==a.value&&(a.value=s),u==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=u!=null?""+$r(u):""}function he(a,s,u,g){if(s==null){if(g!=null){if(u!=null)throw Error(i(92));if(oe(g)){if(1<g.length)throw Error(i(93));g=g[0]}u=g}u==null&&(u=""),s=u}u=$r(s),a.defaultValue=u,g=a.textContent,g===u&&g!==""&&g!==null&&(a.value=g),dt(a)}function me(a,s){if(s){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=s;return}}a.textContent=s}var ze=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ze(a,s,u){var g=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":g?a.setProperty(s,u):typeof u!="number"||u===0||ze.has(s)?s==="float"?a.cssFloat=u:a[s]=(""+u).trim():a[s]=u+"px"}function xt(a,s,u){if(s!=null&&typeof s!="object")throw Error(i(62));if(a=a.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var y in s)g=s[y],s.hasOwnProperty(y)&&u[y]!==g&&Ze(a,y,g)}else for(var x in s)s.hasOwnProperty(x)&&Ze(a,x,s[x])}function bt(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function en(a){return vt.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Vt(){}var tr=null;function Pr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var In=null,jn=null;function Ln(a){var s=mr(a);if(s&&(a=s.stateNode)){var u=a[Et]||null;e:switch(a=s.stateNode,s.type){case"input":if(va(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Nr(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var g=u[s];if(g!==a&&g.form===a.form){var y=g[Et]||null;if(!y)throw Error(i(90));va(g,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<u.length;s++)g=u[s],g.form===a.form&&Ct(g)}break e;case"textarea":ie(a,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&R(a,!!u.multiple,s,!1)}}}var vi=!1;function Zi(a,s,u){if(vi)return a(s,u);vi=!0;try{var g=a(s);return g}finally{if(vi=!1,(In!==null||jn!==null)&&(od(),In&&(s=In,a=jn,jn=In=null,Ln(s),a)))for(s=0;s<a.length;s++)Ln(a[s])}}function Sr(a,s){var u=a.stateNode;if(u===null)return null;var g=u[Et]||null;if(g===null)return null;u=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(i(231,s,typeof u));return u}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xn=!1;if(Jr)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Xn=!1}var lr=null,Ti=null,Ii=null;function Dr(){if(Ii)return Ii;var a,s=Ti,u=s.length,g,y="value"in lr?lr.value:lr.textContent,x=y.length;for(a=0;a<u&&s[a]===y[a];a++);var F=u-a;for(g=1;g<=F&&s[u-g]===y[x-g];g++);return Ii=y.slice(a,1<g?1-g:void 0)}function Si(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Er(){return!0}function nr(){return!1}function Sn(a){function s(u,g,y,x,F){this._reactName=u,this._targetInst=y,this.type=g,this.nativeEvent=x,this.target=F,this.currentTarget=null;for(var ee in a)a.hasOwnProperty(ee)&&(u=a[ee],this[ee]=u?u(x):x[ee]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Er:nr,this.isPropagationStopped=nr,this}return h(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ai=Sn(Bn),aa=h({},Bn,{view:0,detail:0}),qa=Sn(aa),Qs,Hl,os,Xs=h({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==os&&(os&&a.type==="mousemove"?(Qs=a.screenX-os.screenX,Hl=a.screenY-os.screenY):Hl=Qs=0,os=a),Qs)},movementY:function(a){return"movementY"in a?a.movementY:Hl}}),hu=Sn(Xs),ss=h({},Xs,{dataTransfer:0}),Kd=Sn(ss),qd=h({},aa,{relatedTarget:0}),Kl=Sn(qd),Zd=h({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qd=Sn(Zd),ls=h({},Bn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Xd=Sn(ls),mu=h({},Bn,{data:0}),ql=Sn(mu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=gu[a])?!!s[a]:!1}function Ys(){return _u}var $o=h({},aa,{key:function(a){if(a.key){var s=pu[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=Si(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Yd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(a){return a.type==="keypress"?Si(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Si(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Jd=Sn($o),Zl=h({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vu=Sn(Zl),yu=h({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),am=Sn(yu),Ql=h({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xl=Sn(Ql),bu=h({},Xs,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Yl=Sn(bu),ef=h({},Bn,{newState:0,oldState:0}),tf=Sn(ef),nf=[9,13,27,32],Jl=Jr&&"CompositionEvent"in window,cs=null;Jr&&"documentMode"in document&&(cs=document.documentMode);var rf=Jr&&"TextEvent"in window&&!cs,ec=Jr&&(!Jl||cs&&8<cs&&11>=cs),us=" ",Po=!1;function Js(a,s){switch(a){case"keyup":return nf.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ya=!1;function el(a,s){switch(a){case"compositionend":return wu(s);case"keypress":return s.which!==32?null:(Po=!0,us);case"textInput":return a=s.data,a===us&&Po?null:a;default:return null}}function tc(a,s){if(ya)return a==="compositionend"||!Jl&&Js(a,s)?(a=Dr(),Ii=Ti=lr=null,ya=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ec&&s.locale!=="ko"?null:s.data;default:return null}}var nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ba(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!nc[a.type]:s==="textarea"}function rc(a,s,u,g){In?jn?jn.push(g):jn=[g]:In=g,s=Ia(s,"onChange"),0<s.length&&(u=new ai("onChange","change",null,u,g),a.push({event:u,listeners:s}))}var ds=null,Co=null;function af(a){yv(a,0)}function tl(a){var s=Ai(a);if(Ct(s))return a}function nl(a,s){if(a==="change")return s}var ic=!1;if(Jr){var ko;if(Jr){var Ot="oninput"in document;if(!Ot){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),Ot=typeof xu.oninput=="function"}ko=Ot}else ko=!1;ic=ko&&(!document.documentMode||9<document.documentMode)}function ac(){ds&&(ds.detachEvent("onpropertychange",fs),Co=ds=null)}function fs(a){if(a.propertyName==="value"&&tl(Co)){var s=[];rc(s,Co,a,Pr(a)),Zi(af,s)}}function rl(a,s,u){a==="focusin"?(ac(),ds=s,Co=u,ds.attachEvent("onpropertychange",fs)):a==="focusout"&&ac()}function Qi(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return tl(Co)}function il(a,s){if(a==="click")return tl(s)}function al(a,s){if(a==="input"||a==="change")return tl(s)}function Mu(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var ui=typeof Object.is=="function"?Object.is:Mu;function Za(a,s){if(ui(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var u=Object.keys(a),g=Object.keys(s);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var y=u[g];if(!nt.call(s,y)||!ui(a[y],s[y]))return!1}return!0}function ol(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function oc(a,s){var u=ol(a);a=0;for(var g;u;){if(u.nodeType===3){if(g=a+u.textContent.length,a<=s&&g>=s)return{node:u,offset:s-a};a=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ol(u)}}function sl(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?sl(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function sc(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=An(a.document);s instanceof a.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)a=s.contentWindow;else break;s=An(a.document)}return s}function Ao(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var ll=Jr&&"documentMode"in document&&11>=document.documentMode,wa=null,cl=null,Qa=null,ul=!1;function lc(a,s,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ul||wa==null||wa!==An(g)||(g=wa,"selectionStart"in g&&Ao(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Qa&&Za(Qa,g)||(Qa=g,g=Ia(cl,"onSelect"),0<g.length&&(s=new ai("onSelect","select",null,s,u),a.push({event:s,listeners:g}),s.target=wa)))}function oa(a,s){var u={};return u[a.toLowerCase()]=s.toLowerCase(),u["Webkit"+a]="webkit"+s,u["Moz"+a]="moz"+s,u}var w={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},z={},B={};Jr&&(B=document.createElement("div").style,"AnimationEvent"in window||(delete w.animationend.animation,delete w.animationiteration.animation,delete w.animationstart.animation),"TransitionEvent"in window||delete w.transitionend.transition);function q(a){if(z[a])return z[a];if(!w[a])return a;var s=w[a],u;for(u in s)if(s.hasOwnProperty(u)&&u in B)return z[a]=s[u];return a}var re=q("animationend"),be=q("animationiteration"),qe=q("animationstart"),ct=q("transitionrun"),wt=q("transitionstart"),At=q("transitioncancel"),Yt=q("transitionend"),yn=new Map,$n="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$n.push("scrollEnd");function Rn(a,s){yn.set(a,s),ri(s,[a])}var sa=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ei=[],hs=0,of=0;function Tu(){for(var a=hs,s=of=hs=0;s<a;){var u=Ei[s];Ei[s++]=null;var g=Ei[s];Ei[s++]=null;var y=Ei[s];Ei[s++]=null;var x=Ei[s];if(Ei[s++]=null,g!==null&&y!==null){var F=g.pending;F===null?y.next=y:(y.next=F.next,F.next=y),g.pending=y}x!==0&&lf(u,y,x)}}function cc(a,s,u,g){Ei[hs++]=a,Ei[hs++]=s,Ei[hs++]=u,Ei[hs++]=g,of|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function sf(a,s,u,g){return cc(a,s,u,g),Su(a)}function ms(a,s){return cc(a,null,null,s),Su(a)}function lf(a,s,u){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u);for(var y=!1,x=a.return;x!==null;)x.childLanes|=u,g=x.alternate,g!==null&&(g.childLanes|=u),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(y=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,y&&s!==null&&(y=31-an(u),a=x.hiddenUpdates,g=a[y],g===null?a[y]=[s]:g.push(s),s.lane=u|536870912),x):null}function Su(a){if(50<id)throw id=0,ad=null,Error(i(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var dl={};function om(a,s,u,g){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(a,s,u,g){return new om(a,s,u,g)}function cf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function xa(a,s){var u=a.alternate;return u===null?(u=Oi(a.tag,s,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=s,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,s=a.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function sm(a,s){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,s=u.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function Eu(a,s,u,g,y,x){var F=0;if(g=a,typeof a=="function")cf(a)&&(F=1);else if(typeof a=="string")F=BN(a,u,U.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case N:return a=Oi(31,u,s,y),a.elementType=N,a.lanes=x,a;case b:return Io(u.children,y,x,s);case D:F=8,y|=24;break;case T:return a=Oi(12,u,s,y|2),a.elementType=T,a.lanes=x,a;case P:return a=Oi(13,u,s,y),a.elementType=P,a.lanes=x,a;case C:return a=Oi(19,u,s,y),a.elementType=C,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:F=10;break e;case E:F=9;break e;case $:F=11;break e;case S:F=14;break e;case O:F=16,g=null;break e}F=29,u=Error(i(130,a===null?"null":typeof a,"")),g=null}return s=Oi(F,u,s,y),s.elementType=a,s.type=g,s.lanes=x,s}function Io(a,s,u,g){return a=Oi(7,a,g,s),a.lanes=u,a}function uf(a,s,u){return a=Oi(6,a,null,s),a.lanes=u,a}function lm(a){var s=Oi(18,null,null,0);return s.stateNode=a,s}function $u(a,s,u){return s=Oi(4,a.children!==null?a.children:[],a.key,s),s.lanes=u,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var cm=new WeakMap;function Xi(a,s){if(typeof a=="object"&&a!==null){var u=cm.get(a);return u!==void 0?u:(s={value:a,source:s,stack:Ie(s)},cm.set(a,s),s)}return{value:a,source:s,stack:Ie(s)}}var ps=[],fl=0,Pu=null,hl=0,Yi=[],Ji=0,Xa=null,Ma=1,Ta="";function Sa(a,s){ps[fl++]=hl,ps[fl++]=Pu,Pu=a,hl=s}function um(a,s,u){Yi[Ji++]=Ma,Yi[Ji++]=Ta,Yi[Ji++]=Xa,Xa=a;var g=Ma;a=Ta;var y=32-an(g)-1;g&=~(1<<y),u+=1;var x=32-an(s)+y;if(30<x){var F=y-y%5;x=(g&(1<<F)-1).toString(32),g>>=F,y-=F,Ma=1<<32-an(s)+y|u<<y|g,Ta=x+a}else Ma=1<<x|u<<y|g,Ta=a}function df(a){a.return!==null&&(Sa(a,1),um(a,1,0))}function Cu(a){for(;a===Pu;)Pu=ps[--fl],ps[fl]=null,hl=ps[--fl],ps[fl]=null;for(;a===Xa;)Xa=Yi[--Ji],Yi[Ji]=null,Ta=Yi[--Ji],Yi[Ji]=null,Ma=Yi[--Ji],Yi[Ji]=null}function dm(a,s){Yi[Ji++]=Ma,Yi[Ji++]=Ta,Yi[Ji++]=Xa,Ma=s.id,Ta=s.overflow,Xa=a}var oi=null,rr=null,Tn=!1,Oo=null,Di=!1,ff=Error(i(519));function Do(a){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uc(Xi(s,a)),ff}function hf(a){var s=a.stateNode,u=a.type,g=a.memoizedProps;switch(s[mt]=a,s[Et]=g,u){case"dialog":xn("cancel",s),xn("close",s);break;case"iframe":case"object":case"embed":xn("load",s);break;case"video":case"audio":for(u=0;u<dd.length;u++)xn(dd[u],s);break;case"source":xn("error",s);break;case"img":case"image":case"link":xn("error",s),xn("load",s);break;case"details":xn("toggle",s);break;case"input":xn("invalid",s),Zs(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":xn("invalid",s);break;case"textarea":xn("invalid",s),he(s,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||g.suppressHydrationWarning===!0||te(s.textContent,u)?(g.popover!=null&&(xn("beforetoggle",s),xn("toggle",s)),g.onScroll!=null&&xn("scroll",s),g.onScrollEnd!=null&&xn("scrollend",s),g.onClick!=null&&(s.onclick=Vt),s=!0):s=!1,s||Do(a,!0)}function fm(a){for(oi=a.return;oi;)switch(oi.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:oi=oi.return}}function ml(a){if(a!==oi)return!1;if(!Tn)return fm(a),Tn=!0,!1;var s=a.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Mn(a.type,a.memoizedProps)),u=!u),u&&rr&&Do(a),fm(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));rr=ar(a)}else if(s===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));rr=ar(a)}else s===27?(s=rr,Zn(a.type)?(a=cg,cg=null,rr=a):rr=s):rr=oi?bi(a.stateNode.nextSibling):null;return!0}function zo(){rr=oi=null,Tn=!1}function mf(){var a=Oo;return a!==null&&(hi===null?hi=a:hi.push.apply(hi,a),Oo=null),a}function uc(a){Oo===null?Oo=[a]:Oo.push(a)}var ku=G(null),gs=null,Ya=null;function Ja(a,s,u){V(ku,s._currentValue),s._currentValue=u}function eo(a){a._currentValue=ku.current,H(ku)}function pf(a,s,u){for(;a!==null;){var g=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),a===u)break;a=a.return}}function Au(a,s,u,g){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var x=y.dependencies;if(x!==null){var F=y.child;x=x.firstContext;e:for(;x!==null;){var ee=x;x=y;for(var _e=0;_e<s.length;_e++)if(ee.context===s[_e]){x.lanes|=u,ee=x.alternate,ee!==null&&(ee.lanes|=u),pf(x.return,u,a),g||(F=null);break e}x=ee.next}}else if(y.tag===18){if(F=y.return,F===null)throw Error(i(341));F.lanes|=u,x=F.alternate,x!==null&&(x.lanes|=u),pf(F,u,a),F=null}else F=y.child;if(F!==null)F.return=y;else for(F=y;F!==null;){if(F===a){F=null;break}if(y=F.sibling,y!==null){y.return=F.return,F=y;break}F=F.return}y=F}}function pl(a,s,u,g){a=null;for(var y=s,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var F=y.alternate;if(F===null)throw Error(i(387));if(F=F.memoizedProps,F!==null){var ee=y.type;ui(y.pendingProps.value,F.value)||(a!==null?a.push(ee):a=[ee])}}else if(y===ke.current){if(F=y.alternate,F===null)throw Error(i(387));F.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(pg):a=[pg])}y=y.return}a!==null&&Au(s,a,u,g),s.flags|=262144}function Iu(a){for(a=a.firstContext;a!==null;){if(!ui(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function _s(a){gs=a,Ya=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function si(a){return hm(gs,a)}function dc(a,s){return gs===null&&_s(a),hm(a,s)}function hm(a,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Ya===null){if(a===null)throw Error(i(308));Ya=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Ya=Ya.next=s;return u}var G_=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(u,g){a.push(g)}};this.abort=function(){s.aborted=!0,a.forEach(function(u){return u()})}},mm=e.unstable_scheduleCallback,W_=e.unstable_NormalPriority,jr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ou(){return{controller:new G_,data:new Map,refCount:0}}function fc(a){a.refCount--,a.refCount===0&&mm(W_,function(){a.controller.abort()})}var hc=null,Du=0,gl=0,_l=null;function pm(a,s){if(hc===null){var u=hc=[];Du=0,gl=ig(),_l={status:"pending",value:void 0,then:function(g){u.push(g)}}}return Du++,s.then(gm,gm),s}function gm(){if(--Du===0&&hc!==null){_l!==null&&(_l.status="fulfilled");var a=hc;hc=null,gl=0,_l=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function H_(a,s){var u=[],g={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return a.then(function(){g.status="fulfilled",g.value=s;for(var y=0;y<u.length;y++)(0,u[y])(s)},function(y){for(g.status="rejected",g.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),g}var gf=W.S;W.S=function(a,s){Fp=ot(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&pm(a,s),gf!==null&&gf(a,s)};var vs=G(null);function _f(){var a=vs.current;return a!==null?a:Yn.pooledCache}function mc(a,s){s===null?V(vs,vs.current):V(vs,s.pool)}function _m(){var a=_f();return a===null?null:{parent:jr._currentValue,pool:a}}var vl=Error(i(460)),vf=Error(i(474)),zu=Error(i(542)),pc={then:function(){}};function vm(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ym(a,s,u){switch(u=a[u],u===void 0?a.push(s):u!==s&&(s.then(Vt,Vt),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,bm(a),a;default:if(typeof s.status=="string")s.then(Vt,Vt);else{if(a=Yn,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=s,a.status="pending",a.then(function(g){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=g}},function(g){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,bm(a),a}throw bs=s,vl}}function ys(a){try{var s=a._init;return s(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(bs=u,vl):u}}var bs=null;function yf(){if(bs===null)throw Error(i(459));var a=bs;return bs=null,a}function bm(a){if(a===vl||a===zu)throw Error(i(483))}var yl=null,gc=0;function Lu(a){var s=gc;return gc+=1,yl===null&&(yl=[]),ym(yl,a,s)}function bl(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function Ru(a,s){throw s.$$typeof===m?Error(i(525)):(a=Object.prototype.toString.call(s),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function wm(a){function s(Ee,we){if(a){var Oe=Ee.deletions;Oe===null?(Ee.deletions=[we],Ee.flags|=16):Oe.push(we)}}function u(Ee,we){if(!a)return null;for(;we!==null;)s(Ee,we),we=we.sibling;return null}function g(Ee){for(var we=new Map;Ee!==null;)Ee.key!==null?we.set(Ee.key,Ee):we.set(Ee.index,Ee),Ee=Ee.sibling;return we}function y(Ee,we){return Ee=xa(Ee,we),Ee.index=0,Ee.sibling=null,Ee}function x(Ee,we,Oe){return Ee.index=Oe,a?(Oe=Ee.alternate,Oe!==null?(Oe=Oe.index,Oe<we?(Ee.flags|=67108866,we):Oe):(Ee.flags|=67108866,we)):(Ee.flags|=1048576,we)}function F(Ee){return a&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function ee(Ee,we,Oe,tt){return we===null||we.tag!==6?(we=uf(Oe,Ee.mode,tt),we.return=Ee,we):(we=y(we,Oe),we.return=Ee,we)}function _e(Ee,we,Oe,tt){var Ht=Oe.type;return Ht===b?Je(Ee,we,Oe.props.children,tt,Oe.key):we!==null&&(we.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===O&&ys(Ht)===we.type)?(we=y(we,Oe.props),bl(we,Oe),we.return=Ee,we):(we=Eu(Oe.type,Oe.key,Oe.props,null,Ee.mode,tt),bl(we,Oe),we.return=Ee,we)}function De(Ee,we,Oe,tt){return we===null||we.tag!==4||we.stateNode.containerInfo!==Oe.containerInfo||we.stateNode.implementation!==Oe.implementation?(we=$u(Oe,Ee.mode,tt),we.return=Ee,we):(we=y(we,Oe.children||[]),we.return=Ee,we)}function Je(Ee,we,Oe,tt,Ht){return we===null||we.tag!==7?(we=Io(Oe,Ee.mode,tt,Ht),we.return=Ee,we):(we=y(we,Oe),we.return=Ee,we)}function it(Ee,we,Oe){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=uf(""+we,Ee.mode,Oe),we.return=Ee,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case _:return Oe=Eu(we.type,we.key,we.props,null,Ee.mode,Oe),bl(Oe,we),Oe.return=Ee,Oe;case v:return we=$u(we,Ee.mode,Oe),we.return=Ee,we;case O:return we=ys(we),it(Ee,we,Oe)}if(oe(we)||Y(we))return we=Io(we,Ee.mode,Oe,null),we.return=Ee,we;if(typeof we.then=="function")return it(Ee,Lu(we),Oe);if(we.$$typeof===A)return it(Ee,dc(Ee,we),Oe);Ru(Ee,we)}return null}function Ne(Ee,we,Oe,tt){var Ht=we!==null?we.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Ht!==null?null:ee(Ee,we,""+Oe,tt);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case _:return Oe.key===Ht?_e(Ee,we,Oe,tt):null;case v:return Oe.key===Ht?De(Ee,we,Oe,tt):null;case O:return Oe=ys(Oe),Ne(Ee,we,Oe,tt)}if(oe(Oe)||Y(Oe))return Ht!==null?null:Je(Ee,we,Oe,tt,null);if(typeof Oe.then=="function")return Ne(Ee,we,Lu(Oe),tt);if(Oe.$$typeof===A)return Ne(Ee,we,dc(Ee,Oe),tt);Ru(Ee,Oe)}return null}function He(Ee,we,Oe,tt,Ht){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Ee=Ee.get(Oe)||null,ee(we,Ee,""+tt,Ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case _:return Ee=Ee.get(tt.key===null?Oe:tt.key)||null,_e(we,Ee,tt,Ht);case v:return Ee=Ee.get(tt.key===null?Oe:tt.key)||null,De(we,Ee,tt,Ht);case O:return tt=ys(tt),He(Ee,we,Oe,tt,Ht)}if(oe(tt)||Y(tt))return Ee=Ee.get(Oe)||null,Je(we,Ee,tt,Ht,null);if(typeof tt.then=="function")return He(Ee,we,Oe,Lu(tt),Ht);if(tt.$$typeof===A)return He(Ee,we,Oe,dc(we,tt),Ht);Ru(we,tt)}return null}function Dt(Ee,we,Oe,tt){for(var Ht=null,Vn=null,Ut=we,vn=we=0,Pn=null;Ut!==null&&vn<Oe.length;vn++){Ut.index>vn?(Pn=Ut,Ut=null):Pn=Ut.sibling;var Gn=Ne(Ee,Ut,Oe[vn],tt);if(Gn===null){Ut===null&&(Ut=Pn);break}a&&Ut&&Gn.alternate===null&&s(Ee,Ut),we=x(Gn,we,vn),Vn===null?Ht=Gn:Vn.sibling=Gn,Vn=Gn,Ut=Pn}if(vn===Oe.length)return u(Ee,Ut),Tn&&Sa(Ee,vn),Ht;if(Ut===null){for(;vn<Oe.length;vn++)Ut=it(Ee,Oe[vn],tt),Ut!==null&&(we=x(Ut,we,vn),Vn===null?Ht=Ut:Vn.sibling=Ut,Vn=Ut);return Tn&&Sa(Ee,vn),Ht}for(Ut=g(Ut);vn<Oe.length;vn++)Pn=He(Ut,Ee,vn,Oe[vn],tt),Pn!==null&&(a&&Pn.alternate!==null&&Ut.delete(Pn.key===null?vn:Pn.key),we=x(Pn,we,vn),Vn===null?Ht=Pn:Vn.sibling=Pn,Vn=Pn);return a&&Ut.forEach(function(Wc){return s(Ee,Wc)}),Tn&&Sa(Ee,vn),Ht}function Jt(Ee,we,Oe,tt){if(Oe==null)throw Error(i(151));for(var Ht=null,Vn=null,Ut=we,vn=we=0,Pn=null,Gn=Oe.next();Ut!==null&&!Gn.done;vn++,Gn=Oe.next()){Ut.index>vn?(Pn=Ut,Ut=null):Pn=Ut.sibling;var Wc=Ne(Ee,Ut,Gn.value,tt);if(Wc===null){Ut===null&&(Ut=Pn);break}a&&Ut&&Wc.alternate===null&&s(Ee,Ut),we=x(Wc,we,vn),Vn===null?Ht=Wc:Vn.sibling=Wc,Vn=Wc,Ut=Pn}if(Gn.done)return u(Ee,Ut),Tn&&Sa(Ee,vn),Ht;if(Ut===null){for(;!Gn.done;vn++,Gn=Oe.next())Gn=it(Ee,Gn.value,tt),Gn!==null&&(we=x(Gn,we,vn),Vn===null?Ht=Gn:Vn.sibling=Gn,Vn=Gn);return Tn&&Sa(Ee,vn),Ht}for(Ut=g(Ut);!Gn.done;vn++,Gn=Oe.next())Gn=He(Ut,Ee,vn,Gn.value,tt),Gn!==null&&(a&&Gn.alternate!==null&&Ut.delete(Gn.key===null?vn:Gn.key),we=x(Gn,we,vn),Vn===null?Ht=Gn:Vn.sibling=Gn,Vn=Gn);return a&&Ut.forEach(function(YN){return s(Ee,YN)}),Tn&&Sa(Ee,vn),Ht}function ur(Ee,we,Oe,tt){if(typeof Oe=="object"&&Oe!==null&&Oe.type===b&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case _:e:{for(var Ht=Oe.key;we!==null;){if(we.key===Ht){if(Ht=Oe.type,Ht===b){if(we.tag===7){u(Ee,we.sibling),tt=y(we,Oe.props.children),tt.return=Ee,Ee=tt;break e}}else if(we.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===O&&ys(Ht)===we.type){u(Ee,we.sibling),tt=y(we,Oe.props),bl(tt,Oe),tt.return=Ee,Ee=tt;break e}u(Ee,we);break}else s(Ee,we);we=we.sibling}Oe.type===b?(tt=Io(Oe.props.children,Ee.mode,tt,Oe.key),tt.return=Ee,Ee=tt):(tt=Eu(Oe.type,Oe.key,Oe.props,null,Ee.mode,tt),bl(tt,Oe),tt.return=Ee,Ee=tt)}return F(Ee);case v:e:{for(Ht=Oe.key;we!==null;){if(we.key===Ht)if(we.tag===4&&we.stateNode.containerInfo===Oe.containerInfo&&we.stateNode.implementation===Oe.implementation){u(Ee,we.sibling),tt=y(we,Oe.children||[]),tt.return=Ee,Ee=tt;break e}else{u(Ee,we);break}else s(Ee,we);we=we.sibling}tt=$u(Oe,Ee.mode,tt),tt.return=Ee,Ee=tt}return F(Ee);case O:return Oe=ys(Oe),ur(Ee,we,Oe,tt)}if(oe(Oe))return Dt(Ee,we,Oe,tt);if(Y(Oe)){if(Ht=Y(Oe),typeof Ht!="function")throw Error(i(150));return Oe=Ht.call(Oe),Jt(Ee,we,Oe,tt)}if(typeof Oe.then=="function")return ur(Ee,we,Lu(Oe),tt);if(Oe.$$typeof===A)return ur(Ee,we,dc(Ee,Oe),tt);Ru(Ee,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,we!==null&&we.tag===6?(u(Ee,we.sibling),tt=y(we,Oe),tt.return=Ee,Ee=tt):(u(Ee,we),tt=uf(Oe,Ee.mode,tt),tt.return=Ee,Ee=tt),F(Ee)):u(Ee,we)}return function(Ee,we,Oe,tt){try{gc=0;var Ht=ur(Ee,we,Oe,tt);return yl=null,Ht}catch(Ut){if(Ut===vl||Ut===zu)throw Ut;var Vn=Oi(29,Ut,null,Ee.mode);return Vn.lanes=tt,Vn.return=Ee,Vn}}}var ws=wm(!0),xm=wm(!1),to=!1;function bf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function no(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Lo(a,s,u){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(On&2)!==0){var y=g.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),g.pending=s,s=Su(a),lf(a,null,u),s}return cc(a,g,s,u),Su(a)}function _c(a,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var g=s.lanes;g&=a.pendingLanes,u|=g,s.lanes=u,L(a,u)}}function Fu(a,s){var u=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var F={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?y=x=F:x=x.next=F,u=u.next}while(u!==null);x===null?y=x=s:x=x.next=s}else y=x=s;u={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:g.shared,callbacks:g.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=s:a.next=s,u.lastBaseUpdate=s}var xf=!1;function vc(){if(xf){var a=_l;if(a!==null)throw a}}function wl(a,s,u,g){xf=!1;var y=a.updateQueue;to=!1;var x=y.firstBaseUpdate,F=y.lastBaseUpdate,ee=y.shared.pending;if(ee!==null){y.shared.pending=null;var _e=ee,De=_e.next;_e.next=null,F===null?x=De:F.next=De,F=_e;var Je=a.alternate;Je!==null&&(Je=Je.updateQueue,ee=Je.lastBaseUpdate,ee!==F&&(ee===null?Je.firstBaseUpdate=De:ee.next=De,Je.lastBaseUpdate=_e))}if(x!==null){var it=y.baseState;F=0,Je=De=_e=null,ee=x;do{var Ne=ee.lane&-536870913,He=Ne!==ee.lane;if(He?(wn&Ne)===Ne:(g&Ne)===Ne){Ne!==0&&Ne===gl&&(xf=!0),Je!==null&&(Je=Je.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Dt=a,Jt=ee;Ne=s;var ur=u;switch(Jt.tag){case 1:if(Dt=Jt.payload,typeof Dt=="function"){it=Dt.call(ur,it,Ne);break e}it=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Jt.payload,Ne=typeof Dt=="function"?Dt.call(ur,it,Ne):Dt,Ne==null)break e;it=h({},it,Ne);break e;case 2:to=!0}}Ne=ee.callback,Ne!==null&&(a.flags|=64,He&&(a.flags|=8192),He=y.callbacks,He===null?y.callbacks=[Ne]:He.push(Ne))}else He={lane:Ne,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Je===null?(De=Je=He,_e=it):Je=Je.next=He,F|=Ne;if(ee=ee.next,ee===null){if(ee=y.shared.pending,ee===null)break;He=ee,ee=He.next,He.next=null,y.lastBaseUpdate=He,y.shared.pending=null}}while(!0);Je===null&&(_e=it),y.baseState=_e,y.firstBaseUpdate=De,y.lastBaseUpdate=Je,x===null&&(y.shared.lanes=0),ka|=F,a.lanes=F,a.memoizedState=it}}function Mm(a,s){if(typeof a!="function")throw Error(i(191,a));a.call(s)}function Tm(a,s){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)Mm(u[a],s)}var xs=G(null),Nu=G(0);function Sm(a,s){a=Ca,V(Nu,a),V(xs,s),Ca=a|s.baseLanes}function yc(){V(Nu,Ca),V(xs,xs.current)}function Mf(){Ca=Nu.current,H(xs),H(Nu)}var zi=G(null),Li=null;function ro(a){var s=a.alternate;V(pr,pr.current&1),V(zi,a),Li===null&&(s===null||xs.current!==null||s.memoizedState!==null)&&(Li=a)}function Tf(a){V(pr,pr.current),V(zi,a),Li===null&&(Li=a)}function Sf(a){a.tag===22?(V(pr,pr.current),V(zi,a),Li===null&&(Li=a)):Ro()}function Ro(){V(pr,pr.current),V(zi,zi.current)}function Ri(a){H(zi),Li===a&&(Li=null),H(pr)}var pr=G(0);function bc(a){for(var s=a;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Is(u)||Os(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var io=0,un=null,Kn=null,zr=null,ju=!1,xl=!1,Ms=!1,wc=0,xc=0,Ml=null,Em=0;function Cr(){throw Error(i(321))}function Ef(a,s){if(s===null)return!1;for(var u=0;u<s.length&&u<a.length;u++)if(!ui(a[u],s[u]))return!1;return!0}function $f(a,s,u,g,y,x){return io=x,un=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=a===null||a.memoizedState===null?ap:Wf,Ms=!1,x=u(g,y),Ms=!1,xl&&(x=$m(s,u,g,y)),Pf(a),x}function Pf(a){W.H=El;var s=Kn!==null&&Kn.next!==null;if(io=0,zr=Kn=un=null,ju=!1,xc=0,Ml=null,s)throw Error(i(300));a===null||Br||(a=a.dependencies,a!==null&&Iu(a)&&(Br=!0))}function $m(a,s,u,g){un=a;var y=0;do{if(xl&&(Ml=null),xc=0,xl=!1,25<=y)throw Error(i(301));if(y+=1,zr=Kn=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}W.H=Hf,x=s(u,g)}while(xl);return x}function K_(){var a=W.H,s=a.useState()[0];return s=typeof s.then=="function"?Ts(s):s,a=a.useState()[0],(Kn!==null?Kn.memoizedState:null)!==a&&(un.flags|=1024),s}function Bu(){var a=wc!==0;return wc=0,a}function Cf(a,s,u){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~u}function kf(a){if(ju){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}ju=!1}io=0,zr=Kn=un=null,xl=!1,xc=wc=0,Ml=null}function di(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?un.memoizedState=zr=a:zr=zr.next=a,zr}function Lr(){if(Kn===null){var a=un.alternate;a=a!==null?a.memoizedState:null}else a=Kn.next;var s=zr===null?un.memoizedState:zr.next;if(s!==null)zr=s,Kn=a;else{if(a===null)throw un.alternate===null?Error(i(467)):Error(i(310));Kn=a,a={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},zr===null?un.memoizedState=zr=a:zr=zr.next=a}return zr}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ts(a){var s=xc;return xc+=1,Ml===null&&(Ml=[]),a=ym(Ml,a,s),s=un,(zr===null?s.memoizedState:zr.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?ap:Wf),a}function Vu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ts(a);if(a.$$typeof===A)return si(a)}throw Error(i(438,String(a)))}function Af(a){var s=null,u=un.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var g=un.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Uu(),un.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(a),g=0;g<a;g++)u[g]=j;return s.index++,u}function ao(a,s){return typeof s=="function"?s(a):s}function Mc(a){var s=Lr();return If(s,Kn,a)}function If(a,s,u){var g=a.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var y=a.baseQueue,x=g.pending;if(x!==null){if(y!==null){var F=y.next;y.next=x.next,x.next=F}s.baseQueue=y=x,g.pending=null}if(x=a.baseState,y===null)a.memoizedState=x;else{s=y.next;var ee=F=null,_e=null,De=s,Je=!1;do{var it=De.lane&-536870913;if(it!==De.lane?(wn&it)===it:(io&it)===it){var Ne=De.revertLane;if(Ne===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),it===gl&&(Je=!0);else if((io&Ne)===Ne){De=De.next,Ne===gl&&(Je=!0);continue}else it={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},_e===null?(ee=_e=it,F=x):_e=_e.next=it,un.lanes|=Ne,ka|=Ne;it=De.action,Ms&&u(x,it),x=De.hasEagerState?De.eagerState:u(x,it)}else Ne={lane:it,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},_e===null?(ee=_e=Ne,F=x):_e=_e.next=Ne,un.lanes|=it,ka|=it;De=De.next}while(De!==null&&De!==s);if(_e===null?F=x:_e.next=ee,!ui(x,a.memoizedState)&&(Br=!0,Je&&(u=_l,u!==null)))throw u;a.memoizedState=x,a.baseState=F,a.baseQueue=_e,g.lastRenderedState=x}return y===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Of(a){var s=Lr(),u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=a;var g=u.dispatch,y=u.pending,x=s.memoizedState;if(y!==null){u.pending=null;var F=y=y.next;do x=a(x,F.action),F=F.next;while(F!==y);ui(x,s.memoizedState)||(Br=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),u.lastRenderedState=x}return[x,g]}function Df(a,s,u){var g=un,y=Lr(),x=Tn;if(x){if(u===void 0)throw Error(i(407));u=u()}else u=s();var F=!ui((Kn||y).memoizedState,u);if(F&&(y.memoizedState=u,Br=!0),y=y.queue,Ff(km.bind(null,g,y,a),[a]),y.getSnapshot!==s||F||zr!==null&&zr.memoizedState.tag&1){if(g.flags|=2048,Tl(9,{destroy:void 0},Cm.bind(null,g,y,u,s),null),Yn===null)throw Error(i(349));x||(io&127)!==0||Pm(g,s,u)}return u}function Pm(a,s,u){a.flags|=16384,a={getSnapshot:s,value:u},s=un.updateQueue,s===null?(s=Uu(),un.updateQueue=s,s.stores=[a]):(u=s.stores,u===null?s.stores=[a]:u.push(a))}function Cm(a,s,u,g){s.value=u,s.getSnapshot=g,Am(s)&&Gu(a)}function km(a,s,u){return u(function(){Am(s)&&Gu(a)})}function Am(a){var s=a.getSnapshot;a=a.value;try{var u=s();return!ui(a,u)}catch{return!0}}function Gu(a){var s=ms(a,2);s!==null&&Pi(s,a,2)}function zf(a){var s=di();if(typeof a=="function"){var u=a;if(a=u(),Ms){Mr(!0);try{u()}finally{Mr(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:a},s}function Im(a,s,u,g){return a.baseState=u,If(a,Kn,typeof g=="function"?g:ao)}function q_(a,s,u,g,y){if(Sl(a))throw Error(i(485));if(a=s.action,a!==null){var x={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){x.listeners.push(F)}};W.T!==null?u(!0):x.isTransition=!1,g(x),u=s.pending,u===null?(x.next=s.pending=x,Om(s,x)):(x.next=u.next,s.pending=u.next=x)}}function Om(a,s){var u=s.action,g=s.payload,y=a.state;if(s.isTransition){var x=W.T,F={};W.T=F;try{var ee=u(y,g),_e=W.S;_e!==null&&_e(F,ee),Dm(a,s,ee)}catch(De){Lf(a,s,De)}finally{x!==null&&F.types!==null&&(x.types=F.types),W.T=x}}else try{x=u(y,g),Dm(a,s,x)}catch(De){Lf(a,s,De)}}function Dm(a,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){zm(a,s,g)},function(g){return Lf(a,s,g)}):zm(a,s,u)}function zm(a,s,u){s.status="fulfilled",s.value=u,Lm(s),a.state=u,s=a.pending,s!==null&&(u=s.next,u===s?a.pending=null:(u=u.next,s.next=u,Om(a,u)))}function Lf(a,s,u){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=u,Lm(s),s=s.next;while(s!==g)}a.action=null}function Lm(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function Rm(a,s){return s}function Rf(a,s){if(Tn){var u=Yn.formState;if(u!==null){e:{var g=un;if(Tn){if(rr){t:{for(var y=rr,x=Di;y.nodeType!==8;){if(!x){y=null;break t}if(y=bi(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){rr=bi(y.nextSibling),g=y.data==="F!";break e}}Do(g)}g=!1}g&&(s=u[0])}}return u=di(),u.memoizedState=u.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rm,lastRenderedState:s},u.queue=g,u=np.bind(null,un,g),g.dispatch=u,g=zf(!1),x=Gf.bind(null,un,!1,g.queue),g=di(),y={state:s,dispatch:null,action:a,pending:null},g.queue=y,u=q_.bind(null,un,y,x,u),y.dispatch=u,g.memoizedState=a,[s,u,!1]}function Fm(a){var s=Lr();return Nm(s,Kn,a)}function Nm(a,s,u){if(s=If(a,s,Rm)[0],a=Mc(ao)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=Ts(s)}catch(F){throw F===vl?zu:F}else g=s;s=Lr();var y=s.queue,x=y.dispatch;return u!==s.memoizedState&&(un.flags|=2048,Tl(9,{destroy:void 0},jm.bind(null,y,u),null)),[g,x,a]}function jm(a,s){a.action=s}function Bm(a){var s=Lr(),u=Kn;if(u!==null)return Nm(s,u,a);Lr(),s=s.memoizedState,u=Lr();var g=u.queue.dispatch;return u.memoizedState=a,[s,g,!1]}function Tl(a,s,u,g){return a={tag:a,create:u,deps:g,inst:s,next:null},s=un.updateQueue,s===null&&(s=Uu(),un.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=a.next=a:(g=u.next,u.next=a,a.next=g,s.lastEffect=a),a}function Um(){return Lr().memoizedState}function Wu(a,s,u,g){var y=di();un.flags|=a,y.memoizedState=Tl(1|s,{destroy:void 0},u,g===void 0?null:g)}function Tc(a,s,u,g){var y=Lr();g=g===void 0?null:g;var x=y.memoizedState.inst;Kn!==null&&g!==null&&Ef(g,Kn.memoizedState.deps)?y.memoizedState=Tl(s,x,u,g):(un.flags|=a,y.memoizedState=Tl(1|s,x,u,g))}function Vm(a,s){Wu(8390656,8,a,s)}function Ff(a,s){Tc(2048,8,a,s)}function Gm(a){un.flags|=4;var s=un.updateQueue;if(s===null)s=Uu(),un.updateQueue=s,s.events=[a];else{var u=s.events;u===null?s.events=[a]:u.push(a)}}function Wm(a){var s=Lr().memoizedState;return Gm({ref:s,nextImpl:a}),function(){if((On&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Hm(a,s){return Tc(4,2,a,s)}function Nf(a,s){return Tc(4,4,a,s)}function Km(a,s){if(typeof s=="function"){a=a();var u=s(a);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function qm(a,s,u){u=u!=null?u.concat([a]):null,Tc(4,4,Km.bind(null,s,a),u)}function Hu(){}function Zm(a,s){var u=Lr();s=s===void 0?null:s;var g=u.memoizedState;return s!==null&&Ef(s,g[1])?g[0]:(u.memoizedState=[a,s],a)}function Qm(a,s){var u=Lr();s=s===void 0?null:s;var g=u.memoizedState;if(s!==null&&Ef(s,g[1]))return g[0];if(g=a(),Ms){Mr(!0);try{a()}finally{Mr(!1)}}return u.memoizedState=[g,s],g}function jf(a,s,u){return u===void 0||(io&1073741824)!==0&&(wn&261930)===0?a.memoizedState=s:(a.memoizedState=u,a=Bp(),un.lanes|=a,ka|=a,u)}function Xm(a,s,u,g){return ui(u,s)?u:xs.current!==null?(a=jf(a,u,g),ui(a,s)||(Br=!0),a):(io&42)===0||(io&1073741824)!==0&&(wn&261930)===0?(Br=!0,a.memoizedState=u):(a=Bp(),un.lanes|=a,ka|=a,s)}function Ym(a,s,u,g,y){var x=ne.p;ne.p=x!==0&&8>x?x:8;var F=W.T,ee={};W.T=ee,Gf(a,!1,s,u);try{var _e=y(),De=W.S;if(De!==null&&De(ee,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Je=H_(_e,g);Sc(a,s,Je,ji(a))}else Sc(a,s,g,ji(a))}catch(it){Sc(a,s,{then:function(){},status:"rejected",reason:it},ji())}finally{ne.p=x,F!==null&&ee.types!==null&&(F.types=ee.types),W.T=F}}function Z_(){}function Bf(a,s,u,g){if(a.tag!==5)throw Error(i(476));var y=Jm(a).queue;Ym(a,y,s,ae,u===null?Z_:function(){return Uf(a),u(g)})}function Jm(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:ae},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:u},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function Uf(a){var s=Jm(a);s.next===null&&(s=a.alternate.memoizedState),Sc(a,s.next.queue,{},ji())}function Vf(){return si(pg)}function ep(){return Lr().memoizedState}function tp(){return Lr().memoizedState}function Q_(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var u=ji();a=no(u);var g=Lo(s,a,u);g!==null&&(Pi(g,s,u),_c(g,s,u)),s={cache:Ou()},a.payload=s;return}s=s.return}}function X_(a,s,u){var g=ji();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sl(a)?rp(s,u):(u=sf(a,s,u,g),u!==null&&(Pi(u,a,g),ip(u,s,g)))}function np(a,s,u){var g=ji();Sc(a,s,u,g)}function Sc(a,s,u,g){var y={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Sl(a))rp(s,y);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var F=s.lastRenderedState,ee=x(F,u);if(y.hasEagerState=!0,y.eagerState=ee,ui(ee,F))return cc(a,s,y,0),Yn===null&&Tu(),!1}catch{}if(u=sf(a,s,y,g),u!==null)return Pi(u,a,g),ip(u,s,g),!0}return!1}function Gf(a,s,u,g){if(g={lane:2,revertLane:ig(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Sl(a)){if(s)throw Error(i(479))}else s=sf(a,u,g,2),s!==null&&Pi(s,a,2)}function Sl(a){var s=a.alternate;return a===un||s!==null&&s===un}function rp(a,s){xl=ju=!0;var u=a.pending;u===null?s.next=s:(s.next=u.next,u.next=s),a.pending=s}function ip(a,s,u){if((u&4194048)!==0){var g=s.lanes;g&=a.pendingLanes,u|=g,s.lanes=u,L(a,u)}}var El={readContext:si,use:Vu,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useLayoutEffect:Cr,useInsertionEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useSyncExternalStore:Cr,useId:Cr,useHostTransitionStatus:Cr,useFormState:Cr,useActionState:Cr,useOptimistic:Cr,useMemoCache:Cr,useCacheRefresh:Cr};El.useEffectEvent=Cr;var ap={readContext:si,use:Vu,useCallback:function(a,s){return di().memoizedState=[a,s===void 0?null:s],a},useContext:si,useEffect:Vm,useImperativeHandle:function(a,s,u){u=u!=null?u.concat([a]):null,Wu(4194308,4,Km.bind(null,s,a),u)},useLayoutEffect:function(a,s){return Wu(4194308,4,a,s)},useInsertionEffect:function(a,s){Wu(4,2,a,s)},useMemo:function(a,s){var u=di();s=s===void 0?null:s;var g=a();if(Ms){Mr(!0);try{a()}finally{Mr(!1)}}return u.memoizedState=[g,s],g},useReducer:function(a,s,u){var g=di();if(u!==void 0){var y=u(s);if(Ms){Mr(!0);try{u(s)}finally{Mr(!1)}}}else y=s;return g.memoizedState=g.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},g.queue=a,a=a.dispatch=X_.bind(null,un,a),[g.memoizedState,a]},useRef:function(a){var s=di();return a={current:a},s.memoizedState=a},useState:function(a){a=zf(a);var s=a.queue,u=np.bind(null,un,s);return s.dispatch=u,[a.memoizedState,u]},useDebugValue:Hu,useDeferredValue:function(a,s){var u=di();return jf(u,a,s)},useTransition:function(){var a=zf(!1);return a=Ym.bind(null,un,a.queue,!0,!1),di().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,u){var g=un,y=di();if(Tn){if(u===void 0)throw Error(i(407));u=u()}else{if(u=s(),Yn===null)throw Error(i(349));(wn&127)!==0||Pm(g,s,u)}y.memoizedState=u;var x={value:u,getSnapshot:s};return y.queue=x,Vm(km.bind(null,g,x,a),[a]),g.flags|=2048,Tl(9,{destroy:void 0},Cm.bind(null,g,x,u,s),null),u},useId:function(){var a=di(),s=Yn.identifierPrefix;if(Tn){var u=Ta,g=Ma;u=(g&~(1<<32-an(g)-1)).toString(32)+u,s="_"+s+"R_"+u,u=wc++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=Em++,s="_"+s+"r_"+u.toString(32)+"_";return a.memoizedState=s},useHostTransitionStatus:Vf,useFormState:Rf,useActionState:Rf,useOptimistic:function(a){var s=di();s.memoizedState=s.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Gf.bind(null,un,!0,u),u.dispatch=s,[a,s]},useMemoCache:Af,useCacheRefresh:function(){return di().memoizedState=Q_.bind(null,un)},useEffectEvent:function(a){var s=di(),u={impl:a};return s.memoizedState=u,function(){if((On&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Wf={readContext:si,use:Vu,useCallback:Zm,useContext:si,useEffect:Ff,useImperativeHandle:qm,useInsertionEffect:Hm,useLayoutEffect:Nf,useMemo:Qm,useReducer:Mc,useRef:Um,useState:function(){return Mc(ao)},useDebugValue:Hu,useDeferredValue:function(a,s){var u=Lr();return Xm(u,Kn.memoizedState,a,s)},useTransition:function(){var a=Mc(ao)[0],s=Lr().memoizedState;return[typeof a=="boolean"?a:Ts(a),s]},useSyncExternalStore:Df,useId:ep,useHostTransitionStatus:Vf,useFormState:Fm,useActionState:Fm,useOptimistic:function(a,s){var u=Lr();return Im(u,Kn,a,s)},useMemoCache:Af,useCacheRefresh:tp};Wf.useEffectEvent=Wm;var Hf={readContext:si,use:Vu,useCallback:Zm,useContext:si,useEffect:Ff,useImperativeHandle:qm,useInsertionEffect:Hm,useLayoutEffect:Nf,useMemo:Qm,useReducer:Of,useRef:Um,useState:function(){return Of(ao)},useDebugValue:Hu,useDeferredValue:function(a,s){var u=Lr();return Kn===null?jf(u,a,s):Xm(u,Kn.memoizedState,a,s)},useTransition:function(){var a=Of(ao)[0],s=Lr().memoizedState;return[typeof a=="boolean"?a:Ts(a),s]},useSyncExternalStore:Df,useId:ep,useHostTransitionStatus:Vf,useFormState:Bm,useActionState:Bm,useOptimistic:function(a,s){var u=Lr();return Kn!==null?Im(u,Kn,a,s):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Af,useCacheRefresh:tp};Hf.useEffectEvent=Wm;function Kf(a,s,u,g){s=a.memoizedState,u=u(g,s),u=u==null?s:h({},s,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var qf={enqueueSetState:function(a,s,u){a=a._reactInternals;var g=ji(),y=no(g);y.payload=s,u!=null&&(y.callback=u),s=Lo(a,y,g),s!==null&&(Pi(s,a,g),_c(s,a,g))},enqueueReplaceState:function(a,s,u){a=a._reactInternals;var g=ji(),y=no(g);y.tag=1,y.payload=s,u!=null&&(y.callback=u),s=Lo(a,y,g),s!==null&&(Pi(s,a,g),_c(s,a,g))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var u=ji(),g=no(u);g.tag=2,s!=null&&(g.callback=s),s=Lo(a,g,u),s!==null&&(Pi(s,a,u),_c(s,a,u))}};function Fo(a,s,u,g,y,x,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,x,F):s.prototype&&s.prototype.isPureReactComponent?!Za(u,g)||!Za(y,x):!0}function op(a,s,u,g){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,g),s.state!==a&&qf.enqueueReplaceState(s,s.state,null)}function Ss(a,s){var u=s;if("ref"in s){u={};for(var g in s)g!=="ref"&&(u[g]=s[g])}if(a=a.defaultProps){u===s&&(u=h({},u));for(var y in a)u[y]===void 0&&(u[y]=a[y])}return u}function sp(a){sa(a)}function lp(a){console.error(a)}function cp(a){sa(a)}function Ku(a,s){try{var u=a.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Zf(a,s,u){try{var g=a.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Qf(a,s,u){return u=no(u),u.tag=3,u.payload={element:null},u.callback=function(){Ku(a,s)},u}function up(a){return a=no(a),a.tag=3,a}function dp(a,s,u,g){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var x=g.value;a.payload=function(){return y(x)},a.callback=function(){Zf(s,u,g)}}var F=u.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(a.callback=function(){Zf(s,u,g),typeof y!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var ee=g.stack;this.componentDidCatch(g.value,{componentStack:ee!==null?ee:""})})}function Y_(a,s,u,g,y){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=u.alternate,s!==null&&pl(s,u,y,!0),u=zi.current,u!==null){switch(u.tag){case 31:case 13:return Li===null?sd():u.alternate===null&&kr===0&&(kr=3),u.flags&=-257,u.flags|=65536,u.lanes=y,g===pc?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([g]):s.add(g),yh(a,g,y)),!1;case 22:return u.flags|=65536,g===pc?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([g]):u.add(g)),yh(a,g,y)),!1}throw Error(i(435,u.tag))}return yh(a,g,y),sd(),!1}if(Tn)return s=zi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,g!==ff&&(a=Error(i(422),{cause:g}),uc(Xi(a,u)))):(g!==ff&&(s=Error(i(423),{cause:g}),uc(Xi(s,u))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,g=Xi(g,u),y=Qf(a.stateNode,g,y),Fu(a,y),kr!==4&&(kr=2)),!1;var x=Error(i(520),{cause:g});if(x=Xi(x,u),Rc===null?Rc=[x]:Rc.push(x),kr!==4&&(kr=2),s===null)return!0;g=Xi(g,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,a=y&-y,u.lanes|=a,a=Qf(u.stateNode,g,a),Fu(u,a),!1;case 1:if(s=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Aa===null||!Aa.has(x))))return u.flags|=65536,y&=-y,u.lanes|=y,y=up(y),dp(y,a,u,g),Fu(u,y),!1}u=u.return}while(u!==null);return!1}var Ec=Error(i(461)),Br=!1;function li(a,s,u,g){s.child=a===null?xm(s,null,u,g):ws(s,a.child,u,g)}function fp(a,s,u,g,y){u=u.render;var x=s.ref;if("ref"in g){var F={};for(var ee in g)ee!=="ref"&&(F[ee]=g[ee])}else F=g;return _s(s),g=$f(a,s,u,F,x,y),ee=Bu(),a!==null&&!Br?(Cf(a,s,y),oo(a,s,y)):(Tn&&ee&&df(s),s.flags|=1,li(a,s,g,y),s.child)}function $c(a,s,u,g,y){if(a===null){var x=u.type;return typeof x=="function"&&!cf(x)&&x.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=x,hp(a,s,x,g,y)):(a=Eu(u.type,null,g,s,s.mode,y),a.ref=s.ref,a.return=s,s.child=a)}if(x=a.child,!th(a,y)){var F=x.memoizedProps;if(u=u.compare,u=u!==null?u:Za,u(F,g)&&a.ref===s.ref)return oo(a,s,y)}return s.flags|=1,a=xa(x,g),a.ref=s.ref,a.return=s,s.child=a}function hp(a,s,u,g,y){if(a!==null){var x=a.memoizedProps;if(Za(x,g)&&a.ref===s.ref)if(Br=!1,s.pendingProps=g=x,th(a,y))(a.flags&131072)!==0&&(Br=!0);else return s.lanes=a.lanes,oo(a,s,y)}return _p(a,s,u,g,y)}function mp(a,s,u,g){var y=g.children,x=a!==null?a.memoizedState:null;if(a===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,a!==null){for(g=s.child=a.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;g=y&~x}else g=0,s.child=null;return pp(a,s,x,u,g)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&mc(s,x!==null?x.cachePool:null),x!==null?Sm(s,x):yc(),Sf(s);else return g=s.lanes=536870912,pp(a,s,x!==null?x.baseLanes|u:u,u,g)}else x!==null?(mc(s,x.cachePool),Sm(s,x),Ro(),s.memoizedState=null):(a!==null&&mc(s,null),yc(),Ro());return li(a,s,y,u),s.child}function Pc(a,s){return a!==null&&a.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function pp(a,s,u,g,y){var x=_f();return x=x===null?null:{parent:jr._currentValue,pool:x},s.memoizedState={baseLanes:u,cachePool:x},a!==null&&mc(s,null),yc(),Sf(s),a!==null&&pl(a,s,g,!0),s.childLanes=y,null}function $l(a,s){return s=Zu({mode:s.mode,children:s.children},a.mode),s.ref=a.ref,a.child=s,s.return=a,s}function gp(a,s,u){return ws(s,a.child,null,u),a=$l(s,s.pendingProps),a.flags|=2,Ri(s),s.memoizedState=null,a}function J_(a,s,u){var g=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,a===null){if(Tn){if(g.mode==="hidden")return a=$l(s,g),s.lanes=536870912,Pc(null,a);if(Tf(s),(a=rr)?(a=ua(a,Di),a=a!==null&&a.data==="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Xa!==null?{id:Ma,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},u=lm(a),u.return=s,s.child=u,oi=s,rr=null)):a=null,a===null)throw Do(s);return s.lanes=536870912,null}return $l(s,g)}var x=a.memoizedState;if(x!==null){var F=x.dehydrated;if(Tf(s),y)if(s.flags&256)s.flags&=-257,s=gp(a,s,u);else if(s.memoizedState!==null)s.child=a.child,s.flags|=128,s=null;else throw Error(i(558));else if(Br||pl(a,s,u,!1),y=(u&a.childLanes)!==0,Br||y){if(g=Yn,g!==null&&(F=de(g,u),F!==0&&F!==x.retryLane))throw x.retryLane=F,ms(a,F),Pi(g,a,F),Ec;sd(),s=gp(a,s,u)}else a=x.treeContext,rr=bi(F.nextSibling),oi=s,Tn=!0,Oo=null,Di=!1,a!==null&&dm(s,a),s=$l(s,g),s.flags|=4096;return s}return a=xa(a.child,{mode:g.mode,children:g.children}),a.ref=s.ref,s.child=a,a.return=s,a}function qu(a,s){var u=s.ref;if(u===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(a===null||a.ref!==u)&&(s.flags|=4194816)}}function _p(a,s,u,g,y){return _s(s),u=$f(a,s,u,g,void 0,y),g=Bu(),a!==null&&!Br?(Cf(a,s,y),oo(a,s,y)):(Tn&&g&&df(s),s.flags|=1,li(a,s,u,y),s.child)}function vp(a,s,u,g,y,x){return _s(s),s.updateQueue=null,u=$m(s,g,u,y),Pf(a),g=Bu(),a!==null&&!Br?(Cf(a,s,x),oo(a,s,x)):(Tn&&g&&df(s),s.flags|=1,li(a,s,u,x),s.child)}function yp(a,s,u,g,y){if(_s(s),s.stateNode===null){var x=dl,F=u.contextType;typeof F=="object"&&F!==null&&(x=si(F)),x=new u(g,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=qf,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=g,x.state=s.memoizedState,x.refs={},bf(s),F=u.contextType,x.context=typeof F=="object"&&F!==null?si(F):dl,x.state=s.memoizedState,F=u.getDerivedStateFromProps,typeof F=="function"&&(Kf(s,u,F,g),x.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(F=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),F!==x.state&&qf.enqueueReplaceState(x,x.state,null),wl(s,g,x,y),vc(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(a===null){x=s.stateNode;var ee=s.memoizedProps,_e=Ss(u,ee);x.props=_e;var De=x.context,Je=u.contextType;F=dl,typeof Je=="object"&&Je!==null&&(F=si(Je));var it=u.getDerivedStateFromProps;Je=typeof it=="function"||typeof x.getSnapshotBeforeUpdate=="function",ee=s.pendingProps!==ee,Je||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(ee||De!==F)&&op(s,x,g,F),to=!1;var Ne=s.memoizedState;x.state=Ne,wl(s,g,x,y),vc(),De=s.memoizedState,ee||Ne!==De||to?(typeof it=="function"&&(Kf(s,u,it,g),De=s.memoizedState),(_e=to||Fo(s,u,_e,g,Ne,De,F))?(Je||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=De),x.props=g,x.state=De,x.context=F,g=_e):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{x=s.stateNode,wf(a,s),F=s.memoizedProps,Je=Ss(u,F),x.props=Je,it=s.pendingProps,Ne=x.context,De=u.contextType,_e=dl,typeof De=="object"&&De!==null&&(_e=si(De)),ee=u.getDerivedStateFromProps,(De=typeof ee=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(F!==it||Ne!==_e)&&op(s,x,g,_e),to=!1,Ne=s.memoizedState,x.state=Ne,wl(s,g,x,y),vc();var He=s.memoizedState;F!==it||Ne!==He||to||a!==null&&a.dependencies!==null&&Iu(a.dependencies)?(typeof ee=="function"&&(Kf(s,u,ee,g),He=s.memoizedState),(Je=to||Fo(s,u,Je,g,Ne,He,_e)||a!==null&&a.dependencies!==null&&Iu(a.dependencies))?(De||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(g,He,_e),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(g,He,_e)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=He),x.props=g,x.state=He,x.context=_e,g=Je):(typeof x.componentDidUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&Ne===a.memoizedState||(s.flags|=1024),g=!1)}return x=g,qu(a,s),g=(s.flags&128)!==0,x||g?(x=s.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,a!==null&&g?(s.child=ws(s,a.child,null,y),s.child=ws(s,null,u,y)):li(a,s,u,y),s.memoizedState=x.state,a=s.child):a=oo(a,s,y),a}function bp(a,s,u,g){return zo(),s.flags|=256,li(a,s,u,g),s.child}var Es={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(a){return{baseLanes:a,cachePool:_m()}}function Yf(a,s,u){return a=a!==null?a.childLanes&~u:0,s&&(a|=Ni),a}function wp(a,s,u){var g=s.pendingProps,y=!1,x=(s.flags&128)!==0,F;if((F=x)||(F=a!==null&&a.memoizedState===null?!1:(pr.current&2)!==0),F&&(y=!0,s.flags&=-129),F=(s.flags&32)!==0,s.flags&=-33,a===null){if(Tn){if(y?ro(s):Ro(),(a=rr)?(a=ua(a,Di),a=a!==null&&a.data!=="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Xa!==null?{id:Ma,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},u=lm(a),u.return=s,s.child=u,oi=s,rr=null)):a=null,a===null)throw Do(s);return Os(a)?s.lanes=32:s.lanes=536870912,null}var ee=g.children;return g=g.fallback,y?(Ro(),y=s.mode,ee=Zu({mode:"hidden",children:ee},y),g=Io(g,y,u,null),ee.return=s,g.return=s,ee.sibling=g,s.child=ee,g=s.child,g.memoizedState=Xf(u),g.childLanes=Yf(a,F,u),s.memoizedState=Es,Pc(null,g)):(ro(s),Jf(s,ee))}var _e=a.memoizedState;if(_e!==null&&(ee=_e.dehydrated,ee!==null)){if(x)s.flags&256?(ro(s),s.flags&=-257,s=eh(a,s,u)):s.memoizedState!==null?(Ro(),s.child=a.child,s.flags|=128,s=null):(Ro(),ee=g.fallback,y=s.mode,g=Zu({mode:"visible",children:g.children},y),ee=Io(ee,y,u,null),ee.flags|=2,g.return=s,ee.return=s,g.sibling=ee,s.child=g,ws(s,a.child,null,u),g=s.child,g.memoizedState=Xf(u),g.childLanes=Yf(a,F,u),s.memoizedState=Es,s=Pc(null,g));else if(ro(s),Os(ee)){if(F=ee.nextSibling&&ee.nextSibling.dataset,F)var De=F.dgst;F=De,g=Error(i(419)),g.stack="",g.digest=F,uc({value:g,source:null,stack:null}),s=eh(a,s,u)}else if(Br||pl(a,s,u,!1),F=(u&a.childLanes)!==0,Br||F){if(F=Yn,F!==null&&(g=de(F,u),g!==0&&g!==_e.retryLane))throw _e.retryLane=g,ms(a,g),Pi(F,a,g),Ec;Is(ee)||sd(),s=eh(a,s,u)}else Is(ee)?(s.flags|=192,s.child=a.child,s=null):(a=_e.treeContext,rr=bi(ee.nextSibling),oi=s,Tn=!0,Oo=null,Di=!1,a!==null&&dm(s,a),s=Jf(s,g.children),s.flags|=4096);return s}return y?(Ro(),ee=g.fallback,y=s.mode,_e=a.child,De=_e.sibling,g=xa(_e,{mode:"hidden",children:g.children}),g.subtreeFlags=_e.subtreeFlags&65011712,De!==null?ee=xa(De,ee):(ee=Io(ee,y,u,null),ee.flags|=2),ee.return=s,g.return=s,g.sibling=ee,s.child=g,Pc(null,g),g=s.child,ee=a.child.memoizedState,ee===null?ee=Xf(u):(y=ee.cachePool,y!==null?(_e=jr._currentValue,y=y.parent!==_e?{parent:_e,pool:_e}:y):y=_m(),ee={baseLanes:ee.baseLanes|u,cachePool:y}),g.memoizedState=ee,g.childLanes=Yf(a,F,u),s.memoizedState=Es,Pc(a.child,g)):(ro(s),u=a.child,a=u.sibling,u=xa(u,{mode:"visible",children:g.children}),u.return=s,u.sibling=null,a!==null&&(F=s.deletions,F===null?(s.deletions=[a],s.flags|=16):F.push(a)),s.child=u,s.memoizedState=null,u)}function Jf(a,s){return s=Zu({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function Zu(a,s){return a=Oi(22,a,null,s),a.lanes=0,a}function eh(a,s,u){return ws(s,a.child,null,u),a=Jf(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function xp(a,s,u){a.lanes|=s;var g=a.alternate;g!==null&&(g.lanes|=s),pf(a.return,s,u)}function Cc(a,s,u,g,y,x){var F=a.memoizedState;F===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:y,treeForkCount:x}:(F.isBackwards=s,F.rendering=null,F.renderingStartTime=0,F.last=g,F.tail=u,F.tailMode=y,F.treeForkCount=x)}function ev(a,s,u){var g=s.pendingProps,y=g.revealOrder,x=g.tail;g=g.children;var F=pr.current,ee=(F&2)!==0;if(ee?(F=F&1|2,s.flags|=128):F&=1,V(pr,F),li(a,s,g,u),g=Tn?hl:0,!ee&&a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&xp(a,u,s);else if(a.tag===19)xp(a,u,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(u=s.child,y=null;u!==null;)a=u.alternate,a!==null&&bc(a)===null&&(y=u),u=u.sibling;u=y,u===null?(y=s.child,s.child=null):(y=u.sibling,u.sibling=null),Cc(s,!1,y,u,x,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=s.child,s.child=null;y!==null;){if(a=y.alternate,a!==null&&bc(a)===null){s.child=y;break}a=y.sibling,y.sibling=u,u=y,y=a}Cc(s,!0,u,null,x,g);break;case"together":Cc(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function oo(a,s,u){if(a!==null&&(s.dependencies=a.dependencies),ka|=s.lanes,(u&s.childLanes)===0)if(a!==null){if(pl(a,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(i(153));if(s.child!==null){for(a=s.child,u=xa(a,a.pendingProps),s.child=u,u.return=s;a.sibling!==null;)a=a.sibling,u=u.sibling=xa(a,a.pendingProps),u.return=s;u.sibling=null}return s.child}function th(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&Iu(a)))}function tv(a,s,u){switch(s.tag){case 3:Le(s,s.stateNode.containerInfo),Ja(s,jr,a.memoizedState.cache),zo();break;case 27:case 5:Be(s);break;case 4:Le(s,s.stateNode.containerInfo);break;case 10:Ja(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Tf(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(ro(s),s.flags|=128,null):(u&s.child.childLanes)!==0?wp(a,s,u):(ro(s),a=oo(a,s,u),a!==null?a.sibling:null);ro(s);break;case 19:var y=(a.flags&128)!==0;if(g=(u&s.childLanes)!==0,g||(pl(a,s,u,!1),g=(u&s.childLanes)!==0),y){if(g)return ev(a,s,u);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),V(pr,pr.current),g)break;return null;case 22:return s.lanes=0,mp(a,s,u,s.pendingProps);case 24:Ja(s,jr,a.memoizedState.cache)}return oo(a,s,u)}function Mp(a,s,u){if(a!==null)if(a.memoizedProps!==s.pendingProps)Br=!0;else{if(!th(a,u)&&(s.flags&128)===0)return Br=!1,tv(a,s,u);Br=(a.flags&131072)!==0}else Br=!1,Tn&&(s.flags&1048576)!==0&&um(s,hl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var g=s.pendingProps;if(a=ys(s.elementType),s.type=a,typeof a=="function")cf(a)?(g=Ss(a,g),s.tag=1,s=yp(null,s,a,g,u)):(s.tag=0,s=_p(null,s,a,g,u));else{if(a!=null){var y=a.$$typeof;if(y===$){s.tag=11,s=fp(null,s,a,g,u);break e}else if(y===S){s.tag=14,s=$c(null,s,a,g,u);break e}}throw s=se(a)||a,Error(i(306,s,""))}}return s;case 0:return _p(a,s,s.type,s.pendingProps,u);case 1:return g=s.type,y=Ss(g,s.pendingProps),yp(a,s,g,y,u);case 3:e:{if(Le(s,s.stateNode.containerInfo),a===null)throw Error(i(387));g=s.pendingProps;var x=s.memoizedState;y=x.element,wf(a,s),wl(s,g,null,u);var F=s.memoizedState;if(g=F.cache,Ja(s,jr,g),g!==x.cache&&Au(s,[jr],u,!0),vc(),g=F.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:F.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=bp(a,s,g,u);break e}else if(g!==y){y=Xi(Error(i(424)),s),uc(y),s=bp(a,s,g,u);break e}else for(a=s.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,rr=bi(a.firstChild),oi=s,Tn=!0,Oo=null,Di=!0,u=xm(s,null,g,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(zo(),g===y){s=oo(a,s,u);break e}li(a,s,g,u)}s=s.child}return s;case 26:return qu(a,s),a===null?(u=zs(s.type,null,s.pendingProps,null))?s.memoizedState=u:Tn||(u=s.type,a=s.pendingProps,g=Wt(ve.current).createElement(u),g[mt]=s,g[Et]=a,$e(g,u,a),er(g),s.stateNode=g):s.memoizedState=zs(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return Be(s),a===null&&Tn&&(g=s.stateNode=Vo(s.type,s.pendingProps,ve.current),oi=s,Di=!0,y=rr,Zn(s.type)?(cg=y,rr=bi(g.firstChild)):rr=y),li(a,s,s.pendingProps.children,u),qu(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Tn&&((y=g=rr)&&(g=Dl(g,s.type,s.pendingProps,Di),g!==null?(s.stateNode=g,oi=s,rr=bi(g.firstChild),Di=!1,y=!0):y=!1),y||Do(s)),Be(s),y=s.type,x=s.pendingProps,F=a!==null?a.memoizedProps:null,g=x.children,Mn(y,x)?g=null:F!==null&&Mn(y,F)&&(s.flags|=32),s.memoizedState!==null&&(y=$f(a,s,K_,null,null,u),pg._currentValue=y),qu(a,s),li(a,s,g,u),s.child;case 6:return a===null&&Tn&&((a=u=rr)&&(u=Ci(u,s.pendingProps,Di),u!==null?(s.stateNode=u,oi=s,rr=null,a=!0):a=!1),a||Do(s)),null;case 13:return wp(a,s,u);case 4:return Le(s,s.stateNode.containerInfo),g=s.pendingProps,a===null?s.child=ws(s,null,g,u):li(a,s,g,u),s.child;case 11:return fp(a,s,s.type,s.pendingProps,u);case 7:return li(a,s,s.pendingProps,u),s.child;case 8:return li(a,s,s.pendingProps.children,u),s.child;case 12:return li(a,s,s.pendingProps.children,u),s.child;case 10:return g=s.pendingProps,Ja(s,s.type,g.value),li(a,s,g.children,u),s.child;case 9:return y=s.type._context,g=s.pendingProps.children,_s(s),y=si(y),g=g(y),s.flags|=1,li(a,s,g,u),s.child;case 14:return $c(a,s,s.type,s.pendingProps,u);case 15:return hp(a,s,s.type,s.pendingProps,u);case 19:return ev(a,s,u);case 31:return J_(a,s,u);case 22:return mp(a,s,u,s.pendingProps);case 24:return _s(s),g=si(jr),a===null?(y=_f(),y===null&&(y=Yn,x=Ou(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=u),y=x),s.memoizedState={parent:g,cache:y},bf(s),Ja(s,jr,y)):((a.lanes&u)!==0&&(wf(a,s),wl(s,null,null,u),vc()),y=a.memoizedState,x=s.memoizedState,y.parent!==g?(y={parent:g,cache:g},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Ja(s,jr,g)):(g=x.cache,Ja(s,jr,g),g!==y.cache&&Au(s,[jr],u,!0))),li(a,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ea(a){a.flags|=4}function nh(a,s,u,g,y){if((s=(a.mode&32)!==0)&&(s=!1),s){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(Wp())a.flags|=8192;else throw bs=pc,vf}else a.flags&=-16777217}function Tp(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!vS(s))if(Wp())a.flags|=8192;else throw bs=pc,vf}function kc(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?ga():536870912,a.lanes|=s,Al|=s)}function Ac(a,s){if(!Tn)switch(a.tailMode){case"hidden":s=a.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function cr(a){var s=a.alternate!==null&&a.alternate.child===a.child,u=0,g=0;if(s)for(var y=a.child;y!==null;)u|=y.lanes|y.childLanes,g|=y.subtreeFlags&65011712,g|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)u|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=g,a.childLanes=u,s}function Sp(a,s,u){var g=s.pendingProps;switch(Cu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(s),null;case 1:return cr(s),null;case 3:return u=s.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),eo(jr),Xe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(ml(s)?Ea(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,mf())),cr(s),null;case 26:var y=s.type,x=s.memoizedState;return a===null?(Ea(s),x!==null?(cr(s),Tp(s,x)):(cr(s),nh(s,y,null,g,u))):x?x!==a.memoizedState?(Ea(s),cr(s),Tp(s,x)):(cr(s),s.flags&=-16777217):(a=a.memoizedProps,a!==g&&Ea(s),cr(s),nh(s,y,a,g,u)),null;case 27:if(ue(s),u=ve.current,y=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==g&&Ea(s);else{if(!g){if(s.stateNode===null)throw Error(i(166));return cr(s),null}a=U.current,ml(s)?hf(s):(a=Vo(y,g,u),s.stateNode=a,Ea(s))}return cr(s),null;case 5:if(ue(s),y=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==g&&Ea(s);else{if(!g){if(s.stateNode===null)throw Error(i(166));return cr(s),null}if(x=U.current,ml(s))hf(s);else{var F=Wt(ve.current);switch(x){case 1:x=F.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=F.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=F.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=F.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=F.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof g.is=="string"?F.createElement("select",{is:g.is}):F.createElement("select"),g.multiple?x.multiple=!0:g.size&&(x.size=g.size);break;default:x=typeof g.is=="string"?F.createElement(y,{is:g.is}):F.createElement(y)}}x[mt]=s,x[Et]=g;e:for(F=s.child;F!==null;){if(F.tag===5||F.tag===6)x.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===s)break e;for(;F.sibling===null;){if(F.return===null||F.return===s)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}s.stateNode=x;e:switch($e(x,y,g),y){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ea(s)}}return cr(s),nh(s,s.type,a===null?null:a.memoizedProps,s.pendingProps,u),null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==g&&Ea(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(i(166));if(a=ve.current,ml(s)){if(a=s.stateNode,u=s.memoizedProps,g=null,y=oi,y!==null)switch(y.tag){case 27:case 5:g=y.memoizedProps}a[mt]=s,a=!!(a.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||te(a.nodeValue,u)),a||Do(s,!0)}else a=Wt(a).createTextNode(g),a[mt]=s,s.stateNode=a}return cr(s),null;case 31:if(u=s.memoizedState,a===null||a.memoizedState!==null){if(g=ml(s),u!==null){if(a===null){if(!g)throw Error(i(318));if(a=s.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[mt]=s}else zo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;cr(s),a=!1}else u=mf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return s.flags&256?(Ri(s),s):(Ri(s),null);if((s.flags&128)!==0)throw Error(i(558))}return cr(s),null;case 13:if(g=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=ml(s),g!==null&&g.dehydrated!==null){if(a===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[mt]=s}else zo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;cr(s),y=!1}else y=mf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Ri(s),s):(Ri(s),null)}return Ri(s),(s.flags&128)!==0?(s.lanes=u,s):(u=g!==null,a=a!==null&&a.memoizedState!==null,u&&(g=s.child,y=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(y=g.alternate.memoizedState.cachePool.pool),x=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(x=g.memoizedState.cachePool.pool),x!==y&&(g.flags|=2048)),u!==a&&u&&(s.child.flags|=8192),kc(s,s.updateQueue),cr(s),null);case 4:return Xe(),a===null&&xh(s.stateNode.containerInfo),cr(s),null;case 10:return eo(s.type),cr(s),null;case 19:if(H(pr),g=s.memoizedState,g===null)return cr(s),null;if(y=(s.flags&128)!==0,x=g.rendering,x===null)if(y)Ac(g,!1);else{if(kr!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(x=bc(a),x!==null){for(s.flags|=128,Ac(g,!1),a=x.updateQueue,s.updateQueue=a,kc(s,a),s.subtreeFlags=0,a=u,u=s.child;u!==null;)sm(u,a),u=u.sibling;return V(pr,pr.current&1|2),Tn&&Sa(s,g.treeForkCount),s.child}a=a.sibling}g.tail!==null&&ot()>nd&&(s.flags|=128,y=!0,Ac(g,!1),s.lanes=4194304)}else{if(!y)if(a=bc(x),a!==null){if(s.flags|=128,y=!0,a=a.updateQueue,s.updateQueue=a,kc(s,a),Ac(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!Tn)return cr(s),null}else 2*ot()-g.renderingStartTime>nd&&u!==536870912&&(s.flags|=128,y=!0,Ac(g,!1),s.lanes=4194304);g.isBackwards?(x.sibling=s.child,s.child=x):(a=g.last,a!==null?a.sibling=x:s.child=x,g.last=x)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=ot(),a.sibling=null,u=pr.current,V(pr,y?u&1|2:u&1),Tn&&Sa(s,g.treeForkCount),a):(cr(s),null);case 22:case 23:return Ri(s),Mf(),g=s.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(u&536870912)!==0&&(s.flags&128)===0&&(cr(s),s.subtreeFlags&6&&(s.flags|=8192)):cr(s),u=s.updateQueue,u!==null&&kc(s,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==u&&(s.flags|=2048),a!==null&&H(vs),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),eo(jr),cr(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function nv(a,s){switch(Cu(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return eo(jr),Xe(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 31:if(s.memoizedState!==null){if(Ri(s),s.alternate===null)throw Error(i(340));zo()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 13:if(Ri(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(i(340));zo()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return H(pr),null;case 4:return Xe(),null;case 10:return eo(s.type),null;case 22:case 23:return Ri(s),Mf(),a!==null&&H(vs),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return eo(jr),null;case 25:return null;default:return null}}function Ep(a,s){switch(Cu(s),s.tag){case 3:eo(jr),Xe();break;case 26:case 27:case 5:ue(s);break;case 4:Xe();break;case 31:s.memoizedState!==null&&Ri(s);break;case 13:Ri(s);break;case 19:H(pr);break;case 10:eo(s.type);break;case 22:case 23:Ri(s),Mf(),a!==null&&H(vs);break;case 24:eo(jr)}}function Pl(a,s){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&a)===a){g=void 0;var x=u.create,F=u.inst;g=x(),F.destroy=g}u=u.next}while(u!==y)}}catch(ee){qn(s,s.return,ee)}}function No(a,s,u){try{var g=s.updateQueue,y=g!==null?g.lastEffect:null;if(y!==null){var x=y.next;g=x;do{if((g.tag&a)===a){var F=g.inst,ee=F.destroy;if(ee!==void 0){F.destroy=void 0,y=s;var _e=u,De=ee;try{De()}catch(Je){qn(y,_e,Je)}}}g=g.next}while(g!==x)}}catch(Je){qn(s,s.return,Je)}}function $p(a){var s=a.updateQueue;if(s!==null){var u=a.stateNode;try{Tm(s,u)}catch(g){qn(a,a.return,g)}}}function rh(a,s,u){u.props=Ss(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(g){qn(a,s,g)}}function Ic(a,s){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof u=="function"?a.refCleanup=u(g):u.current=g}}catch(y){qn(a,s,y)}}function $a(a,s){var u=a.ref,g=a.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(y){qn(a,s,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){qn(a,s,y)}else u.current=null}function ih(a){var s=a.type,u=a.memoizedProps,g=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(y){qn(a,a.return,y)}}function ah(a,s,u){try{var g=a.stateNode;Qe(g,a.type,u,s),g[Et]=s}catch(y){qn(a,a.return,y)}}function Pp(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Zn(a.type)||a.tag===4}function Qu(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Pp(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Zn(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function oh(a,s,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(a),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Vt));else if(g!==4&&(g===27&&Zn(a.type)&&(u=a.stateNode,s=null),a=a.child,a!==null))for(oh(a,s,u),a=a.sibling;a!==null;)oh(a,s,u),a=a.sibling}function Xu(a,s,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,s?u.insertBefore(a,s):u.appendChild(a);else if(g!==4&&(g===27&&Zn(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Xu(a,s,u),a=a.sibling;a!==null;)Xu(a,s,u),a=a.sibling}function Yu(a){var s=a.stateNode,u=a.memoizedProps;try{for(var g=a.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);$e(s,g,u),s[mt]=a,s[Et]=u}catch(x){qn(a,a.return,x)}}var so=!1,Ur=!1,sh=!1,Cp=typeof WeakSet=="function"?WeakSet:Set,Qr=null;function lh(a,s){if(a=a.containerInfo,$t=$v,a=sc(a),Ao(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var y=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var F=0,ee=-1,_e=-1,De=0,Je=0,it=a,Ne=null;t:for(;;){for(var He;it!==u||y!==0&&it.nodeType!==3||(ee=F+y),it!==x||g!==0&&it.nodeType!==3||(_e=F+g),it.nodeType===3&&(F+=it.nodeValue.length),(He=it.firstChild)!==null;)Ne=it,it=He;for(;;){if(it===a)break t;if(Ne===u&&++De===y&&(ee=F),Ne===x&&++Je===g&&(_e=F),(He=it.nextSibling)!==null)break;it=Ne,Ne=it.parentNode}it=He}u=ee===-1||_e===-1?null:{start:ee,end:_e}}else u=null}u=u||{start:0,end:0}}else u=null;for(Kt={focusedElem:a,selectionRange:u},$v=!1,Qr=s;Qr!==null;)if(s=Qr,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,Qr=a;else for(;Qr!==null;){switch(s=Qr,x=s.alternate,a=s.flags,s.tag){case 0:if((a&4)!==0&&(a=s.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)y=a[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,u=s,y=x.memoizedProps,x=x.memoizedState,g=u.stateNode;try{var Dt=Ss(u.type,y);a=g.getSnapshotBeforeUpdate(Dt,x),g.__reactInternalSnapshotBeforeUpdate=a}catch(Jt){qn(u,u.return,Jt)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,u=a.nodeType,u===9)Hr(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Hr(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=s.sibling,a!==null){a.return=s.return,Qr=a;break}Qr=s.return}}function rv(a,s,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:co(a,u),g&4&&Pl(5,u);break;case 1:if(co(a,u),g&4)if(a=u.stateNode,s===null)try{a.componentDidMount()}catch(F){qn(u,u.return,F)}else{var y=Ss(u.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(y,s,a.__reactInternalSnapshotBeforeUpdate)}catch(F){qn(u,u.return,F)}}g&64&&$p(u),g&512&&Ic(u,u.return);break;case 3:if(co(a,u),g&64&&(a=u.updateQueue,a!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{Tm(a,s)}catch(F){qn(u,u.return,F)}}break;case 27:s===null&&g&4&&Yu(u);case 26:case 5:co(a,u),s===null&&g&4&&ih(u),g&512&&Ic(u,u.return);break;case 12:co(a,u);break;case 31:co(a,u),g&4&&ch(a,u);break;case 13:co(a,u),g&4&&Ip(a,u),g&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=m0.bind(null,u),Mh(a,u))));break;case 22:if(g=u.memoizedState!==null||so,!g){s=s!==null&&s.memoizedState!==null||Ur,y=so;var x=Ur;so=g,(Ur=s)&&!x?la(a,u,(u.subtreeFlags&8772)!==0):co(a,u),so=y,Ur=x}break;case 30:break;default:co(a,u)}}function kp(a){var s=a.alternate;s!==null&&(a.alternate=null,kp(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&hr(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var gr=null,yi=!1;function lo(a,s,u){for(u=u.child;u!==null;)Ap(a,s,u),u=u.sibling}function Ap(a,s,u){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Qt,u)}catch{}switch(u.tag){case 26:Ur||$a(u,s),lo(a,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ur||$a(u,s);var g=gr,y=yi;Zn(u.type)&&(gr=u.stateNode,yi=!1),lo(a,s,u),Oa(u.stateNode),gr=g,yi=y;break;case 5:Ur||$a(u,s);case 6:if(g=gr,y=yi,gr=null,lo(a,s,u),gr=g,yi=y,gr!==null)if(yi)try{(gr.nodeType===9?gr.body:gr.nodeName==="HTML"?gr.ownerDocument.body:gr).removeChild(u.stateNode)}catch(x){qn(u,s,x)}else try{gr.removeChild(u.stateNode)}catch(x){qn(u,s,x)}break;case 18:gr!==null&&(yi?(a=gr,dn(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Eh(a)):dn(gr,u.stateNode));break;case 4:g=gr,y=yi,gr=u.stateNode.containerInfo,yi=!0,lo(a,s,u),gr=g,yi=y;break;case 0:case 11:case 14:case 15:No(2,u,s),Ur||No(4,u,s),lo(a,s,u);break;case 1:Ur||($a(u,s),g=u.stateNode,typeof g.componentWillUnmount=="function"&&rh(u,s,g)),lo(a,s,u);break;case 21:lo(a,s,u);break;case 22:Ur=(g=Ur)||u.memoizedState!==null,lo(a,s,u),Ur=g;break;default:lo(a,s,u)}}function ch(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Eh(a)}catch(u){qn(s,s.return,u)}}}function Ip(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Eh(a)}catch(u){qn(s,s.return,u)}}function iv(a){switch(a.tag){case 31:case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new Cp),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new Cp),s;default:throw Error(i(435,a.tag))}}function Oc(a,s){var u=iv(a);s.forEach(function(g){if(!u.has(g)){u.add(g);var y=p0.bind(null,a,g);g.then(y,y)}})}function Fi(a,s){var u=s.deletions;if(u!==null)for(var g=0;g<u.length;g++){var y=u[g],x=a,F=s,ee=F;e:for(;ee!==null;){switch(ee.tag){case 27:if(Zn(ee.type)){gr=ee.stateNode,yi=!1;break e}break;case 5:gr=ee.stateNode,yi=!1;break e;case 3:case 4:gr=ee.stateNode.containerInfo,yi=!0;break e}ee=ee.return}if(gr===null)throw Error(i(160));Ap(x,F,y),gr=null,yi=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)uh(s,a),s=s.sibling}var Pa=null;function uh(a,s){var u=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Fi(s,a),fi(a),g&4&&(No(3,a,a.return),Pl(3,a),No(5,a,a.return));break;case 1:Fi(s,a),fi(a),g&512&&(Ur||u===null||$a(u,u.return)),g&64&&so&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var y=Pa;if(Fi(s,a),fi(a),g&512&&(Ur||u===null||$a(u,u.return)),g&4){var x=u!==null?u.memoizedState:null;if(g=a.memoizedState,u===null)if(g===null)if(a.stateNode===null){e:{g=a.type,u=a.memoizedProps,y=y.ownerDocument||y;t:switch(g){case"title":x=y.getElementsByTagName("title")[0],(!x||x[fr]||x[mt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(g),y.head.insertBefore(x,y.querySelector("head > title"))),$e(x,g,u),x[mt]=a,er(x),g=x;break e;case"link":var F=gS("link","href",y).get(g+(u.href||""));if(F){for(var ee=0;ee<F.length;ee++)if(x=F[ee],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){F.splice(ee,1);break t}}x=y.createElement(g),$e(x,g,u),y.head.appendChild(x);break;case"meta":if(F=gS("meta","content",y).get(g+(u.content||""))){for(ee=0;ee<F.length;ee++)if(x=F[ee],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){F.splice(ee,1);break t}}x=y.createElement(g),$e(x,g,u),y.head.appendChild(x);break;default:throw Error(i(468,g))}x[mt]=a,er(x),g=x}a.stateNode=g}else _S(y,a.type,a.stateNode);else a.stateNode=pS(y,g,a.memoizedProps);else x!==g?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,g===null?_S(y,a.type,a.stateNode):pS(y,g,a.memoizedProps)):g===null&&a.stateNode!==null&&ah(a,a.memoizedProps,u.memoizedProps)}break;case 27:Fi(s,a),fi(a),g&512&&(Ur||u===null||$a(u,u.return)),u!==null&&g&4&&ah(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Fi(s,a),fi(a),g&512&&(Ur||u===null||$a(u,u.return)),a.flags&32){y=a.stateNode;try{me(y,"")}catch(Dt){qn(a,a.return,Dt)}}g&4&&a.stateNode!=null&&(y=a.memoizedProps,ah(a,y,u!==null?u.memoizedProps:y)),g&1024&&(sh=!0);break;case 6:if(Fi(s,a),fi(a),g&4){if(a.stateNode===null)throw Error(i(162));g=a.memoizedProps,u=a.stateNode;try{u.nodeValue=g}catch(Dt){qn(a,a.return,Dt)}}break;case 3:if(Mv=null,y=Pa,Pa=jc(s.containerInfo),Fi(s,a),Pa=y,fi(a),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Eh(s.containerInfo)}catch(Dt){qn(a,a.return,Dt)}sh&&(sh=!1,Op(a));break;case 4:g=Pa,Pa=jc(a.stateNode.containerInfo),Fi(s,a),fi(a),Pa=g;break;case 12:Fi(s,a),fi(a);break;case 31:Fi(s,a),fi(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Oc(a,g)));break;case 13:Fi(s,a),fi(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(td=ot()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Oc(a,g)));break;case 22:y=a.memoizedState!==null;var _e=u!==null&&u.memoizedState!==null,De=so,Je=Ur;if(so=De||y,Ur=Je||_e,Fi(s,a),Ur=Je,so=De,fi(a),g&8192)e:for(s=a.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(u===null||_e||so||Ur||$s(a)),u=null,s=a;;){if(s.tag===5||s.tag===26){if(u===null){_e=u=s;try{if(x=_e.stateNode,y)F=x.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{ee=_e.stateNode;var it=_e.memoizedProps.style,Ne=it!=null&&it.hasOwnProperty("display")?it.display:null;ee.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(Dt){qn(_e,_e.return,Dt)}}}else if(s.tag===6){if(u===null){_e=s;try{_e.stateNode.nodeValue=y?"":_e.memoizedProps}catch(Dt){qn(_e,_e.return,Dt)}}}else if(s.tag===18){if(u===null){_e=s;try{var He=_e.stateNode;y?vr(He,!0):vr(_e.stateNode,!1)}catch(Dt){qn(_e,_e.return,Dt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=a.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Oc(a,u))));break;case 19:Fi(s,a),fi(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Oc(a,g)));break;case 30:break;case 21:break;default:Fi(s,a),fi(a)}}function fi(a){var s=a.flags;if(s&2){try{for(var u,g=a.return;g!==null;){if(Pp(g)){u=g;break}g=g.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,x=Qu(a);Xu(a,x,y);break;case 5:var F=u.stateNode;u.flags&32&&(me(F,""),u.flags&=-33);var ee=Qu(a);Xu(a,ee,F);break;case 3:case 4:var _e=u.stateNode.containerInfo,De=Qu(a);oh(a,De,_e);break;default:throw Error(i(161))}}catch(Je){qn(a,a.return,Je)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function Op(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;Op(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function co(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)rv(a,s.alternate,s),s=s.sibling}function $s(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:No(4,s,s.return),$s(s);break;case 1:$a(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&rh(s,s.return,u),$s(s);break;case 27:Oa(s.stateNode);case 26:case 5:$a(s,s.return),$s(s);break;case 22:s.memoizedState===null&&$s(s);break;case 30:$s(s);break;default:$s(s)}a=a.sibling}}function la(a,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,y=a,x=s,F=x.flags;switch(x.tag){case 0:case 11:case 15:la(y,x,u),Pl(4,x);break;case 1:if(la(y,x,u),g=x,y=g.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(De){qn(g,g.return,De)}if(g=x,y=g.updateQueue,y!==null){var ee=g.stateNode;try{var _e=y.shared.hiddenCallbacks;if(_e!==null)for(y.shared.hiddenCallbacks=null,y=0;y<_e.length;y++)Mm(_e[y],ee)}catch(De){qn(g,g.return,De)}}u&&F&64&&$p(x),Ic(x,x.return);break;case 27:Yu(x);case 26:case 5:la(y,x,u),u&&g===null&&F&4&&ih(x),Ic(x,x.return);break;case 12:la(y,x,u);break;case 31:la(y,x,u),u&&F&4&&ch(y,x);break;case 13:la(y,x,u),u&&F&4&&Ip(y,x);break;case 22:x.memoizedState===null&&la(y,x,u),Ic(x,x.return);break;case 30:break;default:la(y,x,u)}s=s.sibling}}function dh(a,s){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&fc(u))}function fh(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&fc(a))}function ca(a,s,u,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ju(a,s,u,g),s=s.sibling}function Ju(a,s,u,g){var y=s.flags;switch(s.tag){case 0:case 11:case 15:ca(a,s,u,g),y&2048&&Pl(9,s);break;case 1:ca(a,s,u,g);break;case 3:ca(a,s,u,g),y&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&fc(a)));break;case 12:if(y&2048){ca(a,s,u,g),a=s.stateNode;try{var x=s.memoizedProps,F=x.id,ee=x.onPostCommit;typeof ee=="function"&&ee(F,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(_e){qn(s,s.return,_e)}}else ca(a,s,u,g);break;case 31:ca(a,s,u,g);break;case 13:ca(a,s,u,g);break;case 23:break;case 22:x=s.stateNode,F=s.alternate,s.memoizedState!==null?x._visibility&2?ca(a,s,u,g):Dc(a,s):x._visibility&2?ca(a,s,u,g):(x._visibility|=2,Cl(a,s,u,g,(s.subtreeFlags&10256)!==0||!1)),y&2048&&dh(F,s);break;case 24:ca(a,s,u,g),y&2048&&fh(s.alternate,s);break;default:ca(a,s,u,g)}}function Cl(a,s,u,g,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=a,F=s,ee=u,_e=g,De=F.flags;switch(F.tag){case 0:case 11:case 15:Cl(x,F,ee,_e,y),Pl(8,F);break;case 23:break;case 22:var Je=F.stateNode;F.memoizedState!==null?Je._visibility&2?Cl(x,F,ee,_e,y):Dc(x,F):(Je._visibility|=2,Cl(x,F,ee,_e,y)),y&&De&2048&&dh(F.alternate,F);break;case 24:Cl(x,F,ee,_e,y),y&&De&2048&&fh(F.alternate,F);break;default:Cl(x,F,ee,_e,y)}s=s.sibling}}function Dc(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=a,g=s,y=g.flags;switch(g.tag){case 22:Dc(u,g),y&2048&&dh(g.alternate,g);break;case 24:Dc(u,g),y&2048&&fh(g.alternate,g);break;default:Dc(u,g)}s=s.sibling}}var zc=8192;function jo(a,s,u){if(a.subtreeFlags&zc)for(a=a.child;a!==null;)Dp(a,s,u),a=a.sibling}function Dp(a,s,u){switch(a.tag){case 26:jo(a,s,u),a.flags&zc&&a.memoizedState!==null&&UN(u,Pa,a.memoizedState,a.memoizedProps);break;case 5:jo(a,s,u);break;case 3:case 4:var g=Pa;Pa=jc(a.stateNode.containerInfo),jo(a,s,u),Pa=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=zc,zc=16777216,jo(a,s,u),zc=g):jo(a,s,u));break;default:jo(a,s,u)}}function zp(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function Lc(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Qr=g,Rp(g,a)}zp(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Lp(a),a=a.sibling}function Lp(a){switch(a.tag){case 0:case 11:case 15:Lc(a),a.flags&2048&&No(9,a,a.return);break;case 3:Lc(a);break;case 12:Lc(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,ed(a)):Lc(a);break;default:Lc(a)}}function ed(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var g=s[u];Qr=g,Rp(g,a)}zp(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:No(8,s,s.return),ed(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,ed(s));break;default:ed(s)}a=a.sibling}}function Rp(a,s){for(;Qr!==null;){var u=Qr;switch(u.tag){case 0:case 11:case 15:No(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:fc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Qr=g;else e:for(u=a;Qr!==null;){g=Qr;var y=g.sibling,x=g.return;if(kp(g),g===u){Qr=null;break e}if(y!==null){y.return=x,Qr=y;break e}Qr=x}}}var av={getCacheForType:function(a){var s=si(jr),u=s.data.get(a);return u===void 0&&(u=a(),s.data.set(a,u)),u},cacheSignal:function(){return si(jr).controller.signal}},ov=typeof WeakMap=="function"?WeakMap:Map,On=0,Yn=null,gn=null,wn=0,Un=0,$i=null,Bo=!1,kl=!1,hh=!1,Ca=0,kr=0,ka=0,Ps=0,mh=0,Ni=0,Al=0,Rc=null,hi=null,ph=!1,td=0,Fp=0,nd=1/0,rd=null,Aa=null,Xr=0,Uo=null,Il=null,mn=0,Np=0,jp=null,sv=null,id=0,ad=null;function ji(){return(On&2)!==0&&wn!==0?wn&-wn:W.T!==null?ig():fe()}function Bp(){if(Ni===0)if((wn&536870912)===0||Tn){var a=Jn;Jn<<=1,(Jn&3932160)===0&&(Jn=262144),Ni=a}else Ni=536870912;return a=zi.current,a!==null&&(a.flags|=32),Ni}function Pi(a,s,u){(a===Yn&&(Un===2||Un===9)||a.cancelPendingCommit!==null)&&(ks(a,0),Cs(a,wn,Ni,!1)),ei(a,u),((On&2)===0||a!==Yn)&&(a===Yn&&((On&2)===0&&(Ps|=u),kr===4&&Cs(a,wn,Ni,!1)),uo(a))}function Up(a,s,u){if((On&6)!==0)throw Error(i(327));var g=!u&&(s&127)===0&&(s&a.expiredLanes)===0||Bt(a,s),y=g?cv(a,s):vh(a,s,!0),x=g;do{if(y===0){kl&&!g&&Cs(a,s,0,!1);break}else{if(u=a.current.alternate,x&&!Vp(u)){y=vh(a,s,!1),x=!1;continue}if(y===2){if(x=s,a.errorRecoveryDisabledLanes&x)var F=0;else F=a.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){s=F;e:{var ee=a;y=Rc;var _e=ee.current.memoizedState.isDehydrated;if(_e&&(ks(ee,F).flags|=256),F=vh(ee,F,!1),F!==2){if(hh&&!_e){ee.errorRecoveryDisabledLanes|=x,Ps|=x,y=4;break e}x=hi,hi=y,x!==null&&(hi===null?hi=x:hi.push.apply(hi,x))}y=F}if(x=!1,y!==2)continue}}if(y===1){ks(a,0),Cs(a,s,0,!0);break}e:{switch(g=a,x=y,x){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Cs(g,s,Ni,!Bo);break e;case 2:hi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=td+300-ot(),10<y)){if(Cs(g,s,Ni,!Bo),ra(g,0,!0)!==0)break e;mn=s,g.timeoutHandle=_n(gh.bind(null,g,u,hi,rd,ph,s,Ni,Ps,Al,Bo,x,"Throttled",-0,0),y);break e}gh(g,u,hi,rd,ph,s,Ni,Ps,Al,Bo,x,null,-0,0)}}break}while(!0);uo(a)}function gh(a,s,u,g,y,x,F,ee,_e,De,Je,it,Ne,He){if(a.timeoutHandle=-1,it=s.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vt},Dp(s,x,it);var Dt=(x&62914560)===x?td-ot():(x&4194048)===x?Fp-ot():0;if(Dt=VN(it,Dt),Dt!==null){mn=x,a.cancelPendingCommit=Dt(Qp.bind(null,a,s,x,u,g,y,F,ee,_e,Je,it,null,Ne,He)),Cs(a,x,F,!De);return}}Qp(a,s,x,u,g,y,F,ee,_e)}function Vp(a){for(var s=a;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var y=u[g],x=y.getSnapshot;y=y.value;try{if(!ui(x(),y))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Cs(a,s,u,g){s&=~mh,s&=~Ps,a.suspendedLanes|=s,a.pingedLanes&=~s,g&&(a.warmLanes|=s),g=a.expirationTimes;for(var y=s;0<y;){var x=31-an(y),F=1<<x;g[x]=-1,y&=~F}u!==0&&_a(a,u,s)}function od(){return(On&6)===0?(ud(0),!1):!0}function _h(){if(gn!==null){if(Un===0)var a=gn.return;else a=gn,Ya=gs=null,kf(a),yl=null,gc=0,a=gn;for(;a!==null;)Ep(a.alternate,a),a=a.return;gn=null}}function ks(a,s){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,Dn(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),mn=0,_h(),Yn=a,gn=u=xa(a.current,null),wn=s,Un=0,$i=null,Bo=!1,kl=Bt(a,s),hh=!1,Al=Ni=mh=Ps=ka=kr=0,hi=Rc=null,ph=!1,(s&8)!==0&&(s|=s&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=s;0<g;){var y=31-an(g),x=1<<y;s|=a[y],g&=~x}return Ca=s,Tu(),u}function Gp(a,s){un=null,W.H=El,s===vl||s===zu?(s=yf(),Un=3):s===vf?(s=yf(),Un=4):Un=s===Ec?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$i=s,gn===null&&(kr=1,Ku(a,Xi(s,a.current)))}function Wp(){var a=zi.current;return a===null?!0:(wn&4194048)===wn?Li===null:(wn&62914560)===wn||(wn&536870912)!==0?a===Li:!1}function lv(){var a=W.H;return W.H=El,a===null?El:a}function Hp(){var a=W.A;return W.A=av,a}function sd(){kr=4,Bo||(wn&4194048)!==wn&&zi.current!==null||(kl=!0),(ka&134217727)===0&&(Ps&134217727)===0||Yn===null||Cs(Yn,wn,Ni,!1)}function vh(a,s,u){var g=On;On|=2;var y=lv(),x=Hp();(Yn!==a||wn!==s)&&(rd=null,ks(a,s)),s=!1;var F=kr;e:do try{if(Un!==0&&gn!==null){var ee=gn,_e=$i;switch(Un){case 8:_h(),F=6;break e;case 3:case 2:case 9:case 6:zi.current===null&&(s=!0);var De=Un;if(Un=0,$i=null,Ol(a,ee,_e,De),u&&kl){F=0;break e}break;default:De=Un,Un=0,$i=null,Ol(a,ee,_e,De)}}Fc(),F=kr;break}catch(Je){Gp(a,Je)}while(!0);return s&&a.shellSuspendCounter++,Ya=gs=null,On=g,W.H=y,W.A=x,gn===null&&(Yn=null,wn=0,Tu()),F}function Fc(){for(;gn!==null;)Kp(gn)}function cv(a,s){var u=On;On|=2;var g=lv(),y=Hp();Yn!==a||wn!==s?(rd=null,nd=ot()+500,ks(a,s)):kl=Bt(a,s);e:do try{if(Un!==0&&gn!==null){s=gn;var x=$i;t:switch(Un){case 1:Un=0,$i=null,Ol(a,s,x,1);break;case 2:case 9:if(vm(x)){Un=0,$i=null,qp(s);break}s=function(){Un!==2&&Un!==9||Yn!==a||(Un=7),uo(a)},x.then(s,s);break e;case 3:Un=7;break e;case 4:Un=5;break e;case 7:vm(x)?(Un=0,$i=null,qp(s)):(Un=0,$i=null,Ol(a,s,x,7));break;case 5:var F=null;switch(gn.tag){case 26:F=gn.memoizedState;case 5:case 27:var ee=gn;if(F?vS(F):ee.stateNode.complete){Un=0,$i=null;var _e=ee.sibling;if(_e!==null)gn=_e;else{var De=ee.return;De!==null?(gn=De,ld(De)):gn=null}break t}}Un=0,$i=null,Ol(a,s,x,5);break;case 6:Un=0,$i=null,Ol(a,s,x,6);break;case 8:_h(),kr=6;break e;default:throw Error(i(462))}}uv();break}catch(Je){Gp(a,Je)}while(!0);return Ya=gs=null,W.H=g,W.A=y,On=u,gn!==null?0:(Yn=null,wn=0,Tu(),kr)}function uv(){for(;gn!==null&&!ft();)Kp(gn)}function Kp(a){var s=Mp(a.alternate,a,Ca);a.memoizedProps=a.pendingProps,s===null?ld(a):gn=s}function qp(a){var s=a,u=s.alternate;switch(s.tag){case 15:case 0:s=vp(u,s,s.pendingProps,s.type,void 0,wn);break;case 11:s=vp(u,s,s.pendingProps,s.type.render,s.ref,wn);break;case 5:kf(s);default:Ep(u,s),s=gn=sm(s,Ca),s=Mp(u,s,Ca)}a.memoizedProps=a.pendingProps,s===null?ld(a):gn=s}function Ol(a,s,u,g){Ya=gs=null,kf(s),yl=null,gc=0;var y=s.return;try{if(Y_(a,y,s,u,wn)){kr=1,Ku(a,Xi(u,a.current)),gn=null;return}}catch(x){if(y!==null)throw gn=y,x;kr=1,Ku(a,Xi(u,a.current)),gn=null;return}s.flags&32768?(Tn||g===1?a=!0:kl||(wn&536870912)!==0?a=!1:(Bo=a=!0,(g===2||g===9||g===3||g===6)&&(g=zi.current,g!==null&&g.tag===13&&(g.flags|=16384))),Zp(s,a)):ld(s)}function ld(a){var s=a;do{if((s.flags&32768)!==0){Zp(s,Bo);return}a=s.return;var u=Sp(s.alternate,s,Ca);if(u!==null){gn=u;return}if(s=s.sibling,s!==null){gn=s;return}gn=s=a}while(s!==null);kr===0&&(kr=5)}function Zp(a,s){do{var u=nv(a.alternate,a);if(u!==null){u.flags&=32767,gn=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(a=a.sibling,a!==null)){gn=a;return}gn=a=u}while(a!==null);kr=6,gn=null}function Qp(a,s,u,g,y,x,F,ee,_e){a.cancelPendingCommit=null;do cd();while(Xr!==0);if((On&6)!==0)throw Error(i(327));if(s!==null){if(s===a.current)throw Error(i(177));if(x=s.lanes|s.childLanes,x|=of,Xt(a,u,x,F,ee,_e),a===Yn&&(gn=Yn=null,wn=0),Il=s,Uo=a,mn=u,Np=x,jp=y,sv=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,g0(ut,function(){return eg(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=W.T,W.T=null,y=ne.p,ne.p=2,F=On,On|=4;try{lh(a,s,u)}finally{On=F,ne.p=y,W.T=g}}Xr=1,dv(),Xp(),Yp()}}function dv(){if(Xr===1){Xr=0;var a=Uo,s=Il,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=W.T,W.T=null;var g=ne.p;ne.p=2;var y=On;On|=4;try{uh(s,a);var x=Kt,F=sc(a.containerInfo),ee=x.focusedElem,_e=x.selectionRange;if(F!==ee&&ee&&ee.ownerDocument&&sl(ee.ownerDocument.documentElement,ee)){if(_e!==null&&Ao(ee)){var De=_e.start,Je=_e.end;if(Je===void 0&&(Je=De),"selectionStart"in ee)ee.selectionStart=De,ee.selectionEnd=Math.min(Je,ee.value.length);else{var it=ee.ownerDocument||document,Ne=it&&it.defaultView||window;if(Ne.getSelection){var He=Ne.getSelection(),Dt=ee.textContent.length,Jt=Math.min(_e.start,Dt),ur=_e.end===void 0?Jt:Math.min(_e.end,Dt);!He.extend&&Jt>ur&&(F=ur,ur=Jt,Jt=F);var Ee=oc(ee,Jt),we=oc(ee,ur);if(Ee&&we&&(He.rangeCount!==1||He.anchorNode!==Ee.node||He.anchorOffset!==Ee.offset||He.focusNode!==we.node||He.focusOffset!==we.offset)){var Oe=it.createRange();Oe.setStart(Ee.node,Ee.offset),He.removeAllRanges(),Jt>ur?(He.addRange(Oe),He.extend(we.node,we.offset)):(Oe.setEnd(we.node,we.offset),He.addRange(Oe))}}}}for(it=[],He=ee;He=He.parentNode;)He.nodeType===1&&it.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<it.length;ee++){var tt=it[ee];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}$v=!!$t,Kt=$t=null}finally{On=y,ne.p=g,W.T=u}}a.current=s,Xr=2}}function Xp(){if(Xr===2){Xr=0;var a=Uo,s=Il,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=W.T,W.T=null;var g=ne.p;ne.p=2;var y=On;On|=4;try{rv(a,s.alternate,s)}finally{On=y,ne.p=g,W.T=u}}Xr=3}}function Yp(){if(Xr===4||Xr===3){Xr=0,Fe();var a=Uo,s=Il,u=mn,g=sv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Xr=5:(Xr=0,Il=Uo=null,Jp(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(Aa=null),le(u),s=s.stateNode,kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Qt,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=W.T,y=ne.p,ne.p=2,W.T=null;try{for(var x=a.onRecoverableError,F=0;F<g.length;F++){var ee=g[F];x(ee.value,{componentStack:ee.stack})}}finally{W.T=s,ne.p=y}}(mn&3)!==0&&cd(),uo(a),y=a.pendingLanes,(u&261930)!==0&&(y&42)!==0?a===ad?id++:(id=0,ad=a):id=0,ud(0)}}function Jp(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,fc(s)))}function cd(){return dv(),Xp(),Yp(),eg()}function eg(){if(Xr!==5)return!1;var a=Uo,s=Np;Np=0;var u=le(mn),g=W.T,y=ne.p;try{ne.p=32>u?32:u,W.T=null,u=jp,jp=null;var x=Uo,F=mn;if(Xr=0,Il=Uo=null,mn=0,(On&6)!==0)throw Error(i(331));var ee=On;if(On|=4,Lp(x.current),Ju(x,x.current,F,u),On=ee,ud(0,!1),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Qt,x)}catch{}return!0}finally{ne.p=y,W.T=g,Jp(a,s)}}function tg(a,s,u){s=Xi(u,s),s=Qf(a.stateNode,s,2),a=Lo(a,s,2),a!==null&&(ei(a,2),uo(a))}function qn(a,s,u){if(a.tag===3)tg(a,a,u);else for(;s!==null;){if(s.tag===3){tg(s,a,u);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Aa===null||!Aa.has(g))){a=Xi(u,a),u=up(2),g=Lo(s,u,2),g!==null&&(dp(u,g,s,a),ei(g,2),uo(g));break}}s=s.return}}function yh(a,s,u){var g=a.pingCache;if(g===null){g=a.pingCache=new ov;var y=new Set;g.set(s,y)}else y=g.get(s),y===void 0&&(y=new Set,g.set(s,y));y.has(u)||(hh=!0,y.add(u),a=h0.bind(null,a,s,u),s.then(a,a))}function h0(a,s,u){var g=a.pingCache;g!==null&&g.delete(s),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Yn===a&&(wn&u)===u&&(kr===4||kr===3&&(wn&62914560)===wn&&300>ot()-td?(On&2)===0&&ks(a,0):mh|=u,Al===wn&&(Al=0)),uo(a)}function fv(a,s){s===0&&(s=ga()),a=ms(a,s),a!==null&&(ei(a,s),uo(a))}function m0(a){var s=a.memoizedState,u=0;s!==null&&(u=s.retryLane),fv(a,u)}function p0(a,s){var u=0;switch(a.tag){case 31:case 13:var g=a.stateNode,y=a.memoizedState;y!==null&&(u=y.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(s),fv(a,u)}function g0(a,s){return Ae(a,s)}var bh=null,Nc=null,ng=!1,wh=!1,rg=!1,As=0;function uo(a){a!==Nc&&a.next===null&&(Nc===null?bh=Nc=a:Nc=Nc.next=a),wh=!0,ng||(ng=!0,v0())}function ud(a,s){if(!rg&&wh){rg=!0;do for(var u=!1,g=bh;g!==null;){if(a!==0){var y=g.pendingLanes;if(y===0)var x=0;else{var F=g.suspendedLanes,ee=g.pingedLanes;x=(1<<31-an(42|a)+1)-1,x&=y&~(F&~ee),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,gv(g,x))}else x=wn,x=ra(g,g===Yn?x:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(x&3)===0||Bt(g,x)||(u=!0,gv(g,x));g=g.next}while(u);rg=!1}}function _0(){hv()}function hv(){wh=ng=!1;var a=0;As!==0&&Ft()&&(a=As);for(var s=ot(),u=null,g=bh;g!==null;){var y=g.next,x=mv(g,s);x===0?(g.next=null,u===null?bh=y:u.next=y,y===null&&(Nc=u)):(u=g,(a!==0||(x&3)!==0)&&(wh=!0)),g=y}Xr!==0&&Xr!==5||ud(a),As!==0&&(As=0)}function mv(a,s){for(var u=a.suspendedLanes,g=a.pingedLanes,y=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var F=31-an(x),ee=1<<F,_e=y[F];_e===-1?((ee&u)===0||(ee&g)!==0)&&(y[F]=Wn(ee,s)):_e<=s&&(a.expiredLanes|=ee),x&=~ee}if(s=Yn,u=wn,u=ra(a,a===s?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,u===0||a===s&&(Un===2||Un===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&We(g),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Bt(a,u)){if(s=u&-u,s===a.callbackPriority)return s;switch(g!==null&&We(g),le(u)){case 2:case 8:u=Tt;break;case 32:u=ut;break;case 268435456:u=kt;break;default:u=ut}return g=pv.bind(null,a),u=Ae(u,g),a.callbackPriority=s,a.callbackNode=u,s}return g!==null&&g!==null&&We(g),a.callbackPriority=2,a.callbackNode=null,2}function pv(a,s){if(Xr!==0&&Xr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(cd()&&a.callbackNode!==u)return null;var g=wn;return g=ra(a,a===Yn?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(Up(a,g,s),mv(a,ot()),a.callbackNode!=null&&a.callbackNode===u?pv.bind(null,a):null)}function gv(a,s){if(cd())return null;Up(a,s,!0)}function v0(){_r(function(){(On&6)!==0?Ae(St,_0):hv()})}function ig(){if(As===0){var a=gl;a===0&&(a=pa,pa<<=1,(pa&261888)===0&&(pa=256)),As=a}return As}function _v(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:en(""+a)}function vv(a,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,a.id&&u.setAttribute("form",a.id),s.parentNode.insertBefore(u,s),a=new FormData(a),u.parentNode.removeChild(u),a}function y0(a,s,u,g,y){if(s==="submit"&&u&&u.stateNode===y){var x=_v((y[Et]||null).action),F=g.submitter;F&&(s=(s=F[Et]||null)?_v(s.formAction):F.getAttribute("formAction"),s!==null&&(x=s,F=null));var ee=new ai("action","action",null,g,y);a.push({event:ee,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(As!==0){var _e=F?vv(y,F):new FormData(y);Bf(u,{pending:!0,data:_e,method:y.method,action:x},null,_e)}}else typeof x=="function"&&(ee.preventDefault(),_e=F?vv(y,F):new FormData(y),Bf(u,{pending:!0,data:_e,method:y.method,action:x},x,_e))},currentTarget:y}]})}}for(var ag=0;ag<$n.length;ag++){var og=$n[ag],b0=og.toLowerCase(),w0=og[0].toUpperCase()+og.slice(1);Rn(b0,"on"+w0)}Rn(re,"onAnimationEnd"),Rn(be,"onAnimationIteration"),Rn(qe,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(ct,"onTransitionRun"),Rn(wt,"onTransitionStart"),Rn(At,"onTransitionCancel"),Rn(Yt,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dd));function yv(a,s){s=(s&4)!==0;for(var u=0;u<a.length;u++){var g=a[u],y=g.event;g=g.listeners;e:{var x=void 0;if(s)for(var F=g.length-1;0<=F;F--){var ee=g[F],_e=ee.instance,De=ee.currentTarget;if(ee=ee.listener,_e!==x&&y.isPropagationStopped())break e;x=ee,y.currentTarget=De;try{x(y)}catch(Je){sa(Je)}y.currentTarget=null,x=_e}else for(F=0;F<g.length;F++){if(ee=g[F],_e=ee.instance,De=ee.currentTarget,ee=ee.listener,_e!==x&&y.isPropagationStopped())break e;x=ee,y.currentTarget=De;try{x(y)}catch(Je){sa(Je)}y.currentTarget=null,x=_e}}}}function xn(a,s){var u=s[Gt];u===void 0&&(u=s[Gt]=new Set);var g=a+"__bubble";u.has(g)||(Vr(s,a,2,!1),u.add(g))}function sg(a,s,u){var g=0;s&&(g|=4),Vr(u,a,g,s)}var qt="_reactListening"+Math.random().toString(36).slice(2);function xh(a){if(!a[qt]){a[qt]=!0,ti.forEach(function(u){u!=="selectionchange"&&(x0.has(u)||sg(u,!1,a),sg(u,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[qt]||(s[qt]=!0,sg("selectionchange",!1,s))}}function Vr(a,s,u,g){switch(SS(s)){case 2:var y=HN;break;case 8:y=KN;break;default:y=I0}u=y.bind(null,s,u,a),y=void 0,!Xn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),g?y!==void 0?a.addEventListener(s,u,{capture:!0,passive:y}):a.addEventListener(s,u,!0):y!==void 0?a.addEventListener(s,u,{passive:y}):a.addEventListener(s,u,!1)}function Gr(a,s,u,g,y){var x=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var F=g.tag;if(F===3||F===4){var ee=g.stateNode.containerInfo;if(ee===y)break;if(F===4)for(F=g.return;F!==null;){var _e=F.tag;if((_e===3||_e===4)&&F.stateNode.containerInfo===y)return;F=F.return}for(;ee!==null;){if(F=Hn(ee),F===null)return;if(_e=F.tag,_e===5||_e===6||_e===26||_e===27){g=x=F;continue e}ee=ee.parentNode}}g=g.return}Zi(function(){var De=x,Je=Pr(u),it=[];e:{var Ne=yn.get(a);if(Ne!==void 0){var He=ai,Dt=a;switch(a){case"keypress":if(Si(u)===0)break e;case"keydown":case"keyup":He=Jd;break;case"focusin":Dt="focus",He=Kl;break;case"focusout":Dt="blur",He=Kl;break;case"beforeblur":case"afterblur":He=Kl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=Kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=am;break;case re:case be:case qe:He=Qd;break;case Yt:He=Xl;break;case"scroll":case"scrollend":He=qa;break;case"wheel":He=Yl;break;case"copy":case"cut":case"paste":He=Xd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=vu;break;case"toggle":case"beforetoggle":He=tf}var Jt=(s&4)!==0,ur=!Jt&&(a==="scroll"||a==="scrollend"),Ee=Jt?Ne!==null?Ne+"Capture":null:Ne;Jt=[];for(var we=De,Oe;we!==null;){var tt=we;if(Oe=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||Oe===null||Ee===null||(tt=Sr(we,Ee),tt!=null&&Jt.push(Wr(we,tt,Oe))),ur)break;we=we.return}0<Jt.length&&(Ne=new He(Ne,Dt,null,u,Je),it.push({event:Ne,listeners:Jt}))}}if((s&7)===0){e:{if(Ne=a==="mouseover"||a==="pointerover",He=a==="mouseout"||a==="pointerout",Ne&&u!==tr&&(Dt=u.relatedTarget||u.fromElement)&&(Hn(Dt)||Dt[_t]))break e;if((He||Ne)&&(Ne=Je.window===Je?Je:(Ne=Je.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,He?(Dt=u.relatedTarget||u.toElement,He=De,Dt=Dt?Hn(Dt):null,Dt!==null&&(ur=o(Dt),Jt=Dt.tag,Dt!==ur||Jt!==5&&Jt!==27&&Jt!==6)&&(Dt=null)):(He=null,Dt=De),He!==Dt)){if(Jt=hu,tt="onMouseLeave",Ee="onMouseEnter",we="mouse",(a==="pointerout"||a==="pointerover")&&(Jt=vu,tt="onPointerLeave",Ee="onPointerEnter",we="pointer"),ur=He==null?Ne:Ai(He),Oe=Dt==null?Ne:Ai(Dt),Ne=new Jt(tt,we+"leave",He,u,Je),Ne.target=ur,Ne.relatedTarget=Oe,tt=null,Hn(Je)===De&&(Jt=new Jt(Ee,we+"enter",Dt,u,Je),Jt.target=Oe,Jt.relatedTarget=ur,tt=Jt),ur=tt,He&&Dt)t:{for(Jt=M0,Ee=He,we=Dt,Oe=0,tt=Ee;tt;tt=Jt(tt))Oe++;tt=0;for(var Ht=we;Ht;Ht=Jt(Ht))tt++;for(;0<Oe-tt;)Ee=Jt(Ee),Oe--;for(;0<tt-Oe;)we=Jt(we),tt--;for(;Oe--;){if(Ee===we||we!==null&&Ee===we.alternate){Jt=Ee;break t}Ee=Jt(Ee),we=Jt(we)}Jt=null}else Jt=null;He!==null&&lg(it,Ne,He,Jt,!1),Dt!==null&&ur!==null&&lg(it,ur,Dt,Jt,!0)}}e:{if(Ne=De?Ai(De):window,He=Ne.nodeName&&Ne.nodeName.toLowerCase(),He==="select"||He==="input"&&Ne.type==="file")var Vn=nl;else if(ba(Ne))if(ic)Vn=al;else{Vn=Qi;var Ut=rl}else He=Ne.nodeName,!He||He.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?De&&bt(De.elementType)&&(Vn=nl):Vn=il;if(Vn&&(Vn=Vn(a,De))){rc(it,Vn,u,Je);break e}Ut&&Ut(a,Ne,De),a==="focusout"&&De&&Ne.type==="number"&&De.memoizedProps.value!=null&&Me(Ne,"number",Ne.value)}switch(Ut=De?Ai(De):window,a){case"focusin":(ba(Ut)||Ut.contentEditable==="true")&&(wa=Ut,cl=De,Qa=null);break;case"focusout":Qa=cl=wa=null;break;case"mousedown":ul=!0;break;case"contextmenu":case"mouseup":case"dragend":ul=!1,lc(it,u,Je);break;case"selectionchange":if(ll)break;case"keydown":case"keyup":lc(it,u,Je)}var vn;if(Jl)e:{switch(a){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else ya?Js(a,u)&&(Pn="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Pn="onCompositionStart");Pn&&(ec&&u.locale!=="ko"&&(ya||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&ya&&(vn=Dr()):(lr=Je,Ti="value"in lr?lr.value:lr.textContent,ya=!0)),Ut=Ia(De,Pn),0<Ut.length&&(Pn=new ql(Pn,a,null,u,Je),it.push({event:Pn,listeners:Ut}),vn?Pn.data=vn:(vn=wu(u),vn!==null&&(Pn.data=vn)))),(vn=rf?el(a,u):tc(a,u))&&(Pn=Ia(De,"onBeforeInput"),0<Pn.length&&(Ut=new ql("onBeforeInput","beforeinput",null,u,Je),it.push({event:Ut,listeners:Pn}),Ut.data=vn)),y0(it,a,De,u,Je)}yv(it,s)})}function Wr(a,s,u){return{instance:a,listener:s,currentTarget:u}}function Ia(a,s){for(var u=s+"Capture",g=[];a!==null;){var y=a,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=Sr(a,u),y!=null&&g.unshift(Wr(a,y,x)),y=Sr(a,s),y!=null&&g.push(Wr(a,y,x))),a.tag===3)return g;a=a.return}return[]}function M0(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function lg(a,s,u,g,y){for(var x=s._reactName,F=[];u!==null&&u!==g;){var ee=u,_e=ee.alternate,De=ee.stateNode;if(ee=ee.tag,_e!==null&&_e===g)break;ee!==5&&ee!==26&&ee!==27||De===null||(_e=De,y?(De=Sr(u,x),De!=null&&F.unshift(Wr(u,De,_e))):y||(De=Sr(u,x),De!=null&&F.push(Wr(u,De,_e)))),u=u.return}F.length!==0&&a.push({event:s,listeners:F})}var bv=/\r\n?/g,k=/\u0000|\uFFFD/g;function I(a){return(typeof a=="string"?a:""+a).replace(bv,`
`).replace(k,"")}function te(a,s){return s=I(s),I(a)===s}function pe(a,s,u,g,y,x){switch(u){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||me(a,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&me(a,""+g);break;case"className":qi(a,"class",g);break;case"tabIndex":qi(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":qi(a,u,g);break;case"style":xt(a,g,x);break;case"data":if(s!=="object"){qi(a,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||u!=="href")){a.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=en(""+g),a.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(s!=="input"&&pe(a,s,"name",y.name,y,null),pe(a,s,"formEncType",y.formEncType,y,null),pe(a,s,"formMethod",y.formMethod,y,null),pe(a,s,"formTarget",y.formTarget,y,null)):(pe(a,s,"encType",y.encType,y,null),pe(a,s,"method",y.method,y,null),pe(a,s,"target",y.target,y,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=en(""+g),a.setAttribute(u,g);break;case"onClick":g!=null&&(a.onclick=Vt);break;case"onScroll":g!=null&&xn("scroll",a);break;case"onScrollEnd":g!=null&&xn("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(u=g.__html,u!=null){if(y.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}u=en(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""+g):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":g===!0?a.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,g):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(u,g):a.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(u):a.setAttribute(u,g);break;case"popover":xn("beforetoggle",a),xn("toggle",a),Ki(a,"popover",g);break;case"xlinkActuate":ii(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ii(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ii(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ii(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ii(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ii(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ii(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ii(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ii(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ki(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Mt.get(u)||u,Ki(a,u,g))}}function Ce(a,s,u,g,y,x){switch(u){case"style":xt(a,g,x);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(u=g.__html,u!=null){if(y.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"children":typeof g=="string"?me(a,g):(typeof g=="number"||typeof g=="bigint")&&me(a,""+g);break;case"onScroll":g!=null&&xn("scroll",a);break;case"onScrollEnd":g!=null&&xn("scrollend",a);break;case"onClick":g!=null&&(a.onclick=Vt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ni.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),s=u.slice(2,y?u.length-7:void 0),x=a[Et]||null,x=x!=null?x[u]:null,typeof x=="function"&&a.removeEventListener(s,x,y),typeof g=="function")){typeof x!="function"&&x!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(s,g,y);break e}u in a?a[u]=g:g===!0?a.setAttribute(u,""):Ki(a,u,g)}}}function $e(a,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xn("error",a),xn("load",a);var g=!1,y=!1,x;for(x in u)if(u.hasOwnProperty(x)){var F=u[x];if(F!=null)switch(x){case"src":g=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:pe(a,s,x,F,u,null)}}y&&pe(a,s,"srcSet",u.srcSet,u,null),g&&pe(a,s,"src",u.src,u,null);return;case"input":xn("invalid",a);var ee=x=F=y=null,_e=null,De=null;for(g in u)if(u.hasOwnProperty(g)){var Je=u[g];if(Je!=null)switch(g){case"name":y=Je;break;case"type":F=Je;break;case"checked":_e=Je;break;case"defaultChecked":De=Je;break;case"value":x=Je;break;case"defaultValue":ee=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(i(137,s));break;default:pe(a,s,g,Je,u,null)}}Zs(a,x,ee,_e,De,F,y,!1);return;case"select":xn("invalid",a),g=F=x=null;for(y in u)if(u.hasOwnProperty(y)&&(ee=u[y],ee!=null))switch(y){case"value":x=ee;break;case"defaultValue":F=ee;break;case"multiple":g=ee;default:pe(a,s,y,ee,u,null)}s=x,u=F,a.multiple=!!g,s!=null?R(a,!!g,s,!1):u!=null&&R(a,!!g,u,!0);return;case"textarea":xn("invalid",a),x=y=g=null;for(F in u)if(u.hasOwnProperty(F)&&(ee=u[F],ee!=null))switch(F){case"value":g=ee;break;case"defaultValue":y=ee;break;case"children":x=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(91));break;default:pe(a,s,F,ee,u,null)}he(a,g,y,x);return;case"option":for(_e in u)u.hasOwnProperty(_e)&&(g=u[_e],g!=null)&&(_e==="selected"?a.selected=g&&typeof g!="function"&&typeof g!="symbol":pe(a,s,_e,g,u,null));return;case"dialog":xn("beforetoggle",a),xn("toggle",a),xn("cancel",a),xn("close",a);break;case"iframe":case"object":xn("load",a);break;case"video":case"audio":for(g=0;g<dd.length;g++)xn(dd[g],a);break;case"image":xn("error",a),xn("load",a);break;case"details":xn("toggle",a);break;case"embed":case"source":case"link":xn("error",a),xn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in u)if(u.hasOwnProperty(De)&&(g=u[De],g!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:pe(a,s,De,g,u,null)}return;default:if(bt(s)){for(Je in u)u.hasOwnProperty(Je)&&(g=u[Je],g!==void 0&&Ce(a,s,Je,g,u,void 0));return}}for(ee in u)u.hasOwnProperty(ee)&&(g=u[ee],g!=null&&pe(a,s,ee,g,u,null))}function Qe(a,s,u,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,F=null,ee=null,_e=null,De=null,Je=null;for(He in u){var it=u[He];if(u.hasOwnProperty(He)&&it!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":_e=it;default:g.hasOwnProperty(He)||pe(a,s,He,null,g,it)}}for(var Ne in g){var He=g[Ne];if(it=u[Ne],g.hasOwnProperty(Ne)&&(He!=null||it!=null))switch(Ne){case"type":x=He;break;case"name":y=He;break;case"checked":De=He;break;case"defaultChecked":Je=He;break;case"value":F=He;break;case"defaultValue":ee=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(i(137,s));break;default:He!==it&&pe(a,s,Ne,He,g,it)}}va(a,F,ee,_e,De,Je,x,y);return;case"select":He=F=ee=Ne=null;for(x in u)if(_e=u[x],u.hasOwnProperty(x)&&_e!=null)switch(x){case"value":break;case"multiple":He=_e;default:g.hasOwnProperty(x)||pe(a,s,x,null,g,_e)}for(y in g)if(x=g[y],_e=u[y],g.hasOwnProperty(y)&&(x!=null||_e!=null))switch(y){case"value":Ne=x;break;case"defaultValue":ee=x;break;case"multiple":F=x;default:x!==_e&&pe(a,s,y,x,g,_e)}s=ee,u=F,g=He,Ne!=null?R(a,!!u,Ne,!1):!!g!=!!u&&(s!=null?R(a,!!u,s,!0):R(a,!!u,u?[]:"",!1));return;case"textarea":He=Ne=null;for(ee in u)if(y=u[ee],u.hasOwnProperty(ee)&&y!=null&&!g.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:pe(a,s,ee,null,g,y)}for(F in g)if(y=g[F],x=u[F],g.hasOwnProperty(F)&&(y!=null||x!=null))switch(F){case"value":Ne=y;break;case"defaultValue":He=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==x&&pe(a,s,F,y,g,x)}ie(a,Ne,He);return;case"option":for(var Dt in u)Ne=u[Dt],u.hasOwnProperty(Dt)&&Ne!=null&&!g.hasOwnProperty(Dt)&&(Dt==="selected"?a.selected=!1:pe(a,s,Dt,null,g,Ne));for(_e in g)Ne=g[_e],He=u[_e],g.hasOwnProperty(_e)&&Ne!==He&&(Ne!=null||He!=null)&&(_e==="selected"?a.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol":pe(a,s,_e,Ne,g,He));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jt in u)Ne=u[Jt],u.hasOwnProperty(Jt)&&Ne!=null&&!g.hasOwnProperty(Jt)&&pe(a,s,Jt,null,g,Ne);for(De in g)if(Ne=g[De],He=u[De],g.hasOwnProperty(De)&&Ne!==He&&(Ne!=null||He!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,s));break;default:pe(a,s,De,Ne,g,He)}return;default:if(bt(s)){for(var ur in u)Ne=u[ur],u.hasOwnProperty(ur)&&Ne!==void 0&&!g.hasOwnProperty(ur)&&Ce(a,s,ur,void 0,g,Ne);for(Je in g)Ne=g[Je],He=u[Je],!g.hasOwnProperty(Je)||Ne===He||Ne===void 0&&He===void 0||Ce(a,s,Je,Ne,g,He);return}}for(var Ee in u)Ne=u[Ee],u.hasOwnProperty(Ee)&&Ne!=null&&!g.hasOwnProperty(Ee)&&pe(a,s,Ee,null,g,Ne);for(it in g)Ne=g[it],He=u[it],!g.hasOwnProperty(it)||Ne===He||Ne==null&&He==null||pe(a,s,it,Ne,g,He)}function st(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pt(){if(typeof performance.getEntriesByType=="function"){for(var a=0,s=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var y=u[g],x=y.transferSize,F=y.initiatorType,ee=y.duration;if(x&&ee&&st(F)){for(F=0,ee=y.responseEnd,g+=1;g<u.length;g++){var _e=u[g],De=_e.startTime;if(De>ee)break;var Je=_e.transferSize,it=_e.initiatorType;Je&&st(it)&&(_e=_e.responseEnd,F+=Je*(_e<ee?1:(ee-De)/(_e-De)))}if(--g,s+=8*(x+F)/(y.duration/1e3),a++,10<a)break}}if(0<a)return s/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var $t=null,Kt=null;function Wt(a){return a.nodeType===9?a:a.ownerDocument}function tn(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lt(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function Mn(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rt=null;function Ft(){var a=window.event;return a&&a.type==="popstate"?a===Rt?!1:(Rt=a,!0):(Rt=null,!1)}var _n=typeof setTimeout=="function"?setTimeout:void 0,Dn=typeof clearTimeout=="function"?clearTimeout:void 0,ir=typeof Promise=="function"?Promise:void 0,_r=typeof queueMicrotask=="function"?queueMicrotask:typeof ir<"u"?function(a){return ir.resolve(null).then(a).catch(Ar)}:_n;function Ar(a){setTimeout(function(){throw a})}function Zn(a){return a==="head"}function dn(a,s){var u=s,g=0;do{var y=u.nextSibling;if(a.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(g===0){a.removeChild(y),Eh(s);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")Oa(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,Oa(u);for(var x=u.firstChild;x;){var F=x.nextSibling,ee=x.nodeName;x[fr]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=F}}else u==="body"&&Oa(a.ownerDocument.body);u=y}while(u);Eh(s)}function vr(a,s){var u=a;a=0;do{var g=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=g}while(u)}function Hr(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Hr(u),hr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function Dl(a,s,u,g){for(;a.nodeType===1;){var y=u;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[fr])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=bi(a.nextSibling),a===null)break}return null}function Ci(a,s,u){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=bi(a.nextSibling),a===null))return null;return a}function ua(a,s){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!s||(a=bi(a.nextSibling),a===null))return null;return a}function Is(a){return a.data==="$?"||a.data==="$~"}function Os(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function Mh(a,s){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=s;else if(a.data!=="$?"||u.readyState!=="loading")s();else{var g=function(){s(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function bi(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return a}var cg=null;function ar(a){a=a.nextSibling;for(var s=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(s===0)return bi(a.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}a=a.nextSibling}return null}function Kr(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return a;s--}else u!=="/$"&&u!=="/&"||s++}a=a.previousSibling}return null}function Vo(a,s,u){switch(s=Wt(u),a){case"html":if(a=s.documentElement,!a)throw Error(i(452));return a;case"head":if(a=s.head,!a)throw Error(i(453));return a;case"body":if(a=s.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Oa(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);hr(a)}var mi=new Map,fd=new Set;function jc(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Da=ne.d;ne.d={f:ug,r:T0,D:dg,C:wv,L:fg,m:Th,X:E0,S:S0,M:$0};function ug(){var a=Da.f(),s=od();return a||s}function T0(a){var s=mr(a);s!==null&&s.tag===5&&s.type==="form"?Uf(s):Da.r(a)}var Ds=typeof document>"u"?null:document;function hd(a,s,u){var g=Ds;if(g&&typeof s=="string"&&s){var y=Nr(s);y='link[rel="'+a+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),fd.has(y)||(fd.add(y),a={rel:a,crossOrigin:u,href:s},g.querySelector(y)===null&&(s=g.createElement("link"),$e(s,"link",a),er(s),g.head.appendChild(s)))}}function dg(a){Da.D(a),hd("dns-prefetch",a,null)}function wv(a,s){Da.C(a,s),hd("preconnect",a,s)}function fg(a,s,u){Da.L(a,s,u);var g=Ds;if(g&&a&&s){var y='link[rel="preload"][as="'+Nr(s)+'"]';s==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Nr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Nr(u.imageSizes)+'"]')):y+='[href="'+Nr(a)+'"]';var x=y;switch(s){case"style":x=wi(a);break;case"script":x=Sh(a)}mi.has(x)||(a=h({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:a,as:s},u),mi.set(x,a),g.querySelector(y)!==null||s==="style"&&g.querySelector(hg(x))||s==="script"&&g.querySelector(mg(x))||(s=g.createElement("link"),$e(s,"link",a),er(s),g.head.appendChild(s)))}}function Th(a,s){Da.m(a,s);var u=Ds;if(u&&a){var g=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+Nr(g)+'"][href="'+Nr(a)+'"]',x=y;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Sh(a)}if(!mi.has(x)&&(a=h({rel:"modulepreload",href:a},s),mi.set(x,a),u.querySelector(y)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(mg(x)))return}g=u.createElement("link"),$e(g,"link",a),er(g),u.head.appendChild(g)}}}function S0(a,s,u){Da.S(a,s,u);var g=Ds;if(g&&a){var y=Or(g).hoistableStyles,x=wi(a);s=s||"default";var F=y.get(x);if(!F){var ee={loading:0,preload:null};if(F=g.querySelector(hg(x)))ee.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":s},u),(u=mi.get(x))&&P0(a,u);var _e=F=g.createElement("link");er(_e),$e(_e,"link",a),_e._p=new Promise(function(De,Je){_e.onload=De,_e.onerror=Je}),_e.addEventListener("load",function(){ee.loading|=1}),_e.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,xv(F,s,g)}F={type:"stylesheet",instance:F,count:1,state:ee},y.set(x,F)}}}function E0(a,s){Da.X(a,s);var u=Ds;if(u&&a){var g=Or(u).hoistableScripts,y=Sh(a),x=g.get(y);x||(x=u.querySelector(mg(y)),x||(a=h({src:a,async:!0},s),(s=mi.get(y))&&C0(a,s),x=u.createElement("script"),er(x),$e(x,"link",a),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(y,x))}}function $0(a,s){Da.M(a,s);var u=Ds;if(u&&a){var g=Or(u).hoistableScripts,y=Sh(a),x=g.get(y);x||(x=u.querySelector(mg(y)),x||(a=h({src:a,async:!0,type:"module"},s),(s=mi.get(y))&&C0(a,s),x=u.createElement("script"),er(x),$e(x,"link",a),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(y,x))}}function zs(a,s,u,g){var y=(y=ve.current)?jc(y):null;if(!y)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=wi(u.href),u=Or(y).hoistableStyles,g=u.get(s),g||(g={type:"style",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=wi(u.href);var x=Or(y).hoistableStyles,F=x.get(a);if(F||(y=y.ownerDocument||y,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,F),(x=y.querySelector(hg(a)))&&!x._p&&(F.instance=x,F.state.loading=5),mi.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},mi.set(a,u),x||jN(y,a,u,F.state))),s&&g===null)throw Error(i(528,""));return F}if(s&&g!==null)throw Error(i(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sh(u),u=Or(y).hoistableScripts,g=u.get(s),g||(g={type:"script",instance:null,count:0,state:null},u.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function wi(a){return'href="'+Nr(a)+'"'}function hg(a){return'link[rel="stylesheet"]['+a+"]"}function mS(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function jN(a,s,u,g){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=a.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),$e(s,"link",u),er(s),a.head.appendChild(s))}function Sh(a){return'[src="'+Nr(a)+'"]'}function mg(a){return"script[async]"+a}function pS(a,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var g=a.querySelector('style[data-href~="'+Nr(u.href)+'"]');if(g)return s.instance=g,er(g),g;var y=h({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),er(g),$e(g,"style",y),xv(g,u.precedence,a),s.instance=g;case"stylesheet":y=wi(u.href);var x=a.querySelector(hg(y));if(x)return s.state.loading|=4,s.instance=x,er(x),x;g=mS(u),(y=mi.get(y))&&P0(g,y),x=(a.ownerDocument||a).createElement("link"),er(x);var F=x;return F._p=new Promise(function(ee,_e){F.onload=ee,F.onerror=_e}),$e(x,"link",g),s.state.loading|=4,xv(x,u.precedence,a),s.instance=x;case"script":return x=Sh(u.src),(y=a.querySelector(mg(x)))?(s.instance=y,er(y),y):(g=u,(y=mi.get(x))&&(g=h({},u),C0(g,y)),a=a.ownerDocument||a,y=a.createElement("script"),er(y),$e(y,"link",g),a.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,xv(g,u.precedence,a));return s.instance}function xv(a,s,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=g.length?g[g.length-1]:null,x=y,F=0;F<g.length;F++){var ee=g[F];if(ee.dataset.precedence===s)x=ee;else if(x!==y)break}x?x.parentNode.insertBefore(a,x.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(a,s.firstChild))}function P0(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function C0(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var Mv=null;function gS(a,s,u){if(Mv===null){var g=new Map,y=Mv=new Map;y.set(u,g)}else y=Mv,g=y.get(u),g||(g=new Map,y.set(u,g));if(g.has(a))return g;for(g.set(a,null),u=u.getElementsByTagName(a),y=0;y<u.length;y++){var x=u[y];if(!(x[fr]||x[mt]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var F=x.getAttribute(s)||"";F=a+F;var ee=g.get(F);ee?ee.push(x):g.set(F,[x])}}return g}function _S(a,s,u){a=a.ownerDocument||a,a.head.insertBefore(u,s==="title"?a.querySelector("head > title"):null)}function BN(a,s,u){if(u===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(a=s.disabled,typeof s.precedence=="string"&&a==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function UN(a,s,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=wi(g.href),x=s.querySelector(hg(y));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(a.count++,a=Tv.bind(a),s.then(a,a)),u.state.loading|=4,u.instance=x,er(x);return}x=s.ownerDocument||s,g=mS(g),(y=mi.get(y))&&P0(g,y),x=x.createElement("link"),er(x);var F=x;F._p=new Promise(function(ee,_e){F.onload=ee,F.onerror=_e}),$e(x,"link",g),u.instance=x}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=Tv.bind(a),s.addEventListener("load",u),s.addEventListener("error",u))}}var k0=0;function VN(a,s){return a.stylesheets&&a.count===0&&Ev(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var g=setTimeout(function(){if(a.stylesheets&&Ev(a,a.stylesheets),a.unsuspend){var x=a.unsuspend;a.unsuspend=null,x()}},6e4+s);0<a.imgBytes&&k0===0&&(k0=62500*pt());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Ev(a,a.stylesheets),a.unsuspend)){var x=a.unsuspend;a.unsuspend=null,x()}},(a.imgBytes>k0?50:800)+s);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(y)}}:null}function Tv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ev(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Sv=null;function Ev(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Sv=new Map,s.forEach(GN,a),Sv=null,Tv.call(a))}function GN(a,s){if(!(s.state.loading&4)){var u=Sv.get(a);if(u)var g=u.get(null);else{u=new Map,Sv.set(a,u);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var F=y[x];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(u.set(F.dataset.precedence,F),g=F)}g&&u.set(null,g)}y=s.instance,F=y.getAttribute("data-precedence"),x=u.get(F)||g,x===g&&u.set(null,y),u.set(F,y),this.count++,g=Tv.bind(this),y.addEventListener("load",g),y.addEventListener("error",g),x?x.parentNode.insertBefore(y,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),s.state.loading|=4}}var pg={$$typeof:A,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function WN(a,s,u,g,y,x,F,ee,_e){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ia(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ia(0),this.hiddenUpdates=ia(null),this.identifierPrefix=g,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function yS(a,s,u,g,y,x,F,ee,_e,De,Je,it){return a=new WN(a,s,u,F,_e,De,Je,it,ee),s=1,x===!0&&(s|=24),x=Oi(3,null,null,s),a.current=x,x.stateNode=a,s=Ou(),s.refCount++,a.pooledCache=s,s.refCount++,x.memoizedState={element:g,isDehydrated:u,cache:s},bf(x),a}function bS(a){return a?(a=dl,a):dl}function wS(a,s,u,g,y,x){y=bS(y),g.context===null?g.context=y:g.pendingContext=y,g=no(s),g.payload={element:u},x=x===void 0?null:x,x!==null&&(g.callback=x),u=Lo(a,g,s),u!==null&&(Pi(u,a,s),_c(u,a,s))}function xS(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<s?u:s}}function A0(a,s){xS(a,s),(a=a.alternate)&&xS(a,s)}function MS(a){if(a.tag===13||a.tag===31){var s=ms(a,67108864);s!==null&&Pi(s,a,67108864),A0(a,67108864)}}function TS(a){if(a.tag===13||a.tag===31){var s=ji();s=J(s);var u=ms(a,s);u!==null&&Pi(u,a,s),A0(a,s)}}var $v=!0;function HN(a,s,u,g){var y=W.T;W.T=null;var x=ne.p;try{ne.p=2,I0(a,s,u,g)}finally{ne.p=x,W.T=y}}function KN(a,s,u,g){var y=W.T;W.T=null;var x=ne.p;try{ne.p=8,I0(a,s,u,g)}finally{ne.p=x,W.T=y}}function I0(a,s,u,g){if($v){var y=O0(g);if(y===null)Gr(a,s,g,Pv,u),ES(a,g);else if(ZN(y,a,s,u,g))g.stopPropagation();else if(ES(a,g),s&4&&-1<qN.indexOf(a)){for(;y!==null;){var x=mr(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var F=Yr(x.pendingLanes);if(F!==0){var ee=x;for(ee.pendingLanes|=2,ee.entangledLanes|=2;F;){var _e=1<<31-an(F);ee.entanglements[1]|=_e,F&=~_e}uo(x),(On&6)===0&&(nd=ot()+500,ud(0))}}break;case 31:case 13:ee=ms(x,2),ee!==null&&Pi(ee,x,2),od(),A0(x,2)}if(x=O0(g),x===null&&Gr(a,s,g,Pv,u),x===y)break;y=x}y!==null&&g.stopPropagation()}else Gr(a,s,g,null,u)}}function O0(a){return a=Pr(a),D0(a)}var Pv=null;function D0(a){if(Pv=null,a=Hn(a),a!==null){var s=o(a);if(s===null)a=null;else{var u=s.tag;if(u===13){if(a=l(s),a!==null)return a;a=null}else if(u===31){if(a=c(s),a!==null)return a;a=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return Pv=a,null}function SS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case St:return 2;case Tt:return 8;case ut:case et:return 32;case kt:return 268435456;default:return 32}default:return 32}}var z0=!1,Bc=null,Uc=null,Vc=null,gg=new Map,_g=new Map,Gc=[],qN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ES(a,s){switch(a){case"focusin":case"focusout":Bc=null;break;case"dragenter":case"dragleave":Uc=null;break;case"mouseover":case"mouseout":Vc=null;break;case"pointerover":case"pointerout":gg.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(s.pointerId)}}function vg(a,s,u,g,y,x){return a===null||a.nativeEvent!==x?(a={blockedOn:s,domEventName:u,eventSystemFlags:g,nativeEvent:x,targetContainers:[y]},s!==null&&(s=mr(s),s!==null&&MS(s)),a):(a.eventSystemFlags|=g,s=a.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),a)}function ZN(a,s,u,g,y){switch(s){case"focusin":return Bc=vg(Bc,a,s,u,g,y),!0;case"dragenter":return Uc=vg(Uc,a,s,u,g,y),!0;case"mouseover":return Vc=vg(Vc,a,s,u,g,y),!0;case"pointerover":var x=y.pointerId;return gg.set(x,vg(gg.get(x)||null,a,s,u,g,y)),!0;case"gotpointercapture":return x=y.pointerId,_g.set(x,vg(_g.get(x)||null,a,s,u,g,y)),!0}return!1}function $S(a){var s=Hn(a.target);if(s!==null){var u=o(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){a.blockedOn=s,xe(a.priority,function(){TS(u)});return}}else if(s===31){if(s=c(u),s!==null){a.blockedOn=s,xe(a.priority,function(){TS(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Cv(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var u=O0(a.nativeEvent);if(u===null){u=a.nativeEvent;var g=new u.constructor(u.type,u);tr=g,u.target.dispatchEvent(g),tr=null}else return s=mr(u),s!==null&&MS(s),a.blockedOn=u,!1;s.shift()}return!0}function PS(a,s,u){Cv(a)&&u.delete(s)}function QN(){z0=!1,Bc!==null&&Cv(Bc)&&(Bc=null),Uc!==null&&Cv(Uc)&&(Uc=null),Vc!==null&&Cv(Vc)&&(Vc=null),gg.forEach(PS),_g.forEach(PS)}function kv(a,s){a.blockedOn===s&&(a.blockedOn=null,z0||(z0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,QN)))}var Av=null;function CS(a){Av!==a&&(Av=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Av===a&&(Av=null);for(var s=0;s<a.length;s+=3){var u=a[s],g=a[s+1],y=a[s+2];if(typeof g!="function"){if(D0(g||u)===null)continue;break}var x=mr(u);x!==null&&(a.splice(s,3),s-=3,Bf(x,{pending:!0,data:y,method:u.method,action:g},g,y))}}))}function Eh(a){function s(_e){return kv(_e,a)}Bc!==null&&kv(Bc,a),Uc!==null&&kv(Uc,a),Vc!==null&&kv(Vc,a),gg.forEach(s),_g.forEach(s);for(var u=0;u<Gc.length;u++){var g=Gc[u];g.blockedOn===a&&(g.blockedOn=null)}for(;0<Gc.length&&(u=Gc[0],u.blockedOn===null);)$S(u),u.blockedOn===null&&Gc.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var y=u[g],x=u[g+1],F=y[Et]||null;if(typeof x=="function")F||CS(u);else if(F){var ee=null;if(x&&x.hasAttribute("formAction")){if(y=x,F=x[Et]||null)ee=F.formAction;else if(D0(y)!==null)continue}else ee=F.action;typeof ee=="function"?u[g+1]=ee:(u.splice(g,3),g-=3),CS(u)}}}function kS(){function a(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(F){return y=F})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function L0(a){this._internalRoot=a}Iv.prototype.render=L0.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(i(409));var u=s.current,g=ji();wS(u,g,a,s,null,null)},Iv.prototype.unmount=L0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;wS(a.current,2,null,a,null,null),od(),s[_t]=null}};function Iv(a){this._internalRoot=a}Iv.prototype.unstable_scheduleHydration=function(a){if(a){var s=fe();a={blockedOn:null,target:a,priority:s};for(var u=0;u<Gc.length&&s!==0&&s<Gc[u].priority;u++);Gc.splice(u,0,a),u===0&&$S(a)}};var AS=t.version;if(AS!=="19.2.3")throw Error(i(527,AS,"19.2.3"));ne.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=f(s),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var XN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ov=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ov.isDisabled&&Ov.supportsFiber)try{Qt=Ov.inject(XN),kn=Ov}catch{}}return bg.createRoot=function(a,s){if(!r(a))throw Error(i(299));var u=!1,g="",y=sp,x=lp,F=cp;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(F=s.onRecoverableError)),s=yS(a,1,!1,null,null,u,g,null,y,x,F,kS),a[_t]=s.current,xh(a),new L0(s)},bg.hydrateRoot=function(a,s,u){if(!r(a))throw Error(i(299));var g=!1,y="",x=sp,F=lp,ee=cp,_e=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(F=u.onCaughtError),u.onRecoverableError!==void 0&&(ee=u.onRecoverableError),u.formState!==void 0&&(_e=u.formState)),s=yS(a,1,!0,s,u??null,g,y,_e,x,F,ee,kS),s.context=bS(null),u=s.current,g=ji(),g=J(g),y=no(g),y.callback=null,Lo(u,y,g),u=g,s.current.lanes=u,ei(s,u),uo(s),a[_t]=s.current,xh(a),new Iv(s)},bg.version="19.2.3",bg}var BS;function sj(){if(BS)return N0.exports;BS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),N0.exports=oj(),N0.exports}var lj=sj();const ux=new WeakMap,cj=new WeakMap,vy={current:[]};let V0=!1,Kg=0;const jg=new Set,Dv=new Map;function WC(e){for(const t of e){if(vy.current.includes(t))continue;vy.current.push(t),t.recompute();const n=cj.get(t);if(n)for(const i of n){const r=ux.get(i);r?.length&&WC(r)}}}function uj(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function dj(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function HC(e){if(Kg>0&&!Dv.has(e)&&Dv.set(e,e.prevState),jg.add(e),!(Kg>0)&&!V0)try{for(V0=!0;jg.size>0;){const t=Array.from(jg);jg.clear();for(const n of t){const i=Dv.get(n)??n.prevState;n.prevState=i,uj(n)}for(const n of t){const i=ux.get(n);i&&(vy.current.push(n),WC(i))}for(const n of t){const i=ux.get(n);if(i)for(const r of i)dj(r)}}}finally{V0=!1,vy.current=[],Dv.clear()}}function qg(e){Kg++;try{e()}finally{if(Kg--,Kg===0){const t=jg.values().next().value;t&&HC(t)}}}function fj(e){return typeof e=="function"}class hj{constructor(t,n){this.listeners=new Set,this.subscribe=i=>{var r,o;this.listeners.add(i);const l=(o=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:o.call(r,i,this);return()=>{this.listeners.delete(i),l?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,i,r;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):fj(t)?this.state=t(this.prevState):this.state=t,(r=(i=this.options)==null?void 0:i.onUpdate)==null||r.call(i),HC(this)}}const Jc="__TSR_index",US="popstate",VS="beforeunload";function mj(e){let t=e.getLocation();const n=new Set,i=l=>{t=e.getLocation(),n.forEach(c=>c({location:t,action:l}))},r=l=>{e.notifyOnIndexChange??!0?i(l):t=e.getLocation()},o=async({task:l,navigateOpts:c,...d})=>{if(c?.ignoreBlocker??!1){l();return}const p=e.getBlockers?.()??[],h=d.type==="PUSH"||d.type==="REPLACE";if(typeof document<"u"&&p.length&&h)for(const m of p){const _=yy(d.path,d.state);if(await m.blockerFn({currentLocation:t,nextLocation:_,action:d.type})){e.onBlocked?.();return}}l()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:l=>(n.add(l),()=>{n.delete(l)}),push:(l,c,d)=>{const f=t.state[Jc];c=GS(f+1,c),o({task:()=>{e.pushState(l,c),i({type:"PUSH"})},navigateOpts:d,type:"PUSH",path:l,state:c})},replace:(l,c,d)=>{const f=t.state[Jc];c=GS(f,c),o({task:()=>{e.replaceState(l,c),i({type:"REPLACE"})},navigateOpts:d,type:"REPLACE",path:l,state:c})},go:(l,c)=>{o({task:()=>{e.go(l),r({type:"GO",index:l})},navigateOpts:c,type:"GO"})},back:l=>{o({task:()=>{e.back(l?.ignoreBlocker??!1),r({type:"BACK"})},navigateOpts:l,type:"BACK"})},forward:l=>{o({task:()=>{e.forward(l?.ignoreBlocker??!1),r({type:"FORWARD"})},navigateOpts:l,type:"FORWARD"})},canGoBack:()=>t.state[Jc]!==0,createHref:l=>e.createHref(l),block:l=>{if(!e.setBlockers)return()=>{};const c=e.getBlockers?.()??[];return e.setBlockers([...c,l]),()=>{const d=e.getBlockers?.()??[];e.setBlockers?.(d.filter(f=>f!==l))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:i}}function GS(e,t){t||(t={});const n=iM();return{...t,key:n,__TSR_key:n,[Jc]:e}}function pj(e){const t=typeof document<"u"?window:void 0,n=t.history.pushState,i=t.history.replaceState;let r=[];const o=()=>r,l=O=>r=O,c=(O=>O),d=(()=>yy(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const O=iM();t.history.replaceState({[Jc]:0,key:O,__TSR_key:O},"")}let f=d(),p,h=!1,m=!1,_=!1,v=!1;const b=()=>f;let D,T;const E=()=>{D&&(S._ignoreSubscribers=!0,(D.isPush?t.history.pushState:t.history.replaceState)(D.state,"",D.href),S._ignoreSubscribers=!1,D=void 0,T=void 0,p=void 0)},A=(O,N,j)=>{const X=c(N);T||(p=f),f=yy(N,j),D={href:X,state:j,isPush:D?.isPush||O==="push"},T||(T=Promise.resolve().then(()=>E()))},$=O=>{f=d(),S.notify({type:O})},P=async()=>{if(m){m=!1;return}const O=d(),N=O.state[Jc]-f.state[Jc],j=N===1,X=N===-1,Y=!j&&!X||h;h=!1;const K=Y?"GO":X?"BACK":"FORWARD",se=Y?{type:"GO",index:N}:{type:X?"BACK":"FORWARD"};if(_)_=!1;else{const oe=o();if(typeof document<"u"&&oe.length){for(const W of oe)if(await W.blockerFn({currentLocation:f,nextLocation:O,action:K})){m=!0,t.history.go(1),S.notify(se);return}}}f=d(),S.notify(se)},C=O=>{if(v){v=!1;return}let N=!1;const j=o();if(typeof document<"u"&&j.length)for(const X of j){const Y=X.enableBeforeUnload??!0;if(Y===!0){N=!0;break}if(typeof Y=="function"&&Y()===!0){N=!0;break}}if(N)return O.preventDefault(),O.returnValue=""},S=mj({getLocation:b,getLength:()=>t.history.length,pushState:(O,N)=>A("push",O,N),replaceState:(O,N)=>A("replace",O,N),back:O=>(O&&(_=!0),v=!0,t.history.back()),forward:O=>{O&&(_=!0),v=!0,t.history.forward()},go:O=>{h=!0,t.history.go(O)},createHref:O=>c(O),flush:E,destroy:()=>{t.history.pushState=n,t.history.replaceState=i,t.removeEventListener(VS,C,{capture:!0}),t.removeEventListener(US,P)},onBlocked:()=>{p&&f!==p&&(f=p)},getBlockers:o,setBlockers:l,notifyOnIndexChange:!1});return t.addEventListener(VS,C,{capture:!0}),t.addEventListener(US,P),t.history.pushState=function(...O){const N=n.apply(t.history,O);return S._ignoreSubscribers||$("PUSH"),N},t.history.replaceState=function(...O){const N=i.apply(t.history,O);return S._ignoreSubscribers||$("REPLACE"),N},S}function yy(e,t){const n=e.indexOf("#"),i=e.indexOf("?"),r=iM();return{href:e,pathname:e.substring(0,n>0?i>0?Math.min(n,i):n:i>0?i:e.length),hash:n>-1?e.substring(n):"",search:i>-1?e.slice(i,n===-1?void 0:n):"",state:t||{[Jc]:0,key:r,__TSR_key:r}}}function iM(){return(Math.random()+1).toString(36).substring(7)}function by(e){return e[e.length-1]}function gj(e){return typeof e=="function"}function Xc(e,t){return gj(e)?e(t):e}const _j=Object.prototype.hasOwnProperty;function ho(e,t){if(e===t)return e;const n=t,i=KS(e)&&KS(n);if(!i&&!(wy(e)&&wy(n)))return n;const r=i?e:WS(e);if(!r)return n;const o=i?n:WS(n);if(!o)return n;const l=r.length,c=o.length,d=i?new Array(c):{};let f=0;for(let p=0;p<c;p++){const h=i?p:o[p],m=e[h],_=n[h];if(m===_){d[h]=m,(i?p<l:_j.call(e,h))&&f++;continue}if(m===null||_===null||typeof m!="object"||typeof _!="object"){d[h]=_;continue}const v=ho(m,_);d[h]=v,v===m&&f++}return l===c&&f===l?e:d}function WS(e){const t=[],n=Object.getOwnPropertyNames(e);for(const r of n){if(!Object.prototype.propertyIsEnumerable.call(e,r))return!1;t.push(r)}const i=Object.getOwnPropertySymbols(e);for(const r of i){if(!Object.prototype.propertyIsEnumerable.call(e,r))return!1;t.push(r)}return t}function wy(e){if(!HS(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!HS(n)||!n.hasOwnProperty("isPrototypeOf"))}function HS(e){return Object.prototype.toString.call(e)==="[object Object]"}function KS(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Pd(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!Pd(e[i],t[i],n))return!1;return!0}if(wy(e)&&wy(t)){const i=n?.ignoreUndefined??!0;if(n?.partial){for(const l in t)if((!i||t[l]!==void 0)&&!Pd(e[l],t[l],n))return!1;return!0}let r=0;if(!i)r=Object.keys(e).length;else for(const l in e)e[l]!==void 0&&r++;let o=0;for(const l in t)if((!i||t[l]!==void 0)&&(o++,o>r||!Pd(e[l],t[l],n)))return!1;return r===o}return!1}function Nh(e){let t,n;const i=new Promise((r,o)=>{t=r,n=o});return i.status="pending",i.resolve=r=>{i.status="resolved",i.value=r,t(r),e?.(r)},i.reject=r=>{i.status="rejected",n(r)},i}function eu(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}function qS(e){try{return decodeURI(e)}catch{return e.replaceAll(/%[0-9A-F]{2}/gi,t=>{try{return decodeURI(t)}catch{return t}})}}function ZS(e,t){if(!e)return e;const n=/%25|%5C/gi;let i=0,r="",o;for(;(o=n.exec(e))!==null;)r+=qS(e.slice(i,o.index))+o[0],i=n.lastIndex;return r+qS(i?e.slice(i):e)}var vj="Invariant failed";function Fl(e,t){if(!e)throw new Error(vj)}function xy(e){const t=new Map;let n,i;const r=o=>{o.next&&(o.prev?(o.prev.next=o.next,o.next.prev=o.prev,o.next=void 0,i&&(i.next=o,o.prev=i)):(o.next.prev=void 0,n=o.next,o.next=void 0,i&&(o.prev=i,i.next=o)),i=o)};return{get(o){const l=t.get(o);if(l)return r(l),l.value},set(o,l){if(t.size>=e&&n){const d=n;t.delete(d.key),d.next&&(n=d.next,d.next.prev=void 0),d===i&&(i=void 0)}const c=t.get(o);if(c)c.value=l,r(c);else{const d={key:o,value:l,prev:i};i&&(i.next=d),i=d,n||(n=d),t.set(o,d)}},clear(){t.clear(),n=void 0,i=void 0}}}const jh=0,Id=1,Od=2,t_=3,Oh=4,yj=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,bj=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,wj=/^([^{]*)\{\$\}([^}]*)$/;function aM(e,t,n=new Uint16Array(6)){const i=e.indexOf("/",t),r=i===-1?e.length:i,o=e.substring(t,r);if(!o||!o.includes("$"))return n[0]=jh,n[1]=t,n[2]=t,n[3]=r,n[4]=r,n[5]=r,n;if(o==="$"){const f=e.length;return n[0]=Od,n[1]=t,n[2]=t,n[3]=f,n[4]=f,n[5]=f,n}if(o.charCodeAt(0)===36)return n[0]=Id,n[1]=t,n[2]=t+1,n[3]=r,n[4]=r,n[5]=r,n;const l=o.match(wj);if(l){const p=l[1].length;return n[0]=Od,n[1]=t+p,n[2]=t+p+1,n[3]=t+p+2,n[4]=t+p+3,n[5]=e.length,n}const c=o.match(bj);if(c){const f=c[1],p=c[2],h=c[3],m=f.length;return n[0]=t_,n[1]=t+m,n[2]=t+m+3,n[3]=t+m+3+p.length,n[4]=r-h.length,n[5]=r,n}const d=o.match(yj);if(d){const f=d[1],p=d[2],h=d[3],m=f.length;return n[0]=Id,n[1]=t+m,n[2]=t+m+2,n[3]=t+m+2+p.length,n[4]=r-h.length,n[5]=r,n}return n[0]=jh,n[1]=t,n[2]=t,n[3]=r,n[4]=r,n[5]=r,n}function eb(e,t,n,i,r,o,l){l?.(n);let c=i;{const d=n.fullPath??n.from,f=d.length,p=n.options?.caseSensitive??e;for(;c<f;){const m=aM(d,c,t);let _;const v=c,b=m[5];switch(c=b+1,o++,m[0]){case jh:{const T=d.substring(m[2],m[3]);if(p){const E=r.static?.get(T);if(E)_=E;else{r.static??=new Map;const A=Lh(n.fullPath??n.from);A.parent=r,A.depth=o,_=A,r.static.set(T,A)}}else{const E=T.toLowerCase(),A=r.staticInsensitive?.get(E);if(A)_=A;else{r.staticInsensitive??=new Map;const $=Lh(n.fullPath??n.from);$.parent=r,$.depth=o,_=$,r.staticInsensitive.set(E,$)}}break}case Id:{const T=d.substring(v,m[1]),E=d.substring(m[4],b),A=p&&!!(T||E),$=T?A?T:T.toLowerCase():void 0,P=E?A?E:E.toLowerCase():void 0,C=r.dynamic?.find(S=>S.caseSensitive===A&&S.prefix===$&&S.suffix===P);if(C)_=C;else{const S=W0(Id,n.fullPath??n.from,A,$,P);_=S,S.depth=o,S.parent=r,r.dynamic??=[],r.dynamic.push(S)}break}case t_:{const T=d.substring(v,m[1]),E=d.substring(m[4],b),A=p&&!!(T||E),$=T?A?T:T.toLowerCase():void 0,P=E?A?E:E.toLowerCase():void 0,C=r.optional?.find(S=>S.caseSensitive===A&&S.prefix===$&&S.suffix===P);if(C)_=C;else{const S=W0(t_,n.fullPath??n.from,A,$,P);_=S,S.parent=r,S.depth=o,r.optional??=[],r.optional.push(S)}break}case Od:{const T=d.substring(v,m[1]),E=d.substring(m[4],b),A=p&&!!(T||E),$=T?A?T:T.toLowerCase():void 0,P=E?A?E:E.toLowerCase():void 0,C=W0(Od,n.fullPath??n.from,A,$,P);_=C,C.parent=r,C.depth=o,r.wildcard??=[],r.wildcard.push(C)}}r=_}const h=(n.path||!n.children)&&!n.isRoot;if(h&&d.endsWith("/")){const m=Lh(n.fullPath??n.from);m.kind=Oh,m.parent=r,o++,m.depth=o,r.index=m,r=m}h&&!r.route&&(r.route=n,r.fullPath=n.fullPath??n.from)}if(n.children)for(const d of n.children)eb(e,t,d,c,r,o,l)}function G0(e,t){if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function xd(e){if(e.static)for(const t of e.static.values())xd(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())xd(t);if(e.dynamic?.length){e.dynamic.sort(G0);for(const t of e.dynamic)xd(t)}if(e.optional?.length){e.optional.sort(G0);for(const t of e.optional)xd(t)}if(e.wildcard?.length){e.wildcard.sort(G0);for(const t of e.wildcard)xd(t)}}function Lh(e){return{kind:jh,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null}}function W0(e,t,n,i,r){return{kind:e,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,caseSensitive:n,prefix:i,suffix:r}}function xj(e,t){const n=Lh("/"),i=new Uint16Array(6);for(const r of e)eb(!1,i,r,1,n,0);xd(n),t.masksTree=n,t.flatCache=xy(1e3)}function Mj(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const i=oM(e,t.masksTree);return t.flatCache.set(e,i),i}function Tj(e,t,n,i,r){e||="/",i||="/";const o=t?`case\0${e}`:e;let l=r.singleCache.get(o);if(!l){l=Lh("/");const c=new Uint16Array(6);eb(t,c,{from:e},1,l,0),r.singleCache.set(o,l)}return oM(i,l,n)}function Sj(e,t,n=!1){const i=n?e:`nofuzz\0${e}`,r=t.matchCache.get(i);if(r!==void 0)return r;e||="/";const o=oM(e,t.segmentTree,n);return o&&(o.branch=Cj(o.route)),t.matchCache.set(i,o),o}function Ej(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function $j(e,t=!1,n){const i=Lh(e.fullPath),r=new Uint16Array(6),o={},l={};let c=0;return eb(t,r,e,1,i,0,f=>{if(n?.(f,c),Fl(!(f.id in o),`Duplicate routes found with id: ${String(f.id)}`),o[f.id]=f,c!==0&&f.path){const p=Ej(f.fullPath);(!l[p]||f.fullPath.endsWith("/"))&&(l[p]=f)}c++}),xd(i),{processedTree:{segmentTree:i,singleCache:xy(1e3),matchCache:xy(1e3),flatCache:null,masksTree:null},routesById:o,routesByPath:l}}function oM(e,t,n=!1){const i=e.split("/"),r=Aj(e,i,t,n);if(!r)return null;const o=Pj(e,i,r);return"**"in r&&(o["**"]=r["**"]),{route:r.node.route,params:o}}function Pj(e,t,n){const i=kj(n.node);let r=null;const o={};for(let l=0,c=0,d=0;c<i.length;l++,c++,d++){const f=i[c],p=t[l],h=d;if(p&&(d+=p.length),f.kind===Id){r??=n.node.fullPath.split("/");const m=r[c],_=f.prefix?.length??0;if(m.charCodeAt(_)===123){const b=f.suffix?.length??0,D=m.substring(_+2,m.length-b-1),T=p.substring(_,p.length-b);o[D]=decodeURIComponent(T)}else{const b=m.substring(1);o[b]=decodeURIComponent(p)}}else if(f.kind===t_){if(n.skipped&1<<c){l--;continue}r??=n.node.fullPath.split("/");const m=r[c],_=f.prefix?.length??0,v=f.suffix?.length??0,b=m.substring(_+3,m.length-v-1),D=f.suffix||f.prefix?p.substring(_,p.length-v):p;D&&(o[b]=decodeURIComponent(D))}else if(f.kind===Od){const m=f,_=e.substring(h+(m.prefix?.length??0),e.length-(m.suffix?.length??0)),v=decodeURIComponent(_);o["*"]=v,o._splat=v;break}}return o}function Cj(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}function kj(e){const t=Array(e.depth+1);do t[e.depth]=e,e=e.parent;while(e);return t}function Aj(e,t,n,i){if(e==="/"&&n.index)return{node:n.index,skipped:0};const r=!by(t),o=r&&e!=="/",l=t.length-(r?1:0),c=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let d=null,f=null,p=null;for(;c.length;){const h=c.pop();let{node:m,index:_,skipped:v,depth:b,statics:D,dynamics:T,optionals:E}=h;i&&m.route&&m.kind!==Oh&&wg(f,h)&&(f=h);const A=_===l;if(A&&(m.route&&!o&&wg(p,h)&&(p=h),!m.optional&&!m.wildcard&&!m.index))continue;const $=A?void 0:t[_];let P;if(A&&m.index){const C={node:m.index,index:_,skipped:v,depth:b+1,statics:D,dynamics:T,optionals:E};if(D===l&&!T&&!E&&!v)return C;wg(p,C)&&(p=C)}if(m.wildcard&&wg(d,h))for(const C of m.wildcard){const{prefix:S,suffix:O}=C;if(!(S&&(A||!(C.caseSensitive?$:P??=$.toLowerCase()).startsWith(S)))){if(O){if(A)continue;const N=t.slice(_).join("/").slice(-O.length);if((C.caseSensitive?N:N.toLowerCase())!==O)continue}d={node:C,index:l,skipped:v,depth:b,statics:D,dynamics:T,optionals:E};break}}if(m.optional){const C=v|1<<b,S=b+1;for(let O=m.optional.length-1;O>=0;O--){const N=m.optional[O];c.push({node:N,index:_,skipped:C,depth:S,statics:D,dynamics:T,optionals:E})}if(!A)for(let O=m.optional.length-1;O>=0;O--){const N=m.optional[O],{prefix:j,suffix:X}=N;if(j||X){const Y=N.caseSensitive?$:P??=$.toLowerCase();if(j&&!Y.startsWith(j)||X&&!Y.endsWith(X))continue}c.push({node:N,index:_+1,skipped:v,depth:S,statics:D,dynamics:T,optionals:E+1})}}if(!A&&m.dynamic&&$)for(let C=m.dynamic.length-1;C>=0;C--){const S=m.dynamic[C],{prefix:O,suffix:N}=S;if(O||N){const j=S.caseSensitive?$:P??=$.toLowerCase();if(O&&!j.startsWith(O)||N&&!j.endsWith(N))continue}c.push({node:S,index:_+1,skipped:v,depth:b+1,statics:D,dynamics:T+1,optionals:E})}if(!A&&m.staticInsensitive){const C=m.staticInsensitive.get(P??=$.toLowerCase());C&&c.push({node:C,index:_+1,skipped:v,depth:b+1,statics:D+1,dynamics:T,optionals:E})}if(!A&&m.static){const C=m.static.get($);C&&c.push({node:C,index:_+1,skipped:v,depth:b+1,statics:D+1,dynamics:T,optionals:E})}}if(p&&d)return wg(d,p)?p:d;if(p)return p;if(d)return d;if(i&&f){let h=f.index;for(let _=0;_<f.index;_++)h+=t[_].length;const m=h===e.length?"/":e.slice(h);return{node:f.node,skipped:f.skipped,"**":decodeURIComponent(m)}}return null}function wg(e,t){return e?t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((t.node.kind===Oh)>(e.node.kind===Oh)||t.node.kind===Oh==(e.node.kind===Oh)&&t.depth>e.depth))):!0}function cy(e){return sM(e.filter(t=>t!==void 0).join("/"))}function sM(e){return e.replace(/\/{2,}/g,"/")}function KC(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Cd(e){const t=e.length;return t>1&&e[t-1]==="/"?e.replace(/\/{1,}$/,""):e}function qC(e){return Cd(KC(e))}function My(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function Ij(e,t,n){return My(e,n)===My(t,n)}function Oj({base:e,to:t,trailingSlash:n="never",cache:i}){const r=t.startsWith("/"),o=!r&&t===".";let l;if(i){l=r?t:o?e:e+"\0"+t;const h=i.get(l);if(h)return h}let c;if(o)c=e.split("/");else if(r)c=t.split("/");else{for(c=e.split("/");c.length>1&&by(c)==="";)c.pop();const h=t.split("/");for(let m=0,_=h.length;m<_;m++){const v=h[m];v===""?m?m===_-1&&c.push(v):c=[v]:v===".."?c.pop():v==="."||c.push(v)}}c.length>1&&(by(c)===""?n==="never"&&c.pop():n==="always"&&c.push(""));let d,f="";for(let h=0;h<c.length;h++){h>0&&(f+="/");const m=c[h];if(!m)continue;d=aM(m,0,d);const _=d[0];if(_===jh){f+=m;continue}const v=d[5],b=m.substring(0,d[1]),D=m.substring(d[4],v),T=m.substring(d[2],d[3]);_===Id?f+=b||D?`${b}{$${T}}${D}`:`$${T}`:_===Od?f+=b||D?`${b}{$}${D}`:"$":f+=`${b}{-$${T}}${D}`}f=sM(f);const p=f||"/";return l&&i&&i.set(l,p),p}function H0(e,t,n){const i=t[e];return typeof i!="string"?i:e==="_splat"?encodeURI(i):Dj(i,n)}function K0({path:e,params:t,decodeCharMap:n}){let i=!1;const r={};if(!e||e==="/")return{interpolatedPath:"/",usedParams:r,isMissingParams:i};if(!e.includes("$"))return{interpolatedPath:e,usedParams:r,isMissingParams:i};const o=e.length;let l=0,c,d="";for(;l<o;){const p=l;c=aM(e,p,c);const h=c[5];if(l=h+1,p===h)continue;const m=c[0];if(m===jh){d+="/"+e.substring(p,h);continue}if(m===Od){const _=t._splat;r._splat=_,r["*"]=_;const v=e.substring(p,c[1]),b=e.substring(c[4],h);if(!_){i=!0,(v||b)&&(d+="/"+v+b);continue}const D=H0("_splat",t,n);d+="/"+v+D+b;continue}if(m===Id){const _=e.substring(c[2],c[3]);!i&&!(_ in t)&&(i=!0),r[_]=t[_];const v=e.substring(p,c[1]),b=e.substring(c[4],h),D=H0(_,t,n)??"undefined";d+="/"+v+D+b;continue}if(m===t_){const _=e.substring(c[2],c[3]),v=t[_];if(v==null)continue;r[_]=v;const b=e.substring(p,c[1]),D=e.substring(c[4],h),T=H0(_,t,n)??"";d+="/"+b+T+D;continue}}return e.endsWith("/")&&(d+="/"),{usedParams:r,interpolatedPath:d||"/",isMissingParams:i}}function Dj(e,t){let n=encodeURIComponent(e);if(t)for(const[i,r]of t)n=n.replaceAll(i,r);return n}function Ba(e){return!!e?.isNotFound}function zj(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Ty="tsr-scroll-restoration-v1_3",Lj=(e,t)=>{let n;return(...i)=>{n||(n=setTimeout(()=>{e(...i),n=null},t))}};function Rj(){const e=zj();if(!e)return null;const t=e.getItem(Ty);let n=t?JSON.parse(t):{};return{state:n,set:i=>(n=Xc(i,n)||n,e.setItem(Ty,JSON.stringify(n)))}}const zv=Rj(),dx=e=>e.state.__TSR_key||e.href;function Fj(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}let Sy=!1;function ZC({storageKey:e,key:t,behavior:n,shouldScrollRestoration:i,scrollToTopSelectors:r,location:o}){let l;try{l=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(f){console.error(f);return}const c=t||window.history.state?.__TSR_key,d=l[c];Sy=!0;e:{if(i&&d&&Object.keys(d).length>0){for(const h in d){const m=d[h];if(h==="window")window.scrollTo({top:m.scrollY,left:m.scrollX,behavior:n});else if(h){const _=document.querySelector(h);_&&(_.scrollLeft=m.scrollX,_.scrollTop=m.scrollY)}}break e}const f=(o??window.location).hash.split("#",2)[1];if(f){const h=window.history.state?.__hashScrollIntoViewOptions??!0;if(h){const m=document.getElementById(f);m&&m.scrollIntoView(h)}break e}const p={top:0,left:0,behavior:n};if(window.scrollTo(p),r)for(const h of r){if(h==="window")continue;const m=typeof h=="function"?h():document.querySelector(h);m&&m.scrollTo(p)}}Sy=!1}function Nj(e,t){if(!zv&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!zv))return;e.isScrollRestorationSetup=!0,Sy=!1;const i=e.options.getScrollRestorationKey||dx;window.history.scrollRestoration="manual";const r=o=>{if(Sy||!e.isScrollRestoring)return;let l="";if(o.target===document||o.target===window)l="window";else{const d=o.target.getAttribute("data-scroll-restoration-id");d?l=`[data-scroll-restoration-id="${d}"]`:l=Fj(o.target)}const c=i(e.state.location);zv.set(d=>{const f=d[c]||={},p=f[l]||={};if(l==="window")p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(l){const h=document.querySelector(l);h&&(p.scrollX=h.scrollLeft||0,p.scrollY=h.scrollTop||0)}return d})};typeof document<"u"&&document.addEventListener("scroll",Lj(r,100),!0),e.subscribe("onRendered",o=>{const l=i(o.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(ZC({storageKey:Ty,key:l,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&zv.set(c=>(c[l]||={},c)))})}function jj(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}function Bj(e,t=String){const n=new URLSearchParams;for(const i in e){const r=e[i];r!==void 0&&n.set(i,t(r))}return n.toString()}function q0(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function Uj(e){const t=new URLSearchParams(e),n={};for(const[i,r]of t.entries()){const o=n[i];o==null?n[i]=q0(r):Array.isArray(o)?o.push(q0(r)):n[i]=[o,q0(r)]}return n}const Vj=Wj(JSON.parse),Gj=Hj(JSON.stringify,JSON.parse);function Wj(e){return t=>{t[0]==="?"&&(t=t.substring(1));const n=Uj(t);for(const i in n){const r=n[i];if(typeof r=="string")try{n[i]=e(r)}catch{}}return n}}function Hj(e,t){const n=typeof t=="function";function i(r){if(typeof r=="object"&&r!==null)try{return e(r)}catch{}else if(n&&typeof r=="string")try{return t(r),e(r)}catch{}return r}return r=>{const o=Bj(r,i);return o?`?${o}`:""}}const Ra="__root__";function Kj(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}function _o(e){return e instanceof Response&&!!e.options}const uy=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},tb=(e,t)=>!!(e.preload&&!e.router.state.matches.some(n=>n.id===t)),lM=(e,t,n=!0)=>{const i={...e.router.options.context??{}},r=n?t:t-1;for(let o=0;o<=r;o++){const l=e.matches[o];if(!l)continue;const c=e.router.getMatch(l.id);c&&Object.assign(i,c.__routeContext,c.__beforeLoadContext)}return i},QC=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),Fl(n.options.notFoundComponent);const i=e.matches.find(r=>r.routeId===n.id);Fl(i,"Could not find match for route: "+n.id),e.updateMatch(i.id,r=>({...r,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(t.routeId=n.parentRoute.id,QC(e,t))},Yc=(e,t,n)=>{if(!(!_o(n)&&!Ba(n))){if(_o(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const i=_o(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,r=>({...r,status:i,isFetching:!1,error:n})),Ba(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw _o(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n),n):(QC(e,n),n)}},XC=(e,t)=>{const n=e.router.getMatch(t);return!!(!e.router.isServer&&n._nonReactive.dehydrated||e.router.isServer&&n.ssr===!1)},xg=(e,t,n,i)=>{const{id:r,routeId:o}=e.matches[t],l=e.router.looseRoutesById[o];if(n instanceof Promise)throw n;n.routerCode=i,e.firstBadMatchIndex??=t,Yc(e,e.router.getMatch(r),n);try{l.options.onError?.(n)}catch(c){n=c,Yc(e,e.router.getMatch(r),n)}e.updateMatch(r,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},qj=(e,t,n,i)=>{const r=e.router.getMatch(t),o=e.matches[n-1]?.id,l=o?e.router.getMatch(o):void 0;if(e.router.isShell()){r.ssr=i.id===Ra;return}if(l?.ssr===!1){r.ssr=!1;return}const c=_=>_===!0&&l?.ssr==="data-only"?"data-only":_,d=e.router.options.defaultSsr??!0;if(i.options.ssr===void 0){r.ssr=c(d);return}if(typeof i.options.ssr!="function"){r.ssr=c(i.options.ssr);return}const{search:f,params:p}=r,h={search:Lv(f,r.searchError),params:Lv(p,r.paramsError),location:e.location,matches:e.matches.map(_=>({index:_.index,pathname:_.pathname,fullPath:_.fullPath,staticData:_.staticData,id:_.id,routeId:_.routeId,search:Lv(_.search,_.searchError),params:Lv(_.params,_.paramsError),ssr:_.ssr}))},m=i.options.ssr(h);if(eu(m))return m.then(_=>{r.ssr=c(_??d)});r.ssr=c(m??d)},YC=(e,t,n,i)=>{if(i._nonReactive.pendingTimeout!==void 0)return;const r=n.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!tb(e,t)&&(n.options.loader||n.options.beforeLoad||tk(n))&&typeof r=="number"&&r!==1/0&&(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const l=setTimeout(()=>{uy(e)},r);i._nonReactive.pendingTimeout=l}},Zj=(e,t,n)=>{const i=e.router.getMatch(t);if(!i._nonReactive.beforeLoadPromise&&!i._nonReactive.loaderPromise)return;YC(e,t,n,i);const r=()=>{const o=e.router.getMatch(t);o.preload&&(o.status==="redirected"||o.status==="notFound")&&Yc(e,o,o.error)};return i._nonReactive.beforeLoadPromise?i._nonReactive.beforeLoadPromise.then(r):r()},Qj=(e,t,n,i)=>{const r=e.router.getMatch(t),o=r._nonReactive.loadPromise;r._nonReactive.loadPromise=Nh(()=>{o?.resolve()});const{paramsError:l,searchError:c}=r;l&&xg(e,n,l,"PARSE_PARAMS"),c&&xg(e,n,c,"VALIDATE_SEARCH"),YC(e,t,i,r);const d=new AbortController,f=e.matches[n-1]?.id;(f?e.router.getMatch(f):void 0)?.context??e.router.options.context;let h=!1;const m=()=>{h||(h=!0,e.updateMatch(t,C=>({...C,isFetching:"beforeLoad",fetchCount:C.fetchCount+1,abortController:d})))},_=()=>{r._nonReactive.beforeLoadPromise?.resolve(),r._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,C=>({...C,isFetching:!1}))};if(!i.options.beforeLoad){qg(()=>{m(),_()});return}r._nonReactive.beforeLoadPromise=Nh();const v={...lM(e,n,!1),...r.__routeContext},{search:b,params:D,cause:T}=r,E=tb(e,t),A={search:b,abortController:d,params:D,preload:E,context:v,location:e.location,navigate:C=>e.router.navigate({...C,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:E?"preload":T,matches:e.matches,...e.router.options.additionalContext},$=C=>{if(C===void 0){qg(()=>{m(),_()});return}(_o(C)||Ba(C))&&(m(),xg(e,n,C,"BEFORE_LOAD")),qg(()=>{m(),e.updateMatch(t,S=>({...S,__beforeLoadContext:C})),_()})};let P;try{if(P=i.options.beforeLoad(A),eu(P))return m(),P.catch(C=>{xg(e,n,C,"BEFORE_LOAD")}).then($)}catch(C){m(),xg(e,n,C,"BEFORE_LOAD")}$(P)},Xj=(e,t)=>{const{id:n,routeId:i}=e.matches[t],r=e.router.looseRoutesById[i],o=()=>{if(e.router.isServer){const d=qj(e,n,t,r);if(eu(d))return d.then(c)}return c()},l=()=>Qj(e,n,t,r),c=()=>{if(XC(e,n))return;const d=Zj(e,n,r);return eu(d)?d.then(l):l()};return o()},Yj=(e,t,n)=>{const i=e.router.getMatch(t);if(!i||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const r={matches:e.matches,match:i,params:i.params,loaderData:i.loaderData};return Promise.all([n.options.head?.(r),n.options.scripts?.(r),n.options.headers?.(r)]).then(([o,l,c])=>{const d=o?.meta,f=o?.links,p=o?.scripts,h=o?.styles;return{meta:d,links:f,headScripts:p,headers:c,scripts:l,styles:h}})},JC=(e,t,n,i)=>{const r=e.matchPromises[n-1],{params:o,loaderDeps:l,abortController:c,cause:d}=e.router.getMatch(t),f=lM(e,n),p=tb(e,t);return{params:o,deps:l,preload:!!p,parentMatchPromise:r,abortController:c,context:f,location:e.location,navigate:h=>e.router.navigate({...h,_fromLocation:e.location}),cause:p?"preload":d,route:i,...e.router.options.additionalContext}},QS=async(e,t,n,i)=>{try{const r=e.router.getMatch(t);try{(!e.router.isServer||r.ssr===!0)&&ek(i);const o=i.options.loader?.(JC(e,t,n,i)),l=i.options.loader&&eu(o);if((l||i._lazyPromise||i._componentsPromise||i.options.head||i.options.scripts||i.options.headers||r._nonReactive.minPendingPromise)&&e.updateMatch(t,f=>({...f,isFetching:"loader"})),i.options.loader){const f=l?await o:o;Yc(e,e.router.getMatch(t),f),f!==void 0&&e.updateMatch(t,p=>({...p,loaderData:f}))}i._lazyPromise&&await i._lazyPromise;const d=r._nonReactive.minPendingPromise;d&&await d,i._componentsPromise&&await i._componentsPromise,e.updateMatch(t,f=>({...f,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(o){let l=o;const c=r._nonReactive.minPendingPromise;c&&await c,Ba(o)&&await i.options.notFoundComponent?.preload?.(),Yc(e,e.router.getMatch(t),o);try{i.options.onError?.(o)}catch(d){l=d,Yc(e,e.router.getMatch(t),d)}e.updateMatch(t,d=>({...d,error:l,status:"error",isFetching:!1}))}}catch(r){const o=e.router.getMatch(t);o&&(o._nonReactive.loaderPromise=void 0),Yc(e,o,r)}},Jj=async(e,t)=>{const{id:n,routeId:i}=e.matches[t];let r=!1,o=!1;const l=e.router.looseRoutesById[i],c=()=>{e.updateMatch(n,p=>({...p,context:lM(e,t)}))};if(XC(e,n)){if(e.router.isServer)return e.router.getMatch(n)}else{const p=e.router.getMatch(n);if(p._nonReactive.loaderPromise){if(p.status==="success"&&!e.sync&&!p.preload)return p;await p._nonReactive.loaderPromise;const h=e.router.getMatch(n),m=h._nonReactive.error||h.error;m&&Yc(e,h,m)}else{const h=Date.now()-p.updatedAt,m=tb(e,n),_=m?l.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:l.options.staleTime??e.router.options.defaultStaleTime??0,v=l.options.shouldReload,b=typeof v=="function"?v(JC(e,n,t,l)):v,D=!!m&&!e.router.state.matches.some($=>$.id===n),T=e.router.getMatch(n);T._nonReactive.loaderPromise=Nh(),D!==T.preload&&e.updateMatch(n,$=>({...$,preload:D}));const{status:E,invalid:A}=T;r=E==="success"&&(A||(b??h>_)),m&&l.options.preload===!1||(r&&!e.sync?(o=!0,(async()=>{try{await QS(e,n,t,l),c();const $=e.router.getMatch(n);$._nonReactive.loaderPromise?.resolve(),$._nonReactive.loadPromise?.resolve(),$._nonReactive.loaderPromise=void 0}catch($){_o($)&&await e.router.navigate($.options)}})()):(E!=="success"||r&&e.sync)&&await QS(e,n,t,l))}}const d=e.router.getMatch(n);o||(d._nonReactive.loaderPromise?.resolve(),d._nonReactive.loadPromise?.resolve()),clearTimeout(d._nonReactive.pendingTimeout),d._nonReactive.pendingTimeout=void 0,o||(d._nonReactive.loaderPromise=void 0),d._nonReactive.dehydrated=void 0,o||c();const f=o?d.isFetching:!1;return f!==d.isFetching||d.invalid!==!1?(e.updateMatch(n,p=>({...p,isFetching:f,invalid:!1})),e.router.getMatch(n)):d};async function XS(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(n=>n._forcePending)&&uy(t);try{for(let c=0;c<t.matches.length;c++){const d=Xj(t,c);eu(d)&&await d}const n=t.firstBadMatchIndex??t.matches.length;for(let c=0;c<n;c++)t.matchPromises.push(Jj(t,c));const r=(await Promise.allSettled(t.matchPromises)).filter(c=>c.status==="rejected").map(c=>c.reason);let o;for(const c of r){if(_o(c))throw c;!o&&Ba(c)&&(o=c)}for(const c of t.matches){const{id:d,routeId:f}=c,p=t.router.looseRoutesById[f];try{const h=Yj(t,d,p);if(h){const m=await h;t.updateMatch(d,_=>({..._,...m}))}}catch(h){console.error(`Error executing head for route ${f}:`,h)}}if(o)throw o;const l=uy(t);eu(l)&&await l}catch(n){if(Ba(n)&&!t.preload){const i=uy(t);throw eu(i)&&await i,n}if(_o(n))throw n}return t.matches}async function ek(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...i}=t.options;Object.assign(e.options,i),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const n=[];for(const i of nk){const r=e.options[i]?.preload;r&&n.push(r())}if(n.length)return Promise.all(n).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function Lv(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function tk(e){for(const t of nk)if(e.options[t]?.preload)return!0;return!1}const nk=["component","errorComponent","pendingComponent","notFoundComponent"];function eB(e){return{input:({url:t})=>{for(const n of e)t=rk(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=ik(e[n],t);return t}}}function tB(e){const t=qC(e.basepath),n=`/${t}`,i=`${n}/`,r=e.caseSensitive?n:n.toLowerCase(),o=e.caseSensitive?i:i.toLowerCase();return{input:({url:l})=>{const c=e.caseSensitive?l.pathname:l.pathname.toLowerCase();return c===r?l.pathname="/":c.startsWith(o)&&(l.pathname=l.pathname.slice(n.length)),l},output:({url:l})=>(l.pathname=cy(["/",t,l.pathname]),l)}}function rk(e,t){const n=e?.input?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function ik(e,t){const n=e?.output?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function kd(e){const t=e.resolvedLocation,n=e.location,i=t?.pathname!==n.pathname,r=t?.href!==n.href,o=t?.hash!==n.hash;return{fromLocation:t,toLocation:n,pathChanged:i,hrefChanged:r,hashChanged:o}}class nB{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options,r=this.basepath??i?.basepath??"/",o=this.basepath===void 0,l=i?.rewrite;this.options={...i,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(m=>[encodeURIComponent(m),m])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=pj())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new hj(iB(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(m=>!["redirected"].includes(m.status))}}}),Nj(this));let c=!1;const d=this.options.basepath??"/",f=this.options.rewrite;if(o||r!==d||l!==f){this.basepath=d;const m=[];qC(d)!==""&&m.push(tB({basepath:d})),f&&m.push(f),this.rewrite=m.length===0?void 0:m.length===1?m[0]:eB(m),this.history&&this.updateLatestLocation(),c=!0}c&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:i,processedTree:r}=$j(this.routeTree,this.options.caseSensitive,(l,c)=>{l.init({originalIndex:c})});this.options.routeMasks&&xj(this.options.routeMasks,r),this.routesById=n,this.routesByPath=i,this.processedTree=r;const o=this.options.notFoundRoute;o&&(o.init({originalIndex:99999999999}),this.routesById[o.id]=o)},this.subscribe=(n,i)=>{const r={eventType:n,fn:i};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=n=>{this.subscribers.forEach(i=>{i.eventType===n.type&&i.fn(n)})},this.parseLocation=(n,i)=>{const r=({href:d,state:f})=>{const p=new URL(d,this.origin),h=rk(this.rewrite,p),m=this.options.parseSearch(h.search),_=this.options.stringifySearch(m);return h.search=_,{href:h.href.replace(h.origin,""),publicHref:d,url:h,pathname:ZS(h.pathname),searchStr:_,search:ho(i?.search,m),hash:h.hash.split("#").reverse()[0]??"",state:ho(i?.state,f)}},o=r(n),{__tempLocation:l,__tempKey:c}=o.state;if(l&&(!c||c===this.tempLocationKey)){const d=r(l);return d.state.key=o.state.key,d.state.__TSR_key=o.state.__TSR_key,delete d.state.__tempLocation,{...d,maskedLocation:o}}return o},this.resolvePathCache=xy(1e3),this.resolvePathWithBase=(n,i)=>Oj({base:n,to:sM(i),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,i,r)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:i},r):this.matchRoutesInternal(n,i),this.getMatchedRoutes=n=>aB({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const i=this.getMatch(n);i&&(i.abortController.abort(),clearTimeout(i._nonReactive.pendingTimeout),i._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(o=>o.status==="pending"),i=this.state.matches.filter(o=>o.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...i]).forEach(o=>{this.cancelMatch(o.id)})},this.buildLocation=n=>{const i=(o={})=>{const l=o._fromLocation||this.pendingBuiltLocation||this.latestLocation,c=this.matchRoutes(l,{_buildLocation:!0}),d=by(c);o.from;const f=o.unsafeRelative==="path"?l.pathname:o.from??d.fullPath,p=this.resolvePathWithBase(f,"."),h=d.search,m={...d.params},_=o.to?this.resolvePathWithBase(p,`${o.to}`):this.resolvePathWithBase(p,"."),v=o.params===!1||o.params===null?{}:(o.params??!0)===!0?m:Object.assign(m,Xc(o.params,m)),b=K0({path:_,params:v}).interpolatedPath,D=this.matchRoutes(b,void 0,{_buildLocation:!0}).map(j=>this.looseRoutesById[j.routeId]);if(Object.keys(v).length>0)for(const j of D){const X=j.options.params?.stringify??j.options.stringifyParams;X&&Object.assign(v,X(v))}const T=n.leaveParams?_:ZS(K0({path:_,params:v,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let E=h;if(n._includeValidateSearch&&this.options.search?.strict){const j={};D.forEach(X=>{if(X.options.validateSearch)try{Object.assign(j,fx(X.options.validateSearch,{...j,...E}))}catch{}}),E=j}E=oB({search:E,dest:o,destRoutes:D,_includeValidateSearch:n._includeValidateSearch}),E=ho(h,E);const A=this.options.stringifySearch(E),$=o.hash===!0?l.hash:o.hash?Xc(o.hash,l.hash):void 0,P=$?`#${$}`:"";let C=o.state===!0?l.state:o.state?Xc(o.state,l.state):{};C=ho(l.state,C);const S=`${T}${A}${P}`,O=new URL(S,this.origin),N=ik(this.rewrite,O);return{publicHref:N.pathname+N.search+N.hash,href:S,url:N,pathname:T,search:E,searchStr:A,state:C,hash:$??"",unmaskOnReload:o.unmaskOnReload}},r=(o={},l)=>{const c=i(o);let d=l?i(l):void 0;if(!d){const f={};if(this.options.routeMasks){const p=Mj(c.pathname,this.processedTree);if(p){Object.assign(f,p.params);const{from:h,params:m,..._}=p.route,v=m===!1||m===null?{}:(m??!0)===!0?f:Object.assign(f,Xc(m,f));l={from:n.from,..._,params:v},d=i(l)}}}return d&&(c.maskedLocation=d),c};return n.mask?r(n,{from:n.from,...n.mask}):r(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:i,...r})=>{const o=()=>{const d=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];d.forEach(p=>{r.state[p]=this.latestLocation.state[p]});const f=Pd(r.state,this.latestLocation.state);return d.forEach(p=>{delete r.state[p]}),f},l=Cd(this.latestLocation.href)===Cd(r.href),c=this.commitLocationPromise;if(this.commitLocationPromise=Nh(()=>{c?.resolve()}),l&&o())this.load();else{let{maskedLocation:d,hashScrollIntoView:f,url:p,...h}=r;d&&(h={...d,state:{...d.state,__tempKey:void 0,__tempLocation:{...h,search:h.searchStr,state:{...h.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(h.unmaskOnReload??this.options.unmaskOnReload??!1)&&(h.state.__tempKey=this.tempLocationKey)),h.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[r.replace?"replace":"push"](h.publicHref,h.state,{ignoreBlocker:i})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:i,hashScrollIntoView:r,viewTransition:o,ignoreBlocker:l,href:c,...d}={})=>{if(c){const h=this.history.location.state.__TSR_index,m=yy(c,{__TSR_index:n?h:h+1});d.to=m.pathname,d.search=this.options.parseSearch(m.search),d.hash=m.hash.slice(1)}const f=this.buildLocation({...d,_includeValidateSearch:!0});this.pendingBuiltLocation=f;const p=this.commitLocation({...f,viewTransition:o,replace:n,resetScroll:i,hashScrollIntoView:r,ignoreBlocker:l});return Promise.resolve().then(()=>{this.pendingBuiltLocation===f&&(this.pendingBuiltLocation=void 0)}),p},this.navigate=async({to:n,reloadDocument:i,href:r,publicHref:o,...l})=>{let c=!1;if(r)try{new URL(`${r}`),c=!0}catch{}if(c&&!i&&(i=!0),i){if(!r||!o&&!c){const f=this.buildLocation({to:n,...l});r=r??f.url.href,o=o??f.url.href}const d=!c&&o?o:r;if(!l.ignoreBlocker){const p=this.history.getBlockers?.()??[];for(const h of p)if(h?.blockerFn&&await h.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return l.replace?window.location.replace(d):window.location.href=d,Promise.resolve()}return this.buildAndCommitLocation({...l,href:r,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const i=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==i.publicHref||i.url.origin!==this.origin){const r=this.getParsedLocationHref(i);throw Kj({href:r})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(i=>({...i,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:i.cachedMatches.filter(r=>!n.some(o=>o.id===r.id))}))},this.load=async n=>{let i,r,o;for(o=new Promise(c=>{this.startTransition(async()=>{try{this.beforeLoad();const d=this.latestLocation,f=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...kd({resolvedLocation:f,location:d})}),this.emit({type:"onBeforeLoad",...kd({resolvedLocation:f,location:d})}),await XS({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:d,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let p=[],h=[],m=[];qg(()=>{this.__store.setState(_=>{const v=_.matches,b=_.pendingMatches||_.matches;return p=v.filter(D=>!b.some(T=>T.id===D.id)),h=b.filter(D=>!v.some(T=>T.id===D.id)),m=b.filter(D=>v.some(T=>T.id===D.id)),{..._,isLoading:!1,loadedAt:Date.now(),matches:b,pendingMatches:void 0,cachedMatches:[..._.cachedMatches,...p.filter(D=>D.status!=="error"&&D.status!=="notFound")]}}),this.clearExpiredCache()}),[[p,"onLeave"],[h,"onEnter"],[m,"onStay"]].forEach(([_,v])=>{_.forEach(b=>{this.looseRoutesById[b.routeId].options[v]?.(b)})})})})}})}catch(d){_o(d)?(i=d,this.isServer||this.navigate({...i.options,replace:!0,ignoreBlocker:!0})):Ba(d)&&(r=d),this.__store.setState(f=>({...f,statusCode:i?i.status:r?404:f.matches.some(p=>p.status==="error")?500:200,redirect:i}))}this.latestLoadPromise===o&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=o,await o;this.latestLoadPromise&&o!==this.latestLoadPromise;)await this.latestLoadPromise;let l;this.hasNotFoundMatch()?l=404:this.__store.state.matches.some(c=>c.status==="error")&&(l=500),l!==void 0&&this.__store.setState(c=>({...c,statusCode:l}))},this.startViewTransition=n=>{const i=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,i&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let r;if(typeof i=="object"&&this.isViewTransitionTypesSupported){const o=this.latestLocation,l=this.state.resolvedLocation,c=typeof i.types=="function"?i.types(kd({resolvedLocation:l,location:o})):i.types;if(c===!1){n();return}r={update:n,types:c}}else r=n;document.startViewTransition(r)}else n()},this.updateMatch=(n,i)=>{this.startTransition(()=>{const r=this.state.pendingMatches?.some(o=>o.id===n)?"pendingMatches":this.state.matches.some(o=>o.id===n)?"matches":this.state.cachedMatches.some(o=>o.id===n)?"cachedMatches":"";r&&this.__store.setState(o=>({...o,[r]:o[r]?.map(l=>l.id===n?i(l):l)}))})},this.getMatch=n=>{const i=r=>r.id===n;return this.state.cachedMatches.find(i)??this.state.pendingMatches?.find(i)??this.state.matches.find(i)},this.invalidate=n=>{const i=r=>n?.filter?.(r)??!0?{...r,invalid:!0,...n?.forcePending||r.status==="error"||r.status==="notFound"?{status:"pending",error:void 0}:void 0}:r;return this.__store.setState(r=>({...r,matches:r.matches.map(i),cachedMatches:r.cachedMatches.map(i),pendingMatches:r.pendingMatches?.map(i)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let i=n.url.href;return this.origin&&n.url.origin===this.origin&&(i=i.replace(this.origin,"")||"/"),i},this.resolveRedirect=n=>{if(!n.options.href){const i=this.buildLocation(n.options),r=this.getParsedLocationHref(i);n.options.href=i.href,n.headers.set("Location",r)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const i=n?.filter;i!==void 0?this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(o=>!i(o))})):this.__store.setState(r=>({...r,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=i=>{const r=this.looseRoutesById[i.routeId];if(!r.options.loader)return!0;const o=(i.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??300*1e3;return i.status==="error"?!0:Date.now()-i.updatedAt>=o};this.clearCache({filter:n})},this.loadRouteChunk=ek,this.preloadRoute=async n=>{const i=this.buildLocation(n);let r=this.matchRoutes(i,{throwOnError:!0,preload:!0,dest:n});const o=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),l=new Set([...o,...this.state.cachedMatches.map(c=>c.id)]);qg(()=>{r.forEach(c=>{l.has(c.id)||this.__store.setState(d=>({...d,cachedMatches:[...d.cachedMatches,c]}))})});try{return r=await XS({router:this,matches:r,location:i,preload:!0,updateMatch:(c,d)=>{o.has(c)?r=r.map(f=>f.id===c?d(f):f):this.updateMatch(c,d)}}),r}catch(c){if(_o(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:i});Ba(c)||console.error(c);return}},this.matchRoute=(n,i)=>{const r={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},o=this.buildLocation(r);if(i?.pending&&this.state.status!=="pending")return!1;const c=(i?.pending===void 0?!this.state.isLoading:i.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,d=Tj(o.pathname,i?.caseSensitive??!1,i?.fuzzy??!1,c.pathname,this.processedTree);return!d||n.params&&!Pd(d.params,n.params,{partial:!0})?!1:i?.includeSearch??!0?Pd(c.search,o.search,{partial:!0})?d.params:!1:d.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??Gj,parseSearch:t.parseSearch??Vj}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,n){const i=this.getMatchedRoutes(t.pathname),{foundRoute:r,routeParams:o}=i;let{matchedRoutes:l}=i,c=!1;(r?r.path!=="/"&&o["**"]:Cd(t.pathname))&&(this.options.notFoundRoute?l=[...l,this.options.notFoundRoute]:c=!0);const d=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let h=l.length-1;h>=0;h--){const m=l[h];if(m.children)return m.id}return Ra}})(),f=[],p=h=>h?.id?h.context??this.options.context??void 0:this.options.context??void 0;return l.forEach((h,m)=>{const _=f[m-1],[v,b,D]=(()=>{const K=_?.search??t.search,se=_?._strictSearch??void 0;try{const oe=fx(h.options.validateSearch,{...K})??void 0;return[{...K,...oe},{...se,...oe},void 0]}catch(oe){let W=oe;if(oe instanceof Ey||(W=new Ey(oe.message,{cause:oe})),n?.throwOnError)throw W;return[K,{},W]}})(),T=h.options.loaderDeps?.({search:v})??"",E=T?JSON.stringify(T):"",{interpolatedPath:A,usedParams:$}=K0({path:h.fullPath,params:o,decodeCharMap:this.pathParamsDecodeCharMap}),P=h.id+A+E,C=this.getMatch(P),S=this.state.matches.find(K=>K.routeId===h.id),O=C?._strictParams??$;let N;if(!C){const K=h.options.params?.parse??h.options.parseParams;if(K)try{Object.assign(O,K(O))}catch(se){if(Ba(se)||_o(se)?N=se:N=new rB(se.message,{cause:se}),n?.throwOnError)throw N}}Object.assign(o,O);const j=S?"stay":"enter";let X;if(C)X={...C,cause:j,params:S?ho(S.params,o):o,_strictParams:O,search:ho(S?S.search:C.search,v),_strictSearch:b};else{const K=h.options.loader||h.options.beforeLoad||h.lazyFn||tk(h)?"pending":"success";X={id:P,ssr:this.isServer?void 0:h.options.ssr,index:m,routeId:h.id,params:S?ho(S.params,o):o,_strictParams:O,pathname:A,updatedAt:Date.now(),search:S?ho(S.search,v):v,_strictSearch:b,searchError:void 0,status:K,isFetching:!1,error:void 0,paramsError:N,__routeContext:void 0,_nonReactive:{loadPromise:Nh()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:j,loaderDeps:S?ho(S.loaderDeps,T):T,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:h.options.staticData||{},fullPath:h.fullPath}}n?.preload||(X.globalNotFound=d===h.id),X.searchError=D;const Y=p(_);X.context={...Y,...X.__routeContext,...X.__beforeLoadContext},f.push(X)}),f.forEach((h,m)=>{const _=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const b=f[m-1],D=p(b);if(_.options.context){const T={deps:h.loaderDeps,params:h.params,context:D??{},location:t,navigate:E=>this.navigate({...E,_fromLocation:t}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:f};h.__routeContext=_.options.context(T)??void 0}h.context={...D,...h.__routeContext,...h.__beforeLoadContext}}}),f}}class Ey extends Error{}class rB extends Error{}function iB(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function fx(e,t){if(e==null)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new Ey("Async validation not supported");if(n.issues)throw new Ey(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function aB({pathname:e,routesById:t,processedTree:n}){const i={},r=Cd(e);let o;const l=Sj(r,n,!0);return l&&(o=l.route,Object.assign(i,l.params)),{matchedRoutes:l?.branch||[t[Ra]],routeParams:i,foundRoute:o}}function oB({search:e,dest:t,destRoutes:n,_includeValidateSearch:i}){const r=n.reduce((c,d)=>{const f=[];if("search"in d.options)d.options.search?.middlewares&&f.push(...d.options.search.middlewares);else if(d.options.preSearchFilters||d.options.postSearchFilters){const p=({search:h,next:m})=>{let _=h;"preSearchFilters"in d.options&&d.options.preSearchFilters&&(_=d.options.preSearchFilters.reduce((b,D)=>D(b),h));const v=m(_);return"postSearchFilters"in d.options&&d.options.postSearchFilters?d.options.postSearchFilters.reduce((b,D)=>D(b),v):v};f.push(p)}if(i&&d.options.validateSearch){const p=({search:h,next:m})=>{const _=m(h);try{return{..._,...fx(d.options.validateSearch,_)??void 0}}catch{return _}};f.push(p)}return c.concat(f)},[])??[],o=({search:c})=>t.search?t.search===!0?c:Xc(t.search,c):{};r.push(o);const l=(c,d)=>{if(c>=r.length)return d;const f=r[c];return f({search:d,next:h=>l(c+1,h)})};return l(0,e)}const sB="Error preloading route! ";class ak{constructor(t){if(this.init=n=>{this.originalIndex=n.originalIndex;const i=this.options,r=!i?.path&&!i?.id;this.parentRoute=this.options.getParentRoute?.(),r?this._path=Ra:this.parentRoute||Fl(!1);let o=r?Ra:i?.path;o&&o!=="/"&&(o=KC(o));const l=i?.id||o;let c=r?Ra:cy([this.parentRoute.id===Ra?"":this.parentRoute.id,l]);o===Ra&&(o="/"),c!==Ra&&(c=cy(["/",c]));const d=c===Ra?"/":cy([this.parentRoute.fullPath,o]);this._path=o,this._id=c,this._fullPath=d,this._to=d},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class lB extends ak{constructor(t){super(t)}}function cM(e){const t=e.errorComponent??nb;return Te.jsx(cB,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:n,reset:i})=>n?Q.createElement(t,{error:n,reset:i}):e.children})}class cB extends Q.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,n){this.props.onCatch&&this.props.onCatch(t,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function nb({error:e}){const[t,n]=Q.useState(!1);return Te.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[Te.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[Te.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),Te.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(i=>!i),children:t?"Hide Error":"Show Error"})]}),Te.jsx("div",{style:{height:".25rem"}}),t?Te.jsx("div",{children:Te.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?Te.jsx("code",{children:e.message}):null})}):null]})}function uB({children:e,fallback:t=null}){return dB()?Te.jsx(Fh.Fragment,{children:e}):Te.jsx(Fh.Fragment,{children:t})}function dB(){return Fh.useSyncExternalStore(fB,()=>!0,()=>!1)}function fB(){return()=>{}}var Z0={exports:{}},Q0={},X0={exports:{}},Y0={};var YS;function hB(){if(YS)return Y0;YS=1;var e=p_();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,r=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function c(h,m){var _=m(),v=i({inst:{value:_,getSnapshot:m}}),b=v[0].inst,D=v[1];return o(function(){b.value=_,b.getSnapshot=m,d(b)&&D({inst:b})},[h,_,m]),r(function(){return d(b)&&D({inst:b}),h(function(){d(b)&&D({inst:b})})},[h]),l(_),_}function d(h){var m=h.getSnapshot;h=h.value;try{var _=m();return!n(h,_)}catch{return!0}}function f(h,m){return m()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return Y0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Y0}var JS;function mB(){return JS||(JS=1,X0.exports=hB()),X0.exports}var eE;function pB(){if(eE)return Q0;eE=1;var e=p_(),t=mB();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,c=e.useMemo,d=e.useDebugValue;return Q0.useSyncExternalStoreWithSelector=function(f,p,h,m,_){var v=o(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=c(function(){function T(C){if(!E){if(E=!0,A=C,C=m(C),_!==void 0&&b.hasValue){var S=b.value;if(_(S,C))return $=S}return $=C}if(S=$,i(A,C))return S;var O=m(C);return _!==void 0&&_(S,O)?(A=C,S):(A=C,$=O)}var E=!1,A,$,P=h===void 0?null:h;return[function(){return T(p())},P===null?void 0:function(){return T(P())}]},[p,h,m,_]);var D=r(f,v[0],v[1]);return l(function(){b.hasValue=!0,b.value=D},[D]),d(D),D},Q0}var tE;function gB(){return tE||(tE=1,Z0.exports=pB()),Z0.exports}var _B=gB();function vB(e,t=i=>i,n={}){const i=n.equal??yB;return _B.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,i)}function yB(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,r]of e)if(!t.has(i)||!Object.is(r,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=nE(e);if(n.length!==nE(t).length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Object.is(e[n[i]],t[n[i]]))return!1;return!0}function nE(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const J0=Q.createContext(null);function ok(){return typeof document>"u"?J0:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=J0,J0)}function Ga(e){const t=Q.useContext(ok());return e?.warn,t}function ma(e){const t=Ga({warn:e?.router===void 0}),n=e?.router||t,i=Q.useRef(void 0);return vB(n.__store,r=>{if(e?.select){if(e.structuralSharing??n.options.defaultStructuralSharing){const o=ho(i.current,e.select(r));return i.current=o,o}return e.select(r)}return r})}const rb=Q.createContext(void 0),bB=Q.createContext(void 0);function Vs(e){const t=Q.useContext(e.from?bB:rb);return ma({select:i=>{const r=i.matches.find(o=>e.from?e.from===o.routeId:o.id===t);if(Fl(!((e.shouldThrow??!0)&&!r),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),r!==void 0)return e.select?e.select(r):r},structuralSharing:e.structuralSharing})}function uM(e){return Vs({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function dM(e){const{select:t,...n}=e;return Vs({...n,select:i=>t?t(i.loaderDeps):i.loaderDeps})}function fM(e){return Vs({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const n=e.strict===!1?t.params:t._strictParams;return e.select?e.select(n):n}})}function hM(e){return Vs({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}const Rv=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function ew(e){const t=Q.useRef({value:e,prev:null}),n=t.current.value;return e!==n&&(t.current={value:e,prev:n}),t.current.prev}function wB(e,t,n={},i={}){Q.useEffect(()=>{if(!e.current||i.disabled||typeof IntersectionObserver!="function")return;const r=new IntersectionObserver(([o])=>{t(o)},n);return r.observe(e.current),()=>{r.disconnect()}},[t,n,i.disabled,e])}function xB(e){const t=Q.useRef(null);return Q.useImperativeHandle(e,()=>t.current,[]),t}function ib(e){const t=Ga();return Q.useCallback(n=>t.navigate({...n,from:n.from??e?.from}),[e?.from,t])}var ab=GC();const MB=rM(ab);function TB(e,t){const n=Ga(),[i,r]=Q.useState(!1),o=Q.useRef(!1),l=xB(t),{activeProps:c,inactiveProps:d,activeOptions:f,to:p,preload:h,preloadDelay:m,hashScrollIntoView:_,replace:v,startTransition:b,resetScroll:D,viewTransition:T,children:E,target:A,disabled:$,style:P,className:C,onClick:S,onFocus:O,onMouseEnter:N,onMouseLeave:j,onTouchStart:X,ignoreBlocker:Y,params:K,search:se,hash:oe,state:W,mask:ne,reloadDocument:ae,unsafeRelative:ge,from:ye,_fromLocation:G,...H}=e,V=ma({select:Fe=>Fe.location.search,structuralSharing:!0}),U=e.from,ce=Q.useMemo(()=>({...e,from:U}),[n,V,U,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),ve=Q.useMemo(()=>n.buildLocation({...ce}),[n,ce]),ke=Q.useMemo(()=>{if($)return;let Fe=ve.maskedLocation?ve.maskedLocation.url.href:ve.url.href,ot=!1;return n.origin&&(Fe.startsWith(n.origin)?Fe=n.history.createHref(Fe.replace(n.origin,""))||"/":ot=!0),{href:Fe,external:ot}},[$,ve.maskedLocation,ve.url,n.origin,n.history]),Le=Q.useMemo(()=>{if(ke?.external)return ke.href;try{return new URL(p),p}catch{}},[p,ke]),Xe=e.reloadDocument||Le?!1:h??n.options.defaultPreload,Be=m??n.options.defaultPreloadDelay??0,ue=ma({select:Fe=>{if(Le)return!1;if(f?.exact){if(!Ij(Fe.location.pathname,ve.pathname,n.basepath))return!1}else{const ot=My(Fe.location.pathname,n.basepath),rt=My(ve.pathname,n.basepath);if(!(ot.startsWith(rt)&&(ot.length===rt.length||ot[rt.length]==="/")))return!1}return(f?.includeSearch??!0)&&!Pd(Fe.location.search,ve.search,{partial:!f?.exact,ignoreUndefined:!f?.explicitUndefined})?!1:f?.includeHash?Fe.location.hash===ve.hash:!0}}),Z=Q.useCallback(()=>{n.preloadRoute({...ce}).catch(Fe=>{console.warn(Fe),console.warn(sB)})},[n,ce]),Se=Q.useCallback(Fe=>{Fe?.isIntersecting&&Z()},[Z]);wB(l,Se,CB,{disabled:!!$||Xe!=="viewport"}),Q.useEffect(()=>{o.current||!$&&Xe==="render"&&(Z(),o.current=!0)},[$,Z,Xe]);const Re=Fe=>{const ot=Fe.currentTarget.getAttribute("target"),rt=A!==void 0?A:ot;if(!$&&!kB(Fe)&&!Fe.defaultPrevented&&(!rt||rt==="_self")&&Fe.button===0){Fe.preventDefault(),ab.flushSync(()=>{r(!0)});const St=n.subscribe("onResolved",()=>{St(),r(!1)});n.navigate({...ce,replace:v,resetScroll:D,hashScrollIntoView:_,startTransition:b,viewTransition:T,ignoreBlocker:Y})}};if(Le)return{...H,ref:l,href:Le,...E&&{children:E},...A&&{target:A},...$&&{disabled:$},...P&&{style:P},...C&&{className:C},...S&&{onClick:S},...O&&{onFocus:O},...N&&{onMouseEnter:N},...j&&{onMouseLeave:j},...X&&{onTouchStart:X}};const Ve=Fe=>{$||Xe&&Z()},Ge=Ve,Ke=Fe=>{if(!($||!Xe))if(!Be)Z();else{const ot=Fe.target;if(Mg.has(ot))return;const rt=setTimeout(()=>{Mg.delete(ot),Z()},Be);Mg.set(ot,rt)}},Ie=Fe=>{if($||!Xe||!Be)return;const ot=Fe.target,rt=Mg.get(ot);rt&&(clearTimeout(rt),Mg.delete(ot))},nt=ue?Xc(c,{})??SB:tw,Ae=ue?tw:Xc(d,{})??tw,We=[C,nt.className,Ae.className].filter(Boolean).join(" "),ft=(P||nt.style||Ae.style)&&{...P,...nt.style,...Ae.style};return{...H,...nt,...Ae,href:ke?.href,ref:l,onClick:Tg([S,Re]),onFocus:Tg([O,Ve]),onMouseEnter:Tg([N,Ke]),onMouseLeave:Tg([j,Ie]),onTouchStart:Tg([X,Ge]),disabled:!!$,target:A,...ft&&{style:ft},...We&&{className:We},...$&&EB,...ue&&$B,...i&&PB}}const tw={},SB={className:"active"},EB={role:"link","aria-disabled":!0},$B={"data-status":"active","aria-current":"page"},PB={"data-transitioning":"transitioning"},Mg=new WeakMap,CB={rootMargin:"100px"},Tg=e=>t=>{for(const n of e)if(n){if(t.defaultPrevented)return;n(t)}},sk=Q.forwardRef((e,t)=>{const{_asChild:n,...i}=e,{type:r,ref:o,...l}=TB(i,t),c=typeof i.children=="function"?i.children({isActive:l["data-status"]==="active"}):i.children;return n===void 0&&delete l.disabled,Q.createElement(n||"a",{...l,ref:o},c)});function kB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}class AB extends ak{constructor(t){super(t),this.useMatch=n=>Vs({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Vs({...n,from:this.id,select:i=>n?.select?n.select(i.context):i.context}),this.useSearch=n=>hM({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>fM({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>dM({...n,from:this.id}),this.useLoaderData=n=>uM({...n,from:this.id}),this.useNavigate=()=>ib({from:this.fullPath}),this.Link=Fh.forwardRef((n,i)=>Te.jsx(sk,{ref:i,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function lk(e){return new AB(e)}class IB extends lB{constructor(t){super(t),this.useMatch=n=>Vs({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Vs({...n,from:this.id,select:i=>n?.select?n.select(i.context):i.context}),this.useSearch=n=>hM({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>fM({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>dM({...n,from:this.id}),this.useLoaderData=n=>uM({...n,from:this.id}),this.useNavigate=()=>ib({from:this.fullPath}),this.Link=Fh.forwardRef((n,i)=>Te.jsx(sk,{ref:i,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function OB(e){return new IB(e)}function rE(e){return typeof e=="object"?new iE(e,{silent:!0}).createRoute(e):new iE(e,{silent:!0}).createRoute}class iE{constructor(t,n){this.path=t,this.createRoute=i=>{this.silent;const r=lk(i);return r.isRoot=!1,r},this.silent=n?.silent}}class aE{constructor(t){this.useMatch=n=>Vs({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Vs({from:this.options.id,select:i=>n?.select?n.select(i.context):i.context}),this.useSearch=n=>hM({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>fM({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>dM({...n,from:this.options.id}),this.useLoaderData=n=>uM({...n,from:this.options.id}),this.useNavigate=()=>{const n=Ga();return ib({from:n.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function oE(e){return typeof e=="object"?new aE(e):t=>new aE({id:e,...t})}function DB(){const e=Ga(),t=Q.useRef({router:e,mounted:!1}),[n,i]=Q.useState(!1),{hasPendingMatches:r,isLoading:o}=ma({select:h=>({isLoading:h.isLoading,hasPendingMatches:h.matches.some(m=>m.status==="pending")}),structuralSharing:!0}),l=ew(o),c=o||n||r,d=ew(c),f=o||r,p=ew(f);return e.startTransition=h=>{i(!0),Q.startTransition(()=>{h(),i(!1)})},Q.useEffect(()=>{const h=e.history.subscribe(e.load),m=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Cd(e.latestLocation.publicHref)!==Cd(m.publicHref)&&e.commitLocation({...m,replace:!0}),()=>{h()}},[e,e.history]),Rv(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(m){console.error(m)}})()},[e]),Rv(()=>{l&&!o&&e.emit({type:"onLoad",...kd(e.state)})},[l,e,o]),Rv(()=>{p&&!f&&e.emit({type:"onBeforeRouteMount",...kd(e.state)})},[f,p,e]),Rv(()=>{if(d&&!c){const h=kd(e.state);e.emit({type:"onResolved",...h}),e.__store.setState(m=>({...m,status:"idle",resolvedLocation:m.location})),h.hrefChanged&&jj(e)}},[c,d,e]),null}function zB(e){const t=ma({select:n=>`not-found-${n.location.pathname}-${n.status}`});return Te.jsx(cM,{getResetKey:()=>t,onCatch:(n,i)=>{if(Ba(n))e.onCatch?.(n,i);else throw n},errorComponent:({error:n})=>{if(Ba(n))return e.fallback?.(n);throw n},children:e.children})}function LB(){return Te.jsx("p",{children:"Not Found"})}function kh(e){return Te.jsx(Te.Fragment,{children:e.children})}function ck(e,t,n){return t.options.notFoundComponent?Te.jsx(t.options.notFoundComponent,{...n}):e.options.defaultNotFoundComponent?Te.jsx(e.options.defaultNotFoundComponent,{...n}):Te.jsx(LB,{})}function RB({children:e}){const t=Ga();return t.isServer?Te.jsx("script",{nonce:t.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:e+";document.currentScript.remove()"}}):null}function FB(){const e=Ga();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const n=(e.options.getScrollRestorationKey||dx)(e.latestLocation),i=n!==dx(e.latestLocation)?n:void 0,r={storageKey:Ty,shouldScrollRestoration:!0};return i&&(r.key=i),Te.jsx(RB,{children:`(${ZC.toString()})(${JSON.stringify(r)})`})}const uk=Q.memo(function({matchId:t}){const n=Ga(),i=ma({select:T=>{const E=T.matches.find(A=>A.id===t);return Fl(E),{routeId:E.routeId,ssr:E.ssr,_displayPending:E._displayPending}},structuralSharing:!0}),r=n.routesById[i.routeId],o=r.options.pendingComponent??n.options.defaultPendingComponent,l=o?Te.jsx(o,{}):null,c=r.options.errorComponent??n.options.defaultErrorComponent,d=r.options.onCatch??n.options.defaultOnCatch,f=r.isRoot?r.options.notFoundComponent??n.options.notFoundRoute?.options.component:r.options.notFoundComponent,p=i.ssr===!1||i.ssr==="data-only",h=(!r.isRoot||r.options.wrapInSuspense||p)&&(r.options.wrapInSuspense??o??(r.options.errorComponent?.preload||p))?Q.Suspense:kh,m=c?cM:kh,_=f?zB:kh,v=ma({select:T=>T.loadedAt}),b=ma({select:T=>{const E=T.matches.findIndex(A=>A.id===t);return T.matches[E-1]?.routeId}}),D=r.isRoot?r.options.shellComponent??kh:kh;return Te.jsxs(D,{children:[Te.jsx(rb.Provider,{value:t,children:Te.jsx(h,{fallback:l,children:Te.jsx(m,{getResetKey:()=>v,errorComponent:c||nb,onCatch:(T,E)=>{if(Ba(T))throw T;d?.(T,E)},children:Te.jsx(_,{fallback:T=>{if(!f||T.routeId&&T.routeId!==i.routeId||!T.routeId&&!r.isRoot)throw T;return Q.createElement(f,T)},children:p||i._displayPending?Te.jsx(uB,{fallback:l,children:Te.jsx(sE,{matchId:t})}):Te.jsx(sE,{matchId:t})})})})}),b===Ra&&n.options.scrollRestoration?Te.jsxs(Te.Fragment,{children:[Te.jsx(NB,{}),Te.jsx(FB,{})]}):null]})});function NB(){const e=Ga(),t=Q.useRef(void 0);return Te.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...kd(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const sE=Q.memo(function({matchId:t}){const n=Ga(),{match:i,key:r,routeId:o}=ma({select:d=>{const f=d.matches.find(v=>v.id===t),p=f.routeId,m=(n.routesById[p].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:p,loaderDeps:f.loaderDeps,params:f._strictParams,search:f._strictSearch});return{key:m?JSON.stringify(m):void 0,routeId:p,match:{id:f.id,status:f.status,error:f.error,invalid:f.invalid,_forcePending:f._forcePending,_displayPending:f._displayPending}}},structuralSharing:!0}),l=n.routesById[o],c=Q.useMemo(()=>{const d=l.options.component??n.options.defaultComponent;return d?Te.jsx(d,{},r):Te.jsx(dk,{})},[r,l.options.component,n.options.defaultComponent]);if(i._displayPending)throw n.getMatch(i.id)?._nonReactive.displayPendingPromise;if(i._forcePending)throw n.getMatch(i.id)?._nonReactive.minPendingPromise;if(i.status==="pending"){const d=l.options.pendingMinMs??n.options.defaultPendingMinMs;if(d){const f=n.getMatch(i.id);if(f&&!f._nonReactive.minPendingPromise&&!n.isServer){const p=Nh();f._nonReactive.minPendingPromise=p,setTimeout(()=>{p.resolve(),f._nonReactive.minPendingPromise=void 0},d)}}throw n.getMatch(i.id)?._nonReactive.loadPromise}if(i.status==="notFound")return Fl(Ba(i.error)),ck(n,l,i.error);if(i.status==="redirected")throw Fl(_o(i.error)),n.getMatch(i.id)?._nonReactive.loadPromise;if(i.status==="error"){if(n.isServer){const d=(l.options.errorComponent??n.options.defaultErrorComponent)||nb;return Te.jsx(d,{error:i.error,reset:void 0,info:{componentStack:""}})}throw i.error}return c}),dk=Q.memo(function(){const t=Ga(),n=Q.useContext(rb),i=ma({select:f=>f.matches.find(p=>p.id===n)?.routeId}),r=t.routesById[i],o=ma({select:f=>{const h=f.matches.find(m=>m.id===n);return Fl(h),h.globalNotFound}}),l=ma({select:f=>{const p=f.matches,h=p.findIndex(m=>m.id===n);return p[h+1]?.id}}),c=t.options.defaultPendingComponent?Te.jsx(t.options.defaultPendingComponent,{}):null;if(o)return ck(t,r,void 0);if(!l)return null;const d=Te.jsx(uk,{matchId:l});return i===Ra?Te.jsx(Q.Suspense,{fallback:c,children:d}):d});function jB(){const e=Ga(),n=e.routesById[Ra].options.pendingComponent??e.options.defaultPendingComponent,i=n?Te.jsx(n,{}):null,r=e.isServer||typeof document<"u"&&e.ssr?kh:Q.Suspense,o=Te.jsxs(r,{fallback:i,children:[!e.isServer&&Te.jsx(DB,{}),Te.jsx(BB,{})]});return e.options.InnerWrap?Te.jsx(e.options.InnerWrap,{children:o}):o}function BB(){const e=Ga(),t=ma({select:r=>r.matches[0]?.id}),n=ma({select:r=>r.loadedAt}),i=t?Te.jsx(uk,{matchId:t}):null;return Te.jsx(rb.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?i:Te.jsx(cM,{getResetKey:()=>n,errorComponent:nb,onCatch:r=>{r.message||r.toString()},children:i})})}const UB=e=>new VB(e);class VB extends nB{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=rE,globalThis.createLazyFileRoute=oE):typeof window<"u"&&(window.createFileRoute=rE,window.createLazyFileRoute=oE);function GB({router:e,children:t,...n}){Object.keys(n).length>0&&e.update({...e.options,...n,context:{...e.options.context,...n.context}});const i=ok(),r=Te.jsx(i.Provider,{value:e,children:t});return e.options.Wrap?Te.jsx(e.options.Wrap,{children:r}):r}function WB({router:e,...t}){return Te.jsx(GB,{router:e,...t,children:Te.jsx(jB,{})})}function lE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function mM(...e){return t=>{let n=!1;const i=e.map(r=>{const o=lE(r,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<i.length;r++){const o=i[r];typeof o=="function"?o():lE(e[r],null)}}}}function Wa(...e){return Q.useCallback(mM(...e),e)}function fk(e){const t=HB(e),n=Q.forwardRef((i,r)=>{const{children:o,...l}=i,c=Q.Children.toArray(o),d=c.find(qB);if(d){const f=d.props.children,p=c.map(h=>h===d?Q.Children.count(f)>1?Q.Children.only(null):Q.isValidElement(f)?f.props.children:null:h);return Te.jsx(t,{...l,ref:r,children:Q.isValidElement(f)?Q.cloneElement(f,void 0,p):null})}return Te.jsx(t,{...l,ref:r,children:o})});return n.displayName=`${e}.Slot`,n}var lu=fk("Slot");function HB(e){const t=Q.forwardRef((n,i)=>{const{children:r,...o}=n;if(Q.isValidElement(r)){const l=QB(r),c=ZB(o,r.props);return r.type!==Q.Fragment&&(c.ref=i?mM(i,l):l),Q.cloneElement(r,c)}return Q.Children.count(r)>1?Q.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hk=Symbol("radix.slottable");function KB(e){const t=({children:n})=>Te.jsx(Te.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=hk,t}function qB(e){return Q.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hk}function ZB(e,t){const n={...t};for(const i in t){const r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=(...c)=>{const d=o(...c);return r(...c),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...o}:i==="className"&&(n[i]=[r,o].filter(Boolean).join(" "))}return{...e,...n}}function QB(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var XB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],na=XB.reduce((e,t)=>{const n=fk(`Primitive.${t}`),i=Q.forwardRef((r,o)=>{const{asChild:l,...c}=r,d=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Te.jsx(d,{...c,ref:o})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function mk(e,t){e&&ab.flushSync(()=>e.dispatchEvent(t))}var YB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),JB="VisuallyHidden",pk=Q.forwardRef((e,t)=>Te.jsx(na.span,{...e,ref:t,style:{...YB,...e.style}}));pk.displayName=JB;var gk=pk;function pM(e,t=[]){let n=[];function i(o,l){const c=Q.createContext(l),d=n.length;n=[...n,l];const f=h=>{const{scope:m,children:_,...v}=h,b=m?.[e]?.[d]||c,D=Q.useMemo(()=>v,Object.values(v));return Te.jsx(b.Provider,{value:D,children:_})};f.displayName=o+"Provider";function p(h,m){const _=m?.[e]?.[d]||c,v=Q.useContext(_);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[f,p]}const r=()=>{const o=n.map(l=>Q.createContext(l));return function(c){const d=c?.[e]||o;return Q.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return r.scopeName=e,[i,eU(r,...t)]}function eU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=i.reduce((c,{useScope:d,scopeName:f})=>{const h=d(o)[`__scope${f}`];return{...c,...h}},{});return Q.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function Gi(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),n===!1||!r.defaultPrevented)return t?.(r)}}var Nl=globalThis?.document?Q.useLayoutEffect:()=>{},tU=VC[" useInsertionEffect ".trim().toString()]||Nl;function nU({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[r,o,l]=rU({defaultProp:t,onChange:n}),c=e!==void 0,d=c?e:r;{const p=Q.useRef(e!==void 0);Q.useEffect(()=>{const h=p.current;h!==c&&console.warn(`${i} is changing from ${h?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,i])}const f=Q.useCallback(p=>{if(c){const h=iU(p)?p(e):p;h!==e&&l.current?.(h)}else o(p)},[c,e,o,l]);return[d,f]}function rU({defaultProp:e,onChange:t}){const[n,i]=Q.useState(e),r=Q.useRef(n),o=Q.useRef(t);return tU(()=>{o.current=t},[t]),Q.useEffect(()=>{r.current!==n&&(o.current?.(n),r.current=n)},[n,r]),[n,i,o]}function iU(e){return typeof e=="function"}function aU(e,t){return Q.useReducer((n,i)=>t[n][i]??n,e)}var Ud=e=>{const{present:t,children:n}=e,i=oU(t),r=typeof n=="function"?n({present:i.isPresent}):Q.Children.only(n),o=Wa(i.ref,sU(r));return typeof n=="function"||i.isPresent?Q.cloneElement(r,{ref:o}):null};Ud.displayName="Presence";function oU(e){const[t,n]=Q.useState(),i=Q.useRef(null),r=Q.useRef(e),o=Q.useRef("none"),l=e?"mounted":"unmounted",[c,d]=aU(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Q.useEffect(()=>{const f=Fv(i.current);o.current=c==="mounted"?f:"none"},[c]),Nl(()=>{const f=i.current,p=r.current;if(p!==e){const m=o.current,_=Fv(f);e?d("MOUNT"):_==="none"||f?.display==="none"?d("UNMOUNT"):d(p&&m!==_?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,d]),Nl(()=>{if(t){let f;const p=t.ownerDocument.defaultView??window,h=_=>{const b=Fv(i.current).includes(CSS.escape(_.animationName));if(_.target===t&&b&&(d("ANIMATION_END"),!r.current)){const D=t.style.animationFillMode;t.style.animationFillMode="forwards",f=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=D)})}},m=_=>{_.target===t&&(o.current=Fv(i.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{p.clearTimeout(f),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:Q.useCallback(f=>{i.current=f?getComputedStyle(f):null,n(f)},[])}}function Fv(e){return e?.animationName||"none"}function sU(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var lU=VC[" useId ".trim().toString()]||(()=>{}),cU=0;function uU(e){const[t,n]=Q.useState(lU());return Nl(()=>{n(i=>i??String(cU++))},[e]),t?`radix-${t}`:""}var _k=Q.createContext(void 0),dU=e=>{const{dir:t,children:n}=e;return Te.jsx(_k.Provider,{value:t,children:n})};function fU(e){const t=Q.useContext(_k);return e||t||"ltr"}var hU=dU;function Qo(e){const t=Q.useRef(e);return Q.useEffect(()=>{t.current=e}),Q.useMemo(()=>(...n)=>t.current?.(...n),[])}function mU(e,t=globalThis?.document){const n=Qo(e);Q.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var pU="DismissableLayer",hx="dismissableLayer.update",gU="dismissableLayer.pointerDownOutside",_U="dismissableLayer.focusOutside",cE,vk=Q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yk=Q.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,f=Q.useContext(vk),[p,h]=Q.useState(null),m=p?.ownerDocument??globalThis?.document,[,_]=Q.useState({}),v=Wa(t,S=>h(S)),b=Array.from(f.layers),[D]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),T=b.indexOf(D),E=p?b.indexOf(p):-1,A=f.layersWithOutsidePointerEventsDisabled.size>0,$=E>=T,P=bU(S=>{const O=S.target,N=[...f.branches].some(j=>j.contains(O));!$||N||(r?.(S),l?.(S),S.defaultPrevented||c?.())},m),C=wU(S=>{const O=S.target;[...f.branches].some(j=>j.contains(O))||(o?.(S),l?.(S),S.defaultPrevented||c?.())},m);return mU(S=>{E===f.layers.size-1&&(i?.(S),!S.defaultPrevented&&c&&(S.preventDefault(),c()))},m),Q.useEffect(()=>{if(p)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(cE=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),uE(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=cE)}},[p,m,n,f]),Q.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),uE())},[p,f]),Q.useEffect(()=>{const S=()=>_({});return document.addEventListener(hx,S),()=>document.removeEventListener(hx,S)},[]),Te.jsx(na.div,{...d,ref:v,style:{pointerEvents:A?$?"auto":"none":void 0,...e.style},onFocusCapture:Gi(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Gi(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Gi(e.onPointerDownCapture,P.onPointerDownCapture)})});yk.displayName=pU;var vU="DismissableLayerBranch",yU=Q.forwardRef((e,t)=>{const n=Q.useContext(vk),i=Q.useRef(null),r=Wa(t,i);return Q.useEffect(()=>{const o=i.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),Te.jsx(na.div,{...e,ref:r})});yU.displayName=vU;function bU(e,t=globalThis?.document){const n=Qo(e),i=Q.useRef(!1),r=Q.useRef(()=>{});return Q.useEffect(()=>{const o=c=>{if(c.target&&!i.current){let d=function(){bk(gU,n,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=d,t.addEventListener("click",r.current,{once:!0})):d()}else t.removeEventListener("click",r.current);i.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function wU(e,t=globalThis?.document){const n=Qo(e),i=Q.useRef(!1);return Q.useEffect(()=>{const r=o=>{o.target&&!i.current&&bk(_U,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function uE(){const e=new CustomEvent(hx);document.dispatchEvent(e)}function bk(e,t,n,{discrete:i}){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?mk(r,o):r.dispatchEvent(o)}var xU="Portal",wk=Q.forwardRef((e,t)=>{const{container:n,...i}=e,[r,o]=Q.useState(!1);Nl(()=>o(!0),[]);const l=n||r&&globalThis?.document?.body;return l?MB.createPortal(Te.jsx(na.div,{...i,ref:t}),l):null});wk.displayName=xU;function MU(e){const[t,n]=Q.useState(void 0);return Nl(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let l,c;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,c=f.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}const TU=["top","right","bottom","left"],nu=Math.min,Na=Math.max,$y=Math.round,Nv=Math.floor,Us=e=>({x:e,y:e}),SU={left:"right",right:"left",bottom:"top",top:"bottom"},EU={start:"end",end:"start"};function mx(e,t,n){return Na(e,nu(t,n))}function jl(e,t){return typeof e=="function"?e(t):e}function Bl(e){return e.split("-")[0]}function em(e){return e.split("-")[1]}function gM(e){return e==="x"?"y":"x"}function _M(e){return e==="y"?"height":"width"}const $U=new Set(["top","bottom"]);function Ns(e){return $U.has(Bl(e))?"y":"x"}function vM(e){return gM(Ns(e))}function PU(e,t,n){n===void 0&&(n=!1);const i=em(e),r=vM(e),o=_M(r);let l=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=Py(l)),[l,Py(l)]}function CU(e){const t=Py(e);return[px(e),t,px(t)]}function px(e){return e.replace(/start|end/g,t=>EU[t])}const dE=["left","right"],fE=["right","left"],kU=["top","bottom"],AU=["bottom","top"];function IU(e,t,n){switch(e){case"top":case"bottom":return n?t?fE:dE:t?dE:fE;case"left":case"right":return t?kU:AU;default:return[]}}function OU(e,t,n,i){const r=em(e);let o=IU(Bl(e),n==="start",i);return r&&(o=o.map(l=>l+"-"+r),t&&(o=o.concat(o.map(px)))),o}function Py(e){return e.replace(/left|right|bottom|top/g,t=>SU[t])}function DU(e){return{top:0,right:0,bottom:0,left:0,...e}}function xk(e){return typeof e!="number"?DU(e):{top:e,right:e,bottom:e,left:e}}function Cy(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function hE(e,t,n){let{reference:i,floating:r}=e;const o=Ns(t),l=vM(t),c=_M(l),d=Bl(t),f=o==="y",p=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,m=i[c]/2-r[c]/2;let _;switch(d){case"top":_={x:p,y:i.y-r.height};break;case"bottom":_={x:p,y:i.y+i.height};break;case"right":_={x:i.x+i.width,y:h};break;case"left":_={x:i.x-r.width,y:h};break;default:_={x:i.x,y:i.y}}switch(em(t)){case"start":_[l]-=m*(n&&f?-1:1);break;case"end":_[l]+=m*(n&&f?-1:1);break}return _}const zU=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:o=[],platform:l}=n,c=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:r}),{x:p,y:h}=hE(f,i,d),m=i,_={},v=0;for(let b=0;b<c.length;b++){const{name:D,fn:T}=c[b],{x:E,y:A,data:$,reset:P}=await T({x:p,y:h,initialPlacement:i,placement:m,strategy:r,middlewareData:_,rects:f,platform:l,elements:{reference:e,floating:t}});p=E??p,h=A??h,_={..._,[D]:{..._[D],...$}},P&&v<=50&&(v++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(f=P.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:r}):P.rects),{x:p,y:h}=hE(f,m,d)),b=-1)}return{x:p,y:h,placement:m,strategy:r,middlewareData:_}};async function n_(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:o,rects:l,elements:c,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:m=!1,padding:_=0}=jl(t,e),v=xk(_),D=c[m?h==="floating"?"reference":"floating":h],T=Cy(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(D)))==null||n?D:D.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:f,rootBoundary:p,strategy:d})),E=h==="floating"?{x:i,y:r,width:l.floating.width,height:l.floating.height}:l.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),$=await(o.isElement==null?void 0:o.isElement(A))?await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1}:{x:1,y:1},P=Cy(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:E,offsetParent:A,strategy:d}):E);return{top:(T.top-P.top+v.top)/$.y,bottom:(P.bottom-T.bottom+v.bottom)/$.y,left:(T.left-P.left+v.left)/$.x,right:(P.right-T.right+v.right)/$.x}}const LU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:o,platform:l,elements:c,middlewareData:d}=t,{element:f,padding:p=0}=jl(e,t)||{};if(f==null)return{};const h=xk(p),m={x:n,y:i},_=vM(r),v=_M(_),b=await l.getDimensions(f),D=_==="y",T=D?"top":"left",E=D?"bottom":"right",A=D?"clientHeight":"clientWidth",$=o.reference[v]+o.reference[_]-m[_]-o.floating[v],P=m[_]-o.reference[_],C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let S=C?C[A]:0;(!S||!await(l.isElement==null?void 0:l.isElement(C)))&&(S=c.floating[A]||o.floating[v]);const O=$/2-P/2,N=S/2-b[v]/2-1,j=nu(h[T],N),X=nu(h[E],N),Y=j,K=S-b[v]-X,se=S/2-b[v]/2+O,oe=mx(Y,se,K),W=!d.arrow&&em(r)!=null&&se!==oe&&o.reference[v]/2-(se<Y?j:X)-b[v]/2<0,ne=W?se<Y?se-Y:se-K:0;return{[_]:m[_]+ne,data:{[_]:oe,centerOffset:se-oe-ne,...W&&{alignmentOffset:ne}},reset:W}}}),RU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:o,rects:l,initialPlacement:c,platform:d,elements:f}=t,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...D}=jl(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const T=Bl(r),E=Ns(c),A=Bl(c)===c,$=await(d.isRTL==null?void 0:d.isRTL(f.floating)),P=m||(A||!b?[Py(c)]:CU(c)),C=v!=="none";!m&&C&&P.push(...OU(c,b,v,$));const S=[c,...P],O=await n_(t,D),N=[];let j=((i=o.flip)==null?void 0:i.overflows)||[];if(p&&N.push(O[T]),h){const se=PU(r,l,$);N.push(O[se[0]],O[se[1]])}if(j=[...j,{placement:r,overflows:N}],!N.every(se=>se<=0)){var X,Y;const se=(((X=o.flip)==null?void 0:X.index)||0)+1,oe=S[se];if(oe&&(!(h==="alignment"?E!==Ns(oe):!1)||j.every(ae=>Ns(ae.placement)===E?ae.overflows[0]>0:!0)))return{data:{index:se,overflows:j},reset:{placement:oe}};let W=(Y=j.filter(ne=>ne.overflows[0]<=0).sort((ne,ae)=>ne.overflows[1]-ae.overflows[1])[0])==null?void 0:Y.placement;if(!W)switch(_){case"bestFit":{var K;const ne=(K=j.filter(ae=>{if(C){const ge=Ns(ae.placement);return ge===E||ge==="y"}return!0}).map(ae=>[ae.placement,ae.overflows.filter(ge=>ge>0).reduce((ge,ye)=>ge+ye,0)]).sort((ae,ge)=>ae[1]-ge[1])[0])==null?void 0:K[0];ne&&(W=ne);break}case"initialPlacement":W=c;break}if(r!==W)return{reset:{placement:W}}}return{}}}};function mE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function pE(e){return TU.some(t=>e[t]>=0)}const FU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=jl(e,t);switch(i){case"referenceHidden":{const o=await n_(t,{...r,elementContext:"reference"}),l=mE(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:pE(l)}}}case"escaped":{const o=await n_(t,{...r,altBoundary:!0}),l=mE(o,n.floating);return{data:{escapedOffsets:l,escaped:pE(l)}}}default:return{}}}}},Mk=new Set(["left","top"]);async function NU(e,t){const{placement:n,platform:i,elements:r}=e,o=await(i.isRTL==null?void 0:i.isRTL(r.floating)),l=Bl(n),c=em(n),d=Ns(n)==="y",f=Mk.has(l)?-1:1,p=o&&d?-1:1,h=jl(t,e);let{mainAxis:m,crossAxis:_,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof v=="number"&&(_=c==="end"?v*-1:v),d?{x:_*p,y:m*f}:{x:m*f,y:_*p}}const jU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:o,placement:l,middlewareData:c}=t,d=await NU(t,e);return l===((n=c.offset)==null?void 0:n.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:r+d.x,y:o+d.y,data:{...d,placement:l}}}}},BU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:D=>{let{x:T,y:E}=D;return{x:T,y:E}}},...d}=jl(e,t),f={x:n,y:i},p=await n_(t,d),h=Ns(Bl(r)),m=gM(h);let _=f[m],v=f[h];if(o){const D=m==="y"?"top":"left",T=m==="y"?"bottom":"right",E=_+p[D],A=_-p[T];_=mx(E,_,A)}if(l){const D=h==="y"?"top":"left",T=h==="y"?"bottom":"right",E=v+p[D],A=v-p[T];v=mx(E,v,A)}const b=c.fn({...t,[m]:_,[h]:v});return{...b,data:{x:b.x-n,y:b.y-i,enabled:{[m]:o,[h]:l}}}}}},UU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:o,middlewareData:l}=t,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=jl(e,t),p={x:n,y:i},h=Ns(r),m=gM(h);let _=p[m],v=p[h];const b=jl(c,t),D=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const A=m==="y"?"height":"width",$=o.reference[m]-o.floating[A]+D.mainAxis,P=o.reference[m]+o.reference[A]-D.mainAxis;_<$?_=$:_>P&&(_=P)}if(f){var T,E;const A=m==="y"?"width":"height",$=Mk.has(Bl(r)),P=o.reference[h]-o.floating[A]+($&&((T=l.offset)==null?void 0:T[h])||0)+($?0:D.crossAxis),C=o.reference[h]+o.reference[A]+($?0:((E=l.offset)==null?void 0:E[h])||0)-($?D.crossAxis:0);v<P?v=P:v>C&&(v=C)}return{[m]:_,[h]:v}}}},VU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:o,platform:l,elements:c}=t,{apply:d=()=>{},...f}=jl(e,t),p=await n_(t,f),h=Bl(r),m=em(r),_=Ns(r)==="y",{width:v,height:b}=o.floating;let D,T;h==="top"||h==="bottom"?(D=h,T=m===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(T=h,D=m==="end"?"top":"bottom");const E=b-p.top-p.bottom,A=v-p.left-p.right,$=nu(b-p[D],E),P=nu(v-p[T],A),C=!t.middlewareData.shift;let S=$,O=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=A),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(S=E),C&&!m){const j=Na(p.left,0),X=Na(p.right,0),Y=Na(p.top,0),K=Na(p.bottom,0);_?O=v-2*(j!==0||X!==0?j+X:Na(p.left,p.right)):S=b-2*(Y!==0||K!==0?Y+K:Na(p.top,p.bottom))}await d({...t,availableWidth:O,availableHeight:S});const N=await l.getDimensions(c.floating);return v!==N.width||b!==N.height?{reset:{rects:!0}}:{}}}};function ob(){return typeof window<"u"}function tm(e){return Tk(e)?(e.nodeName||"").toLowerCase():"#document"}function Ua(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ws(e){var t;return(t=(Tk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Tk(e){return ob()?e instanceof Node||e instanceof Ua(e).Node:!1}function es(e){return ob()?e instanceof Element||e instanceof Ua(e).Element:!1}function Gs(e){return ob()?e instanceof HTMLElement||e instanceof Ua(e).HTMLElement:!1}function gE(e){return!ob()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ua(e).ShadowRoot}const GU=new Set(["inline","contents"]);function g_(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=ts(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!GU.has(r)}const WU=new Set(["table","td","th"]);function HU(e){return WU.has(tm(e))}const KU=[":popover-open",":modal"];function sb(e){return KU.some(t=>{try{return e.matches(t)}catch{return!1}})}const qU=["transform","translate","scale","rotate","perspective"],ZU=["transform","translate","scale","rotate","perspective","filter"],QU=["paint","layout","strict","content"];function yM(e){const t=bM(),n=es(e)?ts(e):e;return qU.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||ZU.some(i=>(n.willChange||"").includes(i))||QU.some(i=>(n.contain||"").includes(i))}function XU(e){let t=ru(e);for(;Gs(t)&&!Bh(t);){if(yM(t))return t;if(sb(t))return null;t=ru(t)}return null}function bM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const YU=new Set(["html","body","#document"]);function Bh(e){return YU.has(tm(e))}function ts(e){return Ua(e).getComputedStyle(e)}function lb(e){return es(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ru(e){if(tm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gE(e)&&e.host||Ws(e);return gE(t)?t.host:t}function Sk(e){const t=ru(e);return Bh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gs(t)&&g_(t)?t:Sk(t)}function r_(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=Sk(e),o=r===((i=e.ownerDocument)==null?void 0:i.body),l=Ua(r);if(o){const c=gx(l);return t.concat(l,l.visualViewport||[],g_(r)?r:[],c&&n?r_(c):[])}return t.concat(r,r_(r,[],n))}function gx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ek(e){const t=ts(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=Gs(e),o=r?e.offsetWidth:n,l=r?e.offsetHeight:i,c=$y(n)!==o||$y(i)!==l;return c&&(n=o,i=l),{width:n,height:i,$:c}}function wM(e){return es(e)?e:e.contextElement}function Rh(e){const t=wM(e);if(!Gs(t))return Us(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:o}=Ek(t);let l=(o?$y(n.width):n.width)/i,c=(o?$y(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const JU=Us(0);function $k(e){const t=Ua(e);return!bM()||!t.visualViewport?JU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function e6(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ua(e)?!1:t}function Dd(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=wM(e);let l=Us(1);t&&(i?es(i)&&(l=Rh(i)):l=Rh(e));const c=e6(o,n,i)?$k(o):Us(0);let d=(r.left+c.x)/l.x,f=(r.top+c.y)/l.y,p=r.width/l.x,h=r.height/l.y;if(o){const m=Ua(o),_=i&&es(i)?Ua(i):i;let v=m,b=gx(v);for(;b&&i&&_!==v;){const D=Rh(b),T=b.getBoundingClientRect(),E=ts(b),A=T.left+(b.clientLeft+parseFloat(E.paddingLeft))*D.x,$=T.top+(b.clientTop+parseFloat(E.paddingTop))*D.y;d*=D.x,f*=D.y,p*=D.x,h*=D.y,d+=A,f+=$,v=Ua(b),b=gx(v)}}return Cy({width:p,height:h,x:d,y:f})}function cb(e,t){const n=lb(e).scrollLeft;return t?t.left+n:Dd(Ws(e)).left+n}function Pk(e,t){const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-cb(e,n),r=n.top+t.scrollTop;return{x:i,y:r}}function t6(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const o=r==="fixed",l=Ws(i),c=t?sb(t.floating):!1;if(i===l||c&&o)return n;let d={scrollLeft:0,scrollTop:0},f=Us(1);const p=Us(0),h=Gs(i);if((h||!h&&!o)&&((tm(i)!=="body"||g_(l))&&(d=lb(i)),Gs(i))){const _=Dd(i);f=Rh(i),p.x=_.x+i.clientLeft,p.y=_.y+i.clientTop}const m=l&&!h&&!o?Pk(l,d):Us(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+p.x+m.x,y:n.y*f.y-d.scrollTop*f.y+p.y+m.y}}function n6(e){return Array.from(e.getClientRects())}function r6(e){const t=Ws(e),n=lb(e),i=e.ownerDocument.body,r=Na(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=Na(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let l=-n.scrollLeft+cb(e);const c=-n.scrollTop;return ts(i).direction==="rtl"&&(l+=Na(t.clientWidth,i.clientWidth)-r),{width:r,height:o,x:l,y:c}}const _E=25;function i6(e,t){const n=Ua(e),i=Ws(e),r=n.visualViewport;let o=i.clientWidth,l=i.clientHeight,c=0,d=0;if(r){o=r.width,l=r.height;const p=bM();(!p||p&&t==="fixed")&&(c=r.offsetLeft,d=r.offsetTop)}const f=cb(i);if(f<=0){const p=i.ownerDocument,h=p.body,m=getComputedStyle(h),_=p.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(i.clientWidth-h.clientWidth-_);v<=_E&&(o-=v)}else f<=_E&&(o+=f);return{width:o,height:l,x:c,y:d}}const a6=new Set(["absolute","fixed"]);function o6(e,t){const n=Dd(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,o=Gs(e)?Rh(e):Us(1),l=e.clientWidth*o.x,c=e.clientHeight*o.y,d=r*o.x,f=i*o.y;return{width:l,height:c,x:d,y:f}}function vE(e,t,n){let i;if(t==="viewport")i=i6(e,n);else if(t==="document")i=r6(Ws(e));else if(es(t))i=o6(t,n);else{const r=$k(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Cy(i)}function Ck(e,t){const n=ru(e);return n===t||!es(n)||Bh(n)?!1:ts(n).position==="fixed"||Ck(n,t)}function s6(e,t){const n=t.get(e);if(n)return n;let i=r_(e,[],!1).filter(c=>es(c)&&tm(c)!=="body"),r=null;const o=ts(e).position==="fixed";let l=o?ru(e):e;for(;es(l)&&!Bh(l);){const c=ts(l),d=yM(l);!d&&c.position==="fixed"&&(r=null),(o?!d&&!r:!d&&c.position==="static"&&!!r&&a6.has(r.position)||g_(l)&&!d&&Ck(e,l))?i=i.filter(p=>p!==l):r=c,l=ru(l)}return t.set(e,i),i}function l6(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const l=[...n==="clippingAncestors"?sb(t)?[]:s6(t,this._c):[].concat(n),i],c=l[0],d=l.reduce((f,p)=>{const h=vE(t,p,r);return f.top=Na(h.top,f.top),f.right=nu(h.right,f.right),f.bottom=nu(h.bottom,f.bottom),f.left=Na(h.left,f.left),f},vE(t,c,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function c6(e){const{width:t,height:n}=Ek(e);return{width:t,height:n}}function u6(e,t,n){const i=Gs(t),r=Ws(t),o=n==="fixed",l=Dd(e,!0,o,t);let c={scrollLeft:0,scrollTop:0};const d=Us(0);function f(){d.x=cb(r)}if(i||!i&&!o)if((tm(t)!=="body"||g_(r))&&(c=lb(t)),i){const _=Dd(t,!0,o,t);d.x=_.x+t.clientLeft,d.y=_.y+t.clientTop}else r&&f();o&&!i&&r&&f();const p=r&&!i&&!o?Pk(r,c):Us(0),h=l.left+c.scrollLeft-d.x-p.x,m=l.top+c.scrollTop-d.y-p.y;return{x:h,y:m,width:l.width,height:l.height}}function nw(e){return ts(e).position==="static"}function yE(e,t){if(!Gs(e)||ts(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ws(e)===n&&(n=n.ownerDocument.body),n}function kk(e,t){const n=Ua(e);if(sb(e))return n;if(!Gs(e)){let r=ru(e);for(;r&&!Bh(r);){if(es(r)&&!nw(r))return r;r=ru(r)}return n}let i=yE(e,t);for(;i&&HU(i)&&nw(i);)i=yE(i,t);return i&&Bh(i)&&nw(i)&&!yM(i)?n:i||XU(e)||n}const d6=async function(e){const t=this.getOffsetParent||kk,n=this.getDimensions,i=await n(e.floating);return{reference:u6(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function f6(e){return ts(e).direction==="rtl"}const h6={convertOffsetParentRelativeRectToViewportRelativeRect:t6,getDocumentElement:Ws,getClippingRect:l6,getOffsetParent:kk,getElementRects:d6,getClientRects:n6,getDimensions:c6,getScale:Rh,isElement:es,isRTL:f6};function Ak(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function m6(e,t){let n=null,i;const r=Ws(e);function o(){var c;clearTimeout(i),(c=n)==null||c.disconnect(),n=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),o();const f=e.getBoundingClientRect(),{left:p,top:h,width:m,height:_}=f;if(c||t(),!m||!_)return;const v=Nv(h),b=Nv(r.clientWidth-(p+m)),D=Nv(r.clientHeight-(h+_)),T=Nv(p),A={rootMargin:-v+"px "+-b+"px "+-D+"px "+-T+"px",threshold:Na(0,nu(1,d))||1};let $=!0;function P(C){const S=C[0].intersectionRatio;if(S!==d){if(!$)return l();S?l(!1,S):i=setTimeout(()=>{l(!1,1e-7)},1e3)}S===1&&!Ak(f,e.getBoundingClientRect())&&l(),$=!1}try{n=new IntersectionObserver(P,{...A,root:r.ownerDocument})}catch{n=new IntersectionObserver(P,A)}n.observe(e)}return l(!0),o}function p6(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,f=wM(e),p=r||o?[...f?r_(f):[],...r_(t)]:[];p.forEach(T=>{r&&T.addEventListener("scroll",n,{passive:!0}),o&&T.addEventListener("resize",n)});const h=f&&c?m6(f,n):null;let m=-1,_=null;l&&(_=new ResizeObserver(T=>{let[E]=T;E&&E.target===f&&_&&(_.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var A;(A=_)==null||A.observe(t)})),n()}),f&&!d&&_.observe(f),_.observe(t));let v,b=d?Dd(e):null;d&&D();function D(){const T=Dd(e);b&&!Ak(b,T)&&n(),b=T,v=requestAnimationFrame(D)}return n(),()=>{var T;p.forEach(E=>{r&&E.removeEventListener("scroll",n),o&&E.removeEventListener("resize",n)}),h?.(),(T=_)==null||T.disconnect(),_=null,d&&cancelAnimationFrame(v)}}const g6=jU,_6=BU,v6=RU,y6=VU,b6=FU,bE=LU,w6=UU,x6=(e,t,n)=>{const i=new Map,r={platform:h6,...n},o={...r.platform,_c:i};return zU(e,t,{...r,platform:o})};var M6=typeof document<"u",T6=function(){},dy=M6?Q.useLayoutEffect:T6;function ky(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!ky(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const o=r[i];if(!(o==="_owner"&&e.$$typeof)&&!ky(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ik(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wE(e,t){const n=Ik(e);return Math.round(t*n)/n}function rw(e){const t=Q.useRef(e);return dy(()=>{t.current=e}),t}function S6(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:f}=e,[p,h]=Q.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,_]=Q.useState(i);ky(m,i)||_(i);const[v,b]=Q.useState(null),[D,T]=Q.useState(null),E=Q.useCallback(ae=>{ae!==C.current&&(C.current=ae,b(ae))},[]),A=Q.useCallback(ae=>{ae!==S.current&&(S.current=ae,T(ae))},[]),$=o||v,P=l||D,C=Q.useRef(null),S=Q.useRef(null),O=Q.useRef(p),N=d!=null,j=rw(d),X=rw(r),Y=rw(f),K=Q.useCallback(()=>{if(!C.current||!S.current)return;const ae={placement:t,strategy:n,middleware:m};X.current&&(ae.platform=X.current),x6(C.current,S.current,ae).then(ge=>{const ye={...ge,isPositioned:Y.current!==!1};se.current&&!ky(O.current,ye)&&(O.current=ye,ab.flushSync(()=>{h(ye)}))})},[m,t,n,X,Y]);dy(()=>{f===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,h(ae=>({...ae,isPositioned:!1})))},[f]);const se=Q.useRef(!1);dy(()=>(se.current=!0,()=>{se.current=!1}),[]),dy(()=>{if($&&(C.current=$),P&&(S.current=P),$&&P){if(j.current)return j.current($,P,K);K()}},[$,P,K,j,N]);const oe=Q.useMemo(()=>({reference:C,floating:S,setReference:E,setFloating:A}),[E,A]),W=Q.useMemo(()=>({reference:$,floating:P}),[$,P]),ne=Q.useMemo(()=>{const ae={position:n,left:0,top:0};if(!W.floating)return ae;const ge=wE(W.floating,p.x),ye=wE(W.floating,p.y);return c?{...ae,transform:"translate("+ge+"px, "+ye+"px)",...Ik(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ge,top:ye}},[n,c,W.floating,p.x,p.y]);return Q.useMemo(()=>({...p,update:K,refs:oe,elements:W,floatingStyles:ne}),[p,K,oe,W,ne])}const E6=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?bE({element:i.current,padding:r}).fn(n):{}:i?bE({element:i,padding:r}).fn(n):{}}}},$6=(e,t)=>({...g6(e),options:[e,t]}),P6=(e,t)=>({..._6(e),options:[e,t]}),C6=(e,t)=>({...w6(e),options:[e,t]}),k6=(e,t)=>({...v6(e),options:[e,t]}),A6=(e,t)=>({...y6(e),options:[e,t]}),I6=(e,t)=>({...b6(e),options:[e,t]}),O6=(e,t)=>({...E6(e),options:[e,t]});var D6="Arrow",Ok=Q.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...o}=e;return Te.jsx(na.svg,{...o,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:Te.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ok.displayName=D6;var z6=Ok,xM="Popper",[Dk,zk]=pM(xM),[L6,Lk]=Dk(xM),Rk=e=>{const{__scopePopper:t,children:n}=e,[i,r]=Q.useState(null);return Te.jsx(L6,{scope:t,anchor:i,onAnchorChange:r,children:n})};Rk.displayName=xM;var Fk="PopperAnchor",Nk=Q.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,o=Lk(Fk,n),l=Q.useRef(null),c=Wa(t,l),d=Q.useRef(null);return Q.useEffect(()=>{const f=d.current;d.current=i?.current||l.current,f!==d.current&&o.onAnchorChange(d.current)}),i?null:Te.jsx(na.div,{...r,ref:c})});Nk.displayName=Fk;var MM="PopperContent",[R6,F6]=Dk(MM),jk=Q.forwardRef((e,t)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:_="optimized",onPlaced:v,...b}=e,D=Lk(MM,n),[T,E]=Q.useState(null),A=Wa(t,ke=>E(ke)),[$,P]=Q.useState(null),C=MU($),S=C?.width??0,O=C?.height??0,N=i+(o!=="center"?"-"+o:""),j=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},X=Array.isArray(f)?f:[f],Y=X.length>0,K={padding:j,boundary:X.filter(j6),altBoundary:Y},{refs:se,floatingStyles:oe,placement:W,isPositioned:ne,middlewareData:ae}=S6({strategy:"fixed",placement:N,whileElementsMounted:(...ke)=>p6(...ke,{animationFrame:_==="always"}),elements:{reference:D.anchor},middleware:[$6({mainAxis:r+O,alignmentAxis:l}),d&&P6({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?C6():void 0,...K}),d&&k6({...K}),A6({...K,apply:({elements:ke,rects:Le,availableWidth:Xe,availableHeight:Be})=>{const{width:ue,height:Z}=Le.reference,Se=ke.floating.style;Se.setProperty("--radix-popper-available-width",`${Xe}px`),Se.setProperty("--radix-popper-available-height",`${Be}px`),Se.setProperty("--radix-popper-anchor-width",`${ue}px`),Se.setProperty("--radix-popper-anchor-height",`${Z}px`)}}),$&&O6({element:$,padding:c}),B6({arrowWidth:S,arrowHeight:O}),m&&I6({strategy:"referenceHidden",...K})]}),[ge,ye]=Vk(W),G=Qo(v);Nl(()=>{ne&&G?.()},[ne,G]);const H=ae.arrow?.x,V=ae.arrow?.y,U=ae.arrow?.centerOffset!==0,[ce,ve]=Q.useState();return Nl(()=>{T&&ve(window.getComputedStyle(T).zIndex)},[T]),Te.jsx("div",{ref:se.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:ne?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[ae.transformOrigin?.x,ae.transformOrigin?.y].join(" "),...ae.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Te.jsx(R6,{scope:n,placedSide:ge,onArrowChange:P,arrowX:H,arrowY:V,shouldHideArrow:U,children:Te.jsx(na.div,{"data-side":ge,"data-align":ye,...b,ref:A,style:{...b.style,animation:ne?void 0:"none"}})})})});jk.displayName=MM;var Bk="PopperArrow",N6={top:"bottom",right:"left",bottom:"top",left:"right"},Uk=Q.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,o=F6(Bk,i),l=N6[o.placedSide];return Te.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:Te.jsx(z6,{...r,ref:n,style:{...r.style,display:"block"}})})});Uk.displayName=Bk;function j6(e){return e!==null}var B6=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:i,middlewareData:r}=t,l=r.arrow?.centerOffset!==0,c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[f,p]=Vk(n),h={start:"0%",center:"50%",end:"100%"}[p],m=(r.arrow?.x??0)+c/2,_=(r.arrow?.y??0)+d/2;let v="",b="";return f==="bottom"?(v=l?h:`${m}px`,b=`${-d}px`):f==="top"?(v=l?h:`${m}px`,b=`${i.floating.height+d}px`):f==="right"?(v=`${-d}px`,b=l?h:`${_}px`):f==="left"&&(v=`${i.floating.width+d}px`,b=l?h:`${_}px`),{data:{x:v,y:b}}}});function Vk(e){const[t,n="center"]=e.split("-");return[t,n]}var U6=Rk,V6=Nk,G6=jk,W6=Uk;function H6(e,[t,n]){return Math.min(n,Math.max(t,e))}function K6(e,t){return Q.useReducer((n,i)=>t[n][i]??n,e)}var TM="ScrollArea",[Gk]=pM(TM),[q6,Mo]=Gk(TM),Wk=Q.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:i="hover",dir:r,scrollHideDelay:o=600,...l}=e,[c,d]=Q.useState(null),[f,p]=Q.useState(null),[h,m]=Q.useState(null),[_,v]=Q.useState(null),[b,D]=Q.useState(null),[T,E]=Q.useState(0),[A,$]=Q.useState(0),[P,C]=Q.useState(!1),[S,O]=Q.useState(!1),N=Wa(t,X=>d(X)),j=fU(r);return Te.jsx(q6,{scope:n,type:i,dir:j,scrollHideDelay:o,scrollArea:c,viewport:f,onViewportChange:p,content:h,onContentChange:m,scrollbarX:_,onScrollbarXChange:v,scrollbarXEnabled:P,onScrollbarXEnabledChange:C,scrollbarY:b,onScrollbarYChange:D,scrollbarYEnabled:S,onScrollbarYEnabledChange:O,onCornerWidthChange:E,onCornerHeightChange:$,children:Te.jsx(na.div,{dir:j,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":T+"px","--radix-scroll-area-corner-height":A+"px",...e.style}})})});Wk.displayName=TM;var Hk="ScrollAreaViewport",Kk=Q.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:i,nonce:r,...o}=e,l=Mo(Hk,n),c=Q.useRef(null),d=Wa(t,c,l.onViewportChange);return Te.jsxs(Te.Fragment,{children:[Te.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),Te.jsx(na.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:Te.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});Kk.displayName=Hk;var Hs="ScrollAreaScrollbar",qk=Q.forwardRef((e,t)=>{const{forceMount:n,...i}=e,r=Mo(Hs,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=r,c=e.orientation==="horizontal";return Q.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),r.type==="hover"?Te.jsx(Z6,{...i,ref:t,forceMount:n}):r.type==="scroll"?Te.jsx(Q6,{...i,ref:t,forceMount:n}):r.type==="auto"?Te.jsx(Zk,{...i,ref:t,forceMount:n}):r.type==="always"?Te.jsx(SM,{...i,ref:t}):null});qk.displayName=Hs;var Z6=Q.forwardRef((e,t)=>{const{forceMount:n,...i}=e,r=Mo(Hs,e.__scopeScrollArea),[o,l]=Q.useState(!1);return Q.useEffect(()=>{const c=r.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),l(!0)},p=()=>{d=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",p)}}},[r.scrollArea,r.scrollHideDelay]),Te.jsx(Ud,{present:n||o,children:Te.jsx(Zk,{"data-state":o?"visible":"hidden",...i,ref:t})})}),Q6=Q.forwardRef((e,t)=>{const{forceMount:n,...i}=e,r=Mo(Hs,e.__scopeScrollArea),o=e.orientation==="horizontal",l=db(()=>d("SCROLL_END"),100),[c,d]=K6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return Q.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,r.scrollHideDelay,d]),Q.useEffect(()=>{const f=r.viewport,p=o?"scrollLeft":"scrollTop";if(f){let h=f[p];const m=()=>{const _=f[p];h!==_&&(d("SCROLL"),l()),h=_};return f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[r.viewport,o,d,l]),Te.jsx(Ud,{present:n||c!=="hidden",children:Te.jsx(SM,{"data-state":c==="hidden"?"hidden":"visible",...i,ref:t,onPointerEnter:Gi(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Gi(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Zk=Q.forwardRef((e,t)=>{const n=Mo(Hs,e.__scopeScrollArea),{forceMount:i,...r}=e,[o,l]=Q.useState(!1),c=e.orientation==="horizontal",d=db(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?f:p)}},10);return Uh(n.viewport,d),Uh(n.content,d),Te.jsx(Ud,{present:i||o,children:Te.jsx(SM,{"data-state":o?"visible":"hidden",...r,ref:t})})}),SM=Q.forwardRef((e,t)=>{const{orientation:n="vertical",...i}=e,r=Mo(Hs,e.__scopeScrollArea),o=Q.useRef(null),l=Q.useRef(0),[c,d]=Q.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=eA(c.viewport,c.content),p={...i,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:m=>l.current=m};function h(m,_){return nV(m,l.current,c,_)}return n==="horizontal"?Te.jsx(X6,{...p,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const m=r.viewport.scrollLeft,_=xE(m,c,r.dir);o.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=h(m,r.dir))}}):n==="vertical"?Te.jsx(Y6,{...p,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const m=r.viewport.scrollTop,_=xE(m,c);o.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=h(m))}}):null}),X6=Q.forwardRef((e,t)=>{const{sizes:n,onSizesChange:i,...r}=e,o=Mo(Hs,e.__scopeScrollArea),[l,c]=Q.useState(),d=Q.useRef(null),f=Wa(t,d,o.onScrollbarXChange);return Q.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),Te.jsx(Xk,{"data-orientation":"horizontal",...r,ref:f,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ub(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+p.deltaX;e.onWheelScroll(m),nA(m,h)&&p.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Iy(l.paddingLeft),paddingEnd:Iy(l.paddingRight)}})}})}),Y6=Q.forwardRef((e,t)=>{const{sizes:n,onSizesChange:i,...r}=e,o=Mo(Hs,e.__scopeScrollArea),[l,c]=Q.useState(),d=Q.useRef(null),f=Wa(t,d,o.onScrollbarYChange);return Q.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),Te.jsx(Xk,{"data-orientation":"vertical",...r,ref:f,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ub(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,h)=>{if(o.viewport){const m=o.viewport.scrollTop+p.deltaY;e.onWheelScroll(m),nA(m,h)&&p.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Iy(l.paddingTop),paddingEnd:Iy(l.paddingBottom)}})}})}),[J6,Qk]=Gk(Hs),Xk=Q.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:i,hasThumb:r,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:p,onResize:h,...m}=e,_=Mo(Hs,n),[v,b]=Q.useState(null),D=Wa(t,N=>b(N)),T=Q.useRef(null),E=Q.useRef(""),A=_.viewport,$=i.content-i.viewport,P=Qo(p),C=Qo(d),S=db(h,10);function O(N){if(T.current){const j=N.clientX-T.current.left,X=N.clientY-T.current.top;f({x:j,y:X})}}return Q.useEffect(()=>{const N=j=>{const X=j.target;v?.contains(X)&&P(j,$)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[A,v,$,P]),Q.useEffect(C,[i,C]),Uh(v,S),Uh(_.content,S),Te.jsx(J6,{scope:n,scrollbar:v,hasThumb:r,onThumbChange:Qo(o),onThumbPointerUp:Qo(l),onThumbPositionChange:C,onThumbPointerDown:Qo(c),children:Te.jsx(na.div,{...m,ref:D,style:{position:"absolute",...m.style},onPointerDown:Gi(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),T.current=v.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),O(N))}),onPointerMove:Gi(e.onPointerMove,O),onPointerUp:Gi(e.onPointerUp,N=>{const j=N.target;j.hasPointerCapture(N.pointerId)&&j.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=E.current,_.viewport&&(_.viewport.style.scrollBehavior=""),T.current=null})})})}),Ay="ScrollAreaThumb",Yk=Q.forwardRef((e,t)=>{const{forceMount:n,...i}=e,r=Qk(Ay,e.__scopeScrollArea);return Te.jsx(Ud,{present:n||r.hasThumb,children:Te.jsx(eV,{ref:t,...i})})}),eV=Q.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:i,...r}=e,o=Mo(Ay,n),l=Qk(Ay,n),{onThumbPositionChange:c}=l,d=Wa(t,h=>l.onThumbChange(h)),f=Q.useRef(void 0),p=db(()=>{f.current&&(f.current(),f.current=void 0)},100);return Q.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(p(),!f.current){const _=rV(h,c);f.current=_,c()}};return c(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,p,c]),Te.jsx(na.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Gi(e.onPointerDownCapture,h=>{const _=h.target.getBoundingClientRect(),v=h.clientX-_.left,b=h.clientY-_.top;l.onThumbPointerDown({x:v,y:b})}),onPointerUp:Gi(e.onPointerUp,l.onThumbPointerUp)})});Yk.displayName=Ay;var EM="ScrollAreaCorner",Jk=Q.forwardRef((e,t)=>{const n=Mo(EM,e.__scopeScrollArea),i=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&i?Te.jsx(tV,{...e,ref:t}):null});Jk.displayName=EM;var tV=Q.forwardRef((e,t)=>{const{__scopeScrollArea:n,...i}=e,r=Mo(EM,n),[o,l]=Q.useState(0),[c,d]=Q.useState(0),f=!!(o&&c);return Uh(r.scrollbarX,()=>{const p=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(p),d(p)}),Uh(r.scrollbarY,()=>{const p=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(p),l(p)}),f?Te.jsx(na.div,{...i,ref:t,style:{width:o,height:c,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Iy(e){return e?parseInt(e,10):0}function eA(e,t){const n=e/t;return isNaN(n)?0:n}function ub(e){const t=eA(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=(e.scrollbar.size-n)*t;return Math.max(i,18)}function nV(e,t,n,i="ltr"){const r=ub(n),o=r/2,l=t||o,c=r-l,d=n.scrollbar.paddingStart+l,f=n.scrollbar.size-n.scrollbar.paddingEnd-c,p=n.content-n.viewport,h=i==="ltr"?[0,p]:[p*-1,0];return tA([d,f],h)(e)}function xE(e,t,n="ltr"){const i=ub(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-r,l=t.content-t.viewport,c=o-i,d=n==="ltr"?[0,l]:[l*-1,0],f=H6(e,d);return tA([0,l],[0,c])(f)}function tA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const i=(t[1]-t[0])/(e[1]-e[0]);return t[0]+i*(n-e[0])}}function nA(e,t){return e>0&&e<t}var rV=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},i=0;return(function r(){const o={left:e.scrollLeft,top:e.scrollTop},l=n.left!==o.left,c=n.top!==o.top;(l||c)&&t(),n=o,i=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(i)};function db(e,t){const n=Qo(e),i=Q.useRef(0);return Q.useEffect(()=>()=>window.clearTimeout(i.current),[]),Q.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(n,t)},[n,t])}function Uh(e,t){const n=Qo(t);Nl(()=>{let i=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(i),r.unobserve(e)}}},[e,n])}var iV=Wk,aV=Kk,ME=qk,TE=Yk,oV=Jk,[fb]=pM("Tooltip",[zk]),hb=zk(),rA="TooltipProvider",sV=700,_x="tooltip.open",[lV,$M]=fb(rA),iA=e=>{const{__scopeTooltip:t,delayDuration:n=sV,skipDelayDuration:i=300,disableHoverableContent:r=!1,children:o}=e,l=Q.useRef(!0),c=Q.useRef(!1),d=Q.useRef(0);return Q.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),Te.jsx(lV,{scope:t,isOpenDelayedRef:l,delayDuration:n,onOpen:Q.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:Q.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,i)},[i]),isPointerInTransitRef:c,onPointerInTransitChange:Q.useCallback(f=>{c.current=f},[]),disableHoverableContent:r,children:o})};iA.displayName=rA;var i_="Tooltip",[cV,__]=fb(i_),aA=e=>{const{__scopeTooltip:t,children:n,open:i,defaultOpen:r,onOpenChange:o,disableHoverableContent:l,delayDuration:c}=e,d=$M(i_,e.__scopeTooltip),f=hb(t),[p,h]=Q.useState(null),m=uU(),_=Q.useRef(0),v=l??d.disableHoverableContent,b=c??d.delayDuration,D=Q.useRef(!1),[T,E]=nU({prop:i,defaultProp:r??!1,onChange:S=>{S?(d.onOpen(),document.dispatchEvent(new CustomEvent(_x))):d.onClose(),o?.(S)},caller:i_}),A=Q.useMemo(()=>T?D.current?"delayed-open":"instant-open":"closed",[T]),$=Q.useCallback(()=>{window.clearTimeout(_.current),_.current=0,D.current=!1,E(!0)},[E]),P=Q.useCallback(()=>{window.clearTimeout(_.current),_.current=0,E(!1)},[E]),C=Q.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>{D.current=!0,E(!0),_.current=0},b)},[b,E]);return Q.useEffect(()=>()=>{_.current&&(window.clearTimeout(_.current),_.current=0)},[]),Te.jsx(U6,{...f,children:Te.jsx(cV,{scope:t,contentId:m,open:T,stateAttribute:A,trigger:p,onTriggerChange:h,onTriggerEnter:Q.useCallback(()=>{d.isOpenDelayedRef.current?C():$()},[d.isOpenDelayedRef,C,$]),onTriggerLeave:Q.useCallback(()=>{v?P():(window.clearTimeout(_.current),_.current=0)},[P,v]),onOpen:$,onClose:P,disableHoverableContent:v,children:n})})};aA.displayName=i_;var vx="TooltipTrigger",oA=Q.forwardRef((e,t)=>{const{__scopeTooltip:n,...i}=e,r=__(vx,n),o=$M(vx,n),l=hb(n),c=Q.useRef(null),d=Wa(t,c,r.onTriggerChange),f=Q.useRef(!1),p=Q.useRef(!1),h=Q.useCallback(()=>f.current=!1,[]);return Q.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),Te.jsx(V6,{asChild:!0,...l,children:Te.jsx(na.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...i,ref:d,onPointerMove:Gi(e.onPointerMove,m=>{m.pointerType!=="touch"&&!p.current&&!o.isPointerInTransitRef.current&&(r.onTriggerEnter(),p.current=!0)}),onPointerLeave:Gi(e.onPointerLeave,()=>{r.onTriggerLeave(),p.current=!1}),onPointerDown:Gi(e.onPointerDown,()=>{r.open&&r.onClose(),f.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Gi(e.onFocus,()=>{f.current||r.onOpen()}),onBlur:Gi(e.onBlur,r.onClose),onClick:Gi(e.onClick,r.onClose)})})});oA.displayName=vx;var PM="TooltipPortal",[uV,dV]=fb(PM,{forceMount:void 0}),sA=e=>{const{__scopeTooltip:t,forceMount:n,children:i,container:r}=e,o=__(PM,t);return Te.jsx(uV,{scope:t,forceMount:n,children:Te.jsx(Ud,{present:n||o.open,children:Te.jsx(wk,{asChild:!0,container:r,children:i})})})};sA.displayName=PM;var Vh="TooltipContent",lA=Q.forwardRef((e,t)=>{const n=dV(Vh,e.__scopeTooltip),{forceMount:i=n.forceMount,side:r="top",...o}=e,l=__(Vh,e.__scopeTooltip);return Te.jsx(Ud,{present:i||l.open,children:l.disableHoverableContent?Te.jsx(cA,{side:r,...o,ref:t}):Te.jsx(fV,{side:r,...o,ref:t})})}),fV=Q.forwardRef((e,t)=>{const n=__(Vh,e.__scopeTooltip),i=$M(Vh,e.__scopeTooltip),r=Q.useRef(null),o=Wa(t,r),[l,c]=Q.useState(null),{trigger:d,onClose:f}=n,p=r.current,{onPointerInTransitChange:h}=i,m=Q.useCallback(()=>{c(null),h(!1)},[h]),_=Q.useCallback((v,b)=>{const D=v.currentTarget,T={x:v.clientX,y:v.clientY},E=gV(T,D.getBoundingClientRect()),A=_V(T,E),$=vV(b.getBoundingClientRect()),P=bV([...A,...$]);c(P),h(!0)},[h]);return Q.useEffect(()=>()=>m(),[m]),Q.useEffect(()=>{if(d&&p){const v=D=>_(D,p),b=D=>_(D,d);return d.addEventListener("pointerleave",v),p.addEventListener("pointerleave",b),()=>{d.removeEventListener("pointerleave",v),p.removeEventListener("pointerleave",b)}}},[d,p,_,m]),Q.useEffect(()=>{if(l){const v=b=>{const D=b.target,T={x:b.clientX,y:b.clientY},E=d?.contains(D)||p?.contains(D),A=!yV(T,l);E?m():A&&(m(),f())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[d,p,l,f,m]),Te.jsx(cA,{...e,ref:o})}),[hV,mV]=fb(i_,{isInside:!1}),pV=KB("TooltipContent"),cA=Q.forwardRef((e,t)=>{const{__scopeTooltip:n,children:i,"aria-label":r,onEscapeKeyDown:o,onPointerDownOutside:l,...c}=e,d=__(Vh,n),f=hb(n),{onClose:p}=d;return Q.useEffect(()=>(document.addEventListener(_x,p),()=>document.removeEventListener(_x,p)),[p]),Q.useEffect(()=>{if(d.trigger){const h=m=>{m.target?.contains(d.trigger)&&p()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[d.trigger,p]),Te.jsx(yk,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:h=>h.preventDefault(),onDismiss:p,children:Te.jsxs(G6,{"data-state":d.stateAttribute,...f,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Te.jsx(pV,{children:i}),Te.jsx(hV,{scope:n,isInside:!0,children:Te.jsx(gk,{id:d.contentId,role:"tooltip",children:r||i})})]})})});lA.displayName=Vh;var uA="TooltipArrow",dA=Q.forwardRef((e,t)=>{const{__scopeTooltip:n,...i}=e,r=hb(n);return mV(uA,n).isInside?null:Te.jsx(W6,{...r,...i,ref:t})});dA.displayName=uA;function gV(e,t){const n=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,i,r,o)){case o:return"left";case r:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function _V(e,t,n=5){const i=[];switch(t){case"top":i.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":i.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":i.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":i.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return i}function vV(e){const{top:t,right:n,bottom:i,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:i},{x:r,y:i}]}function yV(e,t){const{x:n,y:i}=e;let r=!1;for(let o=0,l=t.length-1;o<t.length;l=o++){const c=t[o],d=t[l],f=c.x,p=c.y,h=d.x,m=d.y;p>i!=m>i&&n<(h-f)*(i-p)/(m-p)+f&&(r=!r)}return r}function bV(e){const t=e.slice();return t.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),wV(t)}function wV(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const r=e[i];for(;t.length>=2;){const o=t[t.length-1],l=t[t.length-2];if((o.x-l.x)*(r.y-l.y)>=(o.y-l.y)*(r.x-l.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let i=e.length-1;i>=0;i--){const r=e[i];for(;n.length>=2;){const o=n[n.length-1],l=n[n.length-2];if((o.x-l.x)*(r.y-l.y)>=(o.y-l.y)*(r.x-l.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var xV=iA,MV=aA,TV=oA,SV=sA,EV=lA,$V=dA,iw={exports:{}};var SE;function PV(){return SE||(SE=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=r(o,i(c)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)t.call(o,c)&&o[c]&&(l=r(l,c));return l}function r(o,l){return l?o?o+" "+l:o+l:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(iw)),iw.exports}var CV=PV();const qr=rM(CV),cu={asChild:{type:"boolean"}},Zg={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},fA={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},hA=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],mb={color:{type:"enum",values:hA,default:void 0}},mA={color:{type:"enum",values:hA,default:""}},pb={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},kV=["normal","start","end","both"],pA={trim:{type:"enum",className:"rt-r-lt",values:kV,responsive:!0}},AV=["left","center","right"],gA={align:{type:"enum",className:"rt-r-ta",values:AV,responsive:!0}},IV=["wrap","nowrap","pretty","balance"],_A={wrap:{type:"enum",className:"rt-r-tw",values:IV,responsive:!0}},vA={truncate:{type:"boolean",className:"rt-truncate"}},OV=["light","regular","medium","bold"],yA={weight:{type:"enum",className:"rt-r-weight",values:OV,responsive:!0}},DV=["h1","h2","h3","h4","h5","h6"],zV=["1","2","3","4","5","6","7","8","9"],LV={as:{type:"enum",values:DV,default:"h1"},...cu,size:{type:"enum",className:"rt-r-size",values:zV,default:"6",responsive:!0},...yA,...gA,...pA,...vA,..._A,...mb,...pb},CM=["initial","xs","sm","md","lg","xl"];function bA(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Qg(e){return typeof e=="object"&&Object.keys(e).some(t=>CM.includes(t))}function Zc({className:e,customProperties:t,...n}){const i=Oy({allowArbitraryValues:!0,className:e,...n}),r=RV({customProperties:t,...n});return[i,r]}function Oy({allowArbitraryValues:e,value:t,className:n,propValues:i,parseValue:r=o=>o}){const o=[];if(t){if(typeof t=="string"&&i.includes(t))return EE(n,t,r);if(Qg(t)){const l=t;for(const c in l){if(!bA(l,c)||!CM.includes(c))continue;const d=l[c];if(d!==void 0){if(i.includes(d)){const f=EE(n,d,r),p=c==="initial"?f:`${c}:${f}`;o.push(p)}else if(e){const f=c==="initial"?n:`${c}:${n}`;o.push(f)}}}return o.join(" ")}if(e)return n}}function EE(e,t,n){const i=e?"-":"",r=n(t),o=r?.startsWith("-"),l=o?"-":"",c=o?r?.substring(1):r;return`${l}${e}${i}${c}`}function RV({customProperties:e,value:t,propValues:n,parseValue:i=r=>r}){let r={};if(!(!t||typeof t=="string"&&n.includes(t))){if(typeof t=="string"&&(r=Object.fromEntries(e.map(o=>[o,t]))),Qg(t)){const o=t;for(const l in o){if(!bA(o,l)||!CM.includes(l))continue;const c=o[l];if(!n.includes(c))for(const d of e)r={[l==="initial"?d:`${d}-${l}`]:c,...r}}}for(const o in r){const l=r[o];l!==void 0&&(r[o]=i(l))}return r}}function Dy(...e){let t={};for(const n of e)n&&(t={...t,...n});return Object.keys(t).length?t:void 0}function FV(...e){return Object.assign({},...e)}function wo(e,...t){let n,i;const r={...e},o=FV(...t);for(const l in o){let c=r[l];const d=o[l];if(d.default!==void 0&&c===void 0&&(c=d.default),d.type==="enum"&&![d.default,...d.values].includes(c)&&!Qg(c)&&(c=d.default),r[l]=c,"className"in d&&d.className){delete r[l];const f="responsive"in d;if(!c||Qg(c)&&!f)continue;if(Qg(c)&&(d.default!==void 0&&c.initial===void 0&&(c.initial=d.default),d.type==="enum"&&([d.default,...d.values].includes(c.initial)||(c.initial=d.default))),d.type==="enum"){const p=Oy({allowArbitraryValues:!1,value:c,className:d.className,propValues:d.values,parseValue:d.parseValue});n=qr(n,p);continue}if(d.type==="string"||d.type==="enum | string"){const p=d.type==="string"?[]:d.values,[h,m]=Zc({className:d.className,customProperties:d.customProperties,propValues:p,parseValue:d.parseValue,value:c});i=Dy(i,m),n=qr(n,h);continue}if(d.type==="boolean"&&c){n=qr(n,d.className);continue}}}return r.className=qr(n,e.className),r.style=Dy(i,e.style),r}const md=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],Ks={m:{type:"enum | string",values:md,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:md,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:md,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:md,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:md,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:md,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:md,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},Bg=Q.forwardRef((e,t)=>{const{children:n,className:i,asChild:r,as:o="h1",color:l,...c}=wo(e,LV,Ks);return Q.createElement(lu,{"data-accent-color":l,...c,ref:t,className:qr("rt-Heading",i)},r?n:Q.createElement(o,null,n))});Bg.displayName="Heading";const NV=["span","div","label","p"],jV=["1","2","3","4","5","6","7","8","9"],BV={as:{type:"enum",values:NV,default:"span"},...cu,size:{type:"enum",className:"rt-r-size",values:jV,responsive:!0},...yA,...gA,...pA,...vA,..._A,...mb,...pb},Rs=Q.forwardRef((e,t)=>{const{children:n,className:i,asChild:r,as:o="span",color:l,...c}=wo(e,BV,Ks);return Q.createElement(lu,{"data-accent-color":l,...c,ref:t,className:qr("rt-Text",i)},r?n:Q.createElement(o,null,n))});Rs.displayName="Text";function UV(e){switch(e){case"tomato":case"red":case"ruby":case"crimson":case"pink":case"plum":case"purple":case"violet":return"mauve";case"iris":case"indigo":case"blue":case"sky":case"cyan":return"slate";case"teal":case"jade":case"mint":case"green":return"sage";case"grass":case"lime":return"olive";case"yellow":case"amber":case"orange":case"brown":case"gold":case"bronze":return"sand";case"gray":return"gray"}}const VV=["none","small","medium","large","full"],gb={radius:{type:"enum",values:VV,default:void 0}},Fa={hasBackground:{default:!0},appearance:{default:"inherit"},accentColor:{default:"indigo"},grayColor:{default:"auto"},panelBackground:{default:"translucent"},radius:{default:"medium"},scaling:{default:"100%"}},$h=()=>{},yx=Q.createContext(void 0),kM=Q.forwardRef((e,t)=>Q.useContext(yx)===void 0?Q.createElement(xV,{delayDuration:200},Q.createElement(hU,{dir:"ltr"},Q.createElement(wA,{...e,ref:t}))):Q.createElement(AM,{...e,ref:t}));kM.displayName="Theme";const wA=Q.forwardRef((e,t)=>{const{appearance:n=Fa.appearance.default,accentColor:i=Fa.accentColor.default,grayColor:r=Fa.grayColor.default,panelBackground:o=Fa.panelBackground.default,radius:l=Fa.radius.default,scaling:c=Fa.scaling.default,hasBackground:d=Fa.hasBackground.default,...f}=e,[p,h]=Q.useState(n);Q.useEffect(()=>h(n),[n]);const[m,_]=Q.useState(i);Q.useEffect(()=>_(i),[i]);const[v,b]=Q.useState(r);Q.useEffect(()=>b(r),[r]);const[D,T]=Q.useState(o);Q.useEffect(()=>T(o),[o]);const[E,A]=Q.useState(l);Q.useEffect(()=>A(l),[l]);const[$,P]=Q.useState(c);return Q.useEffect(()=>P(c),[c]),Q.createElement(AM,{...f,ref:t,isRoot:!0,hasBackground:d,appearance:p,accentColor:m,grayColor:v,panelBackground:D,radius:E,scaling:$,onAppearanceChange:h,onAccentColorChange:_,onGrayColorChange:b,onPanelBackgroundChange:T,onRadiusChange:A,onScalingChange:P})});wA.displayName="ThemeRoot";const AM=Q.forwardRef((e,t)=>{const n=Q.useContext(yx),{asChild:i,isRoot:r,hasBackground:o,appearance:l=n?.appearance??Fa.appearance.default,accentColor:c=n?.accentColor??Fa.accentColor.default,grayColor:d=n?.resolvedGrayColor??Fa.grayColor.default,panelBackground:f=n?.panelBackground??Fa.panelBackground.default,radius:p=n?.radius??Fa.radius.default,scaling:h=n?.scaling??Fa.scaling.default,onAppearanceChange:m=$h,onAccentColorChange:_=$h,onGrayColorChange:v=$h,onPanelBackgroundChange:b=$h,onRadiusChange:D=$h,onScalingChange:T=$h,...E}=e,A=i?lu:"div",$=d==="auto"?UV(c):d,P=e.appearance==="light"||e.appearance==="dark",C=o===void 0?r||P:o;return Q.createElement(yx.Provider,{value:Q.useMemo(()=>({appearance:l,accentColor:c,grayColor:d,resolvedGrayColor:$,panelBackground:f,radius:p,scaling:h,onAppearanceChange:m,onAccentColorChange:_,onGrayColorChange:v,onPanelBackgroundChange:b,onRadiusChange:D,onScalingChange:T}),[l,c,d,$,f,p,h,m,_,v,b,D,T])},Q.createElement(A,{"data-is-root-theme":r?"true":"false","data-accent-color":c,"data-gray-color":$,"data-has-background":C?"true":"false","data-panel-background":f,"data-radius":p,"data-scaling":h,ref:t,...E,className:qr("radix-themes",{light:l==="light",dark:l==="dark"},E.className)}))});AM.displayName="ThemeImpl";function xA(e,t){const{asChild:n,children:i}=e;if(!n)return typeof t=="function"?t(i):t;const r=Q.Children.only(i);return Q.cloneElement(r,{children:typeof t=="function"?t(r.props.children):t})}const GV=["1","2","3"],WV=["solid","soft","surface","outline"],HV={...cu,size:{type:"enum",className:"rt-r-size",values:GV,default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:WV,default:"soft"},...mA,...pb,...gb},MA=Q.forwardRef((e,t)=>{const{asChild:n,className:i,color:r,radius:o,...l}=wo(e,HV,Ks),c=n?lu:"span";return Q.createElement(c,{"data-accent-color":r,"data-radius":o,...l,ref:t,className:qr("rt-reset","rt-Badge",i)})});MA.displayName="Badge";const KV=lu,pd=["0","1","2","3","4","5","6","7","8","9"],fy={p:{type:"enum | string",className:"rt-r-p",customProperties:["--p"],values:pd,responsive:!0},px:{type:"enum | string",className:"rt-r-px",customProperties:["--pl","--pr"],values:pd,responsive:!0},py:{type:"enum | string",className:"rt-r-py",customProperties:["--pt","--pb"],values:pd,responsive:!0},pt:{type:"enum | string",className:"rt-r-pt",customProperties:["--pt"],values:pd,responsive:!0},pr:{type:"enum | string",className:"rt-r-pr",customProperties:["--pr"],values:pd,responsive:!0},pb:{type:"enum | string",className:"rt-r-pb",customProperties:["--pb"],values:pd,responsive:!0},pl:{type:"enum | string",className:"rt-r-pl",customProperties:["--pl"],values:pd,responsive:!0}},aw=["visible","hidden","clip","scroll","auto"],qV=["static","relative","absolute","fixed","sticky"],Sg=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],ZV=["0","1"],QV=["0","1"],TA={...fy,...Zg,...fA,position:{type:"enum",className:"rt-r-position",values:qV,responsive:!0},inset:{type:"enum | string",className:"rt-r-inset",customProperties:["--inset"],values:Sg,responsive:!0},top:{type:"enum | string",className:"rt-r-top",customProperties:["--top"],values:Sg,responsive:!0},right:{type:"enum | string",className:"rt-r-right",customProperties:["--right"],values:Sg,responsive:!0},bottom:{type:"enum | string",className:"rt-r-bottom",customProperties:["--bottom"],values:Sg,responsive:!0},left:{type:"enum | string",className:"rt-r-left",customProperties:["--left"],values:Sg,responsive:!0},overflow:{type:"enum",className:"rt-r-overflow",values:aw,responsive:!0},overflowX:{type:"enum",className:"rt-r-ox",values:aw,responsive:!0},overflowY:{type:"enum",className:"rt-r-oy",values:aw,responsive:!0},flexBasis:{type:"string",className:"rt-r-fb",customProperties:["--flex-basis"],responsive:!0},flexShrink:{type:"enum | string",className:"rt-r-fs",customProperties:["--flex-shrink"],values:ZV,responsive:!0},flexGrow:{type:"enum | string",className:"rt-r-fg",customProperties:["--flex-grow"],values:QV,responsive:!0},gridArea:{type:"string",className:"rt-r-ga",customProperties:["--grid-area"],responsive:!0},gridColumn:{type:"string",className:"rt-r-gc",customProperties:["--grid-column"],responsive:!0},gridColumnStart:{type:"string",className:"rt-r-gcs",customProperties:["--grid-column-start"],responsive:!0},gridColumnEnd:{type:"string",className:"rt-r-gce",customProperties:["--grid-column-end"],responsive:!0},gridRow:{type:"string",className:"rt-r-gr",customProperties:["--grid-row"],responsive:!0},gridRowStart:{type:"string",className:"rt-r-grs",customProperties:["--grid-row-start"],responsive:!0},gridRowEnd:{type:"string",className:"rt-r-gre",customProperties:["--grid-row-end"],responsive:!0}},XV=["1","2","3","4"],YV=["classic","solid","soft","surface","outline","ghost"],$E={...cu,size:{type:"enum",className:"rt-r-size",values:XV,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:YV,default:"solid"},...mA,...pb,...gb,loading:{type:"boolean",className:"rt-loading",default:!1}},ow=["0","1","2","3","4","5","6","7","8","9"],JV={gap:{type:"enum | string",className:"rt-r-gap",customProperties:["--gap"],values:ow,responsive:!0},gapX:{type:"enum | string",className:"rt-r-cg",customProperties:["--column-gap"],values:ow,responsive:!0},gapY:{type:"enum | string",className:"rt-r-rg",customProperties:["--row-gap"],values:ow,responsive:!0}},e8=["div","span"],t8=["none","inline-flex","flex"],n8=["row","column","row-reverse","column-reverse"],r8=["start","center","end","baseline","stretch"],i8=["start","center","end","between"],a8=["nowrap","wrap","wrap-reverse"],SA={as:{type:"enum",values:e8,default:"div"},...cu,display:{type:"enum",className:"rt-r-display",values:t8,responsive:!0},direction:{type:"enum",className:"rt-r-fd",values:n8,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:r8,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:i8,parseValue:o8,responsive:!0},wrap:{type:"enum",className:"rt-r-fw",values:a8,responsive:!0},...JV};function o8(e){return e==="between"?"space-between":e}const fa=Q.forwardRef((e,t)=>{const{className:n,asChild:i,as:r="div",...o}=wo(e,SA,TA,Ks);return Q.createElement(i?KV:r,{...o,ref:t,className:qr("rt-Flex",n)})});fa.displayName="Flex";const s8=["1","2","3"],l8={size:{type:"enum",className:"rt-r-size",values:s8,default:"2",responsive:!0},loading:{type:"boolean",default:!0}},_b=Q.forwardRef((e,t)=>{const{className:n,children:i,loading:r,...o}=wo(e,l8,Ks);if(!r)return i;const l=Q.createElement("span",{...o,ref:t,className:qr("rt-Spinner",n)},Q.createElement("span",{className:"rt-SpinnerLeaf"}),Q.createElement("span",{className:"rt-SpinnerLeaf"}),Q.createElement("span",{className:"rt-SpinnerLeaf"}),Q.createElement("span",{className:"rt-SpinnerLeaf"}),Q.createElement("span",{className:"rt-SpinnerLeaf"}),Q.createElement("span",{className:"rt-SpinnerLeaf"}),Q.createElement("span",{className:"rt-SpinnerLeaf"}),Q.createElement("span",{className:"rt-SpinnerLeaf"}));return i===void 0?l:Q.createElement(fa,{asChild:!0,position:"relative",align:"center",justify:"center"},Q.createElement("span",null,Q.createElement("span",{"aria-hidden":!0,style:{display:"contents",visibility:"hidden"},inert:void 0},i),Q.createElement(fa,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},Q.createElement("span",null,l))))});_b.displayName="Spinner";const c8=gk;function u8(e,t){if(e!==void 0)return typeof e=="string"?t(e):Object.fromEntries(Object.entries(e).map(([n,i])=>[n,t(i)]))}function d8(e){switch(e){case"1":return"1";case"2":case"3":return"2";case"4":return"3"}}const IM=Q.forwardRef((e,t)=>{const{size:n=$E.size.default}=e,{className:i,children:r,asChild:o,color:l,radius:c,disabled:d=e.loading,...f}=wo(e,$E,Ks),p=o?lu:"button";return Q.createElement(p,{"data-disabled":d||void 0,"data-accent-color":l,"data-radius":c,...f,ref:t,className:qr("rt-reset","rt-BaseButton",i),disabled:d},e.loading?Q.createElement(Q.Fragment,null,Q.createElement("span",{style:{display:"contents",visibility:"hidden"},"aria-hidden":!0},r),Q.createElement(c8,null,r),Q.createElement(fa,{asChild:!0,align:"center",justify:"center",position:"absolute",inset:"0"},Q.createElement("span",null,Q.createElement(_b,{size:u8(n,d8)})))):r)});IM.displayName="BaseButton";const bx=Q.forwardRef(({className:e,...t},n)=>Q.createElement(IM,{...t,ref:n,className:qr("rt-Button",e)}));bx.displayName="Button";const f8=["1","2","3","4","5"],h8=["surface","classic","ghost"],m8={...cu,size:{type:"enum",className:"rt-r-size",values:f8,default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:h8,default:"surface"}},Xg=Q.forwardRef((e,t)=>{const{asChild:n,className:i,...r}=wo(e,m8,Ks),o=n?lu:"div";return Q.createElement(o,{ref:t,...r,className:qr("rt-reset","rt-BaseCard","rt-Card",i)})});Xg.displayName="Card";var EA=na;EA.dispatchDiscreteCustomEvent=mk;EA.Root=na;const p8=["1","2","3","4"],g8=["none","initial"],_8=["left","center","right"],v8={...cu,size:{type:"enum",className:"rt-r-size",values:p8,default:"4",responsive:!0},display:{type:"enum",className:"rt-r-display",values:g8,parseValue:y8,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:_8,parseValue:b8,responsive:!0}};function y8(e){return e==="initial"?"flex":e}function b8(e){return e==="left"?"start":e==="right"?"end":e}const OM=Q.forwardRef(({width:e,minWidth:t,maxWidth:n,height:i,minHeight:r,maxHeight:o,...l},c)=>{const{asChild:d,children:f,className:p,...h}=wo(l,v8,TA,Ks),{className:m,style:_}=wo({width:e,minWidth:t,maxWidth:n,height:i,minHeight:r,maxHeight:o},Zg,fA),v=d?lu:"div";return Q.createElement(v,{...h,ref:c,className:qr("rt-Container",p)},xA({asChild:d,children:f},b=>Q.createElement("div",{className:qr("rt-ContainerInner",m),style:_},b)))});OM.displayName="Container";const w8=["1","2","3"],Eg={...cu,size:{values:w8,default:"1"},...gb,scrollbars:{default:"both"}};function x8(e){const{m:t,mx:n,my:i,mt:r,mr:o,mb:l,ml:c,...d}=e;return{m:t,mx:n,my:i,mt:r,mr:o,mb:l,ml:c,rest:d}}const gd=Ks.m.values;function M8(e){const[t,n]=Zc({className:"rt-r-m",customProperties:["--margin"],propValues:gd,value:e.m}),[i,r]=Zc({className:"rt-r-mx",customProperties:["--margin-left","--margin-right"],propValues:gd,value:e.mx}),[o,l]=Zc({className:"rt-r-my",customProperties:["--margin-top","--margin-bottom"],propValues:gd,value:e.my}),[c,d]=Zc({className:"rt-r-mt",customProperties:["--margin-top"],propValues:gd,value:e.mt}),[f,p]=Zc({className:"rt-r-mr",customProperties:["--margin-right"],propValues:gd,value:e.mr}),[h,m]=Zc({className:"rt-r-mb",customProperties:["--margin-bottom"],propValues:gd,value:e.mb}),[_,v]=Zc({className:"rt-r-ml",customProperties:["--margin-left"],propValues:gd,value:e.ml});return[qr(t,i,o,c,f,h,_),Dy(n,r,l,d,p,m,v)]}const $A=Q.forwardRef((e,t)=>{const{rest:n,...i}=x8(e),[r,o]=M8(i),{asChild:l,children:c,className:d,style:f,type:p,scrollHideDelay:h=p!=="scroll"?0:void 0,dir:m,size:_=Eg.size.default,radius:v=Eg.radius.default,scrollbars:b=Eg.scrollbars.default,...D}=n;return Q.createElement(iV,{type:p,scrollHideDelay:h,className:qr("rt-ScrollAreaRoot",r,d),style:Dy(o,f),asChild:l},xA({asChild:l,children:c},T=>Q.createElement(Q.Fragment,null,Q.createElement(aV,{...D,ref:t,className:"rt-ScrollAreaViewport"},T),Q.createElement("div",{className:"rt-ScrollAreaViewportFocusRing"}),b!=="vertical"?Q.createElement(ME,{"data-radius":v,orientation:"horizontal",className:qr("rt-ScrollAreaScrollbar",Oy({className:"rt-r-size",value:_,propValues:Eg.size.values}))},Q.createElement(TE,{className:"rt-ScrollAreaThumb"})):null,b!=="horizontal"?Q.createElement(ME,{"data-radius":v,orientation:"vertical",className:qr("rt-ScrollAreaScrollbar",Oy({className:"rt-r-size",value:_,propValues:Eg.size.values}))},Q.createElement(TE,{className:"rt-ScrollAreaThumb"})):null,b==="both"?Q.createElement(oV,{className:"rt-ScrollAreaCorner"}):null)))});$A.displayName="ScrollArea";const DM=Q.forwardRef(({className:e,...t},n)=>Q.createElement(IM,{...t,ref:n,className:qr("rt-IconButton",e)}));DM.displayName="IconButton";const T8=["1","2","3"],S8=["classic","surface","soft"],E8={size:{type:"enum",className:"rt-r-size",values:T8,default:"2",responsive:!0},variant:{type:"enum",className:"rt-variant",values:S8,default:"surface"},...mb,...gb},$8=["left","right"],P8={side:{type:"enum",values:$8},...mb,gap:SA.gap,px:fy.px,pl:fy.pl,pr:fy.pr},PA=Q.forwardRef((e,t)=>{const n=Q.useRef(null),{children:i,className:r,color:o,radius:l,style:c,...d}=wo(e,E8,Ks);return Q.createElement("div",{"data-accent-color":o,"data-radius":l,style:c,className:qr("rt-TextFieldRoot",r),onPointerDown:f=>{const p=f.target;if(p.closest("input, button, a"))return;const h=n.current;if(!h)return;const m=p.closest(`
            .rt-TextFieldSlot[data-side='right'],
            .rt-TextFieldSlot:not([data-side='right']) ~ .rt-TextFieldSlot:not([data-side='left'])
          `)?h.value.length:0;requestAnimationFrame(()=>{try{h.setSelectionRange(m,m)}catch{}h.focus()})}},Q.createElement("input",{spellCheck:"false",...d,ref:mM(n,t),className:"rt-reset rt-TextFieldInput"}),i)});PA.displayName="TextField.Root";const CA=Q.forwardRef((e,t)=>{const{className:n,color:i,side:r,...o}=wo(e,P8);return Q.createElement("div",{"data-accent-color":i,"data-side":r,...o,ref:t,className:qr("rt-TextFieldSlot",n)})});CA.displayName="TextField.Slot";const C8={content:{type:"ReactNode",required:!0},width:Zg.width,minWidth:Zg.minWidth,maxWidth:{...Zg.maxWidth,default:"360px"}},zM=Q.forwardRef((e,t)=>{const{children:n,className:i,open:r,defaultOpen:o,onOpenChange:l,delayDuration:c,disableHoverableContent:d,content:f,container:p,forceMount:h,...m}=wo(e,C8),_={open:r,defaultOpen:o,onOpenChange:l,delayDuration:c,disableHoverableContent:d};return Q.createElement(MV,{..._},Q.createElement(TV,{asChild:!0},n),Q.createElement(SV,{container:p,forceMount:h},Q.createElement(kM,{asChild:!0},Q.createElement(EV,{sideOffset:4,collisionPadding:10,...m,asChild:!1,ref:t,className:qr("rt-TooltipContent",i)},Q.createElement(Rs,{as:"p",className:"rt-TooltipText",size:"1"},f),Q.createElement($V,{className:"rt-TooltipArrow"})))))});zM.displayName="Tooltip";var v_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},k8={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},A8=class{#e=k8;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Sd=new A8;function I8(e){setTimeout(e,0)}var zd=typeof window>"u"||"Deno"in globalThis;function da(){}function O8(e,t){return typeof e=="function"?e(t):e}function wx(e){return typeof e=="number"&&e>=0&&e!==1/0}function kA(e,t){return Math.max(e+(t||0)-Date.now(),0)}function tu(e,t){return typeof e=="function"?e(t):e}function po(e,t){return typeof e=="function"?e(t):e}function PE(e,t){const{type:n="all",exact:i,fetchStatus:r,predicate:o,queryKey:l,stale:c}=e;if(l){if(i){if(t.queryHash!==LM(l,t.options))return!1}else if(!o_(t.queryKey,l))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||r&&r!==t.state.fetchStatus||o&&!o(t))}function CE(e,t){const{exact:n,status:i,predicate:r,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(a_(t.options.mutationKey)!==a_(o))return!1}else if(!o_(t.options.mutationKey,o))return!1}return!(i&&t.state.status!==i||r&&!r(t))}function LM(e,t){return(t?.queryKeyHashFn||a_)(e)}function a_(e){return JSON.stringify(e,(t,n)=>Mx(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function o_(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>o_(e[n],t[n])):!1}var D8=Object.prototype.hasOwnProperty;function AA(e,t){if(e===t)return e;const n=kE(e)&&kE(t);if(!n&&!(Mx(e)&&Mx(t)))return t;const r=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,c=n?new Array(l):{};let d=0;for(let f=0;f<l;f++){const p=n?f:o[f],h=e[p],m=t[p];if(h===m){c[p]=h,(n?f<r:D8.call(e,p))&&d++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){c[p]=m;continue}const _=AA(h,m);c[p]=_,_===h&&d++}return r===l&&d===r?e:c}function xx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function kE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Mx(e){if(!AE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!AE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function AE(e){return Object.prototype.toString.call(e)==="[object Object]"}function z8(e){return new Promise(t=>{Sd.setTimeout(t,e)})}function Tx(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?AA(e,t):t}function L8(e,t,n=0){const i=[...e,t];return n&&i.length>n?i.slice(1):i}function R8(e,t,n=0){const i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var RM=Symbol();function IA(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===RM?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function F8(e,t){return typeof e=="function"?e(...t):!!e}var N8=class extends v_{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!zd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},FM=new N8;function Sx(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});n.status="pending",n.catch(()=>{});function i(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{i({status:"fulfilled",value:r}),e(r)},n.reject=r=>{i({status:"rejected",reason:r}),t(r)},n}var j8=I8;function B8(){let e=[],t=0,n=c=>{c()},i=c=>{c()},r=j8;const o=c=>{t?e.push(c):r(()=>{n(c)})},l=()=>{const c=e;e=[],c.length&&r(()=>{i(()=>{c.forEach(d=>{n(d)})})})};return{batch:c=>{let d;t++;try{d=c()}finally{t--,t||l()}return d},batchCalls:c=>(...d)=>{o(()=>{c(...d)})},schedule:o,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{i=c},setScheduler:c=>{r=c}}}var ki=B8(),U8=class extends v_{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!zd&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},zy=new U8;function V8(e){return Math.min(1e3*2**e,3e4)}function OA(e){return(e??"online")==="online"?zy.isOnline():!0}var Ex=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function DA(e){let t=!1,n=0,i;const r=Sx(),o=()=>r.status!=="pending",l=b=>{if(!o()){const D=new Ex(b);m(D),e.onCancel?.(D)}},c=()=>{t=!0},d=()=>{t=!1},f=()=>FM.isFocused()&&(e.networkMode==="always"||zy.isOnline())&&e.canRun(),p=()=>OA(e.networkMode)&&e.canRun(),h=b=>{o()||(i?.(),r.resolve(b))},m=b=>{o()||(i?.(),r.reject(b))},_=()=>new Promise(b=>{i=D=>{(o()||f())&&b(D)},e.onPause?.()}).then(()=>{i=void 0,o()||e.onContinue?.()}),v=()=>{if(o())return;let b;const D=n===0?e.initialPromise:void 0;try{b=D??e.fn()}catch(T){b=Promise.reject(T)}Promise.resolve(b).then(h).catch(T=>{if(o())return;const E=e.retry??(zd?0:3),A=e.retryDelay??V8,$=typeof A=="function"?A(n,T):A,P=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,T);if(t||!P){m(T);return}n++,e.onFail?.(n,T),z8($).then(()=>f()?void 0:_()).then(()=>{t?m(T):v()})})};return{promise:r,status:()=>r.status,cancel:l,continue:()=>(i?.(),r),cancelRetry:c,continueRetry:d,canStart:p,start:()=>(p()?v():_().then(v),r)}}var zA=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wx(this.gcTime)&&(this.#e=Sd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(zd?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Sd.clearTimeout(this.#e),this.#e=void 0)}},G8=class extends zA{#e;#t;#n;#i;#r;#s;#o;constructor(e){super(),this.#o=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=OE(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=OE(this.options);t.data!==void 0&&(this.setState(IE(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=Tx(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(da).catch(da):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>po(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===RM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>tu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!kA(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,i=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},r=()=>{const c=IA(this.options,t),f=(()=>{const p={client:this.#i,queryKey:this.queryKey,meta:this.meta};return i(p),p})();return this.#o=!1,this.options.persister?this.options.persister(c,f,this):c(f)},l=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:r};return i(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#r=DA({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof Ex&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,d)=>{this.#a({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#r.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Ex){if(c.silent)return this.#r.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...LA(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...IE(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const r=e.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),ki.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function LA(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OA(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function IE(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function OE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,i=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var W8=class extends v_{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=Sx(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#s;#o;#a;#p;#f;#h;#c;#u;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),DE(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $x(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $x(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof po(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),t._defaulted&&!xx(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&zE(this.#t,n,this.options,t)&&this.#d(),this.updateResult(),i&&(this.#t!==n||po(this.options.enabled,this.#t)!==po(t.enabled,this.#t)||tu(this.options.staleTime,this.#t)!==tu(t.staleTime,this.#t))&&this.#g();const r=this.#_();i&&(this.#t!==n||po(this.options.enabled,this.#t)!==po(t.enabled,this.#t)||r!==this.#l)&&this.#v(r)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return K8(this,n)&&(this.#i=n,this.#s=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(e){this.#x();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(da)),t}#g(){this.#b();const e=tu(this.options.staleTime,this.#t);if(zd||this.#i.isStale||!wx(e))return;const n=kA(this.#i.dataUpdatedAt,e)+1;this.#c=Sd.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#_(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(zd||po(this.options.enabled,this.#t)===!1||!wx(this.#l)||this.#l===0)&&(this.#u=Sd.setInterval(()=>{(this.options.refetchIntervalInBackground||FM.isFocused())&&this.#d()},this.#l))}#y(){this.#g(),this.#v(this.#_())}#b(){this.#c&&(Sd.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Sd.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,i=this.options,r=this.#i,o=this.#r,l=this.#s,d=e!==n?e.state:this.#n,{state:f}=e;let p={...f},h=!1,m;if(t._optimisticResults){const O=this.hasListeners(),N=!O&&DE(e,t),j=O&&zE(e,n,t,i);(N||j)&&(p={...p,...LA(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:_,errorUpdatedAt:v,status:b}=p;m=p.data;let D=!1;if(t.placeholderData!==void 0&&m===void 0&&b==="pending"){let O;r?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(O=r.data,D=!0):O=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,O!==void 0&&(b="success",m=Tx(r?.data,O,t),h=!0)}if(t.select&&m!==void 0&&!D)if(r&&m===o?.data&&t.select===this.#p)m=this.#f;else try{this.#p=t.select,m=t.select(m),m=Tx(r?.data,m,t),this.#f=m,this.#a=null}catch(O){this.#a=O}this.#a&&(_=this.#a,m=this.#f,v=Date.now(),b="error");const T=p.fetchStatus==="fetching",E=b==="pending",A=b==="error",$=E&&T,P=m!==void 0,S={status:b,fetchStatus:p.fetchStatus,isPending:E,isSuccess:b==="success",isError:A,isInitialLoading:$,isLoading:$,data:m,dataUpdatedAt:p.dataUpdatedAt,error:_,errorUpdatedAt:v,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!E,isLoadingError:A&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&P,isStale:NM(e,t),refetch:this.refetch,promise:this.#o,isEnabled:po(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=X=>{S.status==="error"?X.reject(S.error):S.data!==void 0&&X.resolve(S.data)},N=()=>{const X=this.#o=S.promise=Sx();O(X)},j=this.#o;switch(j.status){case"pending":e.queryHash===n.queryHash&&O(j);break;case"fulfilled":(S.status==="error"||S.data!==j.value)&&N();break;case"rejected":(S.status!=="error"||S.error!==j.reason)&&N();break}}return S}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#s=this.options,this.#r.data!==void 0&&(this.#h=this.#t),xx(t,e))return;this.#i=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,r=typeof i=="function"?i():i;if(r==="all"||!r&&!this.#m.size)return!0;const o=new Set(r??this.#m);return this.options.throwOnError&&o.add("error"),Object.keys(this.#i).some(l=>{const c=l;return this.#i[c]!==e[c]&&o.has(c)})};this.#M({listeners:n()})}#x(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#M(e){ki.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function H8(e,t){return po(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function DE(e,t){return H8(e,t)||e.state.data!==void 0&&$x(e,t,t.refetchOnMount)}function $x(e,t,n){if(po(t.enabled,e)!==!1&&tu(t.staleTime,e)!=="static"){const i=typeof n=="function"?n(e):n;return i==="always"||i!==!1&&NM(e,t)}return!1}function zE(e,t,n,i){return(e!==t||po(i.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&NM(e,n)}function NM(e,t){return po(t.enabled,e)!==!1&&e.isStaleByTime(tu(t.staleTime,e))}function K8(e,t){return!xx(e.getCurrentResult(),t)}function LE(e){return{onFetch:(t,n)=>{const i=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},d=0;const f=async()=>{let p=!1;const h=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},m=IA(t.options,t.fetchOptions),_=async(v,b,D)=>{if(p)return Promise.reject();if(b==null&&v.pages.length)return Promise.resolve(v);const E=(()=>{const C={client:t.client,queryKey:t.queryKey,pageParam:b,direction:D?"backward":"forward",meta:t.options.meta};return h(C),C})(),A=await m(E),{maxPages:$}=t.options,P=D?R8:L8;return{pages:P(v.pages,A,$),pageParams:P(v.pageParams,b,$)}};if(r&&o.length){const v=r==="backward",b=v?q8:RE,D={pages:o,pageParams:l},T=b(i,D);c=await _(D,T,v)}else{const v=e??o.length;do{const b=d===0?l[0]??i.initialPageParam:RE(i,c);if(d>0&&b==null)break;c=await _(c,b),d++}while(d<v)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=f}}}function RE(e,{pages:t,pageParams:n}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}function q8(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Z8=class extends zA{#e;#t;#n;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||Q8(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=DA({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#r({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",r=!this.#i.canStart();try{if(i)t();else{this.#r({type:"pending",variables:e,isPaused:r}),await this.#n.config.onMutate?.(e,this,n);const l=await this.options.onMutate?.(e,n);l!==this.state.context&&this.#r({type:"pending",context:l,variables:e,isPaused:r})}const o=await this.#i.start();return await this.#n.config.onSuccess?.(o,e,this.state.context,this,n),await this.options.onSuccess?.(o,e,this.state.context,n),await this.#n.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,e,this.state.context,n),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#n.config.onError?.(o,e,this.state.context,this,n),await this.options.onError?.(o,e,this.state.context,n),await this.#n.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,o,e,this.state.context,n),o}finally{this.#r({type:"error",error:o})}}finally{this.#n.runNext(this)}}#r(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ki.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function Q8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var X8=class extends v_{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const i=new Z8({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){this.#e.add(e);const t=jv(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=jv(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=jv(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(r=>r.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=jv(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ki.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>CE(t,n))}findAll(e={}){return this.getAll().filter(t=>CE(e,t))}notify(e){ki.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ki.batch(()=>Promise.all(e.map(t=>t.continue().catch(da))))}};function jv(e){return e.options.scope?.id}var Y8=class extends v_{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const i=t.queryKey,r=t.queryHash??LM(i,t);let o=this.get(r);return o||(o=new G8({client:e,queryKey:i,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ki.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>PE(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>PE(e,n)):t}notify(e){ki.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ki.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ki.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},J8=class{#e;#t;#n;#i;#r;#s;#o;#a;constructor(e={}){this.#e=e.queryCache||new Y8,this.#t=e.mutationCache||new X8,this.#n=e.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=FM.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=zy.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(tu(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(i.queryHash)?.state.data,l=O8(t,o);if(l!==void 0)return this.#e.build(this,i).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return ki.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;ki.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return ki.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=ki.batch(()=>this.#e.findAll(e).map(r=>r.cancel(n)));return Promise.all(i).then(da).catch(da)}invalidateQueries(e,t={}){return ki.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=ki.batch(()=>this.#e.findAll(e).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let o=r.fetch(void 0,n);return n.throwOnError||(o=o.catch(da)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(da)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(tu(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(da).catch(da)}fetchInfiniteQuery(e){return e.behavior=LE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(da).catch(da)}ensureInfiniteQueryData(e){return e.behavior=LE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#i.set(a_(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(i=>{o_(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){this.#r.set(a_(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(i=>{o_(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=LM(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===RM&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},RA=Q.createContext(void 0),e5=e=>{const t=Q.useContext(RA);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},t5=({client:e,children:t})=>(Q.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Te.jsx(RA.Provider,{value:e,children:t})),FA=Q.createContext(!1),n5=()=>Q.useContext(FA);FA.Provider;function r5(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var i5=Q.createContext(r5()),a5=()=>Q.useContext(i5),o5=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},s5=e=>{Q.useEffect(()=>{e.clearReset()},[e])},l5=({result:e,errorResetBoundary:t,throwOnError:n,query:i,suspense:r})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(r&&e.data===void 0||F8(n,[e.error,i])),c5=e=>{if(e.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...r)=>n(i(...r)):n(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},u5=(e,t)=>e.isLoading&&e.isFetching&&!t,d5=(e,t)=>e?.suspense&&t.isPending,FE=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function f5(e,t,n){const i=n5(),r=a5(),o=e5(),l=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=i?"isRestoring":"optimistic",c5(l),o5(l,r),s5(r);const c=!o.getQueryCache().get(l.queryHash),[d]=Q.useState(()=>new t(o,l)),f=d.getOptimisticResult(l),p=!i&&e.subscribed!==!1;if(Q.useSyncExternalStore(Q.useCallback(h=>{const m=p?d.subscribe(ki.batchCalls(h)):da;return d.updateResult(),m},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),Q.useEffect(()=>{d.setOptions(l)},[l,d]),d5(l,f))throw FE(l,d,r);if(l5({result:f,errorResetBoundary:r,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw f.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,f),l.experimental_prefetchInRender&&!zd&&u5(f,i)&&(c?FE(l,d,r):o.getQueryCache().get(l.queryHash)?.promise)?.catch(da).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?f:d.trackResult(f)}function NE(e,t){return f5(e,W8)}let h5={data:""},m5=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||h5},p5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,g5=/\/\*[^]*?\*\/|  +/g,jE=/\n+/g,Qc=(e,t)=>{let n="",i="",r="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":i+=o[1]=="f"?Qc(l,o):o+"{"+Qc(l,o[1]=="k"?"":t)+"}":typeof l=="object"?i+=Qc(l,t?t.replace(/([^,])+/g,c=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Qc.p?Qc.p(o,l):o+":"+l+";")}return n+(t&&r?t+"{"+r+"}":r)+i},zl={},NA=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+NA(e[n]);return t}return e},_5=(e,t,n,i,r)=>{let o=NA(e),l=zl[o]||(zl[o]=(d=>{let f=0,p=11;for(;f<d.length;)p=101*p+d.charCodeAt(f++)>>>0;return"go"+p})(o));if(!zl[l]){let d=o!==e?e:(f=>{let p,h,m=[{}];for(;p=p5.exec(f.replace(g5,""));)p[4]?m.shift():p[3]?(h=p[3].replace(jE," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][p[1]]=p[2].replace(jE," ").trim();return m[0]})(e);zl[l]=Qc(r?{["@keyframes "+l]:d}:d,n?"":"."+l)}let c=n&&zl.g?zl.g:null;return n&&(zl.g=zl[l]),((d,f,p,h)=>{h?f.data=f.data.replace(h,d):f.data.indexOf(d)===-1&&(f.data=p?d+f.data:f.data+d)})(zl[l],t,i,c),l},v5=(e,t,n)=>e.reduce((i,r,o)=>{let l=t[o];if(l&&l.call){let c=l(n),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=d?"."+d:c&&typeof c=="object"?c.props?"":Qc(c,""):c===!1?"":c}return i+r+(l??"")},"");function vb(e){let t=this||{},n=e.call?e(t.p):e;return _5(n.unshift?n.raw?v5(n,[].slice.call(arguments,1),t.p):n.reduce((i,r)=>Object.assign(i,r&&r.call?r(t.p):r),{}):n,m5(t.target),t.g,t.o,t.k)}let jA,Px,Cx;vb.bind({g:1});let Ul=vb.bind({k:1});function y5(e,t,n,i){Qc.p=t,jA=e,Px=n,Cx=i}function uu(e,t){let n=this||{};return function(){let i=arguments;function r(o,l){let c=Object.assign({},o),d=c.className||r.className;n.p=Object.assign({theme:Px&&Px()},c),n.o=/ *go\d+/.test(d),c.className=vb.apply(n,i)+(d?" "+d:"");let f=e;return e[0]&&(f=c.as||e,delete c.as),Cx&&f[0]&&Cx(c),jA(f,c)}return r}}var b5=e=>typeof e=="function",Ly=(e,t)=>b5(e)?e(t):e,w5=(()=>{let e=0;return()=>(++e).toString()})(),BA=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),x5=20,jM="default",UA=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:i}=t;return UA(e,{type:e.toasts.find(l=>l.id===i.id)?1:0,toast:i});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},hy=[],VA={toasts:[],pausedAt:void 0,settings:{toastLimit:x5}},js={},GA=(e,t=jM)=>{js[t]=UA(js[t]||VA,e),hy.forEach(([n,i])=>{n===t&&i(js[t])})},WA=e=>Object.keys(js).forEach(t=>GA(e,t)),M5=e=>Object.keys(js).find(t=>js[t].toasts.some(n=>n.id===e)),yb=(e=jM)=>t=>{GA(t,e)},T5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},S5=(e={},t=jM)=>{let[n,i]=Q.useState(js[t]||VA),r=Q.useRef(js[t]);Q.useEffect(()=>(r.current!==js[t]&&i(js[t]),hy.push([t,i]),()=>{let l=hy.findIndex(([c])=>c===t);l>-1&&hy.splice(l,1)}),[t]);let o=n.toasts.map(l=>{var c,d,f;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((c=e[l.type])==null?void 0:c.removeDelay)||e?.removeDelay,duration:l.duration||((d=e[l.type])==null?void 0:d.duration)||e?.duration||T5[l.type],style:{...e.style,...(f=e[l.type])==null?void 0:f.style,...l.style}}});return{...n,toasts:o}},E5=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||w5()}),y_=e=>(t,n)=>{let i=E5(t,e,n);return yb(i.toasterId||M5(i.id))({type:2,toast:i}),i.id},pi=(e,t)=>y_("blank")(e,t);pi.error=y_("error");pi.success=y_("success");pi.loading=y_("loading");pi.custom=y_("custom");pi.dismiss=(e,t)=>{let n={type:3,toastId:e};t?yb(t)(n):WA(n)};pi.dismissAll=e=>pi.dismiss(void 0,e);pi.remove=(e,t)=>{let n={type:4,toastId:e};t?yb(t)(n):WA(n)};pi.removeAll=e=>pi.remove(void 0,e);pi.promise=(e,t,n)=>{let i=pi.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let o=t.success?Ly(t.success,r):void 0;return o?pi.success(o,{id:i,...n,...n?.success}):pi.dismiss(i),r}).catch(r=>{let o=t.error?Ly(t.error,r):void 0;o?pi.error(o,{id:i,...n,...n?.error}):pi.dismiss(i)}),e};var $5=1e3,P5=(e,t="default")=>{let{toasts:n,pausedAt:i}=S5(e,t),r=Q.useRef(new Map).current,o=Q.useCallback((h,m=$5)=>{if(r.has(h))return;let _=setTimeout(()=>{r.delete(h),l({type:4,toastId:h})},m);r.set(h,_)},[]);Q.useEffect(()=>{if(i)return;let h=Date.now(),m=n.map(_=>{if(_.duration===1/0)return;let v=(_.duration||0)+_.pauseDuration-(h-_.createdAt);if(v<0){_.visible&&pi.dismiss(_.id);return}return setTimeout(()=>pi.dismiss(_.id,t),v)});return()=>{m.forEach(_=>_&&clearTimeout(_))}},[n,i,t]);let l=Q.useCallback(yb(t),[t]),c=Q.useCallback(()=>{l({type:5,time:Date.now()})},[l]),d=Q.useCallback((h,m)=>{l({type:1,toast:{id:h,height:m}})},[l]),f=Q.useCallback(()=>{i&&l({type:6,time:Date.now()})},[i,l]),p=Q.useCallback((h,m)=>{let{reverseOrder:_=!1,gutter:v=8,defaultPosition:b}=m||{},D=n.filter(A=>(A.position||b)===(h.position||b)&&A.height),T=D.findIndex(A=>A.id===h.id),E=D.filter((A,$)=>$<T&&A.visible).length;return D.filter(A=>A.visible).slice(..._?[E+1]:[0,E]).reduce((A,$)=>A+($.height||0)+v,0)},[n]);return Q.useEffect(()=>{n.forEach(h=>{if(h.dismissed)o(h.id,h.removeDelay);else{let m=r.get(h.id);m&&(clearTimeout(m),r.delete(h.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:d,startPause:c,endPause:f,calculateOffset:p}}},C5=Ul`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,k5=Ul`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,A5=Ul`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,I5=uu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${C5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${k5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${A5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,O5=Ul`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,D5=uu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${O5} 1s linear infinite;
`,z5=Ul`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,L5=Ul`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,R5=uu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${z5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${L5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,F5=uu("div")`
  position: absolute;
`,N5=uu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,j5=Ul`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,B5=uu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${j5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,U5=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?Q.createElement(B5,null,t):t:n==="blank"?null:Q.createElement(N5,null,Q.createElement(D5,{...i}),n!=="loading"&&Q.createElement(F5,null,n==="error"?Q.createElement(I5,{...i}):Q.createElement(R5,{...i})))},V5=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,G5=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,W5="0%{opacity:0;} 100%{opacity:1;}",H5="0%{opacity:1;} 100%{opacity:0;}",K5=uu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,q5=uu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Z5=(e,t)=>{let n=e.includes("top")?1:-1,[i,r]=BA()?[W5,H5]:[V5(n),G5(n)];return{animation:t?`${Ul(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ul(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Q5=Q.memo(({toast:e,position:t,style:n,children:i})=>{let r=e.height?Z5(e.position||t||"top-center",e.visible):{opacity:0},o=Q.createElement(U5,{toast:e}),l=Q.createElement(q5,{...e.ariaProps},Ly(e.message,e));return Q.createElement(K5,{className:e.className,style:{...r,...n,...e.style}},typeof i=="function"?i({icon:o,message:l}):Q.createElement(Q.Fragment,null,o,l))});y5(Q.createElement);var X5=({id:e,className:t,style:n,onHeightUpdate:i,children:r})=>{let o=Q.useCallback(l=>{if(l){let c=()=>{let d=l.getBoundingClientRect().height;i(e,d)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return Q.createElement("div",{ref:o,className:t,style:n},r)},Y5=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:BA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...r}},J5=vb`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Bv=16,eG=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:r,toasterId:o,containerStyle:l,containerClassName:c})=>{let{toasts:d,handlers:f}=P5(n,o);return Q.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Bv,left:Bv,right:Bv,bottom:Bv,pointerEvents:"none",...l},className:c,onMouseEnter:f.startPause,onMouseLeave:f.endPause},d.map(p=>{let h=p.position||t,m=f.calculateOffset(p,{reverseOrder:e,gutter:i,defaultPosition:t}),_=Y5(h,m);return Q.createElement(X5,{id:p.id,key:p.id,onHeightUpdate:f.updateHeight,className:p.visible?J5:"",style:_},p.type==="custom"?Ly(p.message,p):r?r(p):Q.createElement(Q5,{toast:p,position:h}))}))},tG=pi;const nG=new J8({defaultOptions:{queries:{staleTime:1e3*60*5,retry:!1}}});function rG(){return Te.jsx(kM,{appearance:"dark",accentColor:"iris",panelBackground:"translucent",style:{height:"100%"},children:Te.jsxs(t5,{client:nG,children:[Te.jsx(eG,{position:"bottom-center",toastOptions:{style:{background:"#333",color:"#fff"}}}),Te.jsx(dk,{})]})})}const HA=OB({component:rG});function iG(e){const t=e.length;let n=0,i=0;for(;i<t;){let r=e.charCodeAt(i++);if((r&4294967168)===0){n++;continue}else if((r&4294965248)===0)n+=2;else{if(r>=55296&&r<=56319&&i<t){const o=e.charCodeAt(i);(o&64512)===56320&&(++i,r=((r&1023)<<10)+(o&1023)+65536)}(r&4294901760)===0?n+=3:n+=4}}return n}function aG(e,t,n){const i=e.length;let r=n,o=0;for(;o<i;){let l=e.charCodeAt(o++);if((l&4294967168)===0){t[r++]=l;continue}else if((l&4294965248)===0)t[r++]=l>>6&31|192;else{if(l>=55296&&l<=56319&&o<i){const c=e.charCodeAt(o);(c&64512)===56320&&(++o,l=((l&1023)<<10)+(c&1023)+65536)}(l&4294901760)===0?(t[r++]=l>>12&15|224,t[r++]=l>>6&63|128):(t[r++]=l>>18&7|240,t[r++]=l>>12&63|128,t[r++]=l>>6&63|128)}t[r++]=l&63|128}}const oG=new TextEncoder,sG=50;function lG(e,t,n){oG.encodeInto(e,t.subarray(n))}function cG(e,t,n){e.length>sG?lG(e,t,n):aG(e,t,n)}const uG=4096;function KA(e,t,n){let i=t;const r=i+n,o=[];let l="";for(;i<r;){const c=e[i++];if((c&128)===0)o.push(c);else if((c&224)===192){const d=e[i++]&63;o.push((c&31)<<6|d)}else if((c&240)===224){const d=e[i++]&63,f=e[i++]&63;o.push((c&31)<<12|d<<6|f)}else if((c&248)===240){const d=e[i++]&63,f=e[i++]&63,p=e[i++]&63;let h=(c&7)<<18|d<<12|f<<6|p;h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|h&1023),o.push(h)}else o.push(c);o.length>=uG&&(l+=String.fromCharCode(...o),o.length=0)}return o.length>0&&(l+=String.fromCharCode(...o)),l}const dG=new TextDecoder,fG=200;function hG(e,t,n){const i=e.subarray(t,t+n);return dG.decode(i)}function mG(e,t,n){return n>fG?hG(e,t,n):KA(e,t,n)}class Uv{type;data;constructor(t,n){this.type=t,this.data=n}}class La extends Error{constructor(t){super(t);const n=Object.create(La.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:La.name})}}const $g=4294967295;function pG(e,t,n){const i=n/4294967296,r=n;e.setUint32(t,i),e.setUint32(t+4,r)}function qA(e,t,n){const i=Math.floor(n/4294967296),r=n;e.setUint32(t,i),e.setUint32(t+4,r)}function ZA(e,t){const n=e.getInt32(t),i=e.getUint32(t+4);return n*4294967296+i}function gG(e,t){const n=e.getUint32(t),i=e.getUint32(t+4);return n*4294967296+i}const _G=-1,vG=4294967296-1,yG=17179869184-1;function bG({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=yG)if(t===0&&e<=vG){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,i=e&4294967295,r=new Uint8Array(8),o=new DataView(r.buffer);return o.setUint32(0,t<<2|n&3),o.setUint32(4,i),r}else{const n=new Uint8Array(12),i=new DataView(n.buffer);return i.setUint32(0,t),qA(i,4,e),n}}function wG(e){const t=e.getTime(),n=Math.floor(t/1e3),i=(t-n*1e3)*1e6,r=Math.floor(i/1e9);return{sec:n+r,nsec:i-r*1e9}}function xG(e){if(e instanceof Date){const t=wG(e);return bG(t)}else return null}function MG(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),i=t.getUint32(4),r=(n&3)*4294967296+i,o=n>>>2;return{sec:r,nsec:o}}case 12:{const n=ZA(t,4),i=t.getUint32(0);return{sec:n,nsec:i}}default:throw new La(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function TG(e){const t=MG(e);return new Date(t.sec*1e3+t.nsec/1e6)}const SG={type:_G,encode:xG,decode:TG};class b_{static defaultCodec=new b_;__brand;builtInEncoders=[];builtInDecoders=[];encoders=[];decoders=[];constructor(){this.register(SG)}register({type:t,encode:n,decode:i}){if(t>=0)this.encoders[t]=n,this.decoders[t]=i;else{const r=-1-t;this.builtInEncoders[r]=n,this.builtInDecoders[r]=i}}tryToEncode(t,n){for(let i=0;i<this.builtInEncoders.length;i++){const r=this.builtInEncoders[i];if(r!=null){const o=r(t,n);if(o!=null){const l=-1-i;return new Uv(l,o)}}}for(let i=0;i<this.encoders.length;i++){const r=this.encoders[i];if(r!=null){const o=r(t,n);if(o!=null){const l=i;return new Uv(l,o)}}}return t instanceof Uv?t:null}decode(t,n,i){const r=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return r?r(t,n,i):new Uv(n,t)}}function EG(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function kx(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):EG(e)?new Uint8Array(e):Uint8Array.from(e)}const $G=100,PG=2048;class BM{extensionCodec;context;useBigInt64;maxDepth;initialBufferSize;sortKeys;forceFloat32;ignoreUndefined;forceIntegerToFloat;pos;view;bytes;entered=!1;constructor(t){this.extensionCodec=t?.extensionCodec??b_.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??$G,this.initialBufferSize=t?.initialBufferSize??PG,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new BM({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),i=new Uint8Array(n),r=new DataView(n);i.set(this.bytes),this.view=r,this.bytes=i}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const i=iG(t);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),cG(t,this.bytes,this.pos),this.pos+=i}encodeObject(t,n){const i=this.extensionCodec.tryToEncode(t,this.context);if(i!=null)this.encodeExtension(i);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const i=kx(t);this.writeU8a(i)}encodeArray(t,n){const i=t.length;if(i<16)this.writeU8(144+i);else if(i<65536)this.writeU8(220),this.writeU16(i);else if(i<4294967296)this.writeU8(221),this.writeU32(i);else throw new Error(`Too large array: ${i}`);for(const r of t)this.doEncode(r,n+1)}countWithoutUndefined(t,n){let i=0;for(const r of n)t[r]!==void 0&&i++;return i}encodeMap(t,n){const i=Object.keys(t);this.sortKeys&&i.sort();const r=this.ignoreUndefined?this.countWithoutUndefined(t,i):i.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else if(r<4294967296)this.writeU8(223),this.writeU32(r);else throw new Error(`Too large map object: ${r}`);for(const o of i){const l=t[o];this.ignoreUndefined&&l===void 0||(this.encodeString(o),this.doEncode(l,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const i=t.data(this.pos+6),r=i.length;if(r>=4294967296)throw new Error(`Too large extension object: ${r}`);this.writeU8(201),this.writeU32(r),this.writeI8(t.type),this.writeU8a(i);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),pG(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),qA(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}}function CG(e,t){return new BM(t).encodeSharedRef(e)}function sw(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const kG=16,AG=16;class IG{hit=0;miss=0;caches;maxKeyLength;maxLengthPerKey;constructor(t=kG,n=AG){this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let i=0;i<this.maxKeyLength;i++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,i){const r=this.caches[i-1];e:for(const o of r){const l=o.bytes;for(let c=0;c<i;c++)if(l[c]!==t[n+c])continue e;return o.str}return null}store(t,n){const i=this.caches[t.length-1],r={bytes:t,str:n};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=r:i.push(r)}decode(t,n,i){const r=this.find(t,n,i);if(r!=null)return this.hit++,r;this.miss++;const o=KA(t,n,i),l=Uint8Array.prototype.slice.call(t,n,n+i);return this.store(l,o),o}}const Ax="array",Yg="map_key",QA="map_value",OG=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new La("The type of key must be string or number but "+typeof e)};class DG{stack=[];stackHeadPosition=-1;get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=Ax,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=Yg,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===Ax){const i=t;i.size=0,i.array=void 0,i.position=0,i.type=void 0}if(t.type===Yg||t.type===QA){const i=t;i.size=0,i.map=void 0,i.readCount=0,i.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Pg=-1,UM=new DataView(new ArrayBuffer(0)),zG=new Uint8Array(UM.buffer);try{UM.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const BE=new RangeError("Insufficient data"),LG=new IG;class VM{extensionCodec;context;useBigInt64;rawStrings;maxStrLength;maxBinLength;maxArrayLength;maxMapLength;maxExtLength;keyDecoder;mapKeyConverter;totalPos=0;pos=0;view=UM;bytes=zG;headByte=Pg;stack=new DG;entered=!1;constructor(t){this.extensionCodec=t?.extensionCodec??b_.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??$g,this.maxBinLength=t?.maxBinLength??$g,this.maxArrayLength=t?.maxArrayLength??$g,this.maxMapLength=t?.maxMapLength??$g,this.maxExtLength=t?.maxExtLength??$g,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:LG,this.mapKeyConverter=t?.mapKeyConverter??OG}clone(){return new VM({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Pg,this.stack.reset()}setBuffer(t){const n=kx(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Pg&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),i=kx(t),r=new Uint8Array(n.length+i.length);r.set(n),r.set(i,n.length),this.setBuffer(r)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:i}=this;return new RangeError(`Extra ${n.byteLength-i} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,i;for await(const c of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{i=this.doDecodeSync(),n=!0}catch(d){if(!(d instanceof RangeError))throw d}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return i}const{headByte:r,pos:o,totalPos:l}=this;throw new RangeError(`Insufficient data in parsing ${sw(r)} at ${l} (${o} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let i=n,r=-1;for await(const o of t){if(n&&r===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),i&&(r=this.readArraySize(),i=!1,this.complete());try{for(;yield this.doDecodeSync(),--r!==0;);}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const r=t-128;if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t<160){const r=t-144;if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else{const r=t-160;n=this.decodeString(r,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const r=this.lookU8();n=this.decodeString(r,1)}else if(t===218){const r=this.lookU16();n=this.decodeString(r,2)}else if(t===219){const r=this.lookU32();n=this.decodeString(r,4)}else if(t===220){const r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(t===221){const r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(t===222){const r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t===223){const r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t===196){const r=this.lookU8();n=this.decodeBinary(r,1)}else if(t===197){const r=this.lookU16();n=this.decodeBinary(r,2)}else if(t===198){const r=this.lookU32();n=this.decodeBinary(r,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const r=this.lookU8();n=this.decodeExtension(r,1)}else if(t===200){const r=this.lookU16();n=this.decodeExtension(r,2)}else if(t===201){const r=this.lookU32();n=this.decodeExtension(r,4)}else throw new La(`Unrecognized type byte: ${sw(t)}`);this.complete();const i=this.stack;for(;i.length>0;){const r=i.top();if(r.type===Ax)if(r.array[r.position]=n,r.position++,r.position===r.size)n=r.array,i.release(r);else continue e;else if(r.type===Yg){if(n==="__proto__")throw new La("The key __proto__ is not allowed");r.key=this.mapKeyConverter(n),r.type=QA;continue e}else if(r.map[r.key]=n,r.readCount++,r.readCount===r.size)n=r.map,i.release(r);else{r.key=null,r.type=Yg;continue e}}return n}}readHeadByte(){return this.headByte===Pg&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Pg}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new La(`Unrecognized array type byte: ${sw(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new La(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new La(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new La(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw BE;const i=this.pos+n;let r;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?r=this.keyDecoder.decode(this.bytes,i,t):r=mG(this.bytes,i,t),this.pos+=n+t,r}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Yg:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new La(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw BE;const i=this.pos+n,r=this.bytes.subarray(i,i+t);return this.pos+=n+t,r}decodeExtension(t,n){if(t>this.maxExtLength)throw new La(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const i=this.view.getInt8(this.pos+n),r=this.decodeBinary(t,n+1);return this.extensionCodec.decode(r,i,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=gG(this.view,this.pos);return this.pos+=8,t}readI64(){const t=ZA(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}}function UE(e,t){return new VM(t).decode(e)}const Ry=127;function Ix(e){const t=new Int8Array(e.length);for(let n=0;n<e.length;n++){const i=Math.max(-1,Math.min(1,e[n]));t[n]=Math.round(i*Ry)}return t}function RG(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n]/Ry;return t}function FG(e,t){let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n/(Ry*Ry)}function NG(e,t){let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}class Fy{M;mMax0;efConstruction;efSearch;mL;layers=[];entryPoint=void 0;nodeLevel=new Map;vectors=new Map;quantized;constructor(t={},n=!0){this.M=t.M??16,this.mMax0=this.M*2,this.efConstruction=t.efConstruction??100,this.efSearch=t.efSearch??50,this.mL=1/Math.log(this.M),this.quantized=n}getRandomLevel(){return Math.floor(-Math.log(Math.random())*this.mL)}distance(t,n){return this.quantized?1-FG(t,n):1-NG(t,n)}insert(t,n){const i=this.quantized?Ix(n):new Float32Array(n);if(this.vectors.set(t,i),this.entryPoint===void 0){const p=this.getRandomLevel();this.nodeLevel.set(t,p);for(let h=0;h<=p;h++)this.layers[h]===void 0&&(this.layers[h]=new Map),this.layers[h].set(t,new Map);this.entryPoint=t;return}const r=this.getRandomLevel();this.nodeLevel.set(t,r);for(let p=0;p<=r;p++)this.layers[p]===void 0&&(this.layers[p]=new Map),this.layers[p].set(t,new Map);let o=this.entryPoint;const l=this.vectors.get(o);let c=this.distance(i,l);for(let p=this.layers.length-1;p>r;p--){const h=this.searchLayerEf1(i,o,c,p);o=h.id,c=h.distance}let d=[{id:o,distance:c}];for(let p=Math.min(r,this.layers.length-1);p>=0;p--){const h=p===0?this.mMax0:this.M,m=this.searchLayer(i,d,p,this.efConstruction),_=this.selectNeighborsHeuristic(m,h),v=this.layers[p].get(t);for(const b of _){v.set(b.id,b.distance);const D=this.layers[p].get(b.id);D&&(D.set(t,b.distance),D.size>h&&this.pruneEdgesHeuristic(D,h,b.id,t))}d=m}const f=this.nodeLevel.get(this.entryPoint)??0;r>f&&(this.entryPoint=t)}searchLayerEf1(t,n,i,r){let o=n,l=i;const c=this.layers[r];if(c===void 0)return{id:o,distance:l};let d=!0;for(;d;){d=!1;const f=c.get(o);if(f===void 0)break;let p=o,h=l;for(const[m]of f){const _=this.vectors.get(m);if(_===void 0)continue;const v=this.distance(t,_);v<h&&(p=m,h=v)}h<l&&(o=p,l=h,d=!0)}return{id:o,distance:l}}searchLayer(t,n,i,r){const o=new Set,l=[...n];l.sort((f,p)=>f.distance-p.distance);const c=[...n];c.sort((f,p)=>f.distance-p.distance);for(const f of n)o.add(f.id);const d=this.layers[i];if(d===void 0)return c;for(;l.length>0;){const f=l.shift();if(c.length>=r&&f.distance>c[c.length-1].distance)break;const p=d.get(f.id);if(p!==void 0)for(const[h]of p){if(o.has(h))continue;o.add(h);const m=this.vectors.get(h);if(m===void 0)continue;const _=this.distance(t,m),v=c.length>=r?c[c.length-1].distance:1/0;if(c.length<r||_<v){const b={id:h,distance:_},D=this.binarySearchInsert(l,_);l.splice(D,0,b);const T=this.binarySearchInsert(c,_);c.splice(T,0,b),c.length>r&&c.pop()}}}return c}binarySearchInsert(t,n){let i=0,r=t.length;for(;i<r;){const o=i+r>>>1;t[o].distance<n?i=o+1:r=o}return i}selectNeighborsSimple(t,n){return t.length<=n?t:[...t].sort((i,r)=>i.distance-r.distance).slice(0,n)}selectNeighborsHeuristic(t,n){if(t.length<=n)return t;const i=[...t].sort((o,l)=>o.distance-l.distance),r=[];for(const o of i){if(r.length>=n)break;let l=!0;const c=this.vectors.get(o.id);if(c!==void 0){for(const d of r){const f=this.vectors.get(d.id);if(f===void 0)continue;if(this.distance(c,f)<o.distance){l=!1;break}}l&&r.push(o)}}if(r.length<n)for(const o of i){if(r.length>=n)break;r.some(l=>l.id===o.id)||r.push(o)}return r}pruneEdgesHeuristic(t,n,i,r){if(t.size<=n||this.vectors.get(i)===void 0)return;let l;r!==void 0&&t.has(r)&&(l={id:r,distance:t.get(r)});const c=[];for(const[p,h]of t)p!==r&&c.push({id:p,distance:h});const d=l?n-1:n,f=this.selectNeighborsHeuristic(c,d);t.clear(),l&&t.set(l.id,l.distance);for(const p of f)t.set(p.id,p.distance)}search(t,n,i){if(this.entryPoint===void 0)return[];const r=Math.max(i??this.efSearch,n),o=this.quantized?Ix(t):t;let l=this.entryPoint;const c=this.vectors.get(l);let d=this.distance(o,c);for(let h=this.layers.length-1;h>0;h--){const m=this.searchLayerEf1(o,l,d,h);l=m.id,d=m.distance}const f=[{id:l,distance:d}];return this.searchLayer(o,f,0,r).slice(0,n)}get size(){return this.vectors.size}getStats(){let t=0,n=0;for(const i of this.layers)for(const[,r]of i)t+=r.size,n++;return{layers:this.layers.length,nodes:this.vectors.size,avgEdges:n>0?t/n:0}}toJSON(){const t=this.layers.map(n=>{const i=[];for(const[r,o]of n)i.push([r,[...o.entries()]]);return i});return{M:this.M,efConstruction:this.efConstruction,efSearch:this.efSearch,quantized:this.quantized,entryPoint:this.entryPoint,nodeLevel:[...this.nodeLevel.entries()],layers:t}}static fromJSON(t,n){const i=new Fy({M:t.M,efConstruction:t.efConstruction,efSearch:t.efSearch},t.quantized);i.entryPoint=t.entryPoint,i.nodeLevel=new Map(t.nodeLevel);for(const[r,o]of n)i.vectors.set(r,o);return i.layers=t.layers.map(r=>{const o=new Map;for(const[l,c]of r)o.set(l,new Map(c));return o}),i}}function lw(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i]*e[i];if(t=Math.sqrt(t),t===0)return e;const n=new Float32Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i]/t;return n}const jG=4,BG=1,UG=2,Jg=new b_;Jg.register({type:BG,encode:e=>e instanceof Int8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):null,decode:e=>new Int8Array(e.buffer,e.byteOffset,e.byteLength)});Jg.register({type:UG,encode:e=>e instanceof Float32Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):null,decode:e=>{const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(e),new Float32Array(t)}});class GM{dimensions;quantized;shouldNormalize;schema;metadata=new Map;hnsw;constructor(t){this.dimensions=t.dimensions,this.quantized=t.quantize!==!1,this.shouldNormalize=t.normalize!==!1,this.schema=t.schema,this.hnsw=new Fy({M:t.M,efConstruction:t.efConstruction,efSearch:t.efSearch},this.quantized)}add(t,n,i){if(n.length!==this.dimensions)throw new Error(`Vector dimension mismatch: expected ${this.dimensions}, got ${n.length}`);const r=this.shouldNormalize?lw(n):n;this.hnsw.insert(t,r),i!==void 0&&this.schema!==void 0&&this.metadata.set(t,this.schema.parse(i))}addBatch(t){for(const n of t)this.add(n.id,n.embedding,n.metadata)}search(t,n=10,i){if(t.length!==this.dimensions)throw new Error(`Query dimension mismatch: expected ${this.dimensions}, got ${t.length}`);const r=this.shouldNormalize?lw(t):t;return this.hnsw.search(r,n,i).map(l=>({id:l.id,score:1-l.distance,metadata:this.getMetadata(l.id)}))}searchExact(t,n=10){if(t.length!==this.dimensions)throw new Error(`Query dimension mismatch: expected ${this.dimensions}, got ${t.length}`);const i=this.shouldNormalize?lw(t):t,r=[];if(this.quantized){const o=Ix(i);for(const[l,c]of this.hnsw.vectors){let d=0;for(let p=0;p<c.length;p++)d+=o[p]*c[p];const f=d/16129;r.push({id:l,score:f,metadata:this.getMetadata(l)})}}else for(const[o,l]of this.hnsw.vectors){let c=0;for(let d=0;d<l.length;d++)c+=i[d]*l[d];r.push({id:o,score:c,metadata:this.getMetadata(o)})}return r.sort((o,l)=>l.score-o.score),r.slice(0,n)}static COMPRESSION_FORMATS=["gzip","deflate","deflate-raw"];async save(t){const n=[],i=[];for(const[c,d]of this.hnsw.vectors)n.push(c),i.push(d);let r;if(this.metadata.size>0){r={};for(const[c,d]of this.metadata)r[c]=d}const o={version:jG,dimensions:this.dimensions,quantized:this.quantized,vectors:i,ids:n,metadata:r,hnsw:this.hnsw.toJSON()},l=CG(o,{extensionCodec:Jg});if(t?.compress){const c=l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength),d=new Blob([c]).stream().pipeThrough(new CompressionStream(t.compress));return new Uint8Array(await new Response(d).arrayBuffer())}return l}static async load(t,n){let i;if(n?.compress){const l=new Blob([t.buffer]).stream().pipeThrough(new DecompressionStream(n.compress)),c=new Uint8Array(await new Response(l).arrayBuffer());i=UE(c,{extensionCodec:Jg})}else i=UE(t,{extensionCodec:Jg});const r=new GM({dimensions:i.dimensions,quantize:i.quantized,schema:n?.schema,M:i.hnsw.M,efConstruction:i.hnsw.efConstruction,efSearch:i.hnsw.efSearch}),o=new Map;for(let l=0;l<i.ids.length;l++)o.set(i.ids[l],i.vectors[l]);if(i.metadata!==void 0&&i.metadata!==null){const l=n?.schema,c=n?.validate??!1;for(const[d,f]of Object.entries(i.metadata)){const p=Number(d);c&&l!==void 0?r.metadata.set(p,l.parse(f)):r.metadata.set(p,f)}}return r.hnsw=Fy.fromJSON(i.hnsw,o),r}get size(){return this.hnsw.vectors.size}has(t){return this.hnsw.vectors.has(t)}getIndexStats(){return this.hnsw.getStats()}keys(){return this.hnsw.vectors.keys()}getVector(t){const n=this.hnsw.vectors.get(t);if(n!==void 0)return this.quantized?RG(n):n}getMetadata(t){return this.metadata.get(t)}}const my=new Map,wd=[],VG=(e,t,n)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const i=my.get(e);if(i===void 0)my.set(e,{backend:t,priority:n});else{if(i.priority>n)return;if(i.priority===n&&i.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${n}`)}if(n>=0){const r=wd.indexOf(e);r!==-1&&wd.splice(r,1);for(let o=0;o<wd.length;o++)if(my.get(wd[o]).priority<=n){wd.splice(o,0,e);return}wd.push(e)}return}throw new TypeError("not a valid backend")},GG=async e=>{const t=my.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const n=!!t.initPromise;try{return n||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(i){return n||(t.error=`${i}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},WG=async e=>{const t=e.executionProviders||[],n=t.map(d=>typeof d=="string"?d:d.name),i=n.length===0?wd:n;let r;const o=[],l=new Set;for(const d of i){const f=await GG(d);typeof f=="string"?o.push({name:d,err:f}):(r||(r=f),r===f&&l.add(d))}if(!r)throw new Error(`no available backend found. ERR: ${o.map(d=>`[${d.name}] ${d.err}`).join(", ")}`);for(const{name:d,err:f}of o)n.includes(d)&&console.warn(`removing requested execution provider "${d}" from session options because it is not available: ${f}`);const c=t.filter(d=>l.has(typeof d=="string"?d:d.name));return[r,new Proxy(e,{get:(d,f)=>f==="executionProviders"?c:Reflect.get(d,f)})]},HG="1.21.0";let VE="warning";const Jo={wasm:{},webgl:{},webgpu:{},versions:{common:HG},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);VE=e}},get logLevel(){return VE}};Object.defineProperty(Jo,"logLevel",{enumerable:!0});const KG=Jo,qG=(e,t)=>{const n=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);n.width=e.dims[3],n.height=e.dims[2];const i=n.getContext("2d");if(i!=null){let r,o;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=e.dims[2],o=e.dims[3]):(r=e.dims[3],o=e.dims[2]);const l=t?.format!==void 0?t.format:"RGB",c=t?.norm;let d,f;c===void 0||c.mean===void 0?d=[255,255,255,255]:typeof c.mean=="number"?d=[c.mean,c.mean,c.mean,c.mean]:(d=[c.mean[0],c.mean[1],c.mean[2],0],c.mean[3]!==void 0&&(d[3]=c.mean[3])),c===void 0||c.bias===void 0?f=[0,0,0,0]:typeof c.bias=="number"?f=[c.bias,c.bias,c.bias,c.bias]:(f=[c.bias[0],c.bias[1],c.bias[2],0],c.bias[3]!==void 0&&(f[3]=c.bias[3]));const p=o*r;let h=0,m=p,_=p*2,v=-1;l==="RGBA"?(h=0,m=p,_=p*2,v=p*3):l==="RGB"?(h=0,m=p,_=p*2):l==="RBG"&&(h=0,_=p,m=p*2);for(let b=0;b<o;b++)for(let D=0;D<r;D++){const T=(e.data[h++]-f[0])*d[0],E=(e.data[m++]-f[1])*d[1],A=(e.data[_++]-f[2])*d[2],$=v===-1?255:(e.data[v++]-f[3])*d[3];i.fillStyle="rgba("+T+","+E+","+A+","+$+")",i.fillRect(D,b,1,1)}if("toDataURL"in n)return n.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ZG=(e,t)=>{const n=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let i;if(n!=null){let r,o,l;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=e.dims[2],o=e.dims[1],l=e.dims[3]):(r=e.dims[3],o=e.dims[2],l=e.dims[1]);const c=t!==void 0&&t.format!==void 0?t.format:"RGB",d=t?.norm;let f,p;d===void 0||d.mean===void 0?f=[255,255,255,255]:typeof d.mean=="number"?f=[d.mean,d.mean,d.mean,d.mean]:(f=[d.mean[0],d.mean[1],d.mean[2],255],d.mean[3]!==void 0&&(f[3]=d.mean[3])),d===void 0||d.bias===void 0?p=[0,0,0,0]:typeof d.bias=="number"?p=[d.bias,d.bias,d.bias,d.bias]:(p=[d.bias[0],d.bias[1],d.bias[2],0],d.bias[3]!==void 0&&(p[3]=d.bias[3]));const h=o*r;if(t!==void 0&&(t.format!==void 0&&l===4&&t.format!=="RGBA"||l===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const m=4;let _=0,v=1,b=2,D=3,T=0,E=h,A=h*2,$=-1;c==="RGBA"?(T=0,E=h,A=h*2,$=h*3):c==="RGB"?(T=0,E=h,A=h*2):c==="RBG"&&(T=0,A=h,E=h*2),i=n.createImageData(r,o);for(let P=0;P<o*r;_+=m,v+=m,b+=m,D+=m,P++)i.data[_]=(e.data[T++]-p[0])*f[0],i.data[v]=(e.data[E++]-p[1])*f[1],i.data[b]=(e.data[A++]-p[2])*f[2],i.data[D]=$===-1?255:(e.data[$++]-p[3])*f[3]}else throw new Error("Can not access image data");return i},cw=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:n,width:i}=t,r=t.norm??{mean:255,bias:0};let o,l;typeof r.mean=="number"?o=[r.mean,r.mean,r.mean,r.mean]:o=[r.mean[0],r.mean[1],r.mean[2],r.mean[3]??255],typeof r.bias=="number"?l=[r.bias,r.bias,r.bias,r.bias]:l=[r.bias[0],r.bias[1],r.bias[2],r.bias[3]??0];const c=t.format!==void 0?t.format:"RGBA",d=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",f=n*i,p=d==="RGBA"?new Float32Array(f*4):new Float32Array(f*3);let h=4,m=0,_=1,v=2,b=3,D=0,T=f,E=f*2,A=-1;c==="RGB"&&(h=3,m=0,_=1,v=2,b=-1),d==="RGBA"?A=f*3:d==="RBG"?(D=0,E=f,T=f*2):d==="BGR"&&(E=0,T=f,D=f*2);for(let P=0;P<f;P++,m+=h,v+=h,_+=h,b+=h)p[D++]=(e[m]+l[0])/o[0],p[T++]=(e[_]+l[1])/o[1],p[E++]=(e[v]+l[2])/o[2],A!==-1&&b!==-1&&(p[A++]=(e[b]+l[3])/o[3]);return d==="RGBA"?new go("float32",p,[1,4,n,i]):new go("float32",p,[1,3,n,i])},QG=async(e,t)=>{const n=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,i=typeof ImageData<"u"&&e instanceof ImageData,r=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,o=typeof e=="string";let l,c=t??{};const d=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},f=p=>typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement||p instanceof OffscreenCanvas?p.getContext("2d"):null;if(n){const p=d();p.width=e.width,p.height=e.height;const h=f(p);if(h!=null){let m=e.height,_=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(m=t.resizedHeight,_=t.resizedWidth),t!==void 0){if(c=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");c.tensorFormat="RGBA",c.height=m,c.width=_}else c.tensorFormat="RGBA",c.height=m,c.width=_;h.drawImage(e,0,0),l=h.getImageData(0,0,_,m).data}else throw new Error("Can not access image data")}else if(i){let p,h;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(p=t.resizedHeight,h=t.resizedWidth):(p=e.height,h=e.width),t!==void 0&&(c=t),c.format="RGBA",c.height=p,c.width=h,t!==void 0){const m=d();m.width=h,m.height=p;const _=f(m);if(_!=null)_.putImageData(e,0,0),l=_.getImageData(0,0,h,p).data;else throw new Error("Can not access image data")}else l=e.data}else if(r){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const p=d();p.width=e.width,p.height=e.height;const h=f(p);if(h!=null){const m=e.height,_=e.width;return h.drawImage(e,0,0,_,m),l=h.getImageData(0,0,_,m).data,c.height=m,c.width=_,cw(l,c)}else throw new Error("Can not access image data")}else{if(o)return new Promise((p,h)=>{const m=d(),_=f(m);if(!e||!_)return h();const v=new Image;v.crossOrigin="Anonymous",v.src=e,v.onload=()=>{m.width=v.width,m.height=v.height,_.drawImage(v,0,0,m.width,m.height);const b=_.getImageData(0,0,m.width,m.height);c.height=m.height,c.width=m.width,p(cw(b.data,c))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return cw(l,c);throw new Error("Input data provided is not supported - aborted tensor creation")},XG=(e,t)=>{const{width:n,height:i,download:r,dispose:o}=t,l=[1,i,n,4];return new go({location:"texture",type:"float32",texture:e,dims:l,download:r,dispose:o})},YG=(e,t)=>{const{dataType:n,dims:i,download:r,dispose:o}=t;return new go({location:"gpu-buffer",type:n??"float32",gpuBuffer:e,dims:i,download:r,dispose:o})},JG=(e,t)=>{const{dataType:n,dims:i,download:r,dispose:o}=t;return new go({location:"ml-tensor",type:n??"float32",mlTensor:e,dims:i,download:r,dispose:o})},eW=(e,t,n)=>new go({location:"cpu-pinned",type:e,data:t,dims:n??[t.length]}),Dh=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),py=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let GE=!1;const tW=()=>{if(!GE){GE=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,n=globalThis.Float16Array,i=typeof n<"u"&&n.from;e&&(Dh.set("int64",BigInt64Array),py.set(BigInt64Array,"int64")),t&&(Dh.set("uint64",BigUint64Array),py.set(BigUint64Array,"uint64")),i?(Dh.set("float16",n),py.set(n,"float16")):Dh.set("float16",Uint16Array)}},nW=e=>{let t=1;for(let n=0;n<e.length;n++){const i=e[n];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${n}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${i}`);t*=i}return t},rW=(e,t)=>{switch(e.location){case"cpu":return new go(e.type,e.data,t);case"cpu-pinned":return new go({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new go({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new go({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new go({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let go=class{constructor(t,n,i){tW();let r,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,r=t.type,o=t.dims,t.location){case"cpu-pinned":{const c=Dh.get(r);if(!c)throw new TypeError(`unsupported type "${r}" to create tensor from pinned buffer`);if(!(t.data instanceof c))throw new TypeError(`buffer should be of type ${c.name}`);this.cpuData=t.data;break}case"texture":{if(r!=="float32")throw new TypeError(`unsupported type "${r}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="uint8"&&r!=="bool"&&r!=="uint4"&&r!=="int4")throw new TypeError(`unsupported type "${r}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(r!=="float32"&&r!=="float16"&&r!=="int32"&&r!=="int64"&&r!=="uint32"&&r!=="uint64"&&r!=="int8"&&r!=="uint8"&&r!=="bool"&&r!=="uint4"&&r!=="int4")throw new TypeError(`unsupported type "${r}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let c,d;if(typeof t=="string")if(r=t,d=i,t==="string"){if(!Array.isArray(n))throw new TypeError("A string tensor's data must be a string array.");c=n}else{const f=Dh.get(t);if(f===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(n)){if(t==="float16"&&f===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${f.name} as data.`);t==="uint64"||t==="int64"?c=f.from(n,BigInt):c=f.from(n)}else if(n instanceof f)c=n;else if(n instanceof Uint8ClampedArray)if(t==="uint8")c=Uint8Array.from(n);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&n instanceof Uint16Array&&f!==Uint16Array)c=new globalThis.Float16Array(n.buffer,n.byteOffset,n.length);else throw new TypeError(`A ${r} tensor's data must be type of ${f}`)}else if(d=n,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const f=typeof t[0];if(f==="string")r="string",c=t;else if(f==="boolean")r="bool",c=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${f}.`)}else if(t instanceof Uint8ClampedArray)r="uint8",c=Uint8Array.from(t);else{const f=py.get(t.constructor);if(f===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=f,c=t}if(d===void 0)d=[c.length];else if(!Array.isArray(d))throw new TypeError("A tensor's dims must be a number array");o=d,this.cpuData=c,this.dataLocation="cpu"}const l=nW(o);if(this.cpuData&&l!==this.cpuData.length&&!((r==="uint4"||r==="int4")&&Math.ceil(l/2)===this.cpuData.length))throw new Error(`Tensor's size(${l}) does not match data length(${this.cpuData.length}).`);this.type=r,this.dims=o,this.size=l}static async fromImage(t,n){return QG(t,n)}static fromTexture(t,n){return XG(t,n)}static fromGpuBuffer(t,n){return YG(t,n)}static fromMLTensor(t,n){return JG(t,n)}static fromPinnedBuffer(t,n,i){return eW(t,n,i)}toDataURL(t){return qG(this,t)}toImageData(t){return ZG(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const n=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=n,t&&this.disposer&&(this.disposer(),this.disposer=void 0),n}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return rW(this,t)}};const Ah=go,XA=(e,t)=>{(typeof Jo.trace>"u"?!Jo.wasm.trace:!Jo.trace)||console.timeStamp(`${e}::ORT::${t}`)},YA=(e,t)=>{const n=new Error().stack?.split(/\r\n|\r|\n/g)||[];let i=!1;for(let r=0;r<n.length;r++){if(i&&!n[r].includes("TRACE_FUNC")){let o=`FUNC_${e}::${n[r].trim().split(" ")[1]}`;t&&(o+=`::${t}`),XA("CPU",o);return}n[r].includes("TRACE_FUNC")&&(i=!0)}},Ox=e=>{(typeof Jo.trace>"u"?!Jo.wasm.trace:!Jo.trace)||YA("BEGIN",e)},Dx=e=>{(typeof Jo.trace>"u"?!Jo.wasm.trace:!Jo.trace)||YA("END",e)};let iW=class JA{constructor(t){this.handler=t}async run(t,n,i){Ox();const r={};let o={};if(typeof t!="object"||t===null||t instanceof Ah||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Ah)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(const f of n){if(typeof f!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(f)===-1)throw new RangeError(`'fetches' contains invalid output name: ${f}.`);r[f]=null}if(typeof i=="object"&&i!==null)o=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let f=!1;const p=Object.getOwnPropertyNames(n);for(const h of this.outputNames)if(p.indexOf(h)!==-1){const m=n[h];(m===null||m instanceof Ah)&&(f=!0,l=!1,r[h]=m)}if(f){if(typeof i=="object"&&i!==null)o=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else o=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const f of this.inputNames)if(typeof t[f]>"u")throw new Error(`input '${f}' is missing in 'feeds'.`);if(l)for(const f of this.outputNames)r[f]=null;const c=await this.handler.run(t,r,o),d={};for(const f in c)if(Object.hasOwnProperty.call(c,f)){const p=c[f];p instanceof Ah?d[f]=p:d[f]=new Ah(p.type,p.data,p.dims)}return Dx(),d}async release(){return this.handler.dispose()}static async create(t,n,i,r){Ox();let o,l={};if(typeof t=="string"){if(o=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(o=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const p=t;let h=0,m=t.byteLength;if(typeof n=="object"&&n!==null)l=n;else if(typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteOffset' must be an integer.");if(h<0||h>=p.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${p.byteLength}).`);if(m=t.byteLength-h,typeof i=="number"){if(m=i,!Number.isSafeInteger(m))throw new RangeError("'byteLength' must be an integer.");if(m<=0||h+m>p.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${p.byteLength-h}].`);if(typeof r=="object"&&r!==null)l=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");o=new Uint8Array(p,h,m)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[c,d]=await WG(l),f=await c.createInferenceSessionHandler(o,d);return Dx(),new JA(f)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const aW=iW,oW=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:aW,TRACE:XA,TRACE_FUNC_BEGIN:Ox,TRACE_FUNC_END:Dx,Tensor:Ah,env:KG,registerBackend:VG},Symbol.toStringTag,{value:"Module"}));var WM=Object.defineProperty,sW=Object.getOwnPropertyDescriptor,lW=Object.getOwnPropertyNames,cW=Object.prototype.hasOwnProperty,uW=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),ht=(e,t)=>()=>(e&&(t=e(e=0)),t),nm=(e,t)=>{for(var n in t)WM(e,n,{get:t[n],enumerable:!0})},dW=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of lW(t))!cW.call(e,r)&&r!==n&&WM(e,r,{get:()=>t[r],enumerable:!(i=sW(t,r))||i.enumerable});return e},s_=e=>dW(WM({},"__esModule",{value:!0}),e),Cg,Hc,Ed,WE,eI,tI=ht(()=>{Cg=new Map,Hc=[],Ed=(e,t,n)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let i=Cg.get(e);if(i===void 0)Cg.set(e,{backend:t,priority:n});else{if(i.priority>n)return;if(i.priority===n&&i.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${n}`)}if(n>=0){let r=Hc.indexOf(e);r!==-1&&Hc.splice(r,1);for(let o=0;o<Hc.length;o++)if(Cg.get(Hc[o]).priority<=n){Hc.splice(o,0,e);return}Hc.push(e)}return}throw new TypeError("not a valid backend")},WE=async e=>{let t=Cg.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let n=!!t.initPromise;try{return n||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(i){return n||(t.error=`${i}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},eI=async e=>{let t=e.executionProviders||[],n=t.map(d=>typeof d=="string"?d:d.name),i=n.length===0?Hc:n,r,o=[],l=new Set;for(let d of i){let f=await WE(d);typeof f=="string"?o.push({name:d,err:f}):(r||(r=f),r===f&&l.add(d))}if(!r)throw new Error(`no available backend found. ERR: ${o.map(d=>`[${d.name}] ${d.err}`).join(", ")}`);for(let{name:d,err:f}of o)n.includes(d)&&console.warn(`removing requested execution provider "${d}" from session options because it is not available: ${f}`);let c=t.filter(d=>l.has(typeof d=="string"?d:d.name));return[r,new Proxy(e,{get:(d,f)=>f==="executionProviders"?c:Reflect.get(d,f)})]}}),fW=ht(()=>{tI()}),nI,hW=ht(()=>{nI="1.22.0-dev.20250409-89f8206ba4"}),uw,mo,rI=ht(()=>{hW(),uw="warning",mo={wasm:{},webgl:{},webgpu:{},versions:{common:nI},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);uw=e}},get logLevel(){return uw}},Object.defineProperty(mo,"logLevel",{enumerable:!0})}),yr,mW=ht(()=>{rI(),yr=mo}),iI,aI,pW=ht(()=>{iI=(e,t)=>{let n=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);n.width=e.dims[3],n.height=e.dims[2];let i=n.getContext("2d");if(i!=null){let r,o;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=e.dims[2],o=e.dims[3]):(r=e.dims[3],o=e.dims[2]);let l=t?.format!==void 0?t.format:"RGB",c=t?.norm,d,f;c===void 0||c.mean===void 0?d=[255,255,255,255]:typeof c.mean=="number"?d=[c.mean,c.mean,c.mean,c.mean]:(d=[c.mean[0],c.mean[1],c.mean[2],0],c.mean[3]!==void 0&&(d[3]=c.mean[3])),c===void 0||c.bias===void 0?f=[0,0,0,0]:typeof c.bias=="number"?f=[c.bias,c.bias,c.bias,c.bias]:(f=[c.bias[0],c.bias[1],c.bias[2],0],c.bias[3]!==void 0&&(f[3]=c.bias[3]));let p=o*r,h=0,m=p,_=p*2,v=-1;l==="RGBA"?(h=0,m=p,_=p*2,v=p*3):l==="RGB"?(h=0,m=p,_=p*2):l==="RBG"&&(h=0,_=p,m=p*2);for(let b=0;b<o;b++)for(let D=0;D<r;D++){let T=(e.data[h++]-f[0])*d[0],E=(e.data[m++]-f[1])*d[1],A=(e.data[_++]-f[2])*d[2],$=v===-1?255:(e.data[v++]-f[3])*d[3];i.fillStyle="rgba("+T+","+E+","+A+","+$+")",i.fillRect(D,b,1,1)}if("toDataURL"in n)return n.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},aI=(e,t)=>{let n=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),i;if(n!=null){let r,o,l;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(r=e.dims[2],o=e.dims[1],l=e.dims[3]):(r=e.dims[3],o=e.dims[2],l=e.dims[1]);let c=t!==void 0&&t.format!==void 0?t.format:"RGB",d=t?.norm,f,p;d===void 0||d.mean===void 0?f=[255,255,255,255]:typeof d.mean=="number"?f=[d.mean,d.mean,d.mean,d.mean]:(f=[d.mean[0],d.mean[1],d.mean[2],255],d.mean[3]!==void 0&&(f[3]=d.mean[3])),d===void 0||d.bias===void 0?p=[0,0,0,0]:typeof d.bias=="number"?p=[d.bias,d.bias,d.bias,d.bias]:(p=[d.bias[0],d.bias[1],d.bias[2],0],d.bias[3]!==void 0&&(p[3]=d.bias[3]));let h=o*r;if(t!==void 0&&(t.format!==void 0&&l===4&&t.format!=="RGBA"||l===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let m=4,_=0,v=1,b=2,D=3,T=0,E=h,A=h*2,$=-1;c==="RGBA"?(T=0,E=h,A=h*2,$=h*3):c==="RGB"?(T=0,E=h,A=h*2):c==="RBG"&&(T=0,A=h,E=h*2),i=n.createImageData(r,o);for(let P=0;P<o*r;_+=m,v+=m,b+=m,D+=m,P++)i.data[_]=(e.data[T++]-p[0])*f[0],i.data[v]=(e.data[E++]-p[1])*f[1],i.data[b]=(e.data[A++]-p[2])*f[2],i.data[D]=$===-1?255:(e.data[$++]-p[3])*f[3]}else throw new Error("Can not access image data");return i}}),Vv,oI,sI,lI,cI,uI,gW=ht(()=>{HM(),Vv=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:n,width:i}=t,r=t.norm??{mean:255,bias:0},o,l;typeof r.mean=="number"?o=[r.mean,r.mean,r.mean,r.mean]:o=[r.mean[0],r.mean[1],r.mean[2],r.mean[3]??255],typeof r.bias=="number"?l=[r.bias,r.bias,r.bias,r.bias]:l=[r.bias[0],r.bias[1],r.bias[2],r.bias[3]??0];let c=t.format!==void 0?t.format:"RGBA",d=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",f=n*i,p=d==="RGBA"?new Float32Array(f*4):new Float32Array(f*3),h=4,m=0,_=1,v=2,b=3,D=0,T=f,E=f*2,A=-1;c==="RGB"&&(h=3,m=0,_=1,v=2,b=-1),d==="RGBA"?A=f*3:d==="RBG"?(D=0,E=f,T=f*2):d==="BGR"&&(E=0,T=f,D=f*2);for(let $=0;$<f;$++,m+=h,v+=h,_+=h,b+=h)p[D++]=(e[m]+l[0])/o[0],p[T++]=(e[_]+l[1])/o[1],p[E++]=(e[v]+l[2])/o[2],A!==-1&&b!==-1&&(p[A++]=(e[b]+l[3])/o[3]);return d==="RGBA"?new ja("float32",p,[1,4,n,i]):new ja("float32",p,[1,3,n,i])},oI=async(e,t)=>{let n=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,i=typeof ImageData<"u"&&e instanceof ImageData,r=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,o=typeof e=="string",l,c=t??{},d=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},f=p=>typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement||p instanceof OffscreenCanvas?p.getContext("2d"):null;if(n){let p=d();p.width=e.width,p.height=e.height;let h=f(p);if(h!=null){let m=e.height,_=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(m=t.resizedHeight,_=t.resizedWidth),t!==void 0){if(c=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");c.tensorFormat="RGBA",c.height=m,c.width=_}else c.tensorFormat="RGBA",c.height=m,c.width=_;h.drawImage(e,0,0),l=h.getImageData(0,0,_,m).data}else throw new Error("Can not access image data")}else if(i){let p,h;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(p=t.resizedHeight,h=t.resizedWidth):(p=e.height,h=e.width),t!==void 0&&(c=t),c.format="RGBA",c.height=p,c.width=h,t!==void 0){let m=d();m.width=h,m.height=p;let _=f(m);if(_!=null)_.putImageData(e,0,0),l=_.getImageData(0,0,h,p).data;else throw new Error("Can not access image data")}else l=e.data}else if(r){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let p=d();p.width=e.width,p.height=e.height;let h=f(p);if(h!=null){let m=e.height,_=e.width;return h.drawImage(e,0,0,_,m),l=h.getImageData(0,0,_,m).data,c.height=m,c.width=_,Vv(l,c)}else throw new Error("Can not access image data")}else{if(o)return new Promise((p,h)=>{let m=d(),_=f(m);if(!e||!_)return h();let v=new Image;v.crossOrigin="Anonymous",v.src=e,v.onload=()=>{m.width=v.width,m.height=v.height,_.drawImage(v,0,0,m.width,m.height);let b=_.getImageData(0,0,m.width,m.height);c.height=m.height,c.width=m.width,p(Vv(b.data,c))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return Vv(l,c);throw new Error("Input data provided is not supported - aborted tensor creation")},sI=(e,t)=>{let{width:n,height:i,download:r,dispose:o}=t,l=[1,i,n,4];return new ja({location:"texture",type:"float32",texture:e,dims:l,download:r,dispose:o})},lI=(e,t)=>{let{dataType:n,dims:i,download:r,dispose:o}=t;return new ja({location:"gpu-buffer",type:n??"float32",gpuBuffer:e,dims:i,download:r,dispose:o})},cI=(e,t)=>{let{dataType:n,dims:i,download:r,dispose:o}=t;return new ja({location:"ml-tensor",type:n??"float32",mlTensor:e,dims:i,download:r,dispose:o})},uI=(e,t,n)=>new ja({location:"cpu-pinned",type:e,data:t,dims:n??[t.length]})}),Md,Ug,dw,dI,_W=ht(()=>{Md=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Ug=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),dw=!1,dI=()=>{if(!dw){dw=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,n=globalThis.Float16Array,i=typeof n<"u"&&n.from;e&&(Md.set("int64",BigInt64Array),Ug.set(BigInt64Array,"int64")),t&&(Md.set("uint64",BigUint64Array),Ug.set(BigUint64Array,"uint64")),i?(Md.set("float16",n),Ug.set(n,"float16")):Md.set("float16",Uint16Array)}}}),fI,hI,vW=ht(()=>{HM(),fI=e=>{let t=1;for(let n=0;n<e.length;n++){let i=e[n];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${n}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${i}`);t*=i}return t},hI=(e,t)=>{switch(e.location){case"cpu":return new ja(e.type,e.data,t);case"cpu-pinned":return new ja({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new ja({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new ja({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new ja({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),ja,HM=ht(()=>{pW(),gW(),_W(),vW(),ja=class{constructor(e,t,n){dI();let i,r;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,i=e.type,r=e.dims,e.location){case"cpu-pinned":{let l=Md.get(i);if(!l)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(e.data instanceof l))throw new TypeError(`buffer should be of type ${l.name}`);this.cpuData=e.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint64"&&i!=="int8"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let l,c;if(typeof e=="string")if(i=e,c=n,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");l=t}else{let d=Md.get(e);if(d===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&d===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${d.name} as data.`);e==="uint64"||e==="int64"?l=d.from(t,BigInt):l=d.from(t)}else if(t instanceof d)l=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")l=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&d!==Uint16Array)l=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${i} tensor's data must be type of ${d}`)}else if(c=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let d=typeof e[0];if(d==="string")i="string",l=e;else if(d==="boolean")i="bool",l=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${d}.`)}else if(e instanceof Uint8ClampedArray)i="uint8",l=Uint8Array.from(e);else{let d=Ug.get(e.constructor);if(d===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);i=d,l=e}if(c===void 0)c=[l.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");r=c,this.cpuData=l,this.dataLocation="cpu"}let o=fI(r);if(this.cpuData&&o!==this.cpuData.length&&!((i==="uint4"||i==="int4")&&Math.ceil(o/2)===this.cpuData.length))throw new Error(`Tensor's size(${o}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=r,this.size=o}static async fromImage(e,t){return oI(e,t)}static fromTexture(e,t){return sI(e,t)}static fromGpuBuffer(e,t){return lI(e,t)}static fromMLTensor(e,t){return cI(e,t)}static fromPinnedBuffer(e,t,n){return uI(e,t,n)}toDataURL(e){return iI(this,e)}toImageData(e){return aI(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return hI(this,e)}}}),Xo,mI=ht(()=>{HM(),Xo=ja}),l_,fw,ns,yo,pI=ht(()=>{rI(),l_=(e,t)=>{(typeof mo.trace>"u"?!mo.wasm.trace:!mo.trace)||console.timeStamp(`${e}::ORT::${t}`)},fw=(e,t)=>{let n=new Error().stack?.split(/\r\n|\r|\n/g)||[],i=!1;for(let r=0;r<n.length;r++){if(i&&!n[r].includes("TRACE_FUNC")){let o=`FUNC_${e}::${n[r].trim().split(" ")[1]}`;t&&(o+=`::${t}`),l_("CPU",o);return}n[r].includes("TRACE_FUNC")&&(i=!0)}},ns=e=>{(typeof mo.trace>"u"?!mo.wasm.trace:!mo.trace)||fw("BEGIN",e)},yo=e=>{(typeof mo.trace>"u"?!mo.wasm.trace:!mo.trace)||fw("END",e)}}),gI,yW=ht(()=>{tI(),mI(),pI(),gI=class _I{constructor(t){this.handler=t}async run(t,n,i){ns();let r={},o={};if(typeof t!="object"||t===null||t instanceof Xo||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Xo)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let f of n){if(typeof f!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(f)===-1)throw new RangeError(`'fetches' contains invalid output name: ${f}.`);r[f]=null}if(typeof i=="object"&&i!==null)o=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let f=!1,p=Object.getOwnPropertyNames(n);for(let h of this.outputNames)if(p.indexOf(h)!==-1){let m=n[h];(m===null||m instanceof Xo)&&(f=!0,l=!1,r[h]=m)}if(f){if(typeof i=="object"&&i!==null)o=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else o=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let f of this.inputNames)if(typeof t[f]>"u")throw new Error(`input '${f}' is missing in 'feeds'.`);if(l)for(let f of this.outputNames)r[f]=null;let c=await this.handler.run(t,r,o),d={};for(let f in c)if(Object.hasOwnProperty.call(c,f)){let p=c[f];p instanceof Xo?d[f]=p:d[f]=new Xo(p.type,p.data,p.dims)}return yo(),d}async release(){return this.handler.dispose()}static async create(t,n,i,r){ns();let o,l={};if(typeof t=="string"){if(o=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(o=t,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let p=t,h=0,m=t.byteLength;if(typeof n=="object"&&n!==null)l=n;else if(typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteOffset' must be an integer.");if(h<0||h>=p.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${p.byteLength}).`);if(m=t.byteLength-h,typeof i=="number"){if(m=i,!Number.isSafeInteger(m))throw new RangeError("'byteLength' must be an integer.");if(m<=0||h+m>p.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${p.byteLength-h}].`);if(typeof r=="object"&&r!==null)l=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");o=new Uint8Array(p,h,m)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[c,d]=await eI(l),f=await c.createInferenceSessionHandler(o,d);return yo(),new _I(f)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),KM,bW=ht(()=>{yW(),KM=gI}),wW=ht(()=>{}),xW=ht(()=>{}),MW=ht(()=>{}),TW=ht(()=>{}),vI={};nm(vI,{InferenceSession:()=>KM,TRACE:()=>l_,TRACE_FUNC_BEGIN:()=>ns,TRACE_FUNC_END:()=>yo,Tensor:()=>Xo,env:()=>yr,registerBackend:()=>Ed});var rs=ht(()=>{fW(),mW(),bW(),mI(),wW(),xW(),pI(),MW(),TW()}),qM=ht(()=>{}),yI={};nm(yI,{default:()=>bI});var hw,mw,bI,SW=ht(()=>{Sz(),Vd(),ZM(),hw="ort-wasm-proxy-worker",mw=globalThis.self?.name===hw,mw&&(self.onmessage=e=>{let{type:t,in:n}=e.data;try{switch(t){case"init-wasm":QM(n.wasm).then(()=>{m1(n).then(()=>{postMessage({type:t})},i=>{postMessage({type:t,err:i})})},i=>{postMessage({type:t,err:i})});break;case"init-ep":{let{epName:i,env:r}=n;p1(r,i).then(()=>{postMessage({type:t})},o=>{postMessage({type:t,err:o})});break}case"copy-from":{let{buffer:i}=n,r=Wy(i);postMessage({type:t,out:r});break}case"create":{let{model:i,options:r}=n;g1(i,r).then(o=>{postMessage({type:t,out:o})},o=>{postMessage({type:t,err:o})});break}case"release":_1(n),postMessage({type:t});break;case"run":{let{sessionId:i,inputIndices:r,inputs:o,outputIndices:l,options:c}=n;v1(i,r,o,l,new Array(l.length).fill(null),c).then(d=>{d.some(f=>f[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:d},b1([...o,...d]))},d=>{postMessage({type:t,err:d})});break}case"end-profiling":y1(n),postMessage({type:t});break;default:}}catch(i){postMessage({type:t,err:i})}}),bI=mw?null:e=>new Worker(e??za,{type:"module",name:hw})}),wI={};nm(wI,{default:()=>xI});var pw,gw,xI,HE,EW=ht(()=>{gw=(pw=import.meta.url,async function(e={}){var t,n,i=e,r=new Promise((w,z)=>{t=w,n=z}),o=typeof window=="object",l=typeof WorkerGlobalScope<"u",c=l&&self.name?.startsWith("em-pthread");i.mountExternalData=(w,z)=>{w.startsWith("./")&&(w=w.substring(2)),(i.Eb||(i.Eb=new Map)).set(w,z)},i.unmountExternalData=()=>{delete i.Eb};var d=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let f=w=>async(...z)=>{try{if(i.Fb)throw Error("Session already started");let B=i.Fb={dc:z[0],errors:[]},q=await w(...z);if(i.Fb!==B)throw Error("Session mismatch");i.Jb?.flush();let re=B.errors;if(0<re.length){let be=await Promise.all(re);if(be=be.filter(qe=>qe),0<be.length)throw Error(be.join(`
`))}return q}finally{i.Fb=null}};i.jsepInit=(w,z)=>{if(w==="webgpu"){[i.Jb,i.Ub,i.Yb,i.Kb,i.Xb,i.jb,i.Zb,i.ac,i.Vb,i.Wb,i.$b]=z;let B=i.Jb;i.jsepRegisterBuffer=(q,re,be,qe)=>B.registerBuffer(q,re,be,qe),i.jsepGetBuffer=q=>B.getBuffer(q),i.jsepCreateDownloader=(q,re,be)=>B.createDownloader(q,re,be),i.jsepOnCreateSession=q=>{B.onCreateSession(q)},i.jsepOnReleaseSession=q=>{B.onReleaseSession(q)},i.jsepOnRunStart=q=>B.onRunStart(q),i.bc=(q,re)=>{B.upload(q,re)}}else if(w==="webnn"){let B=z[0];[i.nc,i.Nb,i.webnnEnsureTensor,i.Ob,i.webnnDownloadTensor]=z.slice(1),i.webnnReleaseTensorId=i.Nb,i.webnnUploadTensor=i.Ob,i.webnnOnRunStart=q=>B.onRunStart(q),i.webnnOnRunEnd=B.onRunEnd.bind(B),i.webnnRegisterMLContext=(q,re)=>{B.registerMLContext(q,re)},i.webnnOnReleaseSession=q=>{B.onReleaseSession(q)},i.webnnCreateMLTensorDownloader=(q,re)=>B.createMLTensorDownloader(q,re),i.webnnRegisterMLTensor=(q,re,be,qe)=>B.registerMLTensor(q,re,be,qe),i.webnnCreateMLContext=q=>B.createMLContext(q),i.webnnRegisterMLConstant=(q,re,be,qe,ct,wt)=>B.registerMLConstant(q,re,be,qe,ct,i.Eb,wt),i.webnnRegisterGraphInput=B.registerGraphInput.bind(B),i.webnnIsGraphInput=B.isGraphInput.bind(B),i.webnnCreateTemporaryTensor=B.createTemporaryTensor.bind(B),i.webnnIsInt64Supported=B.isInt64Supported.bind(B)}};let p=()=>{let w=(z,B,q)=>(...re)=>{let be=Ln,qe=B?.();re=z(...re);let ct=B?.();return qe!==ct&&(z=ct,q(qe),B=q=null),Ln!=be?new Promise((wt,At)=>{sr={resolve:wt,reject:At}}):re};(()=>{for(let z of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])i[z]=w(i[z],()=>i[z],B=>i[z]=B)})(),f!==void 0&&(i._OrtRun=f(i._OrtRun),i._OrtRunWithBinding=f(i._OrtRunWithBinding)),p=void 0};i.asyncInit=()=>{p?.()};var h,m,_=Object.assign({},i),v=(w,z)=>{throw z},b="";(o||l)&&(l?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),pw&&(b=pw),b=b.startsWith("blob:")?"":b.slice(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(m=w=>{var z=new XMLHttpRequest;return z.open("GET",w,!1),z.responseType="arraybuffer",z.send(null),new Uint8Array(z.response)}),h=async w=>{if(ge(w))return new Promise((B,q)=>{var re=new XMLHttpRequest;re.open("GET",w,!0),re.responseType="arraybuffer",re.onload=()=>{re.status==200||re.status==0&&re.response?B(re.response):q(re.status)},re.onerror=q,re.send(null)});var z=await fetch(w,{credentials:"same-origin"});if(z.ok)return z.arrayBuffer();throw Error(z.status+" : "+z.url)});var D=console.log.bind(console),T=console.error.bind(console),E=D,A=T;Object.assign(i,_),_=null;var $,P,C,S,O,N,j,X,Y,K,se,oe,W,ne=i.wasmBinary,ae=!1,ge=w=>w.startsWith("file://");function ye(){return $.buffer!=S.buffer&&Be(),S}function G(){return $.buffer!=S.buffer&&Be(),O}function H(){return $.buffer!=S.buffer&&Be(),N}function V(){return $.buffer!=S.buffer&&Be(),j}function U(){return $.buffer!=S.buffer&&Be(),X}function ce(){return $.buffer!=S.buffer&&Be(),Y}function ve(){return $.buffer!=S.buffer&&Be(),K}function ke(){return $.buffer!=S.buffer&&Be(),W}if(c){let w=function(z){try{var B=z.data,q=B.Bb;if(q==="load"){let re=[];self.onmessage=be=>re.push(be),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let be of re)w(be);self.onmessage=w};for(let be of B.Rb)i[be]&&!i[be].proxy||(i[be]=(...qe)=>{postMessage({Bb:"callHandler",Qb:be,args:qe})},be=="print"&&(E=i[be]),be=="printErr"&&(A=i[be]));$=B.kc,Be(),Le(B.lc)}else if(q==="run"){is(B.Ab),al(B.Ab,0,0,1,0,0),Mr(),he(B.Ab),Xe||(fs(),Xe=!0);try{as(B.fc,B.Hb)}catch(re){if(re!="unwind")throw re}}else B.target!=="setimmediate"&&(q==="checkMailbox"?Xe&&me():q&&(A(`worker: received unknown command ${q}`),A(B)))}catch(re){throw Mu(),re}};var Le,Xe=!1;A=function(...z){z=z.join(" "),console.error(z)},self.alert=function(...z){postMessage({Bb:"alert",text:z.join(" "),ic:rl()})},self.onunhandledrejection=z=>{throw z.reason||z},self.onmessage=w}function Be(){var w=$.buffer;i.HEAP8=S=new Int8Array(w),i.HEAP16=N=new Int16Array(w),i.HEAPU8=O=new Uint8Array(w),i.HEAPU16=j=new Uint16Array(w),i.HEAP32=X=new Int32Array(w),i.HEAPU32=Y=new Uint32Array(w),i.HEAPF32=K=new Float32Array(w),i.HEAPF64=W=new Float64Array(w),i.HEAP64=se=new BigInt64Array(w),i.HEAPU64=oe=new BigUint64Array(w)}function ue(){c?startWorker(i):Ot.Ca()}c||($=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),Be());var Z,Se=0,Re=null;function Ve(){if(--Se==0&&Re){var w=Re;Re=null,w()}}function Ge(w){throw A(w="Aborted("+w+")"),ae=!0,w=new WebAssembly.RuntimeError(w+". Build with -sASSERTIONS for more info."),n(w),w}function Ke(){return{a:{L:Ae,Aa:nt,b:Jn,$:Yr,A:ga,pa:ia,X:_a,Z:L,qa:de,na:J,ga:le,ma:fe,J:xe,Y:je,V:mt,oa:Et,W:_t,va:rn,E:Ai,Q:er,O:So,D:qi,u:ii,r:$r,P:ci,z:Zs,R:Me,ja:R,T:ze,aa:xt,M:bt,F:Mt,ia:he,sa:vt,t:tr,Ba:Pr,w:Ii,o:Si,l:Sn,c:ri,n:ai,j:Hl,v:os,p:Xs,f:hu,s:ss,m:Kd,e:qd,k:Kl,i:Zd,g:Qd,d:ls,da:Xd,ea:Yd,fa:gu,ba:_u,ca:Ys,N:Zl,xa:vu,ua:am,h:bu,C:Yl,G:ef,ta:yu,x:tf,ra:nf,U:Jl,q:Jd,y:cs,K:rf,S:ec,za:wu,ya,ka:ba,la:rc,_:et,B:ds,I:Co,ha:af,H:nl,a:$,wa:Tt}}}var Ie={829644:(w,z,B,q,re)=>{if(i===void 0||!i.Eb)return 1;if((w=Wn(Number(w>>>0))).startsWith("./")&&(w=w.substring(2)),!(w=i.Eb.get(w)))return 2;if(z=Number(z>>>0),B=Number(B>>>0),q=Number(q>>>0),z+B>w.byteLength)return 3;try{let be=w.subarray(z,z+B);switch(re){case 0:G().set(be,q>>>0);break;case 1:i.mc?i.mc(q,be):i.bc(q,be);break;default:return 4}return 0}catch{return 4}},830468:(w,z,B)=>{i.Ob(w,G().subarray(z>>>0,z+B>>>0))},830532:()=>i.nc(),830574:w=>{i.Nb(w)},830611:()=>{i.Vb()},830642:()=>{i.Wb()},830671:()=>{i.$b()},830696:w=>i.Ub(w),830729:w=>i.Yb(w),830761:(w,z,B)=>{i.Kb(Number(w),Number(z),Number(B),!0)},830824:(w,z,B)=>{i.Kb(Number(w),Number(z),Number(B))},830881:()=>typeof wasmOffsetConverter<"u",830938:w=>{i.jb("Abs",w,void 0)},830989:w=>{i.jb("Neg",w,void 0)},831040:w=>{i.jb("Floor",w,void 0)},831093:w=>{i.jb("Ceil",w,void 0)},831145:w=>{i.jb("Reciprocal",w,void 0)},831203:w=>{i.jb("Sqrt",w,void 0)},831255:w=>{i.jb("Exp",w,void 0)},831306:w=>{i.jb("Erf",w,void 0)},831357:w=>{i.jb("Sigmoid",w,void 0)},831412:(w,z,B)=>{i.jb("HardSigmoid",w,{alpha:z,beta:B})},831491:w=>{i.jb("Log",w,void 0)},831542:w=>{i.jb("Sin",w,void 0)},831593:w=>{i.jb("Cos",w,void 0)},831644:w=>{i.jb("Tan",w,void 0)},831695:w=>{i.jb("Asin",w,void 0)},831747:w=>{i.jb("Acos",w,void 0)},831799:w=>{i.jb("Atan",w,void 0)},831851:w=>{i.jb("Sinh",w,void 0)},831903:w=>{i.jb("Cosh",w,void 0)},831955:w=>{i.jb("Asinh",w,void 0)},832008:w=>{i.jb("Acosh",w,void 0)},832061:w=>{i.jb("Atanh",w,void 0)},832114:w=>{i.jb("Tanh",w,void 0)},832166:w=>{i.jb("Not",w,void 0)},832217:(w,z,B)=>{i.jb("Clip",w,{min:z,max:B})},832286:w=>{i.jb("Clip",w,void 0)},832338:(w,z)=>{i.jb("Elu",w,{alpha:z})},832396:w=>{i.jb("Gelu",w,void 0)},832448:w=>{i.jb("Relu",w,void 0)},832500:(w,z)=>{i.jb("LeakyRelu",w,{alpha:z})},832564:(w,z)=>{i.jb("ThresholdedRelu",w,{alpha:z})},832634:(w,z)=>{i.jb("Cast",w,{to:z})},832692:w=>{i.jb("Add",w,void 0)},832743:w=>{i.jb("Sub",w,void 0)},832794:w=>{i.jb("Mul",w,void 0)},832845:w=>{i.jb("Div",w,void 0)},832896:w=>{i.jb("Pow",w,void 0)},832947:w=>{i.jb("Equal",w,void 0)},833e3:w=>{i.jb("Greater",w,void 0)},833055:w=>{i.jb("GreaterOrEqual",w,void 0)},833117:w=>{i.jb("Less",w,void 0)},833169:w=>{i.jb("LessOrEqual",w,void 0)},833228:(w,z,B,q,re)=>{i.jb("ReduceMean",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},833403:(w,z,B,q,re)=>{i.jb("ReduceMax",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},833577:(w,z,B,q,re)=>{i.jb("ReduceMin",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},833751:(w,z,B,q,re)=>{i.jb("ReduceProd",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},833926:(w,z,B,q,re)=>{i.jb("ReduceSum",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},834100:(w,z,B,q,re)=>{i.jb("ReduceL1",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},834273:(w,z,B,q,re)=>{i.jb("ReduceL2",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},834446:(w,z,B,q,re)=>{i.jb("ReduceLogSum",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},834623:(w,z,B,q,re)=>{i.jb("ReduceSumSquare",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},834803:(w,z,B,q,re)=>{i.jb("ReduceLogSumExp",w,{keepDims:!!z,noopWithEmptyAxes:!!B,axes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},834983:w=>{i.jb("Where",w,void 0)},835036:(w,z,B)=>{i.jb("Transpose",w,{perm:z?Array.from(U().subarray(Number(z)>>>0,Number(B)>>>0)):[]})},835160:(w,z,B,q)=>{i.jb("DepthToSpace",w,{blocksize:z,mode:Wn(B),format:q?"NHWC":"NCHW"})},835293:(w,z,B,q)=>{i.jb("DepthToSpace",w,{blocksize:z,mode:Wn(B),format:q?"NHWC":"NCHW"})},835426:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn,sa)=>{i.jb("ConvTranspose",w,{format:wt?"NHWC":"NCHW",autoPad:z,dilations:[B],group:q,kernelShape:[re],pads:[be,qe],strides:[ct],wIsConst:()=>!!ye()[At>>>0],outputPadding:Yt?Array.from(U().subarray(Number(Yt)>>>0,Number(yn)>>>0)):[],outputShape:$n?Array.from(U().subarray(Number($n)>>>0,Number(Rn)>>>0)):[],activation:Wn(sa)})},835859:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn)=>{i.jb("ConvTranspose",w,{format:ct?"NHWC":"NCHW",autoPad:z,dilations:Array.from(U().subarray(Number(B)>>>0,2+(Number(B)>>>0)>>>0)),group:q,kernelShape:Array.from(U().subarray(Number(re)>>>0,2+(Number(re)>>>0)>>>0)),pads:Array.from(U().subarray(Number(be)>>>0,4+(Number(be)>>>0)>>>0)),strides:Array.from(U().subarray(Number(qe)>>>0,2+(Number(qe)>>>0)>>>0)),wIsConst:()=>!!ye()[wt>>>0],outputPadding:At?Array.from(U().subarray(Number(At)>>>0,Number(Yt)>>>0)):[],outputShape:yn?Array.from(U().subarray(Number(yn)>>>0,Number($n)>>>0)):[],activation:Wn(Rn)})},836520:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn,sa)=>{i.jb("ConvTranspose",w,{format:wt?"NHWC":"NCHW",autoPad:z,dilations:[B],group:q,kernelShape:[re],pads:[be,qe],strides:[ct],wIsConst:()=>!!ye()[At>>>0],outputPadding:Yt?Array.from(U().subarray(Number(Yt)>>>0,Number(yn)>>>0)):[],outputShape:$n?Array.from(U().subarray(Number($n)>>>0,Number(Rn)>>>0)):[],activation:Wn(sa)})},836953:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn)=>{i.jb("ConvTranspose",w,{format:ct?"NHWC":"NCHW",autoPad:z,dilations:Array.from(U().subarray(Number(B)>>>0,2+(Number(B)>>>0)>>>0)),group:q,kernelShape:Array.from(U().subarray(Number(re)>>>0,2+(Number(re)>>>0)>>>0)),pads:Array.from(U().subarray(Number(be)>>>0,4+(Number(be)>>>0)>>>0)),strides:Array.from(U().subarray(Number(qe)>>>0,2+(Number(qe)>>>0)>>>0)),wIsConst:()=>!!ye()[wt>>>0],outputPadding:At?Array.from(U().subarray(Number(At)>>>0,Number(Yt)>>>0)):[],outputShape:yn?Array.from(U().subarray(Number(yn)>>>0,Number($n)>>>0)):[],activation:Wn(Rn)})},837614:(w,z)=>{i.jb("GlobalAveragePool",w,{format:z?"NHWC":"NCHW"})},837705:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn)=>{i.jb("AveragePool",w,{format:Rn?"NHWC":"NCHW",auto_pad:z,ceil_mode:B,count_include_pad:q,storage_order:re,dilations:be?Array.from(U().subarray(Number(be)>>>0,Number(qe)>>>0)):[],kernel_shape:ct?Array.from(U().subarray(Number(ct)>>>0,Number(wt)>>>0)):[],pads:At?Array.from(U().subarray(Number(At)>>>0,Number(Yt)>>>0)):[],strides:yn?Array.from(U().subarray(Number(yn)>>>0,Number($n)>>>0)):[]})},838184:(w,z)=>{i.jb("GlobalAveragePool",w,{format:z?"NHWC":"NCHW"})},838275:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn)=>{i.jb("AveragePool",w,{format:Rn?"NHWC":"NCHW",auto_pad:z,ceil_mode:B,count_include_pad:q,storage_order:re,dilations:be?Array.from(U().subarray(Number(be)>>>0,Number(qe)>>>0)):[],kernel_shape:ct?Array.from(U().subarray(Number(ct)>>>0,Number(wt)>>>0)):[],pads:At?Array.from(U().subarray(Number(At)>>>0,Number(Yt)>>>0)):[],strides:yn?Array.from(U().subarray(Number(yn)>>>0,Number($n)>>>0)):[]})},838754:(w,z)=>{i.jb("GlobalMaxPool",w,{format:z?"NHWC":"NCHW"})},838841:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn)=>{i.jb("MaxPool",w,{format:Rn?"NHWC":"NCHW",auto_pad:z,ceil_mode:B,count_include_pad:q,storage_order:re,dilations:be?Array.from(U().subarray(Number(be)>>>0,Number(qe)>>>0)):[],kernel_shape:ct?Array.from(U().subarray(Number(ct)>>>0,Number(wt)>>>0)):[],pads:At?Array.from(U().subarray(Number(At)>>>0,Number(Yt)>>>0)):[],strides:yn?Array.from(U().subarray(Number(yn)>>>0,Number($n)>>>0)):[]})},839316:(w,z)=>{i.jb("GlobalMaxPool",w,{format:z?"NHWC":"NCHW"})},839403:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn)=>{i.jb("MaxPool",w,{format:Rn?"NHWC":"NCHW",auto_pad:z,ceil_mode:B,count_include_pad:q,storage_order:re,dilations:be?Array.from(U().subarray(Number(be)>>>0,Number(qe)>>>0)):[],kernel_shape:ct?Array.from(U().subarray(Number(ct)>>>0,Number(wt)>>>0)):[],pads:At?Array.from(U().subarray(Number(At)>>>0,Number(Yt)>>>0)):[],strides:yn?Array.from(U().subarray(Number(yn)>>>0,Number($n)>>>0)):[]})},839878:(w,z,B,q,re)=>{i.jb("Gemm",w,{alpha:z,beta:B,transA:q,transB:re})},839982:w=>{i.jb("MatMul",w,void 0)},840036:(w,z,B,q)=>{i.jb("ArgMax",w,{keepDims:!!z,selectLastIndex:!!B,axis:q})},840144:(w,z,B,q)=>{i.jb("ArgMin",w,{keepDims:!!z,selectLastIndex:!!B,axis:q})},840252:(w,z)=>{i.jb("Softmax",w,{axis:z})},840315:(w,z)=>{i.jb("Concat",w,{axis:z})},840375:(w,z,B,q,re)=>{i.jb("Split",w,{axis:z,numOutputs:B,splitSizes:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},840531:w=>{i.jb("Expand",w,void 0)},840585:(w,z)=>{i.jb("Gather",w,{axis:Number(z)})},840656:(w,z)=>{i.jb("GatherElements",w,{axis:Number(z)})},840735:(w,z)=>{i.jb("GatherND",w,{batch_dims:Number(z)})},840814:(w,z,B,q,re,be,qe,ct,wt,At,Yt)=>{i.jb("Resize",w,{antialias:z,axes:B?Array.from(U().subarray(Number(B)>>>0,Number(q)>>>0)):[],coordinateTransformMode:Wn(re),cubicCoeffA:be,excludeOutside:qe,extrapolationValue:ct,keepAspectRatioPolicy:Wn(wt),mode:Wn(At),nearestMode:Wn(Yt)})},841176:(w,z,B,q,re,be,qe)=>{i.jb("Slice",w,{starts:z?Array.from(U().subarray(Number(z)>>>0,Number(B)>>>0)):[],ends:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[],axes:be?Array.from(U().subarray(Number(be)>>>0,Number(qe)>>>0)):[]})},841440:w=>{i.jb("Tile",w,void 0)},841492:(w,z,B)=>{i.jb("InstanceNormalization",w,{epsilon:z,format:B?"NHWC":"NCHW"})},841606:(w,z,B)=>{i.jb("InstanceNormalization",w,{epsilon:z,format:B?"NHWC":"NCHW"})},841720:w=>{i.jb("Range",w,void 0)},841773:(w,z)=>{i.jb("Einsum",w,{equation:Wn(z)})},841854:(w,z,B,q,re)=>{i.jb("Pad",w,{mode:z,value:B,pads:q?Array.from(U().subarray(Number(q)>>>0,Number(re)>>>0)):[]})},841997:(w,z,B,q,re,be)=>{i.jb("BatchNormalization",w,{epsilon:z,momentum:B,spatial:!!re,trainingMode:!!q,format:be?"NHWC":"NCHW"})},842166:(w,z,B,q,re,be)=>{i.jb("BatchNormalization",w,{epsilon:z,momentum:B,spatial:!!re,trainingMode:!!q,format:be?"NHWC":"NCHW"})},842335:(w,z,B)=>{i.jb("CumSum",w,{exclusive:Number(z),reverse:Number(B)})},842432:(w,z,B)=>{i.jb("DequantizeLinear",w,{axis:z,blockSize:B})},842522:(w,z,B,q,re)=>{i.jb("GridSample",w,{align_corners:z,mode:Wn(B),padding_mode:Wn(q),format:re?"NHWC":"NCHW"})},842692:(w,z,B,q,re)=>{i.jb("GridSample",w,{align_corners:z,mode:Wn(B),padding_mode:Wn(q),format:re?"NHWC":"NCHW"})},842862:(w,z)=>{i.jb("ScatterND",w,{reduction:Wn(z)})},842947:(w,z,B,q,re,be,qe,ct,wt)=>{i.jb("Attention",w,{numHeads:z,isUnidirectional:B,maskFilterValue:q,scale:re,doRotary:be,qkvHiddenSizes:qe?Array.from(U().subarray(Number(ct)>>>0,Number(ct)+qe>>>0)):[],pastPresentShareBuffer:!!wt})},843219:w=>{i.jb("BiasAdd",w,void 0)},843274:w=>{i.jb("BiasSplitGelu",w,void 0)},843335:w=>{i.jb("FastGelu",w,void 0)},843391:(w,z,B,q,re,be,qe,ct,wt,At,Yt,yn,$n,Rn,sa,Ei)=>{i.jb("Conv",w,{format:yn?"NHWC":"NCHW",auto_pad:z,dilations:B?Array.from(U().subarray(Number(B)>>>0,Number(q)>>>0)):[],group:re,kernel_shape:be?Array.from(U().subarray(Number(be)>>>0,Number(qe)>>>0)):[],pads:ct?Array.from(U().subarray(Number(ct)>>>0,Number(wt)>>>0)):[],strides:At?Array.from(U().subarray(Number(At)>>>0,Number(Yt)>>>0)):[],w_is_const:()=>!!ye()[Number($n)>>>0],activation:Wn(Rn),activation_params:sa?Array.from(ve().subarray(Number(sa)>>>0,Number(Ei)>>>0)):[]})},843975:w=>{i.jb("Gelu",w,void 0)},844027:(w,z,B,q,re,be,qe,ct,wt)=>{i.jb("GroupQueryAttention",w,{numHeads:z,kvNumHeads:B,scale:q,softcap:re,doRotary:be,rotaryInterleaved:qe,smoothSoftmax:ct,localWindowSize:wt})},844244:(w,z,B,q)=>{i.jb("LayerNormalization",w,{axis:z,epsilon:B,simplified:!!q})},844355:(w,z,B,q)=>{i.jb("LayerNormalization",w,{axis:z,epsilon:B,simplified:!!q})},844466:(w,z,B,q,re,be)=>{i.jb("MatMulNBits",w,{k:z,n:B,accuracyLevel:q,bits:re,blockSize:be})},844593:(w,z,B,q,re,be)=>{i.jb("MultiHeadAttention",w,{numHeads:z,isUnidirectional:B,maskFilterValue:q,scale:re,doRotary:be})},844752:(w,z)=>{i.jb("QuickGelu",w,{alpha:z})},844816:(w,z,B,q,re)=>{i.jb("RotaryEmbedding",w,{interleaved:!!z,numHeads:B,rotaryEmbeddingDim:q,scale:re})},844955:(w,z,B)=>{i.jb("SkipLayerNormalization",w,{epsilon:z,simplified:!!B})},845057:(w,z,B)=>{i.jb("SkipLayerNormalization",w,{epsilon:z,simplified:!!B})},845159:(w,z,B,q)=>{i.jb("GatherBlockQuantized",w,{gatherAxis:z,quantizeAxis:B,blockSize:q})},845280:w=>{i.Zb(w)},845314:(w,z)=>i.ac(Number(w),Number(z),i.Fb.dc,i.Fb.errors)};function nt(w,z,B){return Ti(async()=>{await i.Xb(Number(w),Number(z),Number(B))})}function Ae(){return typeof wasmOffsetConverter<"u"}class We{name="ExitStatus";constructor(z){this.message=`Program terminated with exit(${z})`,this.status=z}}var ft=w=>{w.terminate(),w.onmessage=()=>{}},Fe=[],ot=w=>{kt.length==0&&(_i(),an(kt[0]));var z=kt.pop();if(!z)return 6;jt.push(z),Qt[w.Ab]=z,z.Ab=w.Ab;var B={Bb:"run",fc:w.ec,Hb:w.Hb,Ab:w.Ab};return z.postMessage(B,w.Mb),0},rt=0,St=(w,z,...B)=>{for(var q=2*B.length,re=wa(),be=ll(8*q),qe=be>>>3,ct=0;ct<B.length;ct++){var wt=B[ct];typeof wt=="bigint"?(se[qe+2*ct]=1n,se[qe+2*ct+1]=wt):(se[qe+2*ct]=0n,ke()[qe+2*ct+1>>>0]=wt)}return w=ui(w,0,q,be,z),Ao(re),w};function Tt(w){if(c)return St(0,1,w);if(C=w,!(0<rt)){for(var z of jt)ft(z);for(z of kt)ft(z);kt=[],jt=[],Qt={},ae=!0}v(0,new We(w))}function ut(w){if(c)return St(1,0,w);et(w)}var et=w=>{if(C=w,c)throw ut(w),"unwind";Tt(w)},kt=[],jt=[],Cn=[],Qt={},kn=w=>{var z=w.Ab;delete Qt[z],kt.push(w),jt.splice(jt.indexOf(w),1),w.Ab=0,Za(z)};function Mr(){Cn.forEach(w=>w())}var an=w=>new Promise(z=>{w.onmessage=re=>{var be=(re=re.data).Bb;if(re.Gb&&re.Gb!=rl()){var qe=Qt[re.Gb];qe?qe.postMessage(re,re.Mb):A(`Internal error! Worker sent a message "${be}" to target pthread ${re.Gb}, but that thread no longer exists!`)}else be==="checkMailbox"?me():be==="spawnThread"?ot(re):be==="cleanupThread"?kn(Qt[re.hc]):be==="loaded"?(w.loaded=!0,z(w)):be==="alert"?alert(`Thread ${re.ic}: ${re.text}`):re.target==="setimmediate"?w.postMessage(re):be==="callHandler"?i[re.Qb](...re.args):be&&A(`worker sent an unknown command ${be}`)},w.onerror=re=>{throw A(`worker sent an error! ${re.filename}:${re.lineno}: ${re.message}`),re};var B,q=[];for(B of[])i.propertyIsEnumerable(B)&&q.push(B);w.postMessage({Bb:"load",Rb:q,kc:$,lc:P})});function _i(){var w=new Worker((()=>{let z=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new z("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});kt.push(w)}var is=w=>{Be();var z=ce()[w+52>>>2>>>0];w=ce()[w+56>>>2>>>0],sc(z,z-w),Ao(z)},as=(w,z)=>{rt=0,w=cl(w,z),0<rt?C=w:ol(w)};class pa{constructor(z){this.Ib=z-24}}function Jn(w,z,B){var q=new pa(w>>>=0);throw z>>>=0,B>>>=0,ce()[q.Ib+16>>>2>>>0]=0,ce()[q.Ib+4>>>2>>>0]=z,ce()[q.Ib+8>>>2>>>0]=B,w}function Ir(w,z,B,q){return c?St(2,1,w,z,B,q):Yr(w,z,B,q)}function Yr(w,z,B,q){if(w>>>=0,B>>>=0,q>>>=0,d===void 0)return 6;var re=[];return c&&re.length===0?Ir(w,z>>>=0,B,q):(w={ec:B,Ab:w,Hb:q,Mb:re},c?(w.Bb="spawnThread",postMessage(w,re),0):ot(w))}var ra=typeof TextDecoder<"u"?new TextDecoder:void 0,Bt=(w,z=0,B=NaN)=>{var q=(z>>>=0)+B;for(B=z;w[B]&&!(B>=q);)++B;if(16<B-z&&w.buffer&&ra)return ra.decode(w.buffer instanceof ArrayBuffer?w.subarray(z,B):w.slice(z,B));for(q="";z<B;){var re=w[z++];if(128&re){var be=63&w[z++];if((224&re)==192)q+=String.fromCharCode((31&re)<<6|be);else{var qe=63&w[z++];65536>(re=(240&re)==224?(15&re)<<12|be<<6|qe:(7&re)<<18|be<<12|qe<<6|63&w[z++])?q+=String.fromCharCode(re):(re-=65536,q+=String.fromCharCode(55296|re>>10,56320|1023&re))}}else q+=String.fromCharCode(re)}return q},Wn=(w,z)=>(w>>>=0)?Bt(G(),w,z):"";function ga(w,z,B){return c?St(3,1,w,z,B):0}function ia(w,z){if(c)return St(4,1,w,z)}var ei=w=>{for(var z=0,B=0;B<w.length;++B){var q=w.charCodeAt(B);127>=q?z++:2047>=q?z+=2:55296<=q&&57343>=q?(z+=4,++B):z+=3}return z},Xt=(w,z,B)=>{var q=G();if(z>>>=0,0<B){var re=z;B=z+B-1;for(var be=0;be<w.length;++be){var qe=w.charCodeAt(be);if(55296<=qe&&57343>=qe&&(qe=65536+((1023&qe)<<10)|1023&w.charCodeAt(++be)),127>=qe){if(z>=B)break;q[z++>>>0]=qe}else{if(2047>=qe){if(z+1>=B)break;q[z++>>>0]=192|qe>>6}else{if(65535>=qe){if(z+2>=B)break;q[z++>>>0]=224|qe>>12}else{if(z+3>=B)break;q[z++>>>0]=240|qe>>18,q[z++>>>0]=128|qe>>12&63}q[z++>>>0]=128|qe>>6&63}q[z++>>>0]=128|63&qe}}q[z>>>0]=0,w=z-re}else w=0;return w};function _a(w,z){if(c)return St(5,1,w,z)}function L(w,z,B){if(c)return St(6,1,w,z,B)}function de(w,z,B){return c?St(7,1,w,z,B):0}function J(w,z){if(c)return St(8,1,w,z)}function le(w,z,B){if(c)return St(9,1,w,z,B)}function fe(w,z,B,q){if(c)return St(10,1,w,z,B,q)}function xe(w,z,B,q){if(c)return St(11,1,w,z,B,q)}function je(w,z,B,q){if(c)return St(12,1,w,z,B,q)}function mt(w){if(c)return St(13,1,w)}function Et(w,z){if(c)return St(14,1,w,z)}function _t(w,z,B){if(c)return St(15,1,w,z,B)}var Gt,yt,rn=()=>Ge(""),cn=w=>{for(var z="";G()[w>>>0];)z+=Gt[G()[w++>>>0]];return z},fr={},hr={};function Hn(w,z,B={}){return(function(q,re,be={}){var qe=re.name;if(!q)throw new yt(`type "${qe}" must have a positive integer typeid pointer`);if(hr.hasOwnProperty(q)){if(be.Sb)return;throw new yt(`Cannot register type '${qe}' twice`)}hr[q]=re,fr.hasOwnProperty(q)&&(re=fr[q],delete fr[q],re.forEach(ct=>ct()))})(w,z,B)}var mr=(w,z,B)=>{switch(z){case 1:return B?q=>ye()[q>>>0]:q=>G()[q>>>0];case 2:return B?q=>H()[q>>>1>>>0]:q=>V()[q>>>1>>>0];case 4:return B?q=>U()[q>>>2>>>0]:q=>ce()[q>>>2>>>0];case 8:return B?q=>se[q>>>3]:q=>oe[q>>>3];default:throw new TypeError(`invalid integer width (${z}): ${w}`)}};function Ai(w,z,B){B>>>=0,Hn(w>>>=0,{name:z=cn(z>>>0),fromWireType:q=>q,toWireType:function(q,re){if(typeof re!="bigint"&&typeof re!="number")throw re=re===null?"null":(q=typeof re)=="object"||q==="array"||q==="function"?re.toString():""+re,new TypeError(`Cannot convert "${re}" to ${this.name}`);return typeof re=="number"&&(re=BigInt(re)),re},Cb:Or,readValueFromPointer:mr(z,B,z.indexOf("u")==-1),Db:null})}var Or=8;function er(w,z,B,q){Hn(w>>>=0,{name:z=cn(z>>>0),fromWireType:function(re){return!!re},toWireType:function(re,be){return be?B:q},Cb:Or,readValueFromPointer:function(re){return this.fromWireType(G()[re>>>0])},Db:null})}var ti=[],ni=[];function ri(w){9<(w>>>=0)&&--ni[w+1]==0&&(ni[w]=void 0,ti.push(w))}var or=w=>{if(!w)throw new yt("Cannot use deleted val. handle = "+w);return ni[w]},Tr=w=>{switch(w){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let z=ti.pop()||ni.length;return ni[z]=w,ni[z+1]=1,z}};function Mi(w){return this.fromWireType(ce()[w>>>2>>>0])}var Hi={name:"emscripten::val",fromWireType:w=>{var z=or(w);return ri(w),z},toWireType:(w,z)=>Tr(z),Cb:Or,readValueFromPointer:Mi,Db:null};function So(w){return Hn(w>>>0,Hi)}var Ki=(w,z)=>{switch(z){case 4:return function(B){return this.fromWireType(ve()[B>>>2>>>0])};case 8:return function(B){return this.fromWireType(ke()[B>>>3>>>0])};default:throw new TypeError(`invalid float width (${z}): ${w}`)}};function qi(w,z,B){B>>>=0,Hn(w>>>=0,{name:z=cn(z>>>0),fromWireType:q=>q,toWireType:(q,re)=>re,Cb:Or,readValueFromPointer:Ki(z,B),Db:null})}function ii(w,z,B,q,re){if(w>>>=0,B>>>=0,z=cn(z>>>0),re===-1&&(re=4294967295),re=ct=>ct,q===0){var be=32-8*B;re=ct=>ct<<be>>>be}var qe=z.includes("unsigned")?function(ct,wt){return wt>>>0}:function(ct,wt){return wt};Hn(w,{name:z,fromWireType:re,toWireType:qe,Cb:Or,readValueFromPointer:mr(z,B,q!==0),Db:null})}function $r(w,z,B){function q(be){var qe=ce()[be>>>2>>>0];return be=ce()[be+4>>>2>>>0],new re(ye().buffer,be,qe)}var re=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][z];Hn(w>>>=0,{name:B=cn(B>>>0),fromWireType:q,Cb:Or,readValueFromPointer:q},{Sb:!0})}function ci(w,z){Hn(w>>>=0,{name:z=cn(z>>>0),fromWireType:function(B){for(var q,re=ce()[B>>>2>>>0],be=B+4,qe=be,ct=0;ct<=re;++ct){var wt=be+ct;ct!=re&&G()[wt>>>0]!=0||(qe=Wn(qe,wt-qe),q===void 0?q=qe:(q+="\0",q+=qe),qe=wt+1)}return Qi(B),q},toWireType:function(B,q){q instanceof ArrayBuffer&&(q=new Uint8Array(q));var re=typeof q=="string";if(!(re||q instanceof Uint8Array||q instanceof Uint8ClampedArray||q instanceof Int8Array))throw new yt("Cannot pass non-string to std::string");var be=re?ei(q):q.length,qe=il(4+be+1),ct=qe+4;if(ce()[qe>>>2>>>0]=be,re)Xt(q,ct,be+1);else if(re)for(re=0;re<be;++re){var wt=q.charCodeAt(re);if(255<wt)throw Qi(qe),new yt("String has UTF-16 code units that do not fit in 8 bits");G()[ct+re>>>0]=wt}else for(re=0;re<be;++re)G()[ct+re>>>0]=q[re];return B!==null&&B.push(Qi,qe),qe},Cb:Or,readValueFromPointer:Mi,Db(B){Qi(B)}})}var lt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,dt=(w,z)=>{for(var B=w>>1,q=B+z/2;!(B>=q)&&V()[B>>>0];)++B;if(32<(B<<=1)-w&&lt)return lt.decode(G().slice(w,B));for(B="",q=0;!(q>=z/2);++q){var re=H()[w+2*q>>>1>>>0];if(re==0)break;B+=String.fromCharCode(re)}return B},Ct=(w,z,B)=>{if(B??=2147483647,2>B)return 0;var q=z;B=(B-=2)<2*w.length?B/2:w.length;for(var re=0;re<B;++re){var be=w.charCodeAt(re);H()[z>>>1>>>0]=be,z+=2}return H()[z>>>1>>>0]=0,z-q},An=w=>2*w.length,Eo=(w,z)=>{for(var B=0,q="";!(B>=z/4);){var re=U()[w+4*B>>>2>>>0];if(re==0)break;++B,65536<=re?(re-=65536,q+=String.fromCharCode(55296|re>>10,56320|1023&re)):q+=String.fromCharCode(re)}return q},Nr=(w,z,B)=>{if(z>>>=0,B??=2147483647,4>B)return 0;var q=z;B=q+B-4;for(var re=0;re<w.length;++re){var be=w.charCodeAt(re);if(55296<=be&&57343>=be&&(be=65536+((1023&be)<<10)|1023&w.charCodeAt(++re)),U()[z>>>2>>>0]=be,(z+=4)+4>B)break}return U()[z>>>2>>>0]=0,z-q},va=w=>{for(var z=0,B=0;B<w.length;++B){var q=w.charCodeAt(B);55296<=q&&57343>=q&&++B,z+=4}return z};function Zs(w,z,B){if(w>>>=0,z>>>=0,B=cn(B>>>=0),z===2)var q=dt,re=Ct,be=An,qe=ct=>V()[ct>>>1>>>0];else z===4&&(q=Eo,re=Nr,be=va,qe=ct=>ce()[ct>>>2>>>0]);Hn(w,{name:B,fromWireType:ct=>{for(var wt,At=ce()[ct>>>2>>>0],Yt=ct+4,yn=0;yn<=At;++yn){var $n=ct+4+yn*z;yn!=At&&qe($n)!=0||(Yt=q(Yt,$n-Yt),wt===void 0?wt=Yt:(wt+="\0",wt+=Yt),Yt=$n+z)}return Qi(ct),wt},toWireType:(ct,wt)=>{if(typeof wt!="string")throw new yt(`Cannot pass non-string to C++ string type ${B}`);var At=be(wt),Yt=il(4+At+z);return ce()[Yt>>>2>>>0]=At/z,re(wt,Yt+4,At+z),ct!==null&&ct.push(Qi,Yt),Yt},Cb:Or,readValueFromPointer:Mi,Db(ct){Qi(ct)}})}function Me(w,z){Hn(w>>>=0,{Tb:!0,name:z=cn(z>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function R(w){al(w>>>0,!l,1,!o,131072,!1),Mr()}var ie=w=>{if(!ae)try{if(w(),!(0<rt))try{c?ol(C):et(C)}catch(z){z instanceof We||z=="unwind"||v(0,z)}}catch(z){z instanceof We||z=="unwind"||v(0,z)}};function he(w){w>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(U(),w>>>2,w).value.then(me),w+=128,Atomics.store(U(),w>>>2,1))}var me=()=>{var w=rl();w&&(he(w),ie(sl))};function ze(w,z){(w>>>=0)==z>>>0?setTimeout(me):c?postMessage({Gb:w,Bb:"checkMailbox"}):(w=Qt[w])&&w.postMessage({Bb:"checkMailbox"})}var Ze=[];function xt(w,z,B,q,re){for(z>>>=0,q/=2,Ze.length=q,B=re>>>0>>>3,re=0;re<q;re++)Ze[re]=se[B+2*re]?se[B+2*re+1]:ke()[B+2*re+1>>>0];return(z?Ie[z]:xu[w])(...Ze)}var bt=()=>{rt=0};function Mt(w){w>>>=0,c?postMessage({Bb:"cleanupThread",hc:w}):kn(Qt[w])}function vt(w){}var en=(w,z)=>{var B=hr[w];if(B===void 0)throw w=ac(w),B=cn(w),Qi(w),new yt(`${z} has unknown type ${B}`);return B},Vt=(w,z,B)=>{var q=[];return w=w.toWireType(q,B),q.length&&(ce()[z>>>2>>>0]=Tr(q)),w};function tr(w,z,B){return z>>>=0,B>>>=0,w=or(w>>>0),z=en(z,"emval::as"),Vt(z,B,w)}function Pr(w,z){return z>>>=0,w=or(w>>>0),(z=en(z,"emval::as")).toWireType(null,w)}var In=w=>{try{w()}catch(z){Ge(z)}},jn=0,Ln=null,vi=0,Zi=[],Sr={},Jr={},Xn=0,sr=null,lr=[];function Ti(w){return(function(z){if(!ae){if(jn===0){var B=!1,q=!1;z((re=0)=>{if(!ae&&(vi=re,B=!0,q)){jn=2,In(()=>lc(Ln)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),re=!1;try{var be=(function(){var wt=U()[Ln+8>>>2>>>0];return wt=Ot[Jr[wt]],--rt,wt()})()}catch(wt){be=wt,re=!0}var qe=!1;if(!Ln){var ct=sr;ct&&(sr=null,(re?ct.reject:ct.resolve)(be),qe=!0)}if(re&&!qe)throw be}}),q=!0,B||(jn=1,Ln=(function(){var re=il(65548),be=re+12;ce()[re>>>2>>>0]=be,ce()[re+4>>>2>>>0]=be+65536,be=Zi[0];var qe=Sr[be];return qe===void 0&&(qe=Xn++,Sr[be]=qe,Jr[qe]=be),be=qe,U()[re+8>>>2>>>0]=be,re})(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),In(()=>Qa(Ln)))}else jn===2?(jn=0,In(oa),Qi(Ln),Ln=null,lr.forEach(ie)):Ge(`invalid state: ${jn}`);return vi}})(z=>{w().then(z)})}function Ii(w){return w>>>=0,Ti(async()=>{var z=await or(w);return Tr(z)})}var Dr=[];function Si(w,z,B,q){return B>>>=0,q>>>=0,(w=Dr[w>>>0])(null,z=or(z>>>0),B,q)}var Er={},nr=w=>{var z=Er[w];return z===void 0?cn(w):z};function Sn(w,z,B,q,re){return B>>>=0,q>>>=0,re>>>=0,(w=Dr[w>>>0])(z=or(z>>>0),z[B=nr(B)],q,re)}var Bn=()=>typeof globalThis=="object"?globalThis:Function("return this")();function ai(w){return(w>>>=0)==0?Tr(Bn()):(w=nr(w),Tr(Bn()[w]))}var aa=w=>{var z=Dr.length;return Dr.push(w),z},qa=(w,z)=>{for(var B=Array(w),q=0;q<w;++q)B[q]=en(ce()[z+4*q>>>2>>>0],"parameter "+q);return B},Qs=(w,z)=>Object.defineProperty(z,"name",{value:w});function Hl(w,z,B){var q=(z=qa(w,z>>>0)).shift();w--;var re=`return function (obj, func, destructorsRef, args) {
`,be=0,qe=[];B===0&&qe.push("obj");for(var ct=["retType"],wt=[q],At=0;At<w;++At)qe.push("arg"+At),ct.push("argType"+At),wt.push(z[At]),re+=`  var arg${At} = argType${At}.readValueFromPointer(args${be?"+"+be:""});
`,be+=z[At].Cb;return re+=`  var rv = ${B===1?"new func":"func.call"}(${qe.join(", ")});
`,q.Tb||(ct.push("emval_returnValue"),wt.push(Vt),re+=`  return emval_returnValue(retType, destructorsRef, rv);
`),ct.push(re+`};
`),w=(function(Yt){var yn=Function;if(!(yn instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof yn} which is not a function`);var $n=Qs(yn.name||"unknownFunctionName",function(){});return $n.prototype=yn.prototype,$n=new $n,(Yt=yn.apply($n,Yt))instanceof Object?Yt:$n})(ct)(...wt),B=`methodCaller<(${z.map(Yt=>Yt.name).join(", ")}) => ${q.name}>`,aa(Qs(B,w))}function os(w){return w=nr(w>>>0),Tr(i[w])}function Xs(w,z){return z>>>=0,w=or(w>>>0),z=or(z),Tr(w[z])}function hu(w){9<(w>>>=0)&&(ni[w+1]+=1)}function ss(){return Tr([])}function Kd(w){w=or(w>>>0);for(var z=Array(w.length),B=0;B<w.length;B++)z[B]=w[B];return Tr(z)}function qd(w){return Tr(nr(w>>>0))}function Kl(){return Tr({})}function Zd(w){for(var z=or(w>>>=0);z.length;){var B=z.pop();z.pop()(B)}ri(w)}function Qd(w,z,B){z>>>=0,B>>>=0,w=or(w>>>0),z=or(z),B=or(B),w[z]=B}function ls(w,z){return z>>>=0,w=(w=en(w>>>0,"_emval_take_value")).readValueFromPointer(z),Tr(w)}function Xd(w,z){w=-9007199254740992>w||9007199254740992<w?NaN:Number(w),z>>>=0,w=new Date(1e3*w),U()[z>>>2>>>0]=w.getUTCSeconds(),U()[z+4>>>2>>>0]=w.getUTCMinutes(),U()[z+8>>>2>>>0]=w.getUTCHours(),U()[z+12>>>2>>>0]=w.getUTCDate(),U()[z+16>>>2>>>0]=w.getUTCMonth(),U()[z+20>>>2>>>0]=w.getUTCFullYear()-1900,U()[z+24>>>2>>>0]=w.getUTCDay(),w=(w.getTime()-Date.UTC(w.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,U()[z+28>>>2>>>0]=w}var mu=w=>w%4==0&&(w%100!=0||w%400==0),ql=[0,31,60,91,121,152,182,213,244,274,305,335],pu=[0,31,59,90,120,151,181,212,243,273,304,334];function Yd(w,z){w=-9007199254740992>w||9007199254740992<w?NaN:Number(w),z>>>=0,w=new Date(1e3*w),U()[z>>>2>>>0]=w.getSeconds(),U()[z+4>>>2>>>0]=w.getMinutes(),U()[z+8>>>2>>>0]=w.getHours(),U()[z+12>>>2>>>0]=w.getDate(),U()[z+16>>>2>>>0]=w.getMonth(),U()[z+20>>>2>>>0]=w.getFullYear()-1900,U()[z+24>>>2>>>0]=w.getDay();var B=(mu(w.getFullYear())?ql:pu)[w.getMonth()]+w.getDate()-1|0;U()[z+28>>>2>>>0]=B,U()[z+36>>>2>>>0]=-60*w.getTimezoneOffset(),B=new Date(w.getFullYear(),6,1).getTimezoneOffset();var q=new Date(w.getFullYear(),0,1).getTimezoneOffset();w=0|(B!=q&&w.getTimezoneOffset()==Math.min(q,B)),U()[z+32>>>2>>>0]=w}function gu(w){w>>>=0;var z=new Date(U()[w+20>>>2>>>0]+1900,U()[w+16>>>2>>>0],U()[w+12>>>2>>>0],U()[w+8>>>2>>>0],U()[w+4>>>2>>>0],U()[w>>>2>>>0],0),B=U()[w+32>>>2>>>0],q=z.getTimezoneOffset(),re=new Date(z.getFullYear(),6,1).getTimezoneOffset(),be=new Date(z.getFullYear(),0,1).getTimezoneOffset(),qe=Math.min(be,re);return 0>B?U()[w+32>>>2>>>0]=+(re!=be&&qe==q):0<B!=(qe==q)&&(re=Math.max(be,re),z.setTime(z.getTime()+6e4*((0<B?qe:re)-q))),U()[w+24>>>2>>>0]=z.getDay(),B=(mu(z.getFullYear())?ql:pu)[z.getMonth()]+z.getDate()-1|0,U()[w+28>>>2>>>0]=B,U()[w>>>2>>>0]=z.getSeconds(),U()[w+4>>>2>>>0]=z.getMinutes(),U()[w+8>>>2>>>0]=z.getHours(),U()[w+12>>>2>>>0]=z.getDate(),U()[w+16>>>2>>>0]=z.getMonth(),U()[w+20>>>2>>>0]=z.getYear(),w=z.getTime(),BigInt(isNaN(w)?-1:w/1e3)}function _u(w,z,B,q,re,be,qe){return c?St(16,1,w,z,B,q,re,be,qe):-52}function Ys(w,z,B,q,re,be){if(c)return St(17,1,w,z,B,q,re,be)}var $o={},Jd=()=>performance.timeOrigin+performance.now();function Zl(w,z){if(c)return St(18,1,w,z);if($o[w]&&(clearTimeout($o[w].id),delete $o[w]),!z)return 0;var B=setTimeout(()=>{delete $o[w],ie(()=>oc(w,performance.timeOrigin+performance.now()))},z);return $o[w]={id:B,qc:z},0}function vu(w,z,B,q){w>>>=0,z>>>=0,B>>>=0,q>>>=0;var re=new Date().getFullYear(),be=new Date(re,0,1).getTimezoneOffset();re=new Date(re,6,1).getTimezoneOffset();var qe=Math.max(be,re);ce()[w>>>2>>>0]=60*qe,U()[z>>>2>>>0]=+(be!=re),w=(z=ct=>{var wt=Math.abs(ct);return`UTC${0<=ct?"-":"+"}${String(Math.floor(wt/60)).padStart(2,"0")}${String(wt%60).padStart(2,"0")}`})(be),z=z(re),re<be?(Xt(w,B,17),Xt(z,q,17)):(Xt(w,q,17),Xt(z,B,17))}var yu=()=>Date.now();function am(w,z,B){return 0<=w&&3>=w?(w===0?w=Date.now():w=performance.timeOrigin+performance.now(),se[B>>>0>>>3]=BigInt(Math.round(1e6*w)),0):28}var Ql=[],Xl=(w,z)=>{Ql.length=0;for(var B;B=G()[w++>>>0];){var q=B!=105;z+=(q&=B!=112)&&z%8?4:0,Ql.push(B==112?ce()[z>>>2>>>0]:B==106?se[z>>>3]:B==105?U()[z>>>2>>>0]:ke()[z>>>3>>>0]),z+=q?8:4}return Ql};function bu(w,z,B){return w>>>=0,z=Xl(z>>>0,B>>>0),Ie[w](...z)}function Yl(w,z,B){return w>>>=0,z=Xl(z>>>0,B>>>0),Ie[w](...z)}var ef=()=>{};function tf(w,z){return A(Wn(w>>>0,z>>>0))}var nf=()=>{throw rt+=1,"unwind"};function Jl(){return 4294901760}var cs=()=>navigator.hardwareConcurrency;function rf(){return Ge("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function ec(w){w>>>=0;var z=G().length;if(w<=z||4294901760<w)return!1;for(var B=1;4>=B;B*=2){var q=z*(1+.2/B);q=Math.min(q,w+100663296);e:{q=(Math.min(4294901760,65536*Math.ceil(Math.max(w,q)/65536))-$.buffer.byteLength+65535)/65536|0;try{$.grow(q),Be();var re=1;break e}catch{}re=void 0}if(re)return!0}return!1}var us=()=>(Ge("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),Po={},Js=w=>{w.forEach(z=>{us()})};function wu(){var w=Error().stack.toString().split(`
`);return w[0]=="Error"&&w.shift(),Js(w),Po.Lb=us(),Po.cc=w,Po.Lb}function ya(w,z,B){if(w>>>=0,z>>>=0,Po.Lb==w)var q=Po.cc;else(q=Error().stack.toString().split(`
`))[0]=="Error"&&q.shift(),Js(q);for(var re=3;q[re]&&us()!=w;)++re;for(w=0;w<B&&q[w+re];++w)U()[z+4*w>>>2>>>0]=us();return w}var el,tc={},nc=()=>{if(!el){var w,z={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(w in tc)tc[w]===void 0?delete z[w]:z[w]=tc[w];var B=[];for(w in z)B.push(`${w}=${z[w]}`);el=B}return el};function ba(w,z){if(c)return St(19,1,w,z);w>>>=0,z>>>=0;var B=0;return nc().forEach((q,re)=>{var be=z+B;for(re=ce()[w+4*re>>>2>>>0]=be,be=0;be<q.length;++be)ye()[re++>>>0]=q.charCodeAt(be);ye()[re>>>0]=0,B+=q.length+1}),0}function rc(w,z){if(c)return St(20,1,w,z);w>>>=0,z>>>=0;var B=nc();ce()[w>>>2>>>0]=B.length;var q=0;return B.forEach(re=>q+=re.length+1),ce()[z>>>2>>>0]=q,0}function ds(w){return c?St(21,1,w):52}function Co(w,z,B,q){return c?St(22,1,w,z,B,q):52}function af(w,z,B,q){return c?St(23,1,w,z,B,q):70}var tl=[null,[],[]];function nl(w,z,B,q){if(c)return St(24,1,w,z,B,q);z>>>=0,B>>>=0,q>>>=0;for(var re=0,be=0;be<B;be++){var qe=ce()[z>>>2>>>0],ct=ce()[z+4>>>2>>>0];z+=8;for(var wt=0;wt<ct;wt++){var At=G()[qe+wt>>>0],Yt=tl[w];At===0||At===10?((w===1?E:A)(Bt(Yt)),Yt.length=0):Yt.push(At)}re+=ct}return ce()[q>>>2>>>0]=re,0}c||(function(){for(var w=i.numThreads-1;w--;)_i();Fe.unshift(()=>{Se++,(function(z){c?z():Promise.all(kt.map(an)).then(z)})(()=>Ve())})})();for(var ic=Array(256),ko=0;256>ko;++ko)ic[ko]=String.fromCharCode(ko);Gt=ic,yt=i.BindingError=class extends Error{constructor(w){super(w),this.name="BindingError"}},i.InternalError=class extends Error{constructor(w){super(w),this.name="InternalError"}},ni.push(0,1,void 0,1,null,1,!0,1,!1,1),i.count_emval_handles=()=>ni.length/2-5-ti.length;var Ot,xu=[Tt,ut,Ir,ga,ia,_a,L,de,J,le,fe,xe,je,mt,Et,_t,_u,Ys,Zl,ba,rc,ds,Co,af,nl];(async function(){function w(q,re){return Ot=q.exports,Ot=(function(){var be=Ot,qe={};for(let[ct,wt]of Object.entries(be))qe[ct]=typeof wt=="function"?(...At)=>{Zi.push(ct);try{return wt(...At)}finally{ae||(Zi.pop(),Ln&&jn===1&&Zi.length===0&&(jn=0,rt+=1,In(ul),typeof Fibers<"u"&&Fibers.rc()))}}:wt;return qe})(),Ot=(function(){var be=Ot,qe=wt=>At=>wt(At)>>>0,ct=wt=>()=>wt()>>>0;return(be=Object.assign({},be)).Da=qe(be.Da),be.fb=ct(be.fb),be.hb=qe(be.hb),be.tb=qe(be.tb),be.ub=ct(be.ub),be.__cxa_get_exception_ptr=qe(be.__cxa_get_exception_ptr),be})(),Cn.push(Ot.ib),P=re,Ve(),Ot}Se++;var z=Ke();if(i.instantiateWasm)return new Promise(q=>{i.instantiateWasm(z,(re,be)=>{w(re,be),q(re.exports)})});if(c)return new Promise(q=>{Le=re=>{var be=new WebAssembly.Instance(re,Ke());q(w(be,re))}});Z??=i.locateFile?i.locateFile?i.locateFile("ort-wasm-simd-threaded.jsep.wasm",b):b+"ort-wasm-simd-threaded.jsep.wasm":new URL(""+new URL("ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href,import.meta.url).href;try{var B=await(async function(q){var re=Z;if(!ne&&typeof WebAssembly.instantiateStreaming=="function"&&!ge(re))try{var be=fetch(re,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(be,q)}catch(qe){A(`wasm streaming compile failed: ${qe}`),A("falling back to ArrayBuffer instantiation")}return(async function(qe,ct){try{var wt=await(async function(At){if(!ne)try{var Yt=await h(At);return new Uint8Array(Yt)}catch{}if(At==Z&&ne)At=new Uint8Array(ne);else{if(!m)throw"both async and sync fetching of the wasm failed";At=m(At)}return At})(qe);return await WebAssembly.instantiate(wt,ct)}catch(At){A(`failed to asynchronously prepare wasm: ${At}`),Ge(At)}})(re,q)})(z);return w(B.instance,B.module)}catch(q){return n(q),Promise.reject(q)}})();var ac=w=>(ac=Ot.Da)(w),fs=()=>(fs=Ot.Ea)();i._OrtInit=(w,z)=>(i._OrtInit=Ot.Fa)(w,z),i._OrtGetLastError=(w,z)=>(i._OrtGetLastError=Ot.Ga)(w,z),i._OrtCreateSessionOptions=(w,z,B,q,re,be,qe,ct,wt,At)=>(i._OrtCreateSessionOptions=Ot.Ha)(w,z,B,q,re,be,qe,ct,wt,At),i._OrtAppendExecutionProvider=(w,z,B,q,re)=>(i._OrtAppendExecutionProvider=Ot.Ia)(w,z,B,q,re),i._OrtAddFreeDimensionOverride=(w,z,B)=>(i._OrtAddFreeDimensionOverride=Ot.Ja)(w,z,B),i._OrtAddSessionConfigEntry=(w,z,B)=>(i._OrtAddSessionConfigEntry=Ot.Ka)(w,z,B),i._OrtReleaseSessionOptions=w=>(i._OrtReleaseSessionOptions=Ot.La)(w),i._OrtCreateSession=(w,z,B)=>(i._OrtCreateSession=Ot.Ma)(w,z,B),i._OrtReleaseSession=w=>(i._OrtReleaseSession=Ot.Na)(w),i._OrtGetInputOutputCount=(w,z,B)=>(i._OrtGetInputOutputCount=Ot.Oa)(w,z,B),i._OrtGetInputOutputMetadata=(w,z,B,q)=>(i._OrtGetInputOutputMetadata=Ot.Pa)(w,z,B,q),i._OrtFree=w=>(i._OrtFree=Ot.Qa)(w),i._OrtCreateTensor=(w,z,B,q,re,be)=>(i._OrtCreateTensor=Ot.Ra)(w,z,B,q,re,be),i._OrtGetTensorData=(w,z,B,q,re)=>(i._OrtGetTensorData=Ot.Sa)(w,z,B,q,re),i._OrtReleaseTensor=w=>(i._OrtReleaseTensor=Ot.Ta)(w),i._OrtCreateRunOptions=(w,z,B,q)=>(i._OrtCreateRunOptions=Ot.Ua)(w,z,B,q),i._OrtAddRunConfigEntry=(w,z,B)=>(i._OrtAddRunConfigEntry=Ot.Va)(w,z,B),i._OrtReleaseRunOptions=w=>(i._OrtReleaseRunOptions=Ot.Wa)(w),i._OrtCreateBinding=w=>(i._OrtCreateBinding=Ot.Xa)(w),i._OrtBindInput=(w,z,B)=>(i._OrtBindInput=Ot.Ya)(w,z,B),i._OrtBindOutput=(w,z,B,q)=>(i._OrtBindOutput=Ot.Za)(w,z,B,q),i._OrtClearBoundOutputs=w=>(i._OrtClearBoundOutputs=Ot._a)(w),i._OrtReleaseBinding=w=>(i._OrtReleaseBinding=Ot.$a)(w),i._OrtRunWithBinding=(w,z,B,q,re)=>(i._OrtRunWithBinding=Ot.ab)(w,z,B,q,re),i._OrtRun=(w,z,B,q,re,be,qe,ct)=>(i._OrtRun=Ot.bb)(w,z,B,q,re,be,qe,ct),i._OrtEndProfiling=w=>(i._OrtEndProfiling=Ot.cb)(w),i._JsepOutput=(w,z,B)=>(i._JsepOutput=Ot.db)(w,z,B),i._JsepGetNodeName=w=>(i._JsepGetNodeName=Ot.eb)(w);var rl=()=>(rl=Ot.fb)(),Qi=i._free=w=>(Qi=i._free=Ot.gb)(w),il=i._malloc=w=>(il=i._malloc=Ot.hb)(w),al=(w,z,B,q,re,be)=>(al=Ot.kb)(w,z,B,q,re,be),Mu=()=>(Mu=Ot.lb)(),ui=(w,z,B,q,re)=>(ui=Ot.mb)(w,z,B,q,re),Za=w=>(Za=Ot.nb)(w),ol=w=>(ol=Ot.ob)(w),oc=(w,z)=>(oc=Ot.pb)(w,z),sl=()=>(sl=Ot.qb)(),sc=(w,z)=>(sc=Ot.rb)(w,z),Ao=w=>(Ao=Ot.sb)(w),ll=w=>(ll=Ot.tb)(w),wa=()=>(wa=Ot.ub)(),cl=i.dynCall_ii=(w,z)=>(cl=i.dynCall_ii=Ot.vb)(w,z),Qa=w=>(Qa=Ot.wb)(w),ul=()=>(ul=Ot.xb)(),lc=w=>(lc=Ot.yb)(w),oa=()=>(oa=Ot.zb)();return i.stackSave=()=>wa(),i.stackRestore=w=>Ao(w),i.stackAlloc=w=>ll(w),i.setValue=function(w,z,B="i8"){switch(B.endsWith("*")&&(B="*"),B){case"i1":case"i8":ye()[w>>>0]=z;break;case"i16":H()[w>>>1>>>0]=z;break;case"i32":U()[w>>>2>>>0]=z;break;case"i64":se[w>>>3]=BigInt(z);break;case"float":ve()[w>>>2>>>0]=z;break;case"double":ke()[w>>>3>>>0]=z;break;case"*":ce()[w>>>2>>>0]=z;break;default:Ge(`invalid type for setValue: ${B}`)}},i.getValue=function(w,z="i8"){switch(z.endsWith("*")&&(z="*"),z){case"i1":case"i8":return ye()[w>>>0];case"i16":return H()[w>>>1>>>0];case"i32":return U()[w>>>2>>>0];case"i64":return se[w>>>3];case"float":return ve()[w>>>2>>>0];case"double":return ke()[w>>>3>>>0];case"*":return ce()[w>>>2>>>0];default:Ge(`invalid type for getValue: ${z}`)}},i.UTF8ToString=Wn,i.stringToUTF8=Xt,i.lengthBytesUTF8=ei,(function w(){if(0<Se)Re=w;else if(c)t(i),ue();else{for(;0<Fe.length;)Fe.shift()(i);0<Se?Re=w:(i.calledRun=!0,ae||(ue(),t(i)))}})(),i.PTR_SIZE=4,r}),xI=gw,HE=globalThis.self?.name?.startsWith("em-pthread"),HE&&gw()}),_w,zx,KE,za,MI,Gv,qE,ZE,vw,QE,yw,TI,bw,SI,ZM=ht(()=>{qM(),_w=typeof location>"u"?void 0:location.origin,zx=import.meta.url>"file:"&&import.meta.url<"file;",KE=()=>{{if(zx){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,_w).href}return import.meta.url}},za=KE(),MI=()=>{if(za&&!za.startsWith("blob:"))return za.substring(0,za.lastIndexOf("/")+1)},Gv=(e,t)=>{try{let n=t??za;return(n?new URL(e,n):new URL(e)).origin===_w}catch{return!1}},qE=(e,t)=>{let n=t??za;try{return(n?new URL(e,n):new URL(e)).href}catch{return}},ZE=(e,t)=>`${t??"./"}${e}`,vw=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},QE=async e=>(await import(e)).default,yw=(SW(),s_(yI)).default,TI=async()=>{if(!za)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(Gv(za))return[void 0,yw()];let e=await vw(za);return[e,yw(e)]},bw=(EW(),s_(wI)).default,SI=async(e,t,n)=>{if(!e&&!t&&bw&&za&&Gv(za))return[void 0,bw];{let i="ort-wasm-simd-threaded.jsep.mjs",r=e??qE(i,t),o=n&&r&&!Gv(r,t),l=o?await vw(r):r??ZE(i,t);return[o?l:void 0,await QE(l)]}}}),ww,Wv,kg,xw,XE,YE,JE,QM,dr,Vd=ht(()=>{ZM(),Wv=!1,kg=!1,xw=!1,XE=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},YE=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},JE=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},QM=async e=>{if(Wv)return Promise.resolve();if(kg)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(xw)throw new Error("previous call to 'initializeWebAssembly()' failed.");kg=!0;let t=e.initTimeout,n=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!JE())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!YE())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let i=XE();n>1&&!i&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+n+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=n=1);let r=e.wasmPaths,o=typeof r=="string"?r:void 0,l=r?.mjs,c=l?.href??l,d=r?.wasm,f=d?.href??d,p=e.wasmBinary,[h,m]=await SI(c,o,n>1),_=!1,v=[];if(t>0&&v.push(new Promise(b=>{setTimeout(()=>{_=!0,b()},t)})),v.push(new Promise((b,D)=>{let T={numThreads:n};if(p)T.wasmBinary=p;else if(f||o)T.locateFile=E=>f??o+E;else if(c&&c.indexOf("blob:")!==0)T.locateFile=E=>new URL(E,c).href;else if(h){let E=MI();E&&(T.locateFile=A=>E+A)}m(T).then(E=>{kg=!1,Wv=!0,ww=E,b(),h&&URL.revokeObjectURL(h)},E=>{kg=!1,xw=!0,D(E)})})),await Promise.race(v),_)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},dr=()=>{if(Wv&&ww)return ww;throw new Error("WebAssembly is not initialized yet.")}}),Zo,Ny,Qn,XM=ht(()=>{Vd(),Zo=(e,t)=>{let n=dr(),i=n.lengthBytesUTF8(e)+1,r=n._malloc(i);return n.stringToUTF8(e,r,i),t.push(r),r},Ny=(e,t,n,i)=>{if(typeof e=="object"&&e!==null){if(n.has(e))throw new Error("Circular reference in options");n.add(e)}Object.entries(e).forEach(([r,o])=>{let l=t?t+r:r;if(typeof o=="object")Ny(o,l+".",n,i);else if(typeof o=="string"||typeof o=="number")i(l,o.toString());else if(typeof o=="boolean")i(l,o?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof o}`)})},Qn=e=>{let t=dr(),n=t.stackSave();try{let i=t.PTR_SIZE,r=t.stackAlloc(2*i);t._OrtGetLastError(r,r+i);let o=Number(t.getValue(r,i===4?"i32":"i64")),l=t.getValue(r+i,"*"),c=l?t.UTF8ToString(l):"";throw new Error(`${e} ERROR_CODE: ${o}, ERROR_MESSAGE: ${c}`)}finally{t.stackRestore(n)}}}),EI,$W=ht(()=>{Vd(),XM(),EI=e=>{let t=dr(),n=0,i=[],r=e||{};try{if(e?.logSeverityLevel===void 0)r.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)r.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(r.terminate=!1);let o=0;return e?.tag!==void 0&&(o=Zo(e.tag,i)),n=t._OrtCreateRunOptions(r.logSeverityLevel,r.logVerbosityLevel,!!r.terminate,o),n===0&&Qn("Can't create run options."),e?.extra!==void 0&&Ny(e.extra,"",new WeakSet,(l,c)=>{let d=Zo(l,i),f=Zo(c,i);t._OrtAddRunConfigEntry(n,d,f)!==0&&Qn(`Can't set a run config entry: ${l} - ${c}.`)}),[n,i]}catch(o){throw n!==0&&t._OrtReleaseRunOptions(n),i.forEach(l=>t._free(l)),o}}}),e$,t$,n$,Ag,r$,$I,PW=ht(()=>{Vd(),XM(),e$=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},t$=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},n$=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(e.enableMemPattern=!1)},Ag=(e,t,n,i)=>{let r=Zo(t,i),o=Zo(n,i);dr()._OrtAddSessionConfigEntry(e,r,o)!==0&&Qn(`Can't set a session config entry: ${t} - ${n}.`)},r$=async(e,t,n)=>{for(let i of t){let r=typeof i=="string"?i:i.name,o=[];switch(r){case"webnn":if(r="WEBNN",typeof i!="string"){let p=i?.deviceType;p&&Ag(e,"deviceType",p,n)}break;case"webgpu":if(r="JS",typeof i!="string"){let p=i;if(p?.preferredLayout){if(p.preferredLayout!=="NCHW"&&p.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${p.preferredLayout}`);Ag(e,"preferredLayout",p.preferredLayout,n)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${r}`)}let l=Zo(r,n),c=o.length,d=0,f=0;if(c>0){d=dr()._malloc(c*dr().PTR_SIZE),n.push(d),f=dr()._malloc(c*dr().PTR_SIZE),n.push(f);for(let p=0;p<c;p++)dr().setValue(d+p*dr().PTR_SIZE,o[p][0],"*"),dr().setValue(f+p*dr().PTR_SIZE,o[p][1],"*")}await dr()._OrtAppendExecutionProvider(e,l,d,f,c)!==0&&Qn(`Can't append execution provider: ${r}.`)}},$I=async e=>{let t=dr(),n=0,i=[],r=e||{};n$(r);try{let o=e$(r.graphOptimizationLevel??"all"),l=t$(r.executionMode??"sequential"),c=typeof r.logId=="string"?Zo(r.logId,i):0,d=r.logSeverityLevel??2;if(!Number.isInteger(d)||d<0||d>4)throw new Error(`log serverity level is not valid: ${d}`);let f=r.logVerbosityLevel??0;if(!Number.isInteger(f)||f<0||f>4)throw new Error(`log verbosity level is not valid: ${f}`);let p=typeof r.optimizedModelFilePath=="string"?Zo(r.optimizedModelFilePath,i):0;if(n=t._OrtCreateSessionOptions(o,!!r.enableCpuMemArena,!!r.enableMemPattern,l,!!r.enableProfiling,0,c,d,f,p),n===0&&Qn("Can't create session options."),r.executionProviders&&await r$(n,r.executionProviders,i),r.enableGraphCapture!==void 0){if(typeof r.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${r.enableGraphCapture}`);Ag(n,"enableGraphCapture",r.enableGraphCapture.toString(),i)}if(r.freeDimensionOverrides)for(let[h,m]of Object.entries(r.freeDimensionOverrides)){if(typeof h!="string")throw new Error(`free dimension override name must be a string: ${h}`);if(typeof m!="number"||!Number.isInteger(m)||m<0)throw new Error(`free dimension override value must be a non-negative integer: ${m}`);let _=Zo(h,i);t._OrtAddFreeDimensionOverride(n,_,m)!==0&&Qn(`Can't set a free dimension override: ${h} - ${m}.`)}return r.extra!==void 0&&Ny(r.extra,"",new WeakSet,(h,m)=>{Ag(n,h,m,i)}),[n,i]}catch(o){throw n!==0&&t._OrtReleaseSessionOptions(n)!==0&&Qn("Can't release session options."),i.forEach(l=>t._free(l)),o}}}),Ih,Rl,Td,YM,jy,JM,e1,Lx,Zt=ht(()=>{Ih=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},Rl=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},Td=(e,t)=>{let n=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],i=typeof t=="number"?t:t.reduce((r,o)=>r*o,1);return n>0?Math.ceil(i*n):void 0},YM=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},jy=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},JM=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",e1=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",Lx=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),t1,PI=ht(()=>{qM(),t1=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let n=t.headers.get("Content-Length"),i=n?parseInt(n,10):0;if(i<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let r=t.body.getReader(),o;try{o=new ArrayBuffer(i)}catch(c){if(c instanceof RangeError){let d=Math.ceil(i/65536);o=new WebAssembly.Memory({initial:d,maximum:d}).buffer}else throw c}let l=0;for(;;){let{done:c,value:d}=await r.read();if(c)break;let f=d.byteLength;new Uint8Array(o,l,f).set(d),l+=f}return new Uint8Array(o,0,i)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),i$,a$,o$,s$,n1,l$,En,Gl=ht(()=>{Zt(),i$=["V","I","W","E","F"],a$=(e,t)=>{console.log(`[${i$[e]},${new Date().toISOString()}]${t}`)},n1=(e,t)=>{o$=e,s$=t},l$=(e,t)=>{let n=jy(e),i=jy(o$);n>=i&&a$(n,typeof t=="function"?t():t)},En=(...e)=>{s$&&l$(...e)}}),c$,Gh,Ue,By,CI,kI,AI,sn=ht(()=>{c$=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Gh=class{static calcShape(e,t,n=!1){let i=e.length,r=t.length;if(i===0)return t;if(r===0)return e;let o=Math.max(e.length,t.length),l=new Array(o);if(n){if(i<2||r<2)return;let c=c$.calcMatMulShape([e[i-2],e[i-1]],[t[r-2],t[r-1]]);if(c===void 0)return;[l[o-2],l[o-1]]=c}for(let c=n?3:1;c<=o;c++){let d=i-c<0?1:e[i-c],f=r-c<0?1:t[r-c];if(d!==f&&d>1&&f>1)return;let p=Math.max(d,f);if(d&&f)l[o-c]=Math.max(d,f);else{if(p>1)return;l[o-c]=0}}return l}static isValidBroadcast(e,t){let n=e.length,i=t.length;if(n>i)return!1;for(let r=1;r<=n;r++)if(e[n-r]!==1&&e[n-r]!==t[i-r])return!1;return!0}},Ue=class gy{static size(t){return gy.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,n=4){let i=t.length;if(i===0)return[];let r=new Array(i),o=i-1;for(;o>=0;){if(t[o]%n===0){r[o]=t[o]/n;break}if(n%t[o]!==0)throw new Error("cannot convert shape");r[o]=1,n/=t[o],o--}for(o--;o>=0;o--)r[o]=t[o];return r}static sizeFromDimension(t,n){if(n<0||n>t.length)throw new Error(`invalid dimension of ${n} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return gy.getSizeFromDimensionRange(t,n,t.length)}static sizeToDimension(t,n){if(n<0||n>t.length)throw new Error(`invalid dimension of ${n} for sizeToDimension as Tensor has ${t.length} dimensions.`);return gy.getSizeFromDimensionRange(t,0,n)}static getSizeFromDimensionRange(t,n,i){let r=1;for(let o=n;o<i;o++){if(t[o]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");r*=Number(t[o])}return r}static computeStrides(t){let n=t.length;if(n===0)return[];if(n===1)return[1];let i=new Array(n);i[n-1]=1,i[n-2]=t[n-1];for(let r=n-3;r>=0;--r)i[r]=i[r+1]*t[r+1];return i}static normalizeAxis(t,n){if(t<-n&&t>=n)throw new Error("unsupported axis for this operation.");return t<0?t+n:t}static normalizeAxes(t,n){return t.map(i=>this.normalizeAxis(i,n??t.length))}static sortBasedOnPerm(t,n){return n?n.map(i=>t[i]):t.slice().reverse()}static padShape(t,n){let i=t.length;return t.map((r,o)=>r+n[o]+n[o+i])}static areEqual(t,n){return t.length!==n.length?!1:t.every((i,r)=>i===n[r])}},By=class Vg{static adjustPoolAttributes(t,n,i,r,o,l){if(!t&&i.length!==n.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let c=0;c<n.length-2;c++)c>=i.length?i.push(n[c+2]):i[c]=n[c+2];for(let c=0;c<i.length;c++)if(c<r.length){if(r[c]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(let c=0;c<i.length;c++)if(c<o.length){if(o[c]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(let c=0;c<i.length*2;c++)if(c<l.length){if(l[c]<0)throw new Error("pad should be greater than or equal to 1")}else l.push(0);for(let c=0;c<i.length;c++){if(i[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(l[c]>=i[c]||l[c+i.length]>=i[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,n,i,r,o,l,c){if(c){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let d=0;d<t.length-2;d++)Vg.adjustPadAndReturnShape(t[d+(l?1:2)],n[d],i[d],r[d],o,d,d+t.length-2,c)}}static computePoolOutputShape(t,n,i,r,o,l,c){if(n.length<=0)throw new Error("input shape must be of size greater than 0");let d=[n[0],n[1]];return Vg.computeShapeHelper(t,n,d,i,r,o,l,c),d}static computeConvOutputShape(t,n,i,r,o,l,c){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let d=[t[0],n[0]];return Vg.computeShapeHelper(!1,t,d,i,r,o,l,c),d}static computeShapeHelper(t,n,i,r,o,l,c,d){if(t)for(let f=0;f<n.length-2;f++)i.push(1);else for(let f=0;f<n.length-2;f++)i.push(Vg.adjustPadAndReturnShape(n[f+2],r[f],o[f],l[f],c,f,f+n.length-2,d))}static adjustPadAndReturnShape(t,n,i,r,o,l,c,d){let f=i*(r-1)+1;if(d&&d!=="NOTSET")switch(d){case"VALID":return o[l]=0,o[c]=0,Math.floor((t-f)/n+1);case"SAME_LOWER":case"SAME_UPPER":if(i!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let p=((t+n-1)/n-1)*n+r-t;return o[l]=Math.floor(d==="SAME_LOWER"?(p+1)/2:p/2),o[c]=p-o[l],Math.floor((t+p-r)/n+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+o[l]+o[c]-f)/n+1)}},CI=class{static getShapeOfGemmResult(e,t,n,i,r){if(e.length!==2||n.length!==2)throw new Error("shape need to be of size 2");let o,l,c;t?(o=e[1],l=e[0]):(o=e[0],l=e[1]);let d=-1;if(i?(c=n[0],d=1):(c=n[1],d=0),n[d]!==l)throw new Error("dimension mismatch");if(o<=0||c<=0||l<=0)throw new Error("invalid shape specified");if(r&&!Gh.isValidBroadcast(r,[o,c]))throw new Error("gemm: invalid bias shape for broadcast");return[o,c,l]}},kI=-34028234663852886e22,AI=34028234663852886e22}),r1,II=ht(()=>{Zt(),r1=(e,t)=>new(YM(t))(e)}),Rx,Mw,u$,Tw,d$,Sw,Ew,$w,f$,OI,CW=ht(()=>{Gl(),Rx=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let n=e.byteLength/8,i=new BigInt64Array(e.buffer,e.byteOffset,n),r=new Int32Array(n);for(let o=0;o<n;o++){let l=i[o];if(l>2147483647n||l<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${o}: ${l}`);r[o]=Number(l)}return t?new Uint8Array(r.buffer):r},Mw=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let n=e.byteLength/4,i=new Int32Array(e.buffer,e.byteOffset,n),r=BigInt64Array.from(i,BigInt);return t?new Uint8Array(r.buffer):r},u$=1,Tw=()=>u$++,d$=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),Sw=(e,t)=>{let n=d$.get(e);if(!n)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((i,r)=>i*r)*n/8):0},Ew=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:n,tensor:i,dataType:r,shape:o,shouldConvertInt64toInt32:l=!1}=e;this.sessionId=t,this.mlContext=n,this.mlTensor=i,this.dataType=r,this.tensorShape=o,this.shouldConvertInt64toInt32=l}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return Sw(this.dataType,this.tensorShape)}destroy(){En("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let n=await this.mlContext.readTensor(this.mlTensor),i=Mw(new Uint8Array(n));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(i);return}else return i.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,n){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===n.length&&this.tensorShape.every((i,r)=>i===n[r])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},$w=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,n,i){let r=t,o=this.tensorManager.getMLContext(e),l=r==="int64"&&!o.opSupportLimits().input.dataTypes.includes("int64");if(l&&(r="int32",En("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(o,r,n))return this.wrapper.tensor;if(i){if(this.wrapper.byteLength!==Sw(r,n))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let c=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,r,n,c,!0,!0,l),i&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=Rx(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else En("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){if(this.activeUpload){let t=this.wrapper?.isInt64ToInt32Converted?Mw(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(t):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(t);return}else return t.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32,e):this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32)}},f$=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=Tw();return this.tensorTrackersById.set(e,new $w(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,n,i,r){En("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${n}, shape: ${i}, copyOld: ${r}}`);let o=this.tensorTrackersById.get(t);if(!o)throw new Error("Tensor not found.");return o.ensureTensor(e,n,i,r)}upload(e,t){let n=this.tensorTrackersById.get(e);if(!n)throw new Error("Tensor not found.");n.upload(t)}async download(e,t){En("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t?.byteLength}}`);let n=this.tensorTrackersById.get(e);if(!n)throw new Error("Tensor not found.");return n.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,n,i){let r=this.getMLContext(e),o=Tw(),l=new Ew({sessionId:e,context:r,tensor:t,dataType:n,shape:i});return this.tensorTrackersById.set(o,new $w(this,l)),this.externalTensors.add(l),o}async getCachedTensor(e,t,n,i,r,o,l=!1){let c=this.getMLContext(e);for(let[f,p]of this.freeTensors.entries())if(p.canReuseTensor(c,t,n)){En("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${n}}`);let h=this.freeTensors.splice(f,1)[0];return h.sessionId=e,h}En("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${n}}`);let d=await c.createTensor({dataType:t,shape:n,dimensions:n,usage:i,writable:r,readable:o});return new Ew({sessionId:e,context:c,tensor:d,dataType:t,shape:n,shouldConvertInt64toInt32:l})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},OI=(...e)=>new f$(...e)}),Hv,h$,DI,kW=ht(()=>{Zt(),Vd(),II(),CW(),Gl(),Hv=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),h$=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let n=Object.keys(e).sort(),i=Object.keys(t).sort();return n.length===i.length&&n.every((r,o)=>r===i[o]&&e[r]===t[r])},DI=class{constructor(e){this.tensorManager=OI(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,n1(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){En("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){En("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let n of t)En("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${n}}`),this.tensorManager.releaseTensorId(n);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let n=this.mlContextCache.findIndex(i=>i.gpuDevice===e);if(n!==-1)return this.mlContextCache[n].mlContext;{let i=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:i}),i}}else if(e===void 0){let n=this.mlContextCache.findIndex(i=>i.options===void 0&&i.gpuDevice===void 0);if(n!==-1)return this.mlContextCache[n].mlContext;{let i=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:i}),i}}let t=this.mlContextCache.findIndex(n=>h$(n.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:n}),n}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let n=this.sessionIdsByMLContext.get(t);n||(n=new Set,this.sessionIdsByMLContext.set(t,n)),n.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let n=this.sessionIdsByMLContext.get(t);if(n.delete(e),n.size===0){this.sessionIdsByMLContext.delete(t);let i=this.mlContextCache.findIndex(r=>r.mlContext===t);i!==-1&&this.mlContextCache.splice(i,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){En("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,n,i,r){let o=Hv.get(n);if(!o)throw new Error(`Unsupported ONNX data type: ${n}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,o,i,r)}async createTemporaryTensor(e,t,n){En("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${n}}`);let i=Hv.get(t);if(!i)throw new Error(`Unsupported ONNX data type: ${t}`);let r=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,r,i,n,!1);let o=this.temporarySessionTensorIds.get(e);return o?o.push(r):this.temporarySessionTensorIds.set(e,[r]),r}uploadTensor(e,t){if(!dr().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");En("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let n=await this.tensorManager.download(e);return r1(n,t)}}registerMLTensor(e,t,n,i){let r=Hv.get(n);if(!r)throw new Error(`Unsupported ONNX data type: ${n}`);let o=this.tensorManager.registerTensor(e,t,r,i);return En("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${r}, dimensions: ${i}} -> {tensorId: ${o}}`),o}registerMLConstant(e,t,n,i,r,o,l=!1){if(!o)throw new Error("External mounted files are not available.");let c=e;e.startsWith("./")&&(c=e.substring(2));let d=o.get(c);if(!d)throw new Error(`File with name ${c} not found in preloaded files.`);if(t+n>d.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let f=d.slice(t,t+n).buffer,p;switch(r.dataType){case"float32":p=new Float32Array(f);break;case"float16":p=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(f):new Uint16Array(f);break;case"int32":p=new Int32Array(f);break;case"uint32":p=new Uint32Array(f);break;case"int64":l?(p=Rx(new Uint8Array(f),!1),r.dataType="int32"):p=new BigInt64Array(f);break;case"uint64":p=new BigUint64Array(f);break;case"int8":p=new Int8Array(f);break;case"int4":case"uint4":case"uint8":p=new Uint8Array(f);break;default:throw new Error(`Unsupported data type: ${r.dataType} in creating WebNN Constant from external data.`)}return En("verbose",()=>`[WebNN] registerMLConstant {dataType: ${r.dataType}, shape: ${r.shape}}} ${l?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),i.constant(r,p)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let n=this.sessionGraphInputs.get(e);return n?n.includes(t):!1}isInt64Supported(e){return!!this.mlContextBySessionId.get(e)?.opSupportLimits().input.dataTypes.includes("int64")}flush(){}}}),i1=ht(()=>{}),Pw,Kv,qv,m$,p$,Cw,Fx,g$,zI,AW=ht(()=>{Gl(),i1(),Pw=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),Kv=[],qv=e=>Math.ceil(Number(e)/16)*16,m$=e=>{for(let t=0;t<Kv.length;t++){let n=Kv[t];if(e<=n)return n}return Math.ceil(e/16)*16},p$=1,Cw=()=>p$++,Fx=async(e,t,n,i)=>{let r=qv(n),o=e.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let l=e.getCommandEncoder();e.endComputePass(),l.copyBufferToBuffer(t,0,o,0,r),e.flush(),await o.mapAsync(GPUMapMode.READ);let c=o.getMappedRange();if(i){let d=i();return d.set(new Uint8Array(c,0,n)),d}else return new Uint8Array(c.slice(0,n))}finally{o.destroy()}},g$=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of Pw)Kv.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let n=t.buffer,i=t.byteOffset,r=t.byteLength,o=qv(r),l=this.storageCache.get(e);if(!l)throw new Error("gpu data for uploading does not exist");if(Number(l.originalSize)!==r)throw new Error(`inconsistent data size. gpu data size=${l.originalSize}, data size=${r}`);let c=this.backend.device.createBuffer({mappedAtCreation:!0,size:o,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),d=c.getMappedRange();new Uint8Array(d).set(new Uint8Array(n,i,r)),c.unmap();let f=this.backend.device.createCommandEncoder();f.copyBufferToBuffer(c,0,l.gpuData.buffer,0,o),this.backend.device.queue.submit([f.finish()]),c.destroy(),En("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let n=this.storageCache.get(e);if(!n)throw new Error("source gpu data for memcpy does not exist");let i=this.storageCache.get(t);if(!i)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==i.originalSize)throw new Error("inconsistent source and destination gpu data size");let r=qv(n.originalSize),o=this.backend.getCommandEncoder();this.backend.endComputePass(),o.copyBufferToBuffer(n.gpuData.buffer,0,i.gpuData.buffer,0,r)}registerExternalBuffer(e,t,n){let i;if(n){if(i=n[0],e===n[1])return En("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${i}, buffer is the same, skip.`),i;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else i=Cw();return this.storageCache.set(i,{gpuData:{id:i,type:0,buffer:e},originalSize:t}),En("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${i}, registered.`),i}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),En("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let n=m$(e),i,r=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,o=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(r||o){let c=(r?this.freeBuffers:this.freeUniformBuffers).get(n);c?c.length>0?i=c.pop():i=this.backend.device.createBuffer({size:n,usage:t}):i=this.backend.device.createBuffer({size:n,usage:t})}else i=this.backend.device.createBuffer({size:n,usage:t});let l={id:Cw(),type:0,buffer:i};return this.storageCache.set(l.id,{gpuData:l,originalSize:Number(e)}),En("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${l.id}`),l}get(e){return this.storageCache.get(e)?.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,n=this.storageCache.get(t);if(!n){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return En("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${n.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(n.gpuData.buffer),n.originalSize}async download(e,t){let n=this.storageCache.get(Number(e));if(!n)throw new Error("data does not exist");await Fx(this.backend,n.gpuData.buffer,n.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=Pw.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let n=this.freeBuffers.get(e.size)||[];t===void 0||n.length>=t?e.destroy():n.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let n=this.freeUniformBuffers.get(e.size)||[];t===void 0||n.length>=t?e.destroy():n.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(n=>{n.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(En("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(n=>{n.gpuData.buffer.destroy()}),this.storageCache=new Map)}},zI=(...e)=>new g$(...e)}),_$,Nn,Zr=ht(()=>{_$=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Nn=e=>new _$(e)}),Wh,Zv,gi,Vi,Nt,Rr,Nx,zh,iu,zt,Ig,Ye,It,LI,a1,v$,RI,ln=ht(()=>{Zt(),sn(),Wh=64,Zv=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},gi=(e,t=1)=>{let n=Zv(e,t);return typeof n=="string"?n:n[0]},Vi=(e,t=1)=>{let n=Zv(e,t);return typeof n=="string"?n:n[1]},Nt=(...e)=>{let t=[];return e.forEach(n=>{n.length!==0&&t.push({type:12,data:n},{type:12,data:Ue.computeStrides(n)})}),t},Rr=e=>e%4===0?4:e%2===0?2:1,Nx=(e="f32",t,n="0")=>!t||t===1?`${e}(${n})`:`vec${t}<${e}>(${n})`,zh=(e,t,n)=>e==="f32"?n:t===1?`f32(${n})`:`vec${t}<f32>(${n})`,iu=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,zt=(e,t,n,i)=>e.startsWith("uniforms.")&&n>4?typeof t=="string"?i==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:i==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:n>1?`${e}[${t}]`:e,Ig=(e,t,n,i,r)=>{let o=typeof n=="number",l=o?n:n.length,c=[...new Array(l).keys()],d=l<2?"u32":l<=4?`vec${l}<u32>`:`array<u32, ${l}>`,f=Zv(t,r),p=typeof f=="string"?f:f[1],h=typeof f=="string"?f:f[0],m={indices:d,value:p,storage:h,tensor:t},_=G=>typeof G=="string"?G:`${G}u`,v={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},b=o?"uniforms.":"",D=`${b}${e}_shape`,T=`${b}${e}_strides`,E="";for(let G=0;G<l-1;G++)E+=`
    let dim${G} = current / ${zt(T,G,l)};
    let rest${G} = current % ${zt(T,G,l)};
    indices[${G}] = dim${G};
    current = rest${G};
    `;E+=`indices[${l-1}] = current;`;let A=l<2?"":`
  fn o2i_${e}(offset: u32) -> ${m.indices} {
    var indices: ${m.indices};
    var current = offset;
    ${E}
    return indices;
  }`,$=G=>(v.offsetToIndices=!0,l<2?G:`o2i_${e}(${G})`),P=[];if(l>=2)for(let G=l-1;G>=0;G--)P.push(`${zt(T,G,l)} * (indices[${G}])`);let C=l<2?"":`
  fn i2o_${e}(indices: ${m.indices}) -> u32 {
    return ${P.join("+")};
  }`,S=G=>(v.indicesToOffset=!0,l<2?G:`i2o_${e}(${G})`),O=(...G)=>l===0?"0u":`${m.indices}(${G.map(_).join(",")})`,N=(G,H)=>l<2?`${G}`:`${zt(G,H,l)}`,j=(G,H,V)=>l<2?`${G}=${V};`:`${zt(G,H,l)}=${V};`,X={},Y=(G,H)=>{v.broadcastedIndicesToOffset=!0;let V=`${H.name}broadcastedIndicesTo${e}Offset`;if(V in X)return`${V}(${G})`;let U=[];for(let ce=l-1;ce>=0;ce--){let ve=H.indicesGet("outputIndices",ce+H.rank-l);U.push(`${N(T,ce)} * (${ve} % ${N(D,ce)})`)}return X[V]=`fn ${V}(outputIndices: ${H.type.indices}) -> u32 {
             return ${U.length>0?U.join("+"):"0u"};
           }`,`${V}(${G})`},K=(G,H)=>(()=>{if(m.storage===m.value)return`${e}[${G}]=${H};`;if(m.storage==="vec2<u32>"&&m.value==="i32")return`${e}[${G}]=vec2<u32>(u32(${H}), select(0u, 0xFFFFFFFFu, ${H} < 0));`;if(m.storage==="vec2<u32>"&&m.value==="u32")return`${e}[${G}]=vec2<u32>(u32(${H}), 0u);`;if(m.storage==="u32"&&m.value==="vec4<bool>")return`${e}[${G}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${H}));`;throw new Error(`not supported combination of storage type ${m.storage} and value type ${m.value} yet`)})(),se=G=>(()=>{if(m.storage===m.value)return`${e}[${G}]`;if(m.storage==="vec2<u32>"&&m.value==="i32")return`i32(${e}[${G}].x)`;if(m.storage==="vec2<u32>"&&m.value==="u32")return`u32(${e}[${G}].x)`;if(m.storage==="u32"&&m.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${G}] & 0xFFu), bool(${e}[${G}] & 0xFF00u), bool(${e}[${G}] & 0xFF0000u), bool(${e}[${G}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${m.storage} and value type ${m.value} yet`)})(),oe=l<2?"":`
  fn get_${e}ByIndices(indices: ${m.indices}) -> ${p} {
    return ${se(`i2o_${e}(indices)`)};
  }`,W=l<2?"":(()=>{let G=c.map(V=>`d${V}: u32`).join(", "),H=c.map(V=>`d${V}`).join(", ");return`
  fn get_${e}(${G}) -> ${p} {
    return get_${e}ByIndices(${O(H)});
  }`})(),ne=(...G)=>{if(G.length!==l)throw new Error(`indices length must be ${l}`);let H=G.map(_).join(",");return l===0?se("0u"):l===1?se(H[0]):(v.get=!0,v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}(${H})`)},ae=G=>l<2?se(G):(v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}ByIndices(${G})`),ge=l<2?"":`
  fn set_${e}ByIndices(indices: ${m.indices}, value: ${p}) {
    ${K(`i2o_${e}(indices)`,"value")}
  }`,ye=l<2?"":(()=>{let G=c.map(V=>`d${V}: u32`).join(", "),H=c.map(V=>`d${V}`).join(", ");return`
  fn set_${e}(${G}, value: ${p}) {
    set_${e}ByIndices(${O(H)}, value);
  }`})();return{impl:()=>{let G=[],H=!1;return v.offsetToIndices&&(G.push(A),H=!0),v.indicesToOffset&&(G.push(C),H=!0),v.broadcastedIndicesToOffset&&(Object.values(X).forEach(V=>G.push(V)),H=!0),v.set&&(G.push(ye),H=!0),v.setByIndices&&(G.push(ge),H=!0),v.get&&(G.push(W),H=!0),v.getByIndices&&(G.push(oe),H=!0),!o&&H&&G.unshift(`const ${D} = ${m.indices}(${n.join(",")});`,`const ${T} = ${m.indices}(${Ue.computeStrides(n).join(",")});`),G.join(`
`)},type:m,offsetToIndices:$,indicesToOffset:S,broadcastedIndicesToOffset:Y,indices:O,indicesGet:N,indicesSet:j,set:(...G)=>{if(G.length!==l+1)throw new Error(`indices length must be ${l}`);let H=G[l];if(typeof H!="string")throw new Error("value must be string");let V=G.slice(0,l).map(_).join(",");return l===0?K("0u",H):l===1?K(V[0],H):(v.set=!0,v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}(${V}, ${H})`)},setByOffset:K,setByIndices:(G,H)=>l<2?K(G,H):(v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}ByIndices(${G}, ${H});`),get:ne,getByOffset:se,getByIndices:ae,usage:i,name:e,strides:T,shape:D,rank:l}},Ye=(e,t,n,i=1)=>Ig(e,t,n,"input",i),It=(e,t,n,i=1)=>Ig(e,t,n,"output",i),LI=(e,t,n)=>Ig(e,t,n,"atomicOutput",1),a1=(e,t,n,i=1)=>Ig(e,t,n,"internal",i),v$=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=Wh){let t=typeof e=="number"?e:e[0],n=typeof e=="number"?1:e[1],i=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||n>this.limits.maxComputeWorkgroupSizeY||i>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${n}, ${i}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*n*i>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${n}, ${i}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let r=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,o=r?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,l=r?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*n*i}u + local_idx;`;return`@compute @workgroup_size(${t}, ${n}, ${i})
  fn main(${o}) {
    ${l}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let n=e.usage==="input"?"read":"read_write",i=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${n}> ${e.name}: array<${i}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,n=1){return this.uniforms.push({name:e,type:t,length:n}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:n,length:i}of this.uniforms)if(i&&i>4)n==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${n}>, ${Math.ceil(i/8)}>`):e.push(`${t}:array<vec4<${n}>, ${Math.ceil(i/4)}>`);else{let r=i==null||i===1?n:`vec${i}<${n}>`;e.push(`${t}:${r}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},RI=(e,t)=>new v$(e,t)}),y$,kw,b$,w$,x$,M$,Va,FI,NI,du=ht(()=>{Zt(),sn(),Zr(),ln(),y$=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},kw=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),b$=(e,t)=>Ue.sortBasedOnPerm(e,kw(e.length,t)),w$=(e,t,n,i)=>{let r=`fn perm(i: ${i.type.indices}) -> ${n.type.indices} {
    var a: ${n.type.indices};`;for(let o=0;o<t;++o)r+=`a[${e[o]}]=i[${o}];`;return r+="return a;}"},x$=(e,t)=>{let n=[],i=[];for(let r=0;r<e.length;++r)e[r]!==1&&n.push(e[r]),e[t[r]]!==1&&i.push(t[r]);return{newShape:n,newPerm:i}},M$=(e,t)=>{let n=0;for(let i=0;i<e.length;++i)if(t[e[i]]!==1){if(e[i]<n)return!1;n=e[i]}return!0},Va=(e,t)=>{let n=e.dataType,i=e.dims.length,r=kw(i,t),o=b$(e.dims,r),l=e.dims,c=o,d=i<2||M$(r,e.dims),f;if(d)return f=v=>{let b=Ye("input",n,l,4),D=It("output",n,c,4);return`
  ${v.registerUniform("output_size","u32").declareVariables(b,D)}
  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let v=Ue.size(o);return{outputs:[{dims:o,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(v/64/4)},programUniforms:[{type:12,data:Math.ceil(v/4)}]}},getShaderSource:f};let{newShape:p,newPerm:h}=x$(e.dims,r),m=Ue.areEqual(h,[2,3,1]),_=Ue.areEqual(h,[3,1,2]);if(p.length===2||m||_){l=m?[p[0],p[1]*p[2]]:_?[p[0]*p[1],p[2]]:p,c=[l[1],l[0]];let v=16;return f=b=>{let D=Ye("a",n,l.length),T=It("output",n,c.length);return`
  ${b.registerUniform("output_size","u32").declareVariables(D,T)}
  var<workgroup> tile : array<array<${T.type.value}, ${v+1}>, ${v}>;
  ${b.mainStart([v,v,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${v} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${v}u + local_id.x;
    let input_row = workgroup_id_x * ${v}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${D.getByIndices(`${D.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${v}u + local_id.x;
    let output_row = workgroup_id_y * ${v}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${T.setByIndices(`${T.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let b=Ue.size(o);return{outputs:[{dims:o,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(c[1]/v),y:Math.ceil(c[0]/v)},programUniforms:[{type:12,data:b},...Nt(l,c)]}},getShaderSource:f}}return f=v=>{let b=Ye("a",n,l.length),D=It("output",n,c.length);return`
  ${v.registerUniform("output_size","u32").declareVariables(b,D)}

  ${w$(r,i,b,D)}

  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${D.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${D.setByOffset("global_idx",b.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let v=Ue.size(o);return{outputs:[{dims:o,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:[{type:12,data:v},...Nt(l,c)]}},getShaderSource:f}},FI=(e,t)=>{y$(e.inputs,t.perm),e.compute(Va(e.inputs[0],t.perm))},NI=e=>Nn({perm:e.perm})}),T$,S$,E$,$$,P$,C$,k$,A$,I$,O$,Go,jI,BI,UI,VI,GI,WI,HI,KI,qI,ZI,IW=ht(()=>{Zt(),sn(),ln(),o1(),du(),T$={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},S$={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},E$={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},$$={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},P$=(e,t)=>{let n=[];for(let i=t-e;i<t;++i)n.push(i);return n},C$=(e,t)=>{let n=[],i=e.length;for(let o=0;o<i;o++)t.indexOf(o)===-1&&n.push(e[o]);let r=t.map(o=>e[o]);return[n,r]},k$=(e,t)=>{let n=e.length+t.length,i=[],r=0;for(let o=0;o<n;o++)t.indexOf(o)===-1?i.push(e[r++]):i.push(1);return i},A$=(e,t)=>{for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0},I$=(e,t)=>{let n=[];if(!A$(e,t)){for(let i=0;i<t;++i)e.indexOf(i)===-1&&n.push(i);e.forEach(i=>n.push(i))}return n},O$=(e,t,n,i,r,o,l)=>{let c=n[0].dims,d=Ue.size(o),f=Ue.size(l),p=Ye("_A",n[0].dataType,c),h=It("output",r,o),m=64;d===1&&(m=256);let _=`
          var<workgroup> aBestValues : array<f32, ${m}>;
       `,v=b=>`
        ${b.registerUniform("reduceSize","u32").declareVariables(p,h)}
        ${_}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${b.mainStart(m)}

          let outputIndex = global_idx / ${m};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${E$[i]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${m}) {
           let candidate = f32(${p.getByOffset("offset + k")});
           bestValue = ${T$[i]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${m}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${S$[i]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${h.setByOffset("outputIndex",`${i==="mean"?`${h.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${h.type.storage}(${$$[i]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${m}`,inputDependencies:["type"]},getShaderSource:v,getRunData:()=>({outputs:[{dims:o,dataType:r}],dispatchGroup:{x:d},programUniforms:[{type:12,data:f}]})}},Go=(e,t,n,i)=>{let r=e.inputs.length===1?n:jx(e.inputs,n),o=r.axes;o.length===0&&!r.noopWithEmptyAxes&&(o=e.inputs[0].dims.map((_,v)=>v));let l=Ue.normalizeAxes(o,e.inputs[0].dims.length),c=l,d=e.inputs[0],f=I$(c,e.inputs[0].dims.length);f.length>0&&(d=e.compute(Va(e.inputs[0],f),{inputs:[0],outputs:[-1]})[0],c=P$(c.length,d.dims.length));let[p,h]=C$(d.dims,c),m=p;r.keepDims&&(m=k$(p,l)),e.compute(O$(t,r.cacheKey,[d],i,e.inputs[0].dataType,m,h),{inputs:[d]})},jI=(e,t)=>{Go(e,"ReduceMeanShared",t,"mean")},BI=(e,t)=>{Go(e,"ReduceL1Shared",t,"l1")},UI=(e,t)=>{Go(e,"ReduceL2Shared",t,"l2")},VI=(e,t)=>{Go(e,"ReduceLogSumExpShared",t,"logSumExp")},GI=(e,t)=>{Go(e,"ReduceMaxShared",t,"max")},WI=(e,t)=>{Go(e,"ReduceMinShared",t,"min")},HI=(e,t)=>{Go(e,"ReduceProdShared",t,"prod")},KI=(e,t)=>{Go(e,"ReduceSumShared",t,"sum")},qI=(e,t)=>{Go(e,"ReduceSumSquareShared",t,"sumSquare")},ZI=(e,t)=>{Go(e,"ReduceLogSumShared",t,"logSum")}}),Wo,D$,Uy,jx,Ho,z$,L$,R$,F$,N$,j$,B$,U$,V$,G$,Ko,QI,XI,YI,JI,eO,tO,nO,rO,iO,aO,o1=ht(()=>{Zt(),sn(),Zr(),ln(),IW(),Wo=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},D$=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Uy=(e,t,n,i,r,o,l=!1,c=!1)=>{let d=[],f=n[0].dims,p=f.length,h=Ue.normalizeAxes(r,p),m=!c&&h.length===0;f.forEach((b,D)=>{m||h.indexOf(D)>=0?l&&d.push(1):d.push(b)});let _=d.length,v=Ue.size(d);return{name:e,shaderCache:t,getShaderSource:b=>{let D=[],T=Ye("_A",n[0].dataType,p),E=It("output",o,_),A=i(T,E,h),$=A[2];for(let P=0,C=0;P<p;P++)m||h.indexOf(P)>=0?(l&&C++,$=`for(var j${P}: u32 = 0; j${P} < ${f[P]}; j${P}++) {
                  ${A[2].includes("last_index")?`let last_index = j${P};`:""}
                  ${T.indicesSet("input_indices",P,`j${P}`)}
                  ${$}
                }`):(D.push(`${T.indicesSet("input_indices",P,E.indicesGet("output_indices",C))};`),C++);return`

        ${b.registerUniform("output_size","u32").declareVariables(T,E)}

        ${b.mainStart()}
          ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${T.type.indices};
          let output_indices = ${E.offsetToIndices("global_idx")};

          ${D.join(`
`)}
          ${A[0]}       // init ops for reduce max/min
          ${A[1]}
          ${$}
          ${A[3]}
          ${A.length===4?E.setByOffset("global_idx","value"):A.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:d,dataType:o}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:[{type:12,data:v},...Nt(f,d)]})}},jx=(e,t)=>{let n=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(i=>n.push(Number(i))),Nn({axes:n,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Ho=(e,t,n,i)=>{let r=e.inputs,o=r.length===1?n:jx(r,n);e.compute(Uy(t,{hint:o.cacheKey,inputDependencies:["rank"]},[r[0]],o.noopWithEmptyAxes&&o.axes.length===0?D$:i,o.axes,r[0].dataType,o.keepDims,o.noopWithEmptyAxes),{inputs:[0]})},z$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceLogSum",t,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${n.getByIndices("input_indices")};`,"value = log(value);"])},L$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceL1",t,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += abs(${n.getByIndices("input_indices")});`,""])},R$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceL2",t,(n,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${n.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},F$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceLogSumExp",t,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += exp(${n.getByIndices("input_indices")});`,"value = log(value);"])},N$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceMax",t,(n,i,r)=>{let o=[];for(let l=0;l<n.rank;l++)(r.indexOf(l)>=0||r.length===0)&&o.push(n.indicesSet("input_indices",l,0));return[`${o.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};`,`value = max(value, ${n.getByIndices("input_indices")});`,""]})},j$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceMean",t,(n,i,r)=>{let o=1;for(let l=0;l<n.rank;l++)(r.indexOf(l)>=0||r.length===0)&&(o*=e.inputs[0].dims[l]);return["var sum = f32(0);","",`sum += f32(${n.getByIndices("input_indices")});`,`let value = ${i.type.value}(sum / ${o});`]})},B$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceMin",t,(n,i,r)=>{let o=[];for(let l=0;l<n.rank;l++)(r.indexOf(l)>=0||r.length===0)&&o.push(`input_indices[${l}] = 0;`);return[`${o.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};`,`value = min(value, ${n.getByIndices("input_indices")});`,""]})},U$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceProd",t,(n,i)=>[`var value = ${i.type.storage}(1);`,"",`value *= ${n.getByIndices("input_indices")};`,""])},V$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceSum",t,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${n.getByIndices("input_indices")};`,""])},G$=(e,t)=>{Wo(e.inputs),Ho(e,"ReduceSumSquare",t,(n,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${n.getByIndices("input_indices")}; value += t * t;`,""])},Ko=(e,t,n)=>{if(t.length===0)return n;let i=1,r=1;for(let o=0;o<t.length;o++)t.indexOf(o)===-1?i*=e[o]:r*=e[o];return r<32&&i>1024},QI=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?j$(e,t):jI(e,t)},XI=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?L$(e,t):BI(e,t)},YI=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?R$(e,t):UI(e,t)},JI=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?F$(e,t):VI(e,t)},eO=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?N$(e,t):GI(e,t)},tO=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?B$(e,t):WI(e,t)},nO=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?U$(e,t):HI(e,t)},rO=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?V$(e,t):KI(e,t)},iO=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?G$(e,t):qI(e,t)},aO=(e,t)=>{Ko(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?z$(e,t):ZI(e,t)}}),Aw,oO,sO,Bx,OW=ht(()=>{Zt(),Zr(),o1(),Aw=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},oO=(e,t)=>{Aw(e.inputs);let n=(i,r,o)=>{let l=[];for(let c=0;c<i.rank;c++)(o.indexOf(c)>=0||o.length===0)&&l.push(`input_indices[${c}] = 0;`);return[`${l.join(`
`)}`,`var value = ${i.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${i.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${i.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",r.setByOffset("global_idx","best_index")]};e.compute(Uy("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],n,[t.axis],7,t.keepDims),{inputs:[0]})},sO=(e,t)=>{Aw(e.inputs);let n=(i,r,o)=>{let l=[];for(let c=0;c<i.rank;c++)(o.indexOf(c)>=0||o.length===0)&&l.push(`input_indices[${c}] = 0;`);return[`${l.join(`
`)}`,`var value = ${i.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${i.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${i.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",r.setByOffset("global_idx","best_index")]};e.compute(Uy("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],n,[t.axis],7,t.keepDims),{inputs:[0]})},Bx=e=>Nn(e)}),W$,Qv,H$,K$,q$,c_,Z$,lO,s1=ht(()=>{Zt(),sn(),i1(),ln(),W$=(e,t)=>{let n=e[0],i=e[1],r=e[2],o=e[3],l=e[4],c=e[5];if(l&&c)throw new Error("Attention cannot have both past and attention_bias");if(n.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let d=n.dims[0],f=n.dims[1],p=n.dims[2];if(r.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(i.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(i.dims[0]!==p)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(r.dims[0]!==i.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let h=r.dims[0]/3,m=h,_=m;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let A of t.qkvHiddenSizes)if(A%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");h=t.qkvHiddenSizes[0],m=t.qkvHiddenSizes[1],_=t.qkvHiddenSizes[2]}let v=f;if(h!==m)throw new Error("qkv_hidden_sizes first element should be same as the second");if(r.dims[0]!==h+m+_)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let b=0;if(l){if(m!==_)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(l.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(l.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(l.dims[1]!==d)throw new Error('Input "past" second dimension must be batch_size');if(l.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(l.dims[4]!==m/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(b=l.dims[3])}let D=v+b,T=-1,E=0;if(o)throw new Error("Mask not supported");if(l)throw new Error("past is not supported");if(c){if(c.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(c.dims[0]!==d||c.dims[1]!==t.numHeads||c.dims[2]!==f||c.dims[3]!==D)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:d,sequenceLength:f,pastSequenceLength:b,kvSequenceLength:v,totalSequenceLength:D,maxSequenceLength:T,inputHiddenSize:p,hiddenSize:h,vHiddenSize:_,headSize:Math.floor(h/t.numHeads),vHeadSize:Math.floor(_/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:E,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},Qv=(e,t,n)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e?.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${n?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,H$=(e,t,n,i,r,o,l,c)=>{let d=Rr(l?1:o),f=64,p=o/d;p<f&&(f=32);let h=Math.ceil(o/d/f),m=[{type:12,data:t},{type:12,data:n},{type:12,data:i},{type:12,data:r},{type:12,data:p},{type:12,data:h}],_=gi(e.dataType,d),v=Vi(1,d),b=["type"];l&&b.push("type"),c&&b.push("type");let D=T=>{let E=It("x",e.dataType,e.dims,d),A=[E],$=l?Ye("seq_lens",l.dataType,l.dims):void 0;$&&A.push($);let P=c?Ye("total_sequence_length_input",c.dataType,c.dims):void 0;P&&A.push(P);let C=Vi(e.dataType),S=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${f}>;
  var<workgroup> thread_sum: array<f32, ${f}>;
  ${T.registerUniforms(S).declareVariables(...A)}
  ${T.mainStart([f,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${Qv($,P,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${f}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${l?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${v}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${v}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(d){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${d}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${f}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${v}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${v}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(d){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${d}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${f}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${E.type.value}(${C}(1.0) / ${C}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${v}(x[offset + i]);
        x[offset + i] = ${E.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${l?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${E.type.value}(${C}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${f};${_};${d}`,inputDependencies:b},getShaderSource:D,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:r,z:t*n},programUniforms:m})}},K$=(e,t,n,i,r,o,l,c,d)=>{let f=l+o.kvSequenceLength,p=[o.batchSize,o.numHeads,o.sequenceLength,f],h=e>1&&i,m=o.kvNumHeads?o.kvNumHeads:o.numHeads,_=h?[o.batchSize,m,f,o.headSize]:void 0,v=o.nReps?o.nReps:1,b=o.scale===0?1/Math.sqrt(o.headSize):o.scale,D=Rr(o.headSize),T=o.headSize/D,E=12,A={x:Math.ceil(f/E),y:Math.ceil(o.sequenceLength/E),z:o.batchSize*o.numHeads},$=[{type:12,data:o.sequenceLength},{type:12,data:T},{type:12,data:f},{type:12,data:o.numHeads},{type:12,data:o.headSize},{type:1,data:b},{type:12,data:l},{type:12,data:o.kvSequenceLength},{type:12,data:v}],P=h&&i&&Ue.size(i.dims)>0,C=["type","type"];P&&C.push("type"),r&&C.push("type"),c&&C.push("type"),d&&C.push("type");let S=[{dims:p,dataType:t.dataType,gpuDataType:0}];h&&S.push({dims:_,dataType:t.dataType,gpuDataType:0});let O=N=>{let j=Ye("q",t.dataType,t.dims,D),X=Ye("key",n.dataType,n.dims,D),Y=[j,X];if(P){let ge=Ye("past_key",i.dataType,i.dims,D);Y.push(ge)}r&&Y.push(Ye("attention_bias",r.dataType,r.dims));let K=c?Ye("seq_lens",c.dataType,c.dims):void 0;K&&Y.push(K);let se=d?Ye("total_sequence_length_input",d.dataType,d.dims):void 0;se&&Y.push(se);let oe=It("output",t.dataType,p),W=[oe];h&&W.push(It("present_key",t.dataType,_,D));let ne=Vi(1,D),ae=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${E}u;

  var<workgroup> tileQ: array<${j.type.storage}, ${E*E}>;
  var<workgroup> tileK: array<${j.type.storage}, ${E*E}>;
  ${N.registerUniforms(ae).declareVariables(...Y,...W)}
  ${N.mainStart([E,E,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${v===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${v===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${Qv(K,se,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${P&&h?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${h?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${ne}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${P&&h?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${h?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${ne}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(D){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${D}`)}})()};
        output[outputIdx] = ${oe.type.value} (sum * uniforms.alpha) + ${r?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${D};${r!==void 0};${i!==void 0};${e}`,inputDependencies:C},getRunData:()=>({outputs:S,dispatchGroup:A,programUniforms:$}),getShaderSource:O}},q$=(e,t,n,i,r,o,l=void 0,c=void 0)=>{let d=o+r.kvSequenceLength,f=r.nReps?r.nReps:1,p=r.vHiddenSize*f,h=e>1&&i,m=r.kvNumHeads?r.kvNumHeads:r.numHeads,_=h?[r.batchSize,m,d,r.headSize]:void 0,v=[r.batchSize,r.sequenceLength,p],b=12,D={x:Math.ceil(r.vHeadSize/b),y:Math.ceil(r.sequenceLength/b),z:r.batchSize*r.numHeads},T=[{type:12,data:r.sequenceLength},{type:12,data:d},{type:12,data:r.vHeadSize},{type:12,data:r.numHeads},{type:12,data:r.headSize},{type:12,data:p},{type:12,data:o},{type:12,data:r.kvSequenceLength},{type:12,data:f}],E=h&&i&&Ue.size(i.dims)>0,A=["type","type"];E&&A.push("type"),l&&A.push("type"),c&&A.push("type");let $=[{dims:v,dataType:t.dataType,gpuDataType:0}];h&&$.push({dims:_,dataType:t.dataType,gpuDataType:0});let P=C=>{let S=Ye("probs",t.dataType,t.dims),O=Ye("v",n.dataType,n.dims),N=[S,O];E&&N.push(Ye("past_value",i.dataType,i.dims));let j=l?Ye("seq_lens",l.dataType,l.dims):void 0;l&&N.push(j);let X=c?Ye("total_sequence_length_input",c.dataType,c.dims):void 0;c&&N.push(X);let Y=[It("output",t.dataType,v)];h&&Y.push(It("present_value",t.dataType,_));let K=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${b}u;
  var<workgroup> tileQ: array<${S.type.value}, ${b*b}>;
  var<workgroup> tileV: array<${S.type.value}, ${b*b}>;
  ${C.registerUniforms(K).declareVariables(...N,...Y)}
  ${C.mainStart([b,b,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${f===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${f===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${Qv(j,X,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${E&&h?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${h?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${S.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${E&&h?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${h?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${i!==void 0};${e}`,inputDependencies:A},getRunData:()=>({outputs:$,dispatchGroup:D,programUniforms:T}),getShaderSource:P}},c_=(e,t,n,i,r,o,l,c,d,f,p=void 0,h=void 0)=>{let m=Math.min(e.outputCount,1+(l?1:0)+(c?1:0)),_=m>1?f.pastSequenceLength:0,v=_+f.kvSequenceLength,b=d&&Ue.size(d.dims)>0?d:void 0,D=[t,n];m>1&&l&&Ue.size(l.dims)>0&&D.push(l),b&&D.push(b),p&&D.push(p),h&&D.push(h);let T=e.compute(K$(m,t,n,l,b,f,_,p,h),{inputs:D,outputs:m>1?[-1,1]:[-1]})[0];e.compute(H$(T,f.batchSize,f.numHeads,_,f.sequenceLength,v,p,h),{inputs:p&&h?[T,p,h]:[T],outputs:[]});let E=[T,i];m>1&&c&&Ue.size(c.dims)>0&&E.push(c),p&&E.push(p),h&&E.push(h),e.compute(q$(m,T,i,c,f,_,p,h),{inputs:E,outputs:m>1?[0,2]:[0]})},Z$=(e,t)=>{let n=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],i=t.sequenceLength,r=t.inputHiddenSize,o=t.headSize,l=12,c={x:Math.ceil(t.headSize/l),y:Math.ceil(t.sequenceLength/l),z:t.batchSize*t.numHeads},d=[e.inputs[0],e.inputs[1],e.inputs[2]],f=[{type:12,data:i},{type:12,data:r},{type:12,data:o},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],p=h=>{let m=It("output_q",d[0].dataType,n),_=It("output_k",d[0].dataType,n),v=It("output_v",d[0].dataType,n),b=Ye("input",d[0].dataType,d[0].dims),D=Ye("weight",d[1].dataType,d[1].dims),T=Ye("bias",d[2].dataType,d[2].dims),E=b.type.storage,A=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${l}u;
  var<workgroup> tileInput: array<${E}, ${l*l}>;
  var<workgroup> tileWeightQ: array<${E}, ${l*l}>;
  var<workgroup> tileWeightK: array<${E}, ${l*l}>;
  var<workgroup> tileWeightV: array<${E}, ${l*l}>;
  ${h.registerUniforms(A).declareVariables(b,D,T,m,_,v)}
  ${h.mainStart([l,l,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${E}(0);
    var valueK = ${E}(0);
    var valueV = ${E}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:n,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:n,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:n,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:f}),getShaderSource:p},{inputs:d,outputs:[-1,-1,-1]})},lO=(e,t)=>{let n=W$(e.inputs,t),[i,r,o]=Z$(e,n);return c_(e,i,r,o,e.inputs[4],void 0,void 0,void 0,e.inputs[5],n)}}),Q$,X$,Y$,cO,DW=ht(()=>{rs(),Zt(),sn(),Zr(),ln(),Q$=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let n=(i,r,o)=>{let l=r.length;if(l!==i.length)throw new Error(`${o}: num dimensions != ${l}`);r.forEach((c,d)=>{if(c!==i[d])throw new Error(`${o}: dim[${d}] do not match`)})};if(e[0].dims.length>1){let i=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);n(e[1].dims,i,"Invalid input scale"),n(e[2].dims,i,"Invalid input B"),n(e[3].dims,i,"Invalid input mean"),n(e[4].dims,i,"Invalid input var")}else n(e[1].dims,[1],"Invalid input scale"),n(e[2].dims,[1],"Invalid input B"),n(e[3].dims,[1],"Invalid input mean"),n(e[4].dims,[1],"Invalid input var")},X$=(e,t)=>{let{epsilon:n,spatial:i,format:r}=t,o=e[0].dims,l=i?Rr(o[o.length-1]):1,c=r==="NHWC"&&o.length>1?l:1,d=Ue.size(o)/l,f=i,p=f?o.length:o,h=Ye("x",e[0].dataType,e[0].dims,l),m=Ye("scale",e[1].dataType,e[1].dims,c),_=Ye("bias",e[2].dataType,e[2].dims,c),v=Ye("inputMean",e[3].dataType,e[3].dims,c),b=Ye("inputVar",e[4].dataType,e[4].dims,c),D=It("y",e[0].dataType,p,l),T=()=>{let A="";if(i)A=`let cOffset = ${o.length===1?"0u":r==="NHWC"?`outputIndices[${o.length-1}] / ${l}`:"outputIndices[1]"};`;else if(r==="NCHW")A=`
            ${D.indicesSet("outputIndices","0","0")}
            let cOffset = ${D.indicesToOffset("outputIndices")};`;else{A=`var cIndices = ${m.type.indices}(0);
                       cIndices[0] = outputIndices[${o.length-1}];`;for(let $=1;$<m.rank;$++)A+=`cIndices[${$}] = outputIndices[${$}];`;A+=`let cOffset = ${m.indicesToOffset("cIndices")};`}return A},E=A=>`
  const epsilon = ${n};
  ${A.registerUniform("outputSize","u32").declareVariables(h,m,_,v,b,D)}
  ${A.mainStart()}
  ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${D.offsetToIndices(`global_idx * ${l}`)};
    ${T()}
    let scale = ${m.getByOffset("cOffset")};
    let bias = ${_.getByOffset("cOffset")};
    let inputMean = ${v.getByOffset("cOffset")};
    let inputVar = ${b.getByOffset("cOffset")};
    let x = ${h.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${D.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${i}_${l}`,inputDependencies:f?["rank","type","type","type","type"]:void 0},getShaderSource:E,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:f?[{type:12,data:d},...Nt(o)]:[{type:12,data:d}]})}},Y$=e=>Nn(e),cO=(e,t)=>{let{inputs:n,outputCount:i}=e,r=Y$({...t,outputCount:i});if(yr.webgpu.validateInputContent&&Q$(n,r),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(X$(n,r))}}),J$,eP,uO,zW=ht(()=>{sn(),ln(),J$=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},eP=e=>{let t=e[0].dims,n=e[0].dims[2],i=Ue.size(t)/4,r=e[0].dataType,o=Ye("input",r,t,4),l=Ye("bias",r,[n],4),c=Ye("residual",r,t,4),d=It("output",r,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)}}),getShaderSource:f=>`
  const channels = ${n}u / 4;
  ${f.declareVariables(o,l,c,d)}

  ${f.mainStart()}
    ${f.guardAgainstOutOfBoundsWorkgroupSizes(i)}
    let value = ${o.getByOffset("global_idx")}
      + ${l.getByOffset("global_idx % channels")} + ${c.getByOffset("global_idx")};
    ${d.setByOffset("global_idx","value")}
  }`}},uO=e=>{J$(e.inputs),e.compute(eP(e.inputs))}}),tP,zn,dO,fO,hO,mO,pO,gO,_O,vO,yO,nP,bO,wO,xO,MO,Gg,TO,_y,SO,EO,$O,PO,CO,kO,AO,IO,OO,DO,zO,LO,RO,FO,NO,jO,Iw,BO,Ux,Vx,UO,VO,GO,rP,iP,WO,l1=ht(()=>{Zt(),sn(),Zr(),ln(),tP=(e,t,n,i,r,o,l)=>{let c=Math.ceil(t/4),d="";typeof r=="string"?d=`${r}(a)`:d=r("a");let f=Ye("inputData",n,[c],4),p=It("outputData",i,[c],4),h=[{name:"vec_size",type:"u32"}];return l&&h.push(...l),`
      ${e.registerUniforms(h).declareVariables(f,p)}

  ${o??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${f.getByOffset("global_idx")};
    ${p.setByOffset("global_idx",d)}
  }`},zn=(e,t,n,i,r,o=e.dataType,l,c)=>{let d=[{type:12,data:Math.ceil(Ue.size(e.dims)/4)}];return l&&d.push(...l),{name:t,shaderCache:{hint:r,inputDependencies:["type"]},getShaderSource:f=>tP(f,Ue.size(e.dims),e.dataType,o,n,i,c),getRunData:f=>({outputs:[{dims:e.dims,dataType:o}],dispatchGroup:{x:Math.ceil(Ue.size(f[0].dims)/64/4)},programUniforms:d})}},dO=e=>{e.compute(zn(e.inputs[0],"Abs","abs"))},fO=e=>{e.compute(zn(e.inputs[0],"Acos","acos"))},hO=e=>{e.compute(zn(e.inputs[0],"Acosh","acosh"))},mO=e=>{e.compute(zn(e.inputs[0],"Asin","asin"))},pO=e=>{e.compute(zn(e.inputs[0],"Asinh","asinh"))},gO=e=>{e.compute(zn(e.inputs[0],"Atan","atan"))},_O=e=>{e.compute(zn(e.inputs[0],"Atanh","atanh"))},vO=e=>Nn(e),yO=(e,t)=>{let n;switch(t.to){case 10:n="vec4<f16>";break;case 1:n="vec4<f32>";break;case 12:n="vec4<u32>";break;case 6:n="vec4<i32>";break;case 9:n="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(zn(e.inputs[0],"Cast",n,void 0,t.cacheKey,t.to))},nP=e=>{let t,n,i=e.length>=2&&e[1].data!==0,r=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=i?e[1].getFloat32Array()[0]:-34028234663852886e22,n=r?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=i?e[1].getUint16Array()[0]:64511,n=r?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return Nn({min:t,max:n})},bO=(e,t)=>{let n=t||nP(e.inputs),i=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"Clip",r=>`clamp(${r}, vec4<${i}>(uniforms.min), vec4<${i}>(uniforms.max))`,void 0,n.cacheKey,void 0,[{type:e.inputs[0].dataType,data:n.min},{type:e.inputs[0].dataType,data:n.max}],[{name:"min",type:i},{name:"max",type:i}]),{inputs:[0]})},wO=e=>{e.compute(zn(e.inputs[0],"Ceil","ceil"))},xO=e=>{e.compute(zn(e.inputs[0],"Cos","cos"))},MO=e=>{e.compute(zn(e.inputs[0],"Cosh","cosh"))},Gg=e=>Nn(e),TO=(e,t)=>{let n=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"Elu",i=>`elu_vf32(${i})`,`
  const elu_alpha_ = ${n}(${t.alpha});

  fn elu_f32(a: ${n}) -> ${n} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${n}>) -> vec4<${n}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},_y=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,SO=e=>{let t=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"Erf",n=>`erf_vf32(${n})`,_y(t)))},EO=e=>{e.compute(zn(e.inputs[0],"Exp","exp"))},$O=e=>{e.compute(zn(e.inputs[0],"Floor","floor"))},PO=e=>{let t=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"Gelu",n=>`0.5 * ${n} * (1.0 + erf_vf32(${n} * 0.7071067811865475))`,_y(t)))},CO=(e,t)=>{let n=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"LeakyRelu",i=>`select(leaky_relu_alpha_ * ${i}, ${i}, ${i} >= vec4<${n}>(0.0))`,`const leaky_relu_alpha_ = ${n}(${t.alpha});`,t.cacheKey))},kO=e=>{e.compute(zn(e.inputs[0],"Not",t=>`!${t}`))},AO=e=>{e.compute(zn(e.inputs[0],"Neg",t=>`-${t}`))},IO=e=>{e.compute(zn(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},OO=e=>{let t=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"Relu",n=>`select(vec4<${t}>(0.0), ${n}, ${n} > vec4<${t}>(0.0))`))},DO=e=>{e.compute(zn(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},zO=e=>Nn(e),LO=(e,t)=>{let n=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"HardSigmoid",i=>`max(vec4<${n}>(0.0), min(vec4<${n}>(1.0), ${t.alpha} * ${i} + vec4<${n}>(${t.beta})))`,void 0,t.cacheKey))},RO=e=>{e.compute(zn(e.inputs[0],"Sin","sin"))},FO=e=>{e.compute(zn(e.inputs[0],"Sinh","sinh"))},NO=e=>{e.compute(zn(e.inputs[0],"Sqrt","sqrt"))},jO=e=>{e.compute(zn(e.inputs[0],"Tan","tan"))},Iw=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,BO=e=>{e.compute(zn(e.inputs[0],"Tanh",Iw))},Ux=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${Iw("v")};
}
`,Vx=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,UO=e=>{let t=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"FastGelu",Vx,Ux(t),void 0,e.inputs[0].dataType))},VO=(e,t)=>{let n=Vi(e.inputs[0].dataType);return e.compute(zn(e.inputs[0],"ThresholdedRelu",i=>`select(vec4<${n}>(0.0), ${i}, ${i} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${n}>(${t.alpha});`,t.cacheKey)),0},GO=e=>{e.compute(zn(e.inputs[0],"Log","log"))},rP=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,iP=e=>`quick_gelu_impl(${e})`,WO=(e,t)=>{let n=Vi(e.inputs[0].dataType);e.compute(zn(e.inputs[0],"QuickGelu",iP,rP(n,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),aP,oP,HO,LW=ht(()=>{sn(),ln(),l1(),aP=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},oP=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let n=Ye("input",e[0].dataType,e[0].dims,4),i=Ye("bias",e[0].dataType,[e[0].dims[2]],4),r=It("output",e[0].dataType,t,4),o=Ue.size(t)/4,l=gi(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:c=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${c.declareVariables(n,i,r)}

  ${_y(l)}

  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes(o)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${r.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},HO=e=>{aP(e.inputs),e.compute(oP(e.inputs))}}),sP,lP,qo,KO,qO,ZO,QO,XO,YO,JO,eD,tD,nD,RW=ht(()=>{Zt(),sn(),ln(),sP=(e,t,n,i,r,o,l,c,d,f,p,h)=>{let m,_;typeof c=="string"?m=_=(E,A)=>`${c}((${E}),(${A}))`:typeof c=="function"?m=_=c:(m=c.scalar,_=c.vector);let v=It("outputData",p,i.length,4),b=Ye("aData",d,t.length,4),D=Ye("bData",f,n.length,4),T;if(r)if(o){let E=Ue.size(t)===1,A=Ue.size(n)===1,$=t.length>0&&t[t.length-1]%4===0,P=n.length>0&&n[n.length-1]%4===0;E||A?T=v.setByOffset("global_idx",_(E?`${b.type.value}(${b.getByOffset("0")}.x)`:b.getByOffset("global_idx"),A?`${D.type.value}(${D.getByOffset("0")}.x)`:D.getByOffset("global_idx"))):T=`
            let outputIndices = ${v.offsetToIndices("global_idx * 4u")};
            let offsetA = ${b.broadcastedIndicesToOffset("outputIndices",v)};
            let offsetB = ${D.broadcastedIndicesToOffset("outputIndices",v)};
            ${v.setByOffset("global_idx",_(l||$?b.getByOffset("offsetA / 4u"):`${b.type.value}(${b.getByOffset("offsetA / 4u")}[offsetA % 4u])`,l||P?D.getByOffset("offsetB / 4u"):`${D.type.value}(${D.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else T=v.setByOffset("global_idx",_(b.getByOffset("global_idx"),D.getByOffset("global_idx")));else{if(!o)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let E=(A,$,P="")=>{let C=`aData[indexA${$}][componentA${$}]`,S=`bData[indexB${$}][componentB${$}]`;return`
            let outputIndices${$} = ${v.offsetToIndices(`global_idx * 4u + ${$}u`)};
            let offsetA${$} = ${b.broadcastedIndicesToOffset(`outputIndices${$}`,v)};
            let offsetB${$} = ${D.broadcastedIndicesToOffset(`outputIndices${$}`,v)};
            let indexA${$} = offsetA${$} / 4u;
            let indexB${$} = offsetB${$} / 4u;
            let componentA${$} = offsetA${$} % 4u;
            let componentB${$} = offsetB${$} % 4u;
            ${A}[${$}] = ${P}(${m(C,S)});
          `};p===9?T=`
            var data = vec4<u32>(0);
            ${E("data",0,"u32")}
            ${E("data",1,"u32")}
            ${E("data",2,"u32")}
            ${E("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:T=`
            ${E("outputData[global_idx]",0)}
            ${E("outputData[global_idx]",1)}
            ${E("outputData[global_idx]",2)}
            ${E("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(b,D,v)}

        ${h??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${T}
      }`},lP=(e,t,n,i,r,o,l=n.dataType)=>{let c=n.dims.map(b=>Number(b)??1),d=i.dims.map(b=>Number(b)??1),f=!Ue.areEqual(c,d),p=c,h=Ue.size(c),m=!1,_=!1,v=[f];if(f){let b=Gh.calcShape(c,d,!1);if(!b)throw new Error("Can't perform binary op on the given tensors");p=b.slice(),h=Ue.size(p);let D=Ue.size(c)===1,T=Ue.size(d)===1,E=c.length>0&&c[c.length-1]%4===0,A=d.length>0&&d[d.length-1]%4===0;v.push(D),v.push(T),v.push(E),v.push(A);let $=1;for(let P=1;P<p.length;P++){let C=c[c.length-P],S=d[d.length-P];if(C===S)$*=C;else break}$%4===0?(_=!0,m=!0):(D||T||E||A)&&(m=!0)}else m=!0;return v.push(m),{name:e,shaderCache:{hint:t+v.map(b=>b.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:b=>sP(b,c,d,p,m,f,_,r,n.dataType,i.dataType,l,o),getRunData:()=>({outputs:[{dims:p,dataType:l}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(Ue.size(p)/4)},...Nt(c,d,p)]})}},qo=(e,t,n,i,r,o)=>{e.compute(lP(t,r??"",e.inputs[0],e.inputs[1],n,i,o))},KO=e=>{qo(e,"Add",(t,n)=>`${t}+${n}`)},qO=e=>{qo(e,"Div",(t,n)=>`${t}/${n}`)},ZO=e=>{qo(e,"Equal",{scalar:(t,n)=>`u32(${t}==${n})`,vector:(t,n)=>`vec4<u32>(${t}==${n})`},void 0,void 0,9)},QO=e=>{qo(e,"Mul",(t,n)=>`${t}*${n}`)},XO=e=>{let t=Ye("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;qo(e,"Pow",{scalar:(n,i)=>`pow_custom(${n},${i})`,vector:(n,i)=>`pow_vector_custom(${n},${i})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},YO=e=>{qo(e,"Sub",(t,n)=>`${t}-${n}`)},JO=e=>{qo(e,"Greater",{scalar:(t,n)=>`u32(${t}>${n})`,vector:(t,n)=>`vec4<u32>(${t}>${n})`},void 0,void 0,9)},eD=e=>{qo(e,"Less",{scalar:(t,n)=>`u32(${t}<${n})`,vector:(t,n)=>`vec4<u32>(${t}<${n})`},void 0,void 0,9)},tD=e=>{qo(e,"GreaterOrEqual",{scalar:(t,n)=>`u32(${t}>=${n})`,vector:(t,n)=>`vec4<u32>(${t}>=${n})`},void 0,void 0,9)},nD=e=>{qo(e,"LessOrEqual",{scalar:(t,n)=>`u32(${t}<=${n})`,vector:(t,n)=>`vec4<u32>(${t}<=${n})`},void 0,void 0,9)}}),cP,uP,dP,fP,rD,iD,FW=ht(()=>{Zt(),sn(),Zr(),ln(),cP=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let n=0,i=e[n],r=i.dataType,o=i.dims.length;e.forEach((l,c)=>{if(c!==n){if(l.dataType!==r)throw new Error("input tensors should be one type");if(l.dims.length!==o)throw new Error("input tensors should have the same shape");l.dims.forEach((d,f)=>{if(f!==t&&d!==i.dims[f])throw new Error("non concat dimensions must match")})}})},uP=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,dP=(e,t)=>{let n=e.length,i=[];for(let r=0;r<n;++r){let o=t.setByOffset("global_idx",e[r].getByIndices("indices"));n===1?i.push(o):r===0?i.push(`if (inputIndex == ${r}u) { ${o} }`):r===n-1?i.push(`else { ${o} }`):i.push(`else if (inputIndex == ${r}) { ${o} }`)}return i.join(`
`)},fP=(e,t,n,i)=>{let r=Ue.size(n),o=new Array(e.length),l=new Array(e.length),c=0,d=[],f=[],p=[{type:12,data:r}];for(let b=0;b<e.length;++b)c+=e[b].dims[t],o[b]=c,f.push(e[b].dims.length),l[b]=Ye(`input${b}`,i,f[b]),d.push("rank"),p.push({type:12,data:o[b]});for(let b=0;b<e.length;++b)p.push(...Nt(e[b].dims));p.push(...Nt(n));let h=It("output",i,n.length),m=h.indicesGet("indices",t),_=Array.from(Array(o.length).keys()).map(b=>`uniforms.sizeInConcatAxis${b}`).join(","),v=b=>`

  ${(()=>{b.registerUniform("outputSize","u32");for(let D=0;D<e.length;D++)b.registerUniform(`sizeInConcatAxis${D}`,"u32");return b.declareVariables(...l,h)})()}

  ${uP(o.length,_)}

  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${h.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${m});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${o.length}u>(${_});
      ${m} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${dP(l,h)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:n,dataType:i}],dispatchGroup:{x:Math.ceil(r/64)},programUniforms:p}),getShaderSource:v}},rD=(e,t)=>{let n=e.inputs,i=n[0].dims,r=Ue.normalizeAxis(t.axis,i.length);cP(n,r);let o=i.slice();o[r]=n.reduce((c,d)=>c+(d.dims.length>r?d.dims[r]:0),0);let l=n.filter(c=>Ue.size(c.dims)>0);e.compute(fP(l,r,o,n[0].dataType),{inputs:l})},iD=e=>Nn({axis:e.axis})}),Ld,Rd,Fd,c1,Gd=ht(()=>{Zt(),sn(),Ld=(e,t,n="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${n}(uniforms.clip_min)), ${t}(${n}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${n}(uniforms.alpha) * value + ${n}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${n}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},Rd=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Fd=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},c1=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[n,i]=e?.activation_params||[.2,.5];return{activation:t,alpha:n,beta:i}}else if(t==="Clip"){let[n,i]=e?.activation_params||[kI,AI];return{activation:t,clipMax:i,clipMin:n}}else if(t==="LeakyRelu"){let[n]=e?.activation_params||[.01];return{activation:t,alpha:n}}return{activation:t}}}),xi,aD,u1=ht(()=>{xi=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},aD=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),oD,NW=ht(()=>{oD=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),e_,d1,f1=ht(()=>{Zt(),sn(),ln(),Gd(),e_=(e,t,n,i,r)=>{let o=i-n;return`
      ${Array.from({length:n}).map((l,c)=>`
      if (${zt(t.shape,c,t.rank)} != 1) {
        ${t.indicesSet(e,c,zt(r,c+o,i))}
      } else {
        ${t.indicesSet(e,c,0)}
      }`).join("")}
`},d1=(e,t,n,i,r=!1,o)=>{let l=e[0].dims,c=e[1].dims,d=l[l.length-2],f=c[c.length-1],p=l[l.length-1],h=Rr(f),m=Rr(p),_=Rr(d),v=Ue.size(n)/h/_,b=e.length>2,D=i?i.slice(0,-2):n.slice(0,-2),T=[Ue.size(D),d,f],E=[{type:12,data:v},{type:12,data:d},{type:12,data:f},{type:12,data:p}];Rd(t,E),E.push(...Nt(D,l,c)),b&&E.push(...Nt(e[2].dims)),E.push(...Nt(T));let A=$=>{let P=a1("batch_dims",e[0].dataType,D.length),C=Ye("a",e[0].dataType,l.length,m),S=Ye("b",e[1].dataType,c.length,h),O=It("output",e[0].dataType,T.length,h),N=gi(O.type.tensor),j=Ld(t,O.type.value,N),X=[C,S],Y="";if(b){let oe=r?h:1;X.push(Ye("bias",e[2].dataType,e[2].dims.length,oe)),Y=`${r?`value += bias[col / ${oe}];`:`value += ${O.type.value}(bias[row + i]);`}`}let K=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Fd(t,K);let se=()=>{let oe=`var a_data: ${C.type.value};`;for(let W=0;W<m;W++)oe+=`
              let b_data${W} = b[(b_offset + (k + ${W}) * uniforms.N + col) / ${h}];`;for(let W=0;W<_;W++){oe+=`a_data = a[(a_offset + (row + ${W}) * uniforms.K + k) / ${m}];`;for(let ne=0;ne<m;ne++)oe+=`
            values[${W}] = fma(${S.type.value}(a_data${m===1?"":`[${ne}]`}), b_data${ne}, values[${W}]);
`}return oe};return`
  ${$.registerUniforms(K).registerInternalVariables(P).declareVariables(...X,O)}
  ${$.mainStart()}
    ${$.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${h})) * ${h};
    var index1 = global_idx / (uniforms.N / ${h});
    let stride1 = uniforms.M / ${_};
    let row = (index1 % stride1) * ${_};
    let batch = index1 / stride1;

    ${n.length===2?"":`let batch_indices = ${P.offsetToIndices("batch")};`}

    var a_indices: ${C.type.indices};
    ${e_("a_indices",C,C.rank-2,P.rank,"batch_indices")}
    ${C.indicesSet("a_indices",C.rank-2,0)}
    ${C.indicesSet("a_indices",C.rank-1,0)}
    let a_offset = ${C.indicesToOffset("a_indices")};

    var b_indices: ${S.type.indices};
    ${e_("b_indices",S,S.rank-2,P.rank,"batch_indices")}
    ${S.indicesSet("b_indices",S.rank-2,0)}
    ${S.indicesSet("b_indices",S.rank-1,0)}
    let b_offset = ${S.indicesToOffset("b_indices")};
    var values: array<${O.type.value}, ${_}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${m}) {
      ${se()}
    }
    for (var i = 0u; i < ${_}u; i++) {
      var value = values[i];
      ${Y}
      ${j}
      let cur_indices = ${O.type.indices}(batch, row + i, col);
      let offset = ${O.indicesToOffset("cur_indices")};
      ${O.setByOffset(`offset / ${h}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${h};${m};${_};${r}`,inputDependencies:b?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:o?o(n):n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:E}),getShaderSource:A}}}),hP,mP,Gx,Ow,pP,Wx,gP,Vy,h1=ht(()=>{Zt(),sn(),ln(),Gd(),f1(),u1(),hP=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,mP=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,Gx=(e,t,n="f32",i,r=!1,o=32,l=!1,c=32)=>{let d=t[1]*e[1],f=t[0]*e[0],p=r?d:o,h=r?o:d,m=p/t[0],_=o/t[1];if(!((r&&m===4&&e[1]===4||!r&&(m===3||m===4))&&p%t[0]===0&&o%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${r} is true, innerElementSize ${m} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${m} must be 3 or 4.
  tileAWidth ${p} must be divisible by workgroupSize[0]${t[0]}. tileInner ${o} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${m}<${n}>, ${p/m}>, ${h}>;
var<workgroup> mm_Bsub: array<array<vec4<${n}>, ${f/e[0]}>, ${o}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${m};
const tileInner = ${o};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${l?"0":"i32(globalId.z)"};
  ${i?`let batchIndices = ${i.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${d};

  let num_tiles = ${l?`${Math.ceil(c/o)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${l?`i32(globalId.z) * ${c}`:"0"};

  var acc: array<vec4<${n}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${_};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${hP(r,i)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${i?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${m===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${mP(r,m)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Ow=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,pP=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",Wx=(e,t,n="f32",i,r=!1,o=32,l=!1,c=32,d=!1)=>{let f=e[1]*t[1],p=e[0]*t[0],h=r?f:o,m=r?o:f;if(!(m%t[1]===0&&h%t[0]===0&&o%t[1]===0))throw new Error(`tileAHight ${m} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${h} must be divisible by workgroupSize[0]${t[0]}, tileInner ${o} must be divisible by workgroupSize[1]${t[1]}`);let _=m/t[1],v=h/t[0],b=o/t[1],D=d?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${f};
    let globalColStart = i32(workgroupId.x) * ${p};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${m}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${h}; inputCol = inputCol + ${t[0]}) {
          ${Ow(r,i)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${o}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${p}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${i?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${n}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${r?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${f};

let tileRowA = i32(localId.y) * ${_};
let tileColA = i32(localId.x) * ${v};
let tileRowB = i32(localId.y) * ${b};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${v}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Ow(r,i)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${b}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${i?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${n}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${pP(r)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${n}, ${h}>, ${m}>;
  var<workgroup> mm_Bsub : array<array<${n}, ${p}>, ${o}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${o};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${l?"0":"i32(globalId.z)"};
    ${i?`let batchIndices = ${i.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${l?`${Math.ceil(c/o)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${l?`i32(globalId.z) * ${c}`:"0"};

    var acc : array<array<${n}, colPerThread>, rowPerThread>;
    ${D}
  }
`},gP=(e,t,n,i,r=!1)=>{let[o,l,c,d]=i,f=gi(i[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${o.type.indices}) -> ${xi(e,f)} {
      var value = ${xi(e,f)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${l.type.indices};
        ${e_("aIndices",l,l.rank-2,o.rank,"batchIndices")}
        ${l.indicesSet("aIndices",l.rank-2,"u32(row)")}
        ${l.indicesSet("aIndices",l.rank-1,"u32(colIn)")}
        value = ${l.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${o.type.indices}) -> ${xi(e,f)} {
      var value = ${xi(e,f)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${c.type.indices};
        ${e_("bIndices",c,c.rank-2,o.rank,"batchIndices")}
        ${c.indicesSet("bIndices",c.rank-2,"u32(row)")}
        ${c.indicesSet("bIndices",c.rank-1,"u32(colIn)")}
        value = ${c.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${xi(e,f)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${r?"bias[colIn]":`${xi(e,f)}(bias[row])`};`:""}
        ${n}
        ${d.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},Vy=(e,t,n,i,r=!1,o)=>{let l=e[0].dims,c=e[1].dims,d=l.slice(0,-2),f=c.slice(0,-2),p=i?i.slice(0,-2):n.slice(0,-2),h=Ue.size(p),m=l[l.length-2],_=l[l.length-1],v=c[c.length-1],b=_%4===0&&v%4===0,D=m<=8?[4,1,1]:[4,4,1],T=[8,8,1],E=[Math.ceil(v/T[0]/D[0]),Math.ceil(m/T[1]/D[1]),Math.ceil(h/T[2]/D[2])],A=b?4:1,$=[...d,m,_/A],P=$.length,C=[...f,_,v/A],S=C.length,O=[h,m,v/A],N=[{type:6,data:m},{type:6,data:v},{type:6,data:_}];Rd(t,N),N.push(...Nt(p,$,C));let j=["rank","rank"],X=e.length>2;X&&(N.push(...Nt(e[2].dims)),j.push("rank")),N.push(...Nt(O));let Y=K=>{let se=p.length,oe=a1("batchDims",e[0].dataType,se,1),W=gi(e[0].dataType),ne=Ye("a",e[0].dataType,P,A),ae=Ye("b",e[1].dataType,S,A),ge=It("result",e[0].dataType,O.length,A),ye=[ne,ae];if(X){let ce=r?A:1;ye.push(Ye("bias",e[2].dataType,e[2].dims.length,ce))}let G=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Fd(t,G);let H=gi(ge.type.tensor),V=Ld(t,ge.type.value,H),U=gP(A,X,V,[oe,ne,ae,ge],r);return`
  ${K.registerUniforms(G).registerInternalVariables(oe).declareVariables(...ye,ge)}
  ${U}
  ${b?Gx(D,T,W,oe):Wx(D,T,W,oe)}
                   `};return{name:"MatMul",shaderCache:{hint:`${D};${t.activation};${b};${r}`,inputDependencies:j},getRunData:()=>({outputs:[{dims:o?o(n):n,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:N}),getShaderSource:Y}}}),_P,sD,jW=ht(()=>{Zt(),Gl(),ln(),Gd(),u1(),NW(),h1(),_P=(e,t,n,i,r=!1,o,l=4,c=4,d=4,f="f32")=>{let p=N=>{switch(N){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${f}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${N} is not supported.`)}},h=N=>{switch(N){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${N} is not supported.`)}},m=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,_=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,v=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",b=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",D=e?"row":"col",T=e?"col":"row",E=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${D} / outWidth;
    let outCol = ${D} % outWidth;

    let WRow = ${T} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${T} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${T} % inChannels;
    var resData = ${xi(l,f)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${v} && xCol >= 0 && xCol < ${b}) {
      ${m}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${p(l)}
    }
    return resData;`,A=e?t&&i?`
    let col = colIn * ${l};
    ${E}`:`
    let col = colIn * ${l};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${E}
    }
    return ${xi(l,f)}(0.0);`:i&&n?`
    let col = colIn * ${l};
    ${E}`:`
    let col = colIn * ${l};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${E}
    }
    return ${xi(l,f)}(0.0);`,$=e?i&&n?h(c):`
    let col = colIn * ${c};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${h(c)}
    }
    return ${xi(c,f)}(0.0);`:`
    let col = colIn * ${c};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${h(c)}
    }
    return ${xi(c,f)}(0.0);`,P=xi(d,f),C=xi(e?l:c,f),S=xi(e?c:l,f),O=Ld(o,P,f);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${C} {
      ${e?A:$}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${S} {
      ${e?$:A}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${P}) {
      let col = colIn * ${d};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${_}
      ${aD(r)}
      ${O}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},sD=(e,t,n,i,r,o,l,c,d)=>{let f=t.format==="NHWC",p=f?e[0].dims[3]:e[0].dims[1],h=n[0],m=f?n[2]:n[3],_=f?n[1]:n[2],v=f?n[3]:n[1],b=f&&(p%4===0||p%3===0)&&v%4===0,D=f?v:m*_,T=f?m*_:v,E=[8,8,1],A=i<=8?[4,1,1]:[4,4,1],$=[Math.ceil(D/E[0]/A[0]),Math.ceil(T/E[1]/A[1]),Math.ceil(h/E[2]/A[2])];En("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${$}`);let P=b?f&&p%4!==0?3:4:1,C=E[1]*A[1],S=E[0]*A[0],O=Math.max(E[0]*P,E[1]),N=i%C===0,j=r%S===0,X=o%O===0,Y=b?[P,4,4]:[1,1,1],K=[{type:6,data:i},{type:6,data:r},{type:6,data:o},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];Rd(t,K),K.push(...Nt(e[0].dims,e[1].dims));let se=["rank","rank"];l&&(K.push(...Nt(e[2].dims)),se.push("rank")),K.push(...Nt(n));let oe=W=>{let ne=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Fd(t,ne);let ae=b?4:1,ge=gi(e[0].dataType),ye=`
      fn setOutputAtIndex(flatIndex : i32, value : ${b?`vec4<${ge}>`:ge}) {
        result[flatIndex] = ${b?`vec4<${ge}>`:ge}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${b?`vec4<${ge}>`:ge}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${b?"/ 4":""}, value);
      }`,G=Ye("x",e[0].dataType,e[0].dims.length,P===3?1:P),H=Ye("w",e[1].dataType,e[1].dims.length,ae),V=[G,H],U=It("result",e[0].dataType,n.length,ae);if(l){let ce=Ye("bias",e[2].dataType,e[2].dims.length,ae);V.push(ce),ye+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${b?`vec4<${ge}>`:ge} {
          return bias[coords.${f?"w":"y"}${b?"/ 4":""}];
        }`}return`
        ${oD("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${W.registerUniforms(ne).declareVariables(...V,U)}
        ${ye}
        ${_P(f,N,j,X,l,t,Y[0],Y[1],Y[2],ge)}
        ${b?Gx(A,E,ge,void 0,!f,O):Wx(A,E,ge,void 0,!f,O,!1,void 0,c)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${P};${b};${N};${j};${X};${C};${S};${O}`,inputDependencies:se},getRunData:()=>({outputs:[{dims:d?d(n):n,dataType:e[0].dataType}],dispatchGroup:{x:$[0],y:$[1],z:$[2]},programUniforms:K}),getShaderSource:oe}}}),vP,Dw,Og,yP,zw,bP,lD,cD,BW=ht(()=>{Zt(),Gl(),sn(),ln(),Gd(),u1(),vP=e=>{let t=1;for(let n=0;n<e.length;n++)t*=e[n];return t},Dw=e=>typeof e=="number"?[e,e,e]:e,Og=(e,t)=>t<=1?e:e+(e-1)*(t-1),yP=(e,t,n,i=1)=>{let r=Og(t,i);return Math.floor((e[0]*(n-1)-n+r)/2)},zw=(e,t,n,i,r)=>{r==null&&(r=yP(e,t[0],i[0]));let o=[0,0,0,n];for(let l=0;l<3;l++)e[l]+2*r>=t[l]&&(o[l]=Math.trunc((e[l]-t[l]+2*r)/i[l]+1));return o},bP=(e,t,n,i,r,o,l,c,d,f)=>{let p,h,m,_;if(e==="VALID"&&(e=0),typeof e=="number"){p={top:e,bottom:e,left:e,right:e,front:e,back:e};let v=zw([t,n,i,1],[c,d,f],1,[r,o,l],e);h=v[0],m=v[1],_=v[2]}else if(Array.isArray(e)){if(!e.every((b,D,T)=>b===T[0]))throw Error(`Unsupported padding parameter: ${e}`);p={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let v=zw([t,n,i,1],[c,d,f],1,[r,o,l],e[0]);h=v[0],m=v[1],_=v[2]}else if(e==="SAME_UPPER"){h=Math.ceil(t/r),m=Math.ceil(n/o),_=Math.ceil(i/l);let v=(h-1)*r+c-t,b=(m-1)*o+d-n,D=(_-1)*l+f-i,T=Math.floor(v/2),E=v-T,A=Math.floor(b/2),$=b-A,P=Math.floor(D/2),C=D-P;p={top:A,bottom:$,left:P,right:C,front:T,back:E}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:p,outDepth:h,outHeight:m,outWidth:_}},lD=(e,t,n,i,r,o=!1,l="channelsLast")=>{let c,d,f,p,h;if(l==="channelsLast")[c,d,f,p,h]=e;else if(l==="channelsFirst")[c,h,d,f,p]=e;else throw new Error(`Unknown dataFormat ${l}`);let[m,,_,v,b]=t,[D,T,E]=Dw(n),[A,$,P]=Dw(i),C=Og(_,A),S=Og(v,$),O=Og(b,P),{padInfo:N,outDepth:j,outHeight:X,outWidth:Y}=bP(r,d,f,p,D,T,E,C,S,O),K=o?m*h:m,se=[0,0,0,0,0];return l==="channelsFirst"?se=[c,K,j,X,Y]:l==="channelsLast"&&(se=[c,j,X,Y,K]),{batchSize:c,dataFormat:l,inDepth:d,inHeight:f,inWidth:p,inChannels:h,outDepth:j,outHeight:X,outWidth:Y,outChannels:K,padInfo:N,strideDepth:D,strideHeight:T,strideWidth:E,filterDepth:_,filterHeight:v,filterWidth:b,effectiveFilterDepth:C,effectiveFilterHeight:S,effectiveFilterWidth:O,dilationDepth:A,dilationHeight:$,dilationWidth:P,inShape:e,outShape:se,filterShape:t}},cD=(e,t,n,i,r,o)=>{let l=o==="channelsLast";l?e[0].dims[3]:e[0].dims[1];let c=[64,1,1],d={x:n.map((D,T)=>T)},f=[Math.ceil(vP(d.x.map(D=>n[D]))/c[0]),1,1];En("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${f}`);let p=1,h=Ue.size(n),m=[{type:12,data:h},{type:12,data:i},{type:12,data:r},{type:12,data:t.strides},{type:12,data:t.dilations}];Rd(t,m),m.push(...Nt(e[0].dims,e[1].dims));let _=["rank","rank"],v=e.length===3;v&&(m.push(...Nt(e[2].dims)),_.push("rank")),m.push(...Nt(n));let b=D=>{let T=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:i.length},{name:"pads",type:"u32",length:r.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];Fd(t,T);let E=1,A=gi(e[0].dataType),$=Ye("x",e[0].dataType,e[0].dims.length,p),P=Ye("W",e[1].dataType,e[1].dims.length,E),C=[$,P],S=It("result",e[0].dataType,n.length,E),O="";if(v){let X=Ye("bias",e[2].dataType,e[2].dims.length,E);C.push(X),O+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${A} {
          return bias[${l?zt("coords",4,5):zt("coords",1,5)}];
        }`}let N=xi(p,A),j=Ld(t,N,A);return`
            ${O}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${$.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${P.getByIndices("aIndices")};
            }
          ${D.registerUniforms(T).declareVariables(...C,S)}
          ${D.mainStart()}
          ${D.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${S.offsetToIndices("global_idx")};
              let batch = ${zt("coords",0,$.rank)};
              let d2 = ${l?zt("coords",$.rank-1,$.rank):zt("coords",1,$.rank)};
              let xFRCCorner = vec3<u32>(${l?zt("coords",1,$.rank):zt("coords",2,$.rank)},
              ${l?zt("coords",2,$.rank):zt("coords",3,$.rank)},
              ${l?zt("coords",3,$.rank):zt("coords",4,$.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${l?zt("uniforms.x_shape",1,$.rank):zt("uniforms.x_shape",2,$.rank)};
              let xShapeZ = ${l?zt("uniforms.x_shape",2,$.rank):zt("uniforms.x_shape",3,$.rank)};
              let xShapeW = ${l?zt("uniforms.x_shape",3,$.rank):zt("uniforms.x_shape",4,$.rank)};
              let xShapeU = ${l?zt("uniforms.x_shape",4,$.rank):zt("uniforms.x_shape",1,$.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${l?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${l?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${l?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${l?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${v?"value = value + getBiasByOutputCoords(coords)":""};
              ${j}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${l};${p};${v}`,inputDependencies:_},getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:f[0],y:f[1],z:f[2]},programUniforms:m}),getShaderSource:b}}}),uD,dD,UW=ht(()=>{Zt(),sn(),ln(),Gd(),uD=(e,t,n,i)=>{let r=e.length>2,o=r?"value += b[output_channel];":"",l=e[0].dims,c=e[1].dims,d=t.format==="NHWC",f=d?n[3]:n[1],p=f/t.group,h=d&&p>=4?Rr(f):1,m=Ue.size(n)/h,_=[{type:12,data:m},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:p}];Rd(t,_),_.push(...Nt(l,[c[0],c[1],c[2],c[3]/h]));let v=r?["rank","rank","rank"]:["rank","rank"];_.push(...Nt([n[0],n[1],n[2],n[3]/h]));let b=D=>{let T=It("output",e[0].dataType,n.length,h),E=gi(T.type.tensor),A=Ld(t,T.type.value,E),$=Ye("x",e[0].dataType,l.length),P=Ye("w",e[1].dataType,c.length,h),C=[$,P];r&&C.push(Ye("b",e[2].dataType,e[2].dims,h));let S=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];Fd(t,S);let O=d?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${$.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${P.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${$.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${P.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${D.registerUniforms(S).declareVariables(...C,T)}

  ${D.mainStart()}
    ${D.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${T.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${d?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${d?1:2}], outputIndices[${d?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${h} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${d?2:1}];

    var value: ${T.type.value} = ${T.type.value}(0);
    ${O}
    ${o}
    ${A}
    ${T.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${h}`,inputDependencies:v},getRunData:()=>({outputs:[{dims:i?i(n):n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:_}),getShaderSource:b}},dD=(e,t,n,i)=>{let r=e.length>2,o=Rr(n[3]),l=Rr(n[2]),c=Ue.size(n)/o/l,d=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/o],f=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/o],p=[n[0],n[1],n[2],n[3]/o],h=[{type:12,data:c},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];Rd(t,h),h.push(...Nt(d,f,p));let m=(l-1)*t.strides[1]+f[1],_=v=>{let b=It("output",e[0].dataType,p.length,o),D=gi(b.type.tensor),T=Ld(t,b.type.value,D),E=Ye("x",e[0].dataType,d.length,o),A=Ye("w",e[1].dataType,f.length,o),$=[E,A];r&&$.push(Ye("b",e[2].dataType,e[2].dims,o));let P=r?"value += b[output_channel];":"",C=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Fd(t,C),`
  ${v.registerUniforms(C).declareVariables(...$,b)}
  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${l}u;
    let col = (index1 % width1) * ${l}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${E.type.value}, ${m}>;
    var values: array<${b.type.value}, ${l}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${f[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${m}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${E.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${E.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${f[1]}; w_width++) {
          let w_val = ${A.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${l}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${l}u; i++) {
      var value = values[i];
      ${P}
      ${T}
      ${b.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${o};${l};${m};${f[0]};${f[1]}`,inputDependencies:r?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:i?i(n):n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:h}),getShaderSource:_}}}),wP,Xv,xP,Yv,Hx,Lw,MP,TP,Kx,VW=ht(()=>{sn(),jW(),BW(),h1(),UW(),Gd(),f1(),du(),wP=(e,t,n,i,r,o)=>{let l=e[0],c=e.slice(o?1:2,o?3:4),d=c.length,f=t[0],p=t.slice(2).map((m,_)=>m+(m-1)*(n[_]-1)),h=c.map((m,_)=>m+i[_]+i[_+d]).map((m,_)=>Math.floor((m-p[_]+r[_])/r[_]));return h.splice(0,0,l),h.splice(o?3:1,0,f),h},Xv=[2,3,1,0],xP=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let n=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],i=e[1].dims[1]*t.group;if(n!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let r=e[0].dims.length-2;if(t.dilations.length!==r)throw new Error(`dilations should be ${r}D`);if(t.strides.length!==r)throw new Error(`strides should be ${r}D`);if(t.pads.length!==r*2)throw new Error(`pads should be ${r*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},Yv=(e,t)=>{let n=e.kernelShape.slice();n.length<t[1].dims.length-2&&n.push(...Array(t[1].dims.length-2-n.length).fill(0));for(let o=2;o<t[1].dims.length;++o)n[o-2]===0&&(n[o-2]=t[1].dims[o]);let i=e.pads.slice();By.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,n,i,e.format==="NHWC",e.autoPad);let r=Object.assign({},e);return Object.assign(r,{kernelShape:n,pads:i}),r},Hx=e=>{let t=c1(e),n=e.format,i=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],r=e.dilations,o=e.group,l=e.kernel_shape,c=e.pads,d=e.strides,f=e.w_is_const();return{autoPad:i,format:n,dilations:r,group:o,kernelShape:l,pads:c,strides:d,wIsConst:f,...t,cacheKey:`${e.format};${t.activation};`}},Lw=(e,t,n,i)=>{let r=n.format==="NHWC",o=wP(t[0].dims,t[1].dims,n.dilations,n.pads,n.strides,r);if(n.group!==1){let C=[t[0]];if(r){let S=e.kernelCustomData.wT??e.compute(Va(t[1],Xv),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=S),C.push(S)}else C.push(t[1]);t.length===3&&C.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&r&&t[1].dims[0]===n.group&&t[1].dims[1]===1&&n.dilations[0]===1&&n.dilations[1]===1?e.compute(dD(C,n,o,i),{inputs:C}):e.compute(uD(C,n,o,i),{inputs:C});return}let l=t.length===3,c=t[0].dims[r?1:2],d=t[0].dims[r?2:3],f=t[0].dims[r?3:1],p=t[1].dims[2],h=t[1].dims[3],m=o[r?1:2],_=o[r?2:3],v=o[r?3:1],b=r&&p===c&&h===d&&n.pads[0]===0&&n.pads[1]===0;if(b||p===1&&h===1&&n.dilations[0]===1&&n.dilations[1]===1&&n.strides[0]===1&&n.strides[1]===1&&n.pads[0]===0&&n.pads[1]===0){let C=o[0],S,O,N,j=[];if(r){let K=e.kernelCustomData.wT??e.compute(Va(t[1],Xv),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];if(n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=K),b){let se=c*d*f;S=t[0].reshape([1,C,se]),O=K.reshape([1,se,v]),N=[1,C,v]}else S=t[0].reshape([C,c*d,f]),O=K.reshape([1,f,v]),N=[C,m*_,v];j.push(S),j.push(O)}else S=t[0].reshape([C,f,c*d]),O=t[1].reshape([1,v,f]),N=[C,v,m*_],j.push(O),j.push(S);l&&j.push(t[2]);let X=N[2],Y=j[0].dims[j[0].dims.length-1];X<8&&Y<8?e.compute(d1(j,n,o,N,r,i),{inputs:j}):e.compute(Vy(j,n,o,N,r,i),{inputs:j});return}let D=!0,T=e.kernelCustomData.wT??e.compute(Va(t[1],Xv),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=T);let E=[t[0],T];l&&E.push(t[2]);let A=r?m*_:v,$=r?v:m*_,P=p*h*f;e.compute(sD(E,n,o,A,$,P,l,D,i),{inputs:E})},MP=(e,t)=>{let n=t.format==="NHWC",i=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&i.push(e.inputs[2]);let r=[0,t.pads[0],0,t.pads[1]],o=[1].concat(t.strides),l=[1].concat(t.dilations),c=[1].concat(t.kernelShape),d=Yv({...t,pads:r,strides:o,dilations:l,kernelShape:c},i);Lw(e,i,d,f=>n?[f[0],f[2],f[3]]:[f[0],f[1],f[3]])},TP=(e,t,n)=>{let i=n.format==="NHWC"?"channelsLast":"channelsFirst",r=Yv(n,t),o=n.autoPad==="NOTSET"?n.pads:n.autoPad,l=lD(t[0].dims,t[1].dims,n.strides,n.dilations,o,!1,i);e.compute(cD(t,r,l.outShape,[l.filterDepth,l.filterHeight,l.filterWidth],[l.padInfo.front,l.padInfo.top,l.padInfo.left],i))},Kx=(e,t)=>{if(xP(e.inputs,t),e.inputs[0].dims.length===3)MP(e,t);else if(e.inputs[0].dims.length===5)TP(e,e.inputs,t);else{let n=Yv(t,e.inputs);Lw(e,e.inputs,n)}}}),fD,GW=ht(()=>{Zt(),Gl(),sn(),ln(),fD=(e,t,n)=>{let i=e.length>2,r=t.outputShape,o=t.format==="NHWC",l=t.group,c=e[1].dims,d=c[2]/l,f=c[3],p=o?Rr(d):1,h=o&&f===1&&d>=4,m=h?Math.floor(d/4)*4:Math.floor(d/p)*p,_=d-m,v=o?Rr(f):1,b=o?f===1?p:v:1,D=Ue.size(r)/v,T=[Math.ceil(D/64),1,1];En("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${T}`);let E=["rank","rank"],A=[t.strides[0],t.strides[1]],$=[t.kernelShape[o?1:2],t.kernelShape[o?2:3]],P=[t.dilations[0],t.dilations[1]],C=[$[0]+(t.dilations[0]<=1?0:(t.kernelShape[o?1:2]-1)*(t.dilations[0]-1)),$[1]+(t.dilations[1]<=1?0:(t.kernelShape[o?2:3]-1)*(t.dilations[1]-1))],S=[C[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),C[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],O=[{type:12,data:D},{type:12,data:A},{type:12,data:$},{type:12,data:P},{type:12,data:C},{type:6,data:S},{type:12,data:m},{type:12,data:d},{type:12,data:f},...Nt(e[0].dims,e[1].dims)];i&&(O.push(...Nt(e[2].dims)),E.push("rank")),O.push(...Nt(r));let N=j=>{let X=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:A.length},{name:"filter_dims",type:"u32",length:$.length},{name:"dilations",type:"u32",length:$.length},{name:"effective_filter_dims",type:"u32",length:C.length},{name:"pads",type:"i32",length:S.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],Y=gi(e[0].dataType),K=o?1:2,se=o?2:3,oe=o?3:1,W=Ye("W",e[1].dataType,e[1].dims.length,b),ne=Ye("Dy",e[0].dataType,e[0].dims.length,p),ae=[ne,W];i&&ae.push(Ye("bias",e[2].dataType,[r[oe]].length,v));let ge=It("result",e[0].dataType,r.length,v),ye=()=>{let V="";if(h)p===4?V+=`
        let xValue = ${ne.getByOffset("x_offset")};
        let wValue = ${W.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:p===2?V+=`
          dotProd = dotProd + dot(vec4<${Y}>(${ne.getByOffset("x_offset")}, ${ne.getByOffset("x_offset + 1u")}), vec4<${Y}>(${W.getByOffset("w_offset")}, ${W.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:p===1&&(V+=`
          dotProd = dotProd + dot(vec4<${Y}>(${ne.getByOffset("x_offset")}, ${ne.getByOffset("x_offset + 1u")}, ${ne.getByOffset("x_offset + 2u")}, ${ne.getByOffset("x_offset + 3u")}), vec4<${Y}>(${W.getByOffset("w_offset")}, ${W.getByOffset("w_offset + 1u")}, ${W.getByOffset("w_offset + 2u")}, ${W.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(V+=`
                  let xValue = ${o?ne.getByOffset(`${ne.indicesToOffset(`${ne.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${p}`):ne.get("batch","inputChannel","idyR","idyC")};
        `,p===1)V+=`
          let w_offset = ${W.indicesToOffset(`${W.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${W.getByOffset(`w_offset / ${b}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let U=0;U<p;U++)V+=`
            let wValue${U} = ${W.getByOffset(`${W.indicesToOffset(`${W.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${U}, wOutChannel)`)} / ${b}`)};
            dotProd = dotProd + xValue[${U}] * wValue${U};`;return V},G=()=>{if(_===0)return"";if(!h)throw new Error(`packInputAs4 ${h} is not true.`);let V="";if(p===1){V+="dotProd = dotProd";for(let U=0;U<_;U++)V+=`
            + ${ne.getByOffset(`x_offset + ${U}`)} * ${W.getByOffset(`w_offset + ${U}`)}`;V+=";"}else if(p===2){if(_!==2)throw new Error(`Invalid inputChannelsRemainder ${_}.`);V+=`
          let xValue = ${ne.getByOffset("x_offset")};
          let wValue = ${W.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return V},H=`
            let outputIndices = ${ge.offsetToIndices(`global_idx * ${v}`)};
            let batch = ${ge.indicesGet("outputIndices",0)};
            let d1 = ${ge.indicesGet("outputIndices",oe)};
            let r = ${ge.indicesGet("outputIndices",K)};
            let c = ${ge.indicesGet("outputIndices",se)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${ge.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${Y}(dyRCorner) + ${Y}(wR)) / ${Y}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${Y}(uniforms.Dy_shape[${K}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${Y}(dyCCorner) + ${Y}(wC)) / ${Y}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${Y}(uniforms.Dy_shape[${se}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${h?`
                var x_offset = ${ne.indicesToOffset(`${ne.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${p};
                var w_offset = ${W.indicesToOffset(`${W.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${b};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${h?4:p}) {
                  ${ye()}
                  inputChannel = inputChannel + ${h?4:p};
                }
                ${G()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${i?` + bias[d1 / ${v}]`:""};
            ${ge.setByOffset("global_idx","value")};
          `;return`
    ${j.registerUniforms(X).declareVariables(...ae,ge)}
      ${j.mainStart()}
      ${j.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${H}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${p}${b}${v}${h}${_}`,inputDependencies:E},getRunData:()=>({dispatchGroup:{x:T[0],y:T[1],z:T[2]},outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],programUniforms:O}),getShaderSource:N}}}),SP,EP,$P,Rw,hD,PP,Fw,CP,mD,WW=ht(()=>{GW(),Gd(),du(),SP=(e,t,n,i,r,o)=>(e-1)*t+n+(i-1)*r+1-o,EP=(e,t,n,i,r)=>{let o=Math.floor(e/2);t==="SAME_UPPER"?(n[i]=o,n[r]=e-o):t==="SAME_LOWER"&&(n[i]=e-o,n[r]=o)},$P=(e,t,n,i,r,o,l,c,d,f)=>{let p=e.length-2,h=f.length===0;d.length<p&&d.push(...Array(p-d.length).fill(0));let m=e[0],_=t[c?3:1]*r;for(let v=0,b=e.length-p-(c?1:0);v<p;++v,++b){let D=e[b],T=h?D*l[v]:f[v],E=SP(D,l[v],o[v],t[b],n[v],T);EP(E,i,o,v,v+p),h&&f.push(l[v]*(D-1)+d[v]+(t[b]-1)*n[v]+1-o[v]-o[v+p])}f.splice(0,0,m),f.splice(c?3:1,0,_)},Rw=(e,t)=>{let n=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((h,m)=>h*m,1)===0){n.length=0;for(let h=2;h<t[1].dims.length;++h)n.push(t[1].dims[h])}let i=e.format==="NHWC";n.splice(0,0,t[1].dims[0]),n.splice(i?3:1,0,t[1].dims[1]);let r=e.pads.slice(),o=e.outputShape.slice(),l=e.outputPadding.slice(),c=t[0].dims,d=e.dilations.slice();if(d.reduce((h,m)=>h+m,0)===0){let h=t[0].dims.length-2;d=new Array(h).fill(1)}let f=e.strides.slice();if(f.reduce((h,m)=>h+m,0)===0){let h=t[0].dims.length-2;f=new Array(h).fill(1)}$P(c,n,d,e.autoPad,e.group,r,f,i,l,o);let p=Object.assign({},e);return Object.assign(p,{kernelShape:n,pads:r,outputPadding:l,outputShape:o,dilations:d,strides:f}),p},hD=e=>{let t=c1(e),n=e.format,i=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],r=e.dilations,o=e.group,l=e.kernelShape,c=e.pads,d=e.strides,f=e.wIsConst(),p=e.outputPadding,h=e.outputShape;return{autoPad:i,format:n,dilations:r,group:o,kernelShape:l,outputPadding:p,outputShape:h,pads:c,strides:d,wIsConst:f,...t,cacheKey:`${e.format};${t.activation};`}},PP=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let n=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],i=e[1].dims[0];if(n!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let r=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==r))throw new Error("invalid bias");let o=e[0].dims.length-2;if(t.dilations.reduce((l,c)=>l+c,0)>0&&t.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(t.strides.reduce((l,c)=>l+c,0)>0&&t.strides.length!==o)throw new Error(`strides should be ${o}D`);if(t.pads.reduce((l,c)=>l+c,0)>0&&t.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(t.outputPadding.length!==o&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${o}D`);if(t.kernelShape.reduce((l,c)=>l+c,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Fw=(e,t,n,i)=>{let r=e.kernelCustomData.wT??e.compute(Va(t[1],[2,3,0,1]),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=r);let o=[t[0],r];t.length===3&&o.push(t[2]),e.compute(fD(o,n,i),{inputs:o})},CP=(e,t)=>{let n=t.format==="NHWC",i=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&i.push(e.inputs[2]);let r=t.kernelShape;(r.length===0||r[0]===0)&&(r=[e.inputs[1].dims[2]]);let o=t.dilations;(o.length===0||o[0]===0)&&(o=[1]);let l=t.strides;(l.length===0||l[0]===0)&&(l=[1]);let c=t.pads;c.length===0&&(c=[0,0]),c=[0,c[0],0,c[1]],l=[1].concat(l),o=[1].concat(o),r=[1].concat(r);let d=t.outputPadding;d=[0].concat(d);let f=Rw({...t,pads:c,strides:l,dilations:o,kernelShape:r,outputPadding:d},i);Fw(e,i,f,p=>n?[p[0],p[2],p[3]]:[p[0],p[1],p[3]])},mD=(e,t)=>{if(PP(e.inputs,t),e.inputs[0].dims.length===3)CP(e,t);else{let n=Rw(t,e.inputs);Fw(e,e.inputs,n)}}}),kP,pD,gD,HW=ht(()=>{Zt(),sn(),Zr(),ln(),kP=(e,t,n,i)=>{let r=Ue.size(t),o=t.length,l=Ye("input",e,o),c=It("output",e,o),d=n.dataType===6?n.getInt32Array()[0]:Number(n.getBigInt64Array()[0]),f=Ue.normalizeAxis(d,o),p=h=>{let m=` i32(${l.indicesGet("inputIndices","uniforms.axis")}) `,_=zt("uniforms.input_shape","uniforms.axis",o),v=i.reverse?m+(i.exclusive?" + 1":""):"0",b=i.reverse?_:m+(i.exclusive?"":" + 1");return`
                ${h.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(l,c)}
                ${h.mainStart()}
                  ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${c.offsetToIndices("global_idx")};
                  var sum = ${c.type.value}(0);
                  let first : i32 = ${v};
                  let last : i32 = ${b};
                  for (var i : i32 = first; i < last; i++) {
                    ${l.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${l.getByIndices("inputIndices")};
                  }
                  ${c.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:i.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(r/64)},programUniforms:[{type:12,data:r},{type:12,data:f},...Nt(t,t)]}),getShaderSource:p}},pD=(e,t)=>{let n=e.inputs[0].dims,i=e.inputs[0].dataType,r=e.inputs[1];e.compute(kP(i,n,r,t),{inputs:[0]})},gD=e=>{let t=e.exclusive===1,n=e.reverse===1;return Nn({exclusive:t,reverse:n})}}),AP,IP,OP,_D,vD,KW=ht(()=>{Zt(),sn(),Zr(),ln(),AP=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},IP=(e,t,n,i)=>{let r=[];r.push(`fn perm(i: ${i.type.indices}) -> ${n.type.indices} {
    var a: ${n.type.indices};`);for(let o=0;o<t;++o)r.push(n.indicesSet("a",e[o],`i[${o}]`));return r.push("return a;}"),r.join(`
`)},OP=(e,t)=>{let n,i,r,o,l,c,d=t.format==="NHWC",f=t.blocksize,p=t.mode==="DCR";d?([n,i,r,o]=e.dims,l=p?[n,i,r,f,f,o/f**2]:[n,i,r,o/f**2,f,f],c=p?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([n,i,r,o]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],l=p?[n,f,f,o/f**2,i,r]:[n,o/f**2,f,f,i,r],c=p?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let h=e.reshape(l),m=h.dims.length,_=e.dataType,v=Ye("a",_,m),b=It("output",_,m),D=T=>`
  ${T.registerUniform("output_size","u32").declareVariables(v,b)}

  ${IP(c,m,v,b)}

  ${T.mainStart()}
    ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${b.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${b.setByOffset("global_idx",v.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:T=>{let E=d?[n,i*f,r*f,o/f**2]:[n,o/f**2,i*f,r*f],A=Ue.size(E),$=h.dims,P=Ue.sortBasedOnPerm($,c);return{outputs:[{dims:E,dataType:T[0].dataType}],dispatchGroup:{x:Math.ceil(A/64)},programUniforms:[{type:12,data:A},...Nt($,P)]}},getShaderSource:D}},_D=(e,t)=>{AP(e.inputs),e.compute(OP(e.inputs[0],t))},vD=e=>Nn({blocksize:e.blocksize,mode:e.mode,format:e.format})}),Jv,Dg,Nw,DP,zP,LP,RP,jw,FP,yD,bD,qW=ht(()=>{Zt(),sn(),Zr(),ln(),Jv="[a-zA-Z]|\\.\\.\\.",Dg="("+Jv+")+",Nw="^"+Dg+"$",DP="("+Dg+",)*"+Dg,zP="^"+DP+"$",LP=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let n=this.symbolToIndices.get(e);n===void 0?n=[t]:n.push(t),this.symbolToIndices.set(e,n)}},RP=class{constructor(e,t){this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[n,i]=t.includes("->")?t.split("->",2):[t,""];if(!n.match(RegExp(zP)))throw new Error("Invalid LHS term");if(n.split(",").forEach((r,o)=>{let l=e[o].dims.slice();if(!r.match(RegExp(Nw)))throw new Error("Invalid LHS term");let c=this.processTerm(r,!0,l,o);this.lhs.push(c)}),i==="")i+=[...this.symbolToInfo.entries()].filter(([r,o])=>o.count===1||r==="...").map(([r])=>r).join("");else if(!i.match(RegExp(Dg)))throw new Error("Invalid RHS");i.match(RegExp(Jv,"g"))?.forEach(r=>{if(r==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let o=this.symbolToInfo.get(r);if(o===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(o.dimValue)}}),this.rhs=this.processTerm(i,!1,this.outputDims)}addSymbol(e,t,n){let i=this.symbolToInfo.get(e);if(i!==void 0){if(i.dimValue!==t&&i.count!==1)throw new Error("Dimension mismatch");i.count++,i.inputIndices.push(n)}else i={count:1,dimValue:t,inputIndices:[n]};this.symbolToInfo.set(e,i)}processTerm(e,t,n,i=-1){let r=n.length,o=!1,l=[],c=0;if(!e.match(RegExp(Nw))&&!t&&e!=="")throw new Error("Invalid LHS term");let d=e.match(RegExp(Jv,"g")),f=new LP(i);return d?.forEach((p,h)=>{if(p==="..."){if(o)throw new Error("Only one ellipsis is allowed per input term");o=!0;let m=r-d.length+1;if(m<0)throw new Error("Ellipsis out of bounds");if(l=n.slice(c,c+m),this.hasEllipsis){if(this.ellipsisDims.length!==l.length||this.ellipsisDims.toString()!==l.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=l;else throw new Error("Ellipsis must be specified in the LHS");for(let _=0;_<l.length;_++){let v=String.fromCharCode(48+_);f.addSymbol(v,h+_),this.addSymbol(v,n[c++],i)}}else f.addSymbol(p,h+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(p,n[c++],i)}),f}},jw=e=>e+"_max",FP=(e,t,n,i)=>{let r=e.map(f=>f.length).map((f,p)=>Ye(`input${p}`,t,f)),o=Ue.size(i),l=It("output",t,i.length),c=[...n.symbolToInfo.keys()].filter(f=>!n.rhs.symbolToIndices.has(f)),d=f=>{let p=[],h="var prod = 1.0;",m="var sum = 0.0;",_="sum += prod;",v=[],b=[],D=[],T=[],E=n.symbolToInfo.size===n.rhs.symbolToIndices.size;n.symbolToInfo.forEach(($,P)=>{if(n.rhs.symbolToIndices.has(P)){let C=n.rhs.symbolToIndices.get(P)?.[0];C!==void 0&&n.lhs.forEach((S,O)=>{if($.inputIndices.includes(O)){let N=S.symbolToIndices.get(P);if(N===void 0)throw new Error("Invalid symbol error");N.forEach(j=>{p.push(`${r[O].indicesSet(`input${O}Indices`,j,l.indicesGet("outputIndices",C))}`)})}})}else n.lhs.forEach((C,S)=>{if($.inputIndices.includes(S)){let O=C.symbolToIndices.get(P);if(O===void 0)throw new Error("Invalid symbol error");O.forEach(N=>{v.push(`${r[S].indicesSet(`input${S}Indices`,N,`${P}`)}`)}),T.push(`prod *= ${r[S].getByIndices(`input${S}Indices`)};`)}}),b.push(`for(var ${P}: u32 = 0; ${P} < uniforms.${jw(P)}; ${P}++) {`),D.push("}")});let A=E?[...p,`let sum = ${r.map(($,P)=>$.getByIndices(`input${P}Indices`)).join(" * ")};`]:[...p,m,...b,...v,h,...T,_,...D];return`
            ${f.registerUniforms(c.map($=>({name:`${jw($)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...r,l)}

            ${f.mainStart()}
            ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${l.offsetToIndices("global_idx")};
            ${r.map(($,P)=>`var input${P}Indices: ${r[P].type.indices};`).join(`
`)}
            ${A.join(`
`)};
            ${l.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:n.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let f=c.filter(h=>n.symbolToInfo.has(h)).map(h=>({type:12,data:n.symbolToInfo.get(h)?.dimValue||0}));f.push({type:12,data:o});let p=e.map((h,m)=>[...Nt(h)]).reduce((h,m)=>h.concat(m),f);return p.push(...Nt(i)),{outputs:[{dims:i,dataType:t}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:p}},getShaderSource:d}},yD=(e,t)=>{let n=new RP(e.inputs,t.equation),i=n.outputDims,r=e.inputs.map((o,l)=>o.dims);e.compute(FP(r,e.inputs[0].dataType,n,i))},bD=e=>{let t=e.equation.replace(/\s+/g,"");return Nn({equation:t})}}),NP,Bw,jP,BP,wD,ZW=ht(()=>{Zt(),sn(),ln(),NP=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,n=Array.from(e[1].getBigInt64Array(),Number),i=n.length<t.length?0:n.length-t.length,r=t.length<n.length?0:t.length-n.length;for(;i<n.length&&r<t.length;++i,++r)if(n[i]!==t[r]&&n[i]!==1&&t[r]!==1)throw new Error("Expand requires shape to be broadcastable to input")},Bw=(e,t)=>{let n=e.length-t.length,i=[];for(let r=0;r<n;++r)i.push(e[r]);for(let r=0;r<t.length;++r)i.push(t[r]===1?e[r+n]:t[r]);return i},jP=(e,t)=>e.length>t.length?Bw(e,t):Bw(t,e),BP=e=>{let t=e[0].dims,n=Array.from(e[1].getBigInt64Array(),Number),i=jP(t,n),r=e[0].dataType,o=r===9||Ue.size(t)===1,l=r===9||t.length>0&&t[t.length-1]%4===0?4:1,c=o||i.length>0&&i[i.length-1]%4===0?4:1,d=Math.ceil(Ue.size(i)/c),f=h=>{let m=Ye("input",r,t.length,l),_=It("output",r,i.length,c),v;if(r===9){let b=(D,T,E="")=>`
          let outputIndices${T} = ${_.offsetToIndices(`outputOffset + ${T}u`)};
          let offset${T} = ${m.broadcastedIndicesToOffset(`outputIndices${T}`,_)};
          let index${T} = offset${T} / 4u;
          let component${T} = offset${T} % 4u;
          ${D}[${T}] = ${E}(${m.getByOffset(`index${T}`)}[component${T}]);
        `;v=`
        let outputOffset = global_idx * ${c};
        var data = vec4<u32>(0);
        ${b("data",0,"u32")}
        ${b("data",1,"u32")}
        ${b("data",2,"u32")}
        ${b("data",3,"u32")}
        ${_.setByOffset("global_idx","data")}
      }`}else v=`
        let outputIndices = ${_.offsetToIndices(`global_idx * ${c}`)};
        let inputOffset = ${m.broadcastedIndicesToOffset("outputIndices",_)};
        let data = ${_.type.value}(${m.getByOffset(`inputOffset / ${l}`)});
        ${_.setByOffset("global_idx","data")}
      }`;return`
    ${h.registerUniform("vec_size","u32").declareVariables(m,_)}
    ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${v}`},p=[{type:12,data:d},...Nt(t,i)];return{name:"Expand",shaderCache:{hint:`${i.length};${l}${c}`,inputDependencies:["rank"]},getShaderSource:f,getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:p})}},wD=e=>{NP(e.inputs),e.compute(BP(e.inputs),{inputs:[0]})}}),UP,xD,QW=ht(()=>{Zt(),sn(),ln(),l1(),UP=e=>{let t=e[0].dataType,n=Ue.size(e[0].dims),i=Ue.size(e[1].dims),r=i%4===0,o=l=>{let c=Ye("x",t,[1],4),d=Ye("bias",t,[1],4),f=It("y",t,[1],4),p=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],h=_=>`
      let bias${_}_offset: u32 = (global_idx * 4 + ${_}) % uniforms.bias_size;
      let bias${_} = ${d.getByOffset(`bias${_}_offset / 4`)}[bias${_}_offset % 4];`,m=r?`
      let bias = ${d.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${h(0)}${h(1)}${h(2)}${h(3)}
      let bias = ${c.type.value}(bias0, bias1, bias2, bias3);`;return`${l.registerUniforms(p).declareVariables(c,d,f)}

    ${Ux(Vi(t))}

    ${l.mainStart(Wh)}
      ${l.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${c.getByOffset("global_idx")};
      ${m}
      let x_in = x + bias;
      ${f.setByOffset("global_idx",Vx("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${r}`,inputDependencies:["type","type"]},getShaderSource:o,getRunData:l=>({outputs:[{dims:l[0].dims,dataType:l[0].dataType}],programUniforms:[{type:12,data:Math.ceil(n/4)},{type:12,data:i}],dispatchGroup:{x:Math.ceil(n/Wh/4)}})}},xD=e=>{e.inputs.length<2||Ue.size(e.inputs[1].dims)===0?UO(e):e.compute(UP(e.inputs))}}),VP,GP,MD,TD,XW=ht(()=>{Zt(),sn(),Zr(),ln(),VP=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},GP=(e,t)=>{let n=e[0].dims,i=e[1].dims,r=n.length,o=Ue.normalizeAxis(t.axis,r),l=n.slice(0);l.splice(o,1,...i);let c=n[o],d=e[0].dataType===9?4:1,f=Math.ceil(Ue.size(l)/d),p=[{type:12,data:f},{type:6,data:c},{type:12,data:o},...Nt(e[0].dims,e[1].dims,l)],h=m=>{let _=Ye("data",e[0].dataType,e[0].dims.length,d),v=Ye("inputIndices",e[1].dataType,e[1].dims.length),b=It("output",e[0].dataType,l.length,d),D=E=>{let A=i.length,$=`var indicesIndices${E}  = ${v.type.indices}(0);`;for(let P=0;P<A;P++)$+=`${A>1?`indicesIndices${E}[${P}]`:`indicesIndices${E}`} = ${l.length>1?`outputIndices${E}[uniforms.axis + ${P}]`:`outputIndices${E}`};`;$+=`
          var idx${E} = ${v.getByIndices(`indicesIndices${E}`)};
          if (idx${E} < 0) {
            idx${E} = idx${E} + uniforms.axisDimLimit;
          }
          var dataIndices${E} : ${_.type.indices};
        `;for(let P=0,C=0;P<r;P++)P===o?($+=`${r>1?`dataIndices${E}[${P}]`:`dataIndices${E}`} = u32(idx${E});`,C+=A):($+=`${r>1?`dataIndices${E}[${P}]`:`dataIndices${E}`} = ${l.length>1?`outputIndices${E}[${C}]`:`outputIndices${E}`};`,C++);return $},T;if(e[0].dataType===9){let E=(A,$,P="")=>`
          let outputIndices${$} = ${b.offsetToIndices(`outputOffset + ${$}u`)};
          ${D($)};
          let offset${$} = ${_.indicesToOffset(`dataIndices${$}`)};
          let index${$} = offset${$} / 4u;
          let component${$} = offset${$} % 4u;
          ${A}[${$}] = ${P}(${_.getByOffset(`index${$}`)}[component${$}]);
        `;T=`
        let outputOffset = global_idx * ${d};
        var value = vec4<u32>(0);
        ${E("value",0,"u32")}
        ${E("value",1,"u32")}
        ${E("value",2,"u32")}
        ${E("value",3,"u32")}
        ${b.setByOffset("global_idx","value")}
      `}else T=`
      let outputIndices = ${b.offsetToIndices("global_idx")};
      ${D("")};
      let value = ${_.getByIndices("dataIndices")};
      ${b.setByOffset("global_idx","value")};
      `;return`
      ${m.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(_,v,b)}
      ${m.mainStart()}
        ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${T}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:l,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:h}},MD=e=>Nn({axis:e.axis}),TD=(e,t)=>{let n=e.inputs;VP(n),e.compute(GP(e.inputs,t))}}),WP,SD,ED,YW=ht(()=>{Zt(),sn(),ln(),WP=(e,t,n,i,r,o,l,c,d)=>{let f=[{type:12,data:o},{type:12,data:i},{type:12,data:r},{type:12,data:n},{type:12,data:l},{type:12,data:c},{type:12,data:d}],p=[o];f.push(...Nt(t.dims,p));let h=m=>{let _=Ye("indices_data",t.dataType,t.dims.length),v=It("input_slice_offsets_data",12,1,1),b=[_,v],D=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:r.length},{name:"sizes_from_slice_dims_data",type:"u32",length:n.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${m.registerUniforms(D).declareVariables(...b)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${r.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${n.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${r.length}_${n.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:p,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:f}),getShaderSource:h},{inputs:[t],outputs:[-1]})[0]},SD=(e,t)=>{let n=e.inputs,i=n[0].dims,r=n[0].dataType,o=n[1].dims,l=o[o.length-1],c=Ue.sizeToDimension(o,o.length-1),d=Ue.sizeFromDimension(i,t.batchDims+l),f=Ue.sizeToDimension(i,t.batchDims),p=Ue.sizeFromDimension(i,t.batchDims),h=c/f,m=new Array(l),_=d;for(let $=0;$<l;++$)m[l-1-$]=_,_*=i[t.batchDims+l-1-$];let v=WP(e,n[1],m,t.batchDims,i,c,h,p,l),b=t.batchDims+l;if(b>i.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let D=o.slice(0,-1).concat(i.slice(b)),T=Ue.size(D),E=[{type:12,data:T},{type:12,data:d},...Nt(n[0].dims,v.dims,D)],A=$=>{let P=Ye("data",n[0].dataType,n[0].dims.length),C=Ye("slice_offsets",12,v.dims.length),S=It("output",n[0].dataType,D.length);return`
          ${$.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(P,C,S)}
            ${$.mainStart()}
            ${$.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:D,dataType:r}],dispatchGroup:{x:Math.ceil(T/64)},programUniforms:E}),getShaderSource:A},{inputs:[n[0],v]})},ED=e=>({batchDims:e.batch_dims,cacheKey:""})}),HP,KP,$D,PD,JW=ht(()=>{Zt(),sn(),Zr(),ln(),HP=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let n=Ue.normalizeAxis(t.quantizeAxis,e[0].dims.length),i=t.blockSize,r=e[0],o=e[2],l=e.length===4?e[3]:void 0;if(o.dims.length!==r.dims.length||!r.dims.map((c,d)=>d===n?Math.ceil(c/i)===o.dims[d]:c===o.dims[d]).reduce((c,d)=>c&&d,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(l){if(l.dataType!==r.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(l.dims.length!==o.dims.length||!l.dims.map((c,d)=>c===o.dims[d]).reduce((c,d)=>c&&d,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},KP=(e,t)=>{let n=e[0].dims,i=e[1].dims,r=n.length,o=Ue.normalizeAxis(t.gatherAxis,r),l=Ue.normalizeAxis(t.quantizeAxis,r),c=n.slice(0);c.splice(o,1,...i);let d=Ue.size(c),f=e[2].dataType,p=e[0].dataType===22,h=[{type:12,data:d},{type:12,data:l},{type:12,data:o},{type:12,data:t.blockSize},...Nt(...e.map((_,v)=>_.dims),c)],m=_=>{let v=Ye("data",e[0].dataType,e[0].dims.length),b=Ye("inputIndices",e[1].dataType,e[1].dims.length),D=Ye("scales",e[2].dataType,e[2].dims.length),T=e.length>3?Ye("zeroPoint",e[3].dataType,e[3].dims.length):void 0,E=It("output",f,c.length),A=[v,b,D];T&&A.push(T);let $=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${_.registerUniforms($).declareVariables(...A,E)}
        ${_.mainStart()}
        let output_indices = ${E.offsetToIndices("global_idx")};
        var indices_indices = ${b.type.indices}(0);
        ${i.length>1?`
          for (var i: u32 = 0; i < ${i.length}; i++) {
            let index = ${E.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${b.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${E.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${v.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${E.indicesGet("output_indices","i")};
          ${v.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${b.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${n[o]};
        }
        ${v.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${c.length}; i++) {
          let index = ${E.indicesGet("output_indices",`i + ${i.length} - 1`)};
          ${v.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${v.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${v.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${p?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${D.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${D.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${D.getByIndices("scale_indices")};
        ${T?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${T.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${T.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${p?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${Vi(f)}(quantized_data - zero_point) * scale;
        ${E.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((_,v)=>v!==1).map(_=>_.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(_,v)=>"rank")},getRunData:()=>({outputs:[{dims:c,dataType:f}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:h}),getShaderSource:m}},$D=(e,t)=>{let n=e.inputs;HP(n,t),e.compute(KP(e.inputs,t))},PD=e=>Nn({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),qP,ZP,CD,kD,eH=ht(()=>{Zt(),sn(),Zr(),ln(),qP=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},ZP=(e,t)=>{let n=e[0].dims,i=e[0].dataType,r=n.length,o=e[1].dims,l=e[1].dataType,c=Ue.normalizeAxis(t.axis,r),d=n[c],f=o.slice(0),p=Ue.size(f),h=Ye("input",i,r),m=Ye("indicesInput",l,o.length),_=It("output",i,f.length),v=[{type:12,data:p},{type:6,data:d},{type:12,data:c}];return v.push(...Nt(n,o,f)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:f,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:v}),getShaderSource:b=>`
      ${b.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(h,m,_)}
      ${b.mainStart()}
      ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${_.offsetToIndices("global_idx")};

      var idx = ${m.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${h.type.indices}(outputIndices);
      ${h.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${h.getByIndices("inputIndices")};

      ${_.setByOffset("global_idx","value")};
  }`}},CD=e=>Nn({axis:e.axis}),kD=(e,t)=>{let n=e.inputs;qP(n),e.compute(ZP(e.inputs,t))}}),QP,XP,AD,ID,tH=ht(()=>{Zt(),sn(),ln(),QP=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},XP=(e,t)=>{let n=e[0].dims.slice(),i=e[1].dims.slice(),[r,o,l]=CI.getShapeOfGemmResult(n,t.transA,i,t.transB,e.length===3?e[2].dims:void 0),c=[r,o];if(!c)throw new Error("Can't use gemm on the given tensors");let d=16,f=Math.ceil(o/d),p=Math.ceil(r/d),h=!0,m=Ue.size(c),_=[{type:12,data:h?f:m},{type:12,data:r},{type:12,data:o},{type:12,data:l},{type:1,data:t.alpha},{type:1,data:t.beta}],v=["type","type"];e.length===3&&(_.push(...Nt(e[2].dims)),v.push("rank")),_.push(...Nt(c));let b=T=>{let E="";t.transA&&t.transB?E="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?E="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?E="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(E="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let A=t.alpha===1?"":"value *= uniforms.alpha;",$=Ye("a",e[0].dataType,e[0].dims),P=Ye("b",e[1].dataType,e[1].dims),C=$.type.value,S=null,O=[$,P];e.length===3&&(S=Ye("c",e[2].dataType,e[2].dims.length),O.push(S));let N=It("output",e[0].dataType,c.length);O.push(N);let j=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${T.registerUniforms(j).declareVariables(...O)}

  ${T.mainStart()}
    ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${C}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${E}
    }

    ${A}
    ${S!=null?`let cOffset = ${S.broadcastedIndicesToOffset("vec2(m, n)",N)}; value += ${C}(uniforms.beta) * ${S.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},D=T=>{let E=Ye("a",e[0].dataType,e[0].dims),A=Ye("b",e[1].dataType,e[1].dims),$=null,P=[E,A];e.length===3&&($=Ye("c",e[2].dataType,e[2].dims.length),P.push($));let C=It("output",e[0].dataType,c.length);P.push(C);let S=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],O="",N="";t.transA&&t.transB?(N=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${E.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${A.type.value}(0);
      }
      `,O="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(N=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${E.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${A.type.value}(0);
      }
      `,O="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(N=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${E.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${A.type.value}(0);
      }
      `,O="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(N=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${E.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${A.type.value}(0);
      }
      `,O="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let j=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${T.registerUniforms(S).declareVariables(...P)}
  var<workgroup> tile_a: array<array<${E.type.storage}, ${d}>, ${d}>;
  var<workgroup> tile_b: array<array<${A.type.storage}, ${d}>, ${d}>;
  ${T.mainStart([d,d,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${d};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${d};
    let num_tiles = (uniforms.K - 1) / ${d} + 1;
    var k_start = 0u;
    var value = ${C.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${N}
      k_start = k_start + ${d};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${d}; k++) {
        ${O}
      }
      workgroupBarrier();
    }

    ${j}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${$!=null?`let cOffset = ${$.broadcastedIndicesToOffset("vec2(m, n)",C)}; value += ${C.type.value}(uniforms.beta) * ${$.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return h?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:v},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:f*p},programUniforms:_}),getShaderSource:D}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:v},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:_}),getShaderSource:b}},AD=e=>{let t=e.transA,n=e.transB,i=e.alpha,r=e.beta;return{transA:t,transB:n,alpha:i,beta:r,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},ID=(e,t)=>{QP(e.inputs),e.compute(XP(e.inputs,t))}}),Ls,Ll,_d,vd,YP,JP,e2,t2,n2,r2,i2,a2,OD,DD,nH=ht(()=>{Zt(),sn(),Zr(),ln(),[Ls,Ll,_d,vd]=[0,1,2,3],YP=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},JP=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,e2=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,t2=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,n2=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,r2=(e,t,n)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${Ls}] = batch;
     indices[${Ll}] = channel;`+(()=>{switch(n.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${_d}] = u32(r);
            indices[${vd}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${_d}] = u32(clamp(r, 0, H - 1));
          indices[${vd}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${_d}] = gs_reflect(r, border[1], border[3]);
          indices[${vd}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${n.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,i2=(e,t,n)=>(()=>{switch(n.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${Ls}], indices[${Ll}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${Ls}], indices[${Ll}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${Ls}], indices[${Ll}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${Ls}], indices[${Ll}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${Ls}], indices[${Ll}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${Ls}], indices[${Ll}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${n.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,a2=(e,t)=>{let n=Ye("x",e[0].dataType,e[0].dims.length),i=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],r=Ye("grid",e[1].dataType,i.length,2),o=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(o=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[Ls,Ll,_d,vd]=[0,3,1,2]);let l=It("output",e[0].dataType,o.length),c=n.type.value,d=Ue.size(o),f=[{type:12,data:d},...Nt(e[0].dims,i,o)],p=h=>`
  ${h.registerUniform("output_size","u32").declareVariables(n,r,l)}
  ${JP}
  ${e2(c)}
  ${t2(t)}
  ${n2(t)}
  ${r2(n,c,t)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${_d}]);
      let W_in = i32(uniforms.x_shape[${vd}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${l.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${Ls}], indices[${_d}], indices[${vd}]);
      let nxy = ${r.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${i2(l,c,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:h=>{let m=Ue.size(o);return{outputs:[{dims:o,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:f}},getShaderSource:p}},OD=(e,t)=>{YP(e.inputs),e.compute(a2(e.inputs,t))},DD=e=>Nn({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),ea,o2,zD,Uw,s2,Wg,LD,RD=ht(()=>{Zt(),sn(),Zr(),i1(),s1(),ln(),du(),ea=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,o2=(e,t)=>{let n=e[0],i=ea(e,1),r=ea(e,2),o=ea(e,3),l=ea(e,4),c=ea(e,5),d=ea(e,6),f=ea(e,7);if(n.dims.length!==3&&n.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let p=n.dims[0],h=n.dims[1],m=n.dims.length===3?n.dims[2]:t.numHeads*n.dims[4],_=h,v=0,b=0,D=Math.floor(m/t.numHeads);if(d&&f&&Ue.size(d.dims)&&Ue.size(f.dims)){if(d.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(d.dims[0]!==p||d.dims[1]!==t.numHeads||d.dims[3]!==D)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(f.dims[0]!==p||f.dims[1]!==t.numHeads||f.dims[3]!==D)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(d.dims[2]!==f.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(f.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');v=d.dims[2],b=d.dims[2]}else if(d&&Ue.size(d.dims)||f&&Ue.size(f.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let T;if(i&&Ue.size(i.dims)>0){if(n.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(i.dims.length<3||i.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(n.dims[0]!==i.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(i.dims.length===3){if(i.dims[2]!==n.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');T=2,_=i.dims[1]}else if(i.dims.length===5){if(i.dims[2]!==t.numHeads||i.dims[3]!==2||i.dims[4]!==D)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(r)throw new Error('Expect "value" be none when "key" has packed kv format.');T=5,_=i.dims[1]}else{if(i.dims[1]!==t.numHeads||i.dims[3]!==D)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');T=0,_=i.dims[2]}}else{if(n.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(n.dims[2]!==t.numHeads||n.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');T=3}if(o&&Ue.size(o.dims)>0){if(o.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(i&&i.dims.length===5&&i.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let E=v+_,A=0;if(l&&Ue.size(l.dims)>0){A=8;let S=l.dims;throw S.length===1?S[0]===p?A=1:S[0]===3*p+2&&(A=3):S.length===2&&S[0]===p&&S[1]===E&&(A=5),A===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let $=!1,P=m;if(r&&Ue.size(r.dims)>0){if(r.dims.length!==3&&r.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(n.dims[0]!==r.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(r.dims.length===3){if(_!==r.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');P=r.dims[2]}else{if(_!==r.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');P=r.dims[1]*r.dims[3],$=!0}}let C=!1;if(l&&Ue.size(l.dims)>0)throw new Error("Key padding mask is not supported");if(c&&Ue.size(c.dims)>0){if(c.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(c.dims[0]!==p||c.dims[1]!==t.numHeads||c.dims[2]!==h||c.dims[3]!==E)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:p,sequenceLength:h,pastSequenceLength:v,kvSequenceLength:_,totalSequenceLength:E,maxSequenceLength:b,inputHiddenSize:0,hiddenSize:m,vHiddenSize:P,headSize:D,vHeadSize:Math.floor(P/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:A,scale:t.scale,broadcastResPosBias:C,passPastInKv:$,qkvFormat:T}},zD=e=>Nn({...e}),Uw=Nn({perm:[0,2,1,3]}),s2=(e,t,n,i,r,o,l)=>{let c=[i,r,o],d=Ue.size(c),f=[{type:12,data:d},{type:12,data:l},{type:12,data:o}],p=h=>{let m=It("qkv_with_bias",t.dataType,c),_=Ye("qkv",t.dataType,c),v=Ye("bias",n.dataType,c),b=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${h.registerUniforms(b).declareVariables(_,v,m)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:f}),getShaderSource:p},{inputs:[t,n],outputs:[-1]})[0]},Wg=(e,t,n,i,r,o,l,c)=>{let d=o;if(l&&Ue.size(l.dims)>0){if(i===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return d=s2(e,o,l,t,i,n*r,c),d=d.reshape([t,i,n,r]),n===1||i===1?d:e.compute(Va(d,Uw.perm),{inputs:[d],outputs:[-1]})[0]}else return o.dims.length===3&&(d=o.reshape([t,i,n,r])),n===1||i===1?d:e.compute(Va(d,Uw.perm),{inputs:[d],outputs:[-1]})[0]},LD=(e,t)=>{let n=o2(e.inputs,t),i=e.inputs[0],r=ea(e.inputs,1),o=ea(e.inputs,2),l=ea(e.inputs,3),c=ea(e.inputs,4),d=ea(e.inputs,5),f=ea(e.inputs,6),p=ea(e.inputs,7);if(i.dims.length===5)throw new Error("Packed QKV is not implemented");if(r?.dims.length===5)throw new Error("Packed KV is not implemented");let h=r&&o&&r.dims.length===4&&o.dims.length===4,m=Wg(e,n.batchSize,n.numHeads,n.sequenceLength,n.headSize,i,l,0);if(h)return c_(e,m,r,o,c,void 0,f,p,d,n);if(!r||!o)throw new Error("key and value must be provided");let _=Wg(e,n.batchSize,n.numHeads,n.kvSequenceLength,n.headSize,r,l,n.hiddenSize),v=Wg(e,n.batchSize,n.numHeads,n.kvSequenceLength,n.vHeadSize,o,l,2*n.hiddenSize);c_(e,m,_,v,c,void 0,f,p,d,n)}}),l2,c2,u2,d2,qx,FD,ND,jD=ht(()=>{Zt(),sn(),Zr(),ln(),l2=e=>{if(!e||e.length<1)throw new Error("too few inputs")},c2=(e,t)=>{let n=[],i=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(r=>n.push(Number(r))),i=n.length),Nn({numOutputs:i,axis:t.axis,splitSizes:n})},u2=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${zt("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,d2=e=>{let t=e.length,n=[];for(let i=0;i<t;++i){let r=e[i].setByIndices("indices","input[global_idx]");t===1?n.push(r):i===0?n.push(`if (output_number == ${i}u) { ${r} }`):i===t-1?n.push(`else { ${r} }`):n.push(`else if (output_number == ${i}) { ${r} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${n.join(`
`)}
      }`},qx=(e,t)=>{let n=e[0].dims,i=Ue.size(n),r=e[0].dataType,o=Ue.normalizeAxis(t.axis,n.length),l=new Array(t.numOutputs),c=Ye("input",r,n.length),d=new Array(t.numOutputs),f=[],p=[],h=0,m=[{type:12,data:i}];for(let v=0;v<t.numOutputs;v++){h+=t.splitSizes[v],d[v]=h;let b=n.slice();b[o]=t.splitSizes[v],p.push(b),l[v]=It(`output${v}`,r,b.length),f.push({dims:p[v],dataType:e[0].dataType})}m.push({type:12,data:d},...Nt(n,...p));let _=v=>`
  ${v.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",d.length).declareVariables(c,...l)}
  ${u2(d.length)}
  ${d2(l)}

  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${c.offsetToIndices("global_idx")};
    var index = ${c.indicesGet("indices",o)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${zt("uniforms.size_in_split_axis","output_number - 1u",d.length)};
      ${c.indicesSet("indices",o,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:_,getRunData:()=>({outputs:f,dispatchGroup:{x:Math.ceil(i/64)},programUniforms:m})}},FD=(e,t)=>{l2(e.inputs);let n=e.inputs.length===1?t:c2(e.inputs,t);e.compute(qx(e.inputs,n),{inputs:[0]})},ND=e=>{let t=e.axis,n=e.splitSizes,i=e.numOutputs<0?n.length:e.numOutputs;if(i!==n.length)throw new Error("numOutputs and splitSizes lengh must be equal");return Nn({axis:t,numOutputs:i,splitSizes:n})}}),f2,Gy,BD,UD=ht(()=>{Zt(),sn(),Zr(),ln(),f2=(e,t)=>{let[n,i,r,o]=e,{numHeads:l,rotaryEmbeddingDim:c}=t;if(n.dims.length!==3&&n.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${n.dims.length}`);if(!Ue.areEqual(i.dims,[])&&!Ue.areEqual(i.dims,[1])&&i.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${i.dims.length}`);if(r.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${r.dims.length}`);if(o.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${o.dims.length}`);if(!Ue.areEqual(r.dims,o.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(c>0&&l===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let d=n.dims[0],f=n.dims[n.dims.length-2],p=r.dims[0],h=Ue.sizeFromDimension(n.dims,1)/f,m=c===0?r.dims[1]*2:h/l;if(c>m)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(i.dims.length===2){if(d!==i.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${i.dims[0]}`);if(f!==i.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${i.dims[1]}`)}if(m/2!==r.dims[1]&&c/2!==r.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${r.dims[1]}`);if(f>p)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Gy=(e,t)=>{let{interleaved:n,numHeads:i,rotaryEmbeddingDim:r,scale:o}=t,l=e[0].dims[0],c=Ue.sizeFromDimension(e[0].dims,1),d=e[0].dims[e[0].dims.length-2],f=c/d,p=e[2].dims[1],h=r===0?p*2:f/i,m=new Array(l,d,f/h,h-p),_=Ue.computeStrides(m),v=[{type:1,data:o},{type:12,data:m},{type:12,data:_},...e[0].dims.length===3?new Array({type:12,data:[c,f,h,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[c,h,d*h,1]}):[],...Nt(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],b=D=>{let T=Ye("input",e[0].dataType,e[0].dims.length),E=Ye("position_ids",e[1].dataType,e[1].dims.length),A=Ye("cos_cache",e[2].dataType,e[2].dims.length),$=Ye("sin_cache",e[3].dataType,e[3].dims.length),P=It("output",e[0].dataType,e[0].dims.length);return D.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:m.length},{name:"global_strides",type:"u32",length:_.length},{name:"input_output_strides",type:"u32",length:_.length}]),`
        ${D.declareVariables(T,E,A,$,P)}

        ${D.mainStart(Wh)}
          let half_rotary_emb_dim = uniforms.${A.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${D.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${E.broadcastedIndicesToOffset("bsnh.xy",It("",E.type.tensor,2))};
            let position_id =
                u32(${E.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${n});
            let j = i + select(half_rotary_emb_dim, 1, ${n});
            let re = ${T.getByOffset("i")} * ${A.get("position_id","bsnh[3]")} -
                ${T.getByOffset("j")} * ${$.get("position_id","bsnh[3]")};
            ${P.setByOffset("i","re")}
            let im = ${T.getByOffset("i")} * ${$.get("position_id","bsnh[3]")} +
                ${T.getByOffset("j")} * ${A.get("position_id","bsnh[3]")};
            ${P.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${P.setByOffset("k",T.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:Nn({interleaved:n}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:b,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ue.size(m)/Wh)},programUniforms:v})}},BD=(e,t)=>{f2(e.inputs,t),e.compute(Gy(e.inputs,t))}}),h2,m2,Vw,p2,VD,rH=ht(()=>{Zr(),Zt(),s1(),RD(),jD(),du(),UD(),ln(),h2=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let n=e[0],i=e[1],r=e[2],o=e[3],l=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(n.dims.length!==3&&n.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let c=!1,d=n.dims[0],f=n.dims[1],p=n.dims.length===3?c?n.dims[2]/3:n.dims[2]:t.numHeads*n.dims[4],h=f,m=0,_=!i||i.dims.length===0,v=Math.floor(_?p/(t.numHeads+2*t.kvNumHeads):p/t.numHeads);_&&(p=v*t.numHeads);let b=o&&o.dims.length!==0,D=l&&l.dims.length!==0;if(b&&o.dims.length===4&&o.dims[0]===d&&o.dims[1]!==t.kvNumHeads&&o.dims[2]===t.kvNumHeads&&o.dims[3]===v)throw new Error("BSNH pastKey/pastValue is not supported");if(b&&D){if(o.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');m=o.dims[2]}else if(b||D)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let T=1;if(i&&i.dims.length>0){if(n.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(i.dims.length<3||i.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(n.dims[0]!==i.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(i.dims.length===3){if(n.dims[2]%i.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');h=i.dims[1]}else if(i.dims.length===5){if(i.dims[2]!==t.numHeads||i.dims[3]!==2||i.dims[4]!==v)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(r)throw new Error('Expect "value" be none when "key" has packed kv format.');h=i.dims[1]}else{if(i.dims[1]!==t.numHeads||i.dims[3]!==v)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');h=i.dims[2]}}else{if(n.dims.length!==3&&n.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(n.dims.length===5&&(n.dims[2]!==t.numHeads||n.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');T=3}let E=0,A=!1,$=t.kvNumHeads?v*t.kvNumHeads:p;if(r&&r.dims.length>0){if(r.dims.length!==3&&r.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(n.dims[0]!==r.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(r.dims.length===3){if(h!==r.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');$=r.dims[2]}else{if(h!==r.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');$=r.dims[1]*r.dims[3],A=!0}}let P=e.length>4?e[5]:void 0;if(P&&P.dims.length!==1&&P.dims[0]!==d)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:d,sequenceLength:f,pastSequenceLength:m,kvSequenceLength:h,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:p,vHiddenSize:$,headSize:v,vHeadSize:Math.floor($/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:E,scale:t.scale,broadcastResPosBias:!1,passPastInKv:A,qkvFormat:T}},m2=Nn({perm:[0,2,1,3]}),Vw=(e,t,n)=>{let i=t,r=n.kvNumHeads;return t.dims.length===3&&n.kvSequenceLength!==0&&(i=t.reshape([n.batchSize,n.kvSequenceLength,r,n.headSize]),i=e.compute(Va(i,m2.perm),{inputs:[i],outputs:[-1]})[0]),i},p2=(e,t,n,i)=>{let r=7,o=["type","type"],l=[e*t],c=e*t,d=[{type:12,data:c},{type:12,data:t},{type:12,data:e}],f=p=>{let h=Ye("seq_lens",n.dataType,n.dims),m=Ye("total_seq_lens",i.dataType,i.dims),_=It("pos_ids",r,l),v=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${p.registerUniforms(v).declareVariables(h,m,_)}
  ${p.mainStart()}
    ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${m.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${h.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${_.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${_.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${_.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:o},getRunData:()=>({outputs:[{dims:l,dataType:r}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:d}),getShaderSource:f}},VD=(e,t)=>{let n=h2(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(e.inputs[1]?.dims.length===5)throw new Error("Packed KV is not implemented");let i=e.inputs[0],r=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,o=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,l=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,c=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,d=e.inputs.length>4?e.inputs[5]:void 0,f=e.inputs.length>5?e.inputs[6]:void 0,p=n.kvNumHeads?n.kvNumHeads:n.numHeads,h=Nn({axis:2,numOutputs:3,splitSizes:[n.numHeads*n.headSize,p*n.headSize,p*n.headSize]}),[m,_,v]=!r&&!o?e.compute(qx([i],h),{inputs:[i],outputs:[-1,-1,-1]}):[i,r,o],b,D;if(t.doRotary){let $=e.compute(p2(n.batchSize,n.sequenceLength,d,f),{inputs:[d,f],outputs:[-1]})[0],P=e.inputs[7],C=e.inputs[8],S=Nn({interleaved:t.rotaryInterleaved!==0,numHeads:n.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),O=[m,$,P,C],N=[-1];b=e.compute(Gy(O,S),{inputs:O,outputs:N})[0],O.splice(0,1,_);let j=Nn({interleaved:t.rotaryInterleaved!==0,numHeads:n.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});D=e.compute(Gy(O,j),{inputs:O,outputs:N})[0]}let T=Wg(e,n.batchSize,n.numHeads,n.sequenceLength,n.headSize,t.doRotary?b:m,void 0,0),E=Vw(e,t.doRotary?D:_,n),A=Vw(e,v,n);c_(e,T,E,A,void 0,void 0,l,c,void 0,n,d,f)}}),Gw,g2,_2,GD,iH=ht(()=>{Zt(),sn(),du(),ln(),Gw=(e,t,n,i,r,o,l,c)=>{let d=Rr(o),f=d===1?"f32":`vec${d}f`,p=d===1?"vec2f":`mat2x${d}f`,h=r*l,m=64;h===1&&(m=256);let _=[r,l,o/d],v=[r,l,2],b=["rank","type","type"],D=[];D.push(...Nt(_,v));let T=E=>{let A=Ye("x",t.dataType,3,d),$=Ye("scale",n.dataType,n.dims),P=Ye("bias",i.dataType,i.dims),C=It("output",1,3,2),S=[A,$,P,C];return`
  var<workgroup> workgroup_shared : array<${p}, ${m}>;
  const workgroup_size = ${m}u;
  ${E.declareVariables(...S)}
  ${E.mainStart(m)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${f}(0);
    var squared_sum = ${f}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${f}(${A.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${p}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${iu("workgroup_shared[0][0]",d)} / f32(hight * ${d});
      let squared_sum_final = ${iu("workgroup_shared[0][1]",d)} / f32(hight * ${d});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${c}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${d};${c};${m}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:v,dataType:1}],dispatchGroup:{x:h},programUniforms:D}),getShaderSource:T},{inputs:[t,n,i],outputs:[-1]})[0]},g2=(e,t,n)=>{let i=t[0].dims,r=i,o=2,l=i[0],c=i[1],d=Ue.sizeFromDimension(i,o),f=Rr(d),p=Ue.size(r)/f,h=Gw(e,t[0],t[1],t[2],l,d,c,n.epsilon),m=[l,c,d/f],_=[l,c],v=["type","none"],b=D=>{let T=Ye("x",t[0].dataType,m.length,f),E=Ye("scale_shift",1,_.length,2),A=It("output",t[0].dataType,m.length,f),$=[T,E,A];return`
  ${D.registerUniform("output_size","u32").declareVariables(...$)}
  ${D.mainStart()}
  ${D.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${A.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${E.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${T.getByOffset("global_idx")} * ${A.type.value}(scale_shift.x) + ${A.type.value}(scale_shift.y);
      ${A.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${f}`,inputDependencies:v},getRunData:()=>({outputs:[{dims:r,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:[{type:12,data:p},...Nt(m,_,m)]}),getShaderSource:b},{inputs:[t[0],h]})},_2=(e,t,n)=>{let i=t[0].dims,r=i,o=i[0],l=i[i.length-1],c=Ue.sizeFromDimension(i,1)/l,d=Rr(l),f=Ue.size(r)/d,p=[{type:12,data:c},{type:12,data:Math.floor(l/d)}],h=["type","type"],m=!1,_=[0,i.length-1];for(let T=0;T<i.length-2;T++)m=m||i[T+1]!==1,_.push(T+1);m=m&&i[i.length-1]!==1;let v=m?e.compute(Va(e.inputs[0],_),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:i.length},(T,E)=>i[_[E]])),b=Gw(e,v,t[1],t[2],o,c,l,n.epsilon),D=T=>{let E=gi(t[0].dataType),A=d===1?"vec2f":`mat${d}x2f`,$=S=>{let O=S===0?"x":"y",N=d===1?"f32":`vec${d}f`;switch(d){case 1:return`${E}(${N}(scale.${O}))`;case 2:return`vec2<${E}>(${N}(scale[0].${O}, scale[1].${O}))`;case 4:return`vec4<${E}>(${N}(scale[0].${O}, scale[1].${O}, scale[2].${O}, scale[3].${O}))`;default:throw new Error(`Not supported compoents ${d}`)}},P=Ye("input",t[0].dataType,t[0].dims,d),C=It("output",t[0].dataType,r,d);return`
  @group(0) @binding(0) var<storage, read> input : array<${P.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${A}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${C.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${T.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${$(0)}, ${$(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${d}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:r,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:D},{inputs:[t[0],b]})},GD=(e,t)=>{t.format==="NHWC"?_2(e,e.inputs,t):g2(e,e.inputs,t)}}),v2,y2,WD,aH=ht(()=>{Zt(),sn(),ln(),v2=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},y2=(e,t,n)=>{let i=t.simplified,r=e[0].dims,o=e[1],l=!i&&e[2],c=r,d=Ue.normalizeAxis(t.axis,r.length),f=Ue.sizeToDimension(r,d),p=Ue.sizeFromDimension(r,d),h=Ue.size(o.dims),m=l?Ue.size(l.dims):0;if(h!==p||l&&m!==p)throw new Error(`Size of X.shape()[axis:] == ${p}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${h} and bias size of ${m}`);let _=[];for(let P=0;P<r.length;++P)P<d?_.push(r[P]):_.push(1);let v=Rr(p),b=["type","type"],D=[{type:12,data:f},{type:1,data:p},{type:12,data:Math.floor(p/v)},{type:1,data:t.epsilon}];l&&b.push("type");let T=n>1,E=n>2,A=P=>{let C=gi(e[0].dataType),S=[Ye("x",e[0].dataType,e[0].dims,v),Ye("scale",o.dataType,o.dims,v)];l&&S.push(Ye("bias",l.dataType,l.dims,v)),S.push(It("output",e[0].dataType,c,v)),T&&S.push(It("mean_data_output",1,_)),E&&S.push(It("inv_std_output",1,_));let O=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${P.registerUniforms(O).declareVariables(...S)}
  ${P.mainStart()}
    ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${Nx("f32",v)};
    var mean_square_vector = ${Nx("f32",v)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${zh(C,v,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${iu("mean_vector",v)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${iu("mean_square_vector",v)} / uniforms.norm_size ${i?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${zh(C,v,"x[j + offset]")};
      let f32scale = ${zh(C,v,"scale[j]")};
      output[j + offset] = ${S[0].type.value}((f32input ${i?"":"- mean"}) * inv_std_dev * f32scale
        ${l?`+ ${zh(C,v,"bias[j]")}`:""}
      );
    }

    ${T?"mean_data_output[global_idx] = mean":""};
    ${E?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},$=[{dims:c,dataType:e[0].dataType}];return T&&$.push({dims:_,dataType:1}),E&&$.push({dims:_,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${v};${n};${i}`,inputDependencies:b},getRunData:()=>({outputs:$,dispatchGroup:{x:Math.ceil(f/64)},programUniforms:D}),getShaderSource:A}},WD=(e,t)=>{v2(e.inputs),e.compute(y2(e.inputs,t,e.outputCount))}}),b2,HD,oH=ht(()=>{sn(),f1(),h1(),b2=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},HD=e=>{b2(e.inputs);let t=Gh.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let n=t[t.length-1],i=e.inputs[0].dims[e.inputs[0].dims.length-1];if(n<8&&i<8)e.compute(d1(e.inputs,{activation:""},t));else{let r=t[t.length-2],o=Ue.size(e.inputs[0].dims.slice(0,-2)),l=Ue.size(e.inputs[1].dims.slice(0,-2));if(o!==1&&r===1&&l===1){let c=e.inputs[0].reshape([1,o,i]),d=e.inputs[1].reshape([1,i,n]),f=[1,o,n],p=[c,d];e.compute(Vy(p,{activation:""},t,f),{inputs:p})}else e.compute(Vy(e.inputs,{activation:""},t))}}}),w2,x2,M2,KD,qD,sH=ht(()=>{Zt(),sn(),Zr(),ln(),w2=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let n=e[0],i=n.dims.length;if(n.dims[i-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let r=Math.floor((t.k+t.blockSize-1)/t.blockSize),o=t.blockSize/8*t.bits,l=e[1];if(!Ue.areEqual(l.dims,[t.n,r,o]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let c=e[2].dims;if(Ue.size(c)!==t.n*r)throw new Error("scales input size error.");if(e.length===4){let d=e[3].dims,f=t.bits>4?t.n*r:t.n*Math.floor((r+1)/2);if(Ue.size(d)!==f)throw new Error("zeroPoints input size error.")}},x2=(e,t)=>{let n=e[0].dims,i=n.length,r=n[i-2],o=t.k,l=t.n,c=n.slice(0,i-2),d=Ue.size(c),f=e[1].dims[2]/4,p=e[0].dataType,h=Rr(t.k),m=Rr(f),_=Rr(l),v=c.concat([r,l]),b=r>1&&l/_%2===0?2:1,D=Ue.size(v)/_/b,T=64,E=[],A=[d,r,o/h],$=Ue.convertShape(e[1].dims).slice();$.splice(-1,1,f/m),E.push(...Nt(A)),E.push(...Nt($)),E.push(...Nt(e[2].dims)),e.length===4&&E.push(...Nt(Ue.convertShape(e[3].dims)));let P=[d,r,l/_];E.push(...Nt(P));let C=S=>{let O=A.length,N=Ye("a",e[0].dataType,O,h),j=Ye("b",12,$.length,m),X=Ye("scales",e[2].dataType,e[2].dims.length),Y=[N,j,X],K=e.length===4?Ye("zero_points",12,e[3].dims.length):void 0;K&&Y.push(K);let se=P.length,oe=It("output",e[0].dataType,se,_),W=gi(e[0].dataType),ne=(()=>{switch(h){case 1:return`array<${W}, 8>`;case 2:return`mat4x2<${W}>`;case 4:return`mat2x4<${W}>`;default:throw new Error(`${h}-component is not supported.`)}})(),ae=()=>{let G=`
          // reuse a data
            var input_offset = ${N.indicesToOffset(`${N.type.indices}(batch, row, word_offset)`)};
            var a_data: ${ne};
            for (var j: u32 = 0; j < ${8/h}; j++) {
              a_data[j] = ${N.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let H=0;H<_*b;H++)G+=`
            b_value = ${m===1?`b${H}_data`:`b${H}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${ne}(${Array.from({length:4},(V,U)=>`${W}(b_value_lower[${U}]), ${W}(b_value_upper[${U}])`).join(", ")});
            b_dequantized_values = ${h===1?`${ne}(${Array.from({length:8},(V,U)=>`(b_quantized_values[${U}] - ${K?`zero_point${H}`:"zero_point"}) * scale${H}`).join(", ")});`:`(b_quantized_values - ${ne}(${Array(8).fill(`${K?`zero_point${H}`:"zero_point"}`).join(",")})) * scale${H};`};
            workgroup_shared[local_id.x * ${b} + ${Math.floor(H/_)}]${_>1?`[${H%_}]`:""} += ${Array.from({length:8/h},(V,U)=>`${h===1?`a_data[${U}] * b_dequantized_values[${U}]`:`dot(a_data[${U}], b_dequantized_values[${U}])`}`).join(" + ")};
          `;return G},ge=()=>{let G=`
            var col_index = col * ${_};
            ${K?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${W}(8);`}
            `;for(let H=0;H<_*b;H++)G+=`
            let scale${H} = ${X.getByOffset("col_index * nBlocksPerCol + block")};
            ${K?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${K.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${H} = ${W}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return G},ye=()=>{let G=`col_index = col * ${_};`;for(let H=0;H<_*b;H++)G+=`
            let b${H}_data = ${j.getByIndices(`${j.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return G+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${ne};
            var b_dequantized_values: ${ne};`,G};return`
        var<workgroup> workgroup_shared: array<${oe.type.value}, ${b*T}>;
        ${S.declareVariables(...Y,oe)}
        ${S.mainStart([T,1,1])}
          let output_indices = ${oe.offsetToIndices(`(global_idx / ${T}) * ${b}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${T}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/h};
            ${ge()}
            for (var word: u32 = 0; word < ${f}; word += ${m}) {
              ${ye()}
              for (var i: u32 = 0; i < ${m}; i++) {
                ${ae()}
                word_offset += ${8/h};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${b}) {
            var output_value: ${oe.type.value} = ${oe.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${T}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${b};
            }
            ${oe.setByIndices(`${oe.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${h};${m};${_};${b};${T}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:v,dataType:p}],dispatchGroup:{x:D},programUniforms:E}),getShaderSource:C}},M2=(e,t)=>{let n=e[0].dims,i=n.length,r=n[i-2],o=t.k,l=t.n,c=n.slice(0,i-2),d=Ue.size(c),f=e[1].dims[2]/4,p=e[0].dataType,h=Rr(t.k),m=Rr(f),_=c.concat([r,l]),v=128,b=l%8===0?8:l%4===0?4:1,D=v/b,T=D*m*8,E=T/h,A=T/t.blockSize,$=Ue.size(_)/b,P=[],C=[d,r,o/h],S=Ue.convertShape(e[1].dims).slice();S.splice(-1,1,f/m),P.push(...Nt(C)),P.push(...Nt(S)),P.push(...Nt(e[2].dims)),e.length===4&&P.push(...Nt(Ue.convertShape(e[3].dims)));let O=[d,r,l];P.push(...Nt(O));let N=j=>{let X=C.length,Y=Ye("a",e[0].dataType,X,h),K=Ye("b",12,S.length,m),se=Ye("scales",e[2].dataType,e[2].dims.length),oe=[Y,K,se],W=e.length===4?Ye("zero_points",12,e[3].dims.length):void 0;W&&oe.push(W);let ne=O.length,ae=It("output",e[0].dataType,ne),ge=gi(e[0].dataType),ye=()=>{switch(h){case 1:return`
          let a_data0 = vec4<${ge}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${ge}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${ge}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${ge}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${h}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${Y.type.value}, ${E}>;
        var<workgroup> inter_results: array<array<${ae.type.value}, ${D}>, ${b}>;
        ${j.declareVariables(...oe,ae)}
        ${j.mainStart([D,b,1])}
          let output_indices = ${ae.offsetToIndices(`workgroup_index * ${b}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${A} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${E};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${E}; a_offset += ${v})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${Y.getByIndices(`${Y.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${Y.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${A} + local_id.x;
            ${W?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${W.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${ge}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${ge}(8);`}
            let scale = ${se.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${K.getByIndices(`${K.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/h};
            for (var i: u32 = 0; i < ${m}; i++) {
              ${ye()}
              let b_value = ${m===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${ge}>(${Array.from({length:4},(G,H)=>`${ge}(b_value_lower[${H}]), ${ge}(b_value_upper[${H}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${ge}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(G,H)=>`${`dot(a_data${H}, b_dequantized_values[${H}])`}`).join(" + ")};
              word_offset += ${8/h};
            }
            workgroupBarrier();
          }

          if (local_idx < ${b}) {
            var output_value: ${ae.type.value} = ${ae.type.value}(0);
            for (var b = 0u; b < ${D}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${ae.setByIndices(`${ae.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${h};${m};${D};${b}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:_,dataType:p}],dispatchGroup:{x:$},programUniforms:P}),getShaderSource:N}},KD=(e,t)=>{w2(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(M2(e.inputs,t)):e.compute(x2(e.inputs,t))},qD=e=>Nn(e)}),T2,S2,E2,$2,P2,C2,k2,A2,ZD,lH=ht(()=>{Zt(),sn(),ln(),T2=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},S2=(e,t,n)=>{let i="";for(let r=t-1;r>=0;--r)i+=`
            k = i32(${e.indicesGet("indices",r)}) - ${zt("uniforms.pads",r,n)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${zt("uniforms.x_shape",r,t)})) {
              break;
            }
            offset += k * i32(${zt("uniforms.x_strides",r,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${i}
            value = x[offset];
          }
      `},E2=(e,t,n)=>{let i="";for(let r=t-1;r>=0;--r)i+=`
                k = i32(${e.indicesGet("indices",r)}) - ${zt("uniforms.pads",r,n)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${zt("uniforms.x_shape",r,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${zt("uniforms.x_shape",r,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${zt("uniforms.x_strides",r,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${i}
              value = x[offset];
          `},$2=(e,t,n)=>{let i="";for(let r=t-1;r>=0;--r)i+=`
                k = i32(${e.indicesGet("indices",r)}) - ${zt("uniforms.pads",r,n)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${zt("uniforms.x_shape",r,t)})) {
                  k = i32(${zt("uniforms.x_shape",r,t)}) - 1;
                }
                offset += k * i32(${zt("uniforms.x_strides",r,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${i}
              value = x[offset];
          `},P2=(e,t,n)=>{let i="";for(let r=t-1;r>=0;--r)i+=`
                k = i32(${e.indicesGet("indices",r)}) - ${zt("uniforms.pads",r,n)};
                if (k < 0)  {
                  k += i32(${zt("uniforms.x_shape",r,t)}]);
                }
                if (k >= i32(${zt("uniforms.x_shape",r,t)})) {
                  k -= i32(${zt("uniforms.x_shape",r,t)});
                }
                offset += k * i32(${zt("uniforms.x_strides",r,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${i}
              value = x[offset];
          `},C2=(e,t,n)=>{switch(n.mode){case 0:return S2(e,t,n.pads.length);case 1:return E2(e,t,n.pads.length);case 2:return $2(e,t,n.pads.length);case 3:return P2(e,t,n.pads.length);default:throw new Error("Invalid mode")}},k2=(e,t)=>{let n=Ue.padShape(e[0].dims.slice(),t.pads),i=e[0].dims,r=Ue.size(n),o=[{type:12,data:r},{type:6,data:t.pads}],l=e.length>=3&&e[2].data;t.mode===0&&o.push({type:l?e[2].dataType:1,data:t.value}),o.push(...Nt(e[0].dims,n));let c=["rank"],d=f=>{let p=It("output",e[0].dataType,n.length),h=Ye("x",e[0].dataType,i.length),m=h.type.value,_=C2(p,i.length,t),v=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&v.push({name:"constant_value",type:l?m:"f32"}),`
            ${f.registerUniforms(v).declareVariables(h,p)}
            ${f.mainStart()}
            ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${p.offsetToIndices("global_idx")};

            var value = ${m}(0);
            ${_}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${l}`,inputDependencies:c},getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ue.size(n)/64)},programUniforms:o}),getShaderSource:d}},A2=(e,t)=>{if(e.length>1){let n=e[1].getBigInt64Array(),i=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,r=e[0].dims.length,o=new Int32Array(2*r).fill(0);if(e.length>=4){let c=e[3].getBigInt64Array();for(let d=0;d<c.length;d++)o[Number(c[d])]=Number(n[d]),o[Number(c[d])+r]=Number(n[d+c.length])}else n.forEach((c,d)=>o[Number(d)]=Number(c));let l=[];return o.forEach(c=>l.push(c)),{mode:t.mode,value:i,pads:l}}else return t},ZD=(e,t)=>{T2(e.inputs);let n=A2(e.inputs,t);e.compute(k2(e.inputs,n),{inputs:[0]})}}),zg,Ww,Hw,Kw,qw,I2,O2,Zw,Qw,QD,XD,Xw,YD,JD,Yw,ez,tz,nz,rz,cH=ht(()=>{rs(),Zt(),sn(),ln(),zg=e=>{if(yr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Ww=(e,t,n)=>{let i=t.format==="NHWC",r=e.dims.slice();i&&r.splice(1,0,r.pop());let o=Object.hasOwnProperty.call(t,"dilations"),l=t.kernelShape.slice(),c=t.strides.slice(),d=o?t.dilations.slice():[],f=t.pads.slice();By.adjustPoolAttributes(n,r,l,c,d,f);let p=By.computePoolOutputShape(n,r,c,d,l,f,t.autoPad),h=Object.assign({},t);o?Object.assign(h,{kernelShape:l,strides:c,pads:f,dilations:d,cacheKey:t.cacheKey}):Object.assign(h,{kernelShape:l,strides:c,pads:f,cacheKey:t.cacheKey});let m=p.slice();return m.push(m.splice(1,1)[0]),[h,i?m:p]},Hw=(e,t)=>{let n=t.format==="NHWC",i=Ue.size(e),r=Ue.size(t.kernelShape),o=[{type:12,data:i},{type:12,data:r}],l=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let c=t.kernelShape[t.kernelShape.length-1],d=t.strides[t.strides.length-1],f=t.pads[t.pads.length/2-1],p=t.pads[t.pads.length-1],h=!!(f+p);o.push({type:12,data:c},{type:12,data:d},{type:12,data:f},{type:12,data:p}),l.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let m=!1;if(t.kernelShape.length===2){let _=t.kernelShape[t.kernelShape.length-2],v=t.strides[t.strides.length-2],b=t.pads[t.pads.length/2-2],D=t.pads[t.pads.length-2];m=!!(b+D),o.push({type:12,data:_},{type:12,data:v},{type:12,data:b},{type:12,data:D}),l.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[o,l,!0,h,m]}else{if(n)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let c=Ue.computeStrides(t.kernelShape);o.push({type:12,data:c},{type:12,data:t.pads},{type:12,data:t.strides}),l.push({name:"kernelStrides",type:"u32",length:c.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let d=t.pads.reduce((f,p)=>f+p);return[o,l,!!d,!1,!1]}},Kw=(e,t,n,i,r,o,l,c,d,f,p,h)=>{let m=r.format==="NHWC",_=t.type.value,v=It("output",t.type.tensor,i);if(r.kernelShape.length<=2){let b="",D="",T="",E=n-(m?2:1);if(p?b=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${E}] = indices[${E}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${E}] < 0 || xIndices[${E}]
                      >= uniforms.x_shape[${E}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${o}
                }`:b=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${E}] = indices[${E}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${o}
                }`,r.kernelShape.length===2){let A=n-(m?3:2);h?D=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${A}] = indices[${A}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${A}] < 0 || xIndices[${A}] >= uniforms.x_shape[${A}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:D=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${A}] = indices[${A}] * uniforms.sh - uniforms.phStart + j;
                `,T=`
              }
            `}return`
            ${e.registerUniforms(d).declareVariables(t,v)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${v.offsetToIndices("global_idx")};
              var xIndices = ${v.offsetToIndices("global_idx")};

              var value = ${_}(${c});
              var pad = 0;
              ${D}
              ${b}
              ${T}
              ${l}

              output[global_idx] = value;
            }`}else{if(m)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let b=r.kernelShape.length,D=r.pads.length,T="";return f?T=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${o}
              }`:T=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${o}
            `,`
            ${e.registerUniforms(d).declareVariables(t,v)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${v.offsetToIndices("global_idx")};
              var xIndices = ${v.offsetToIndices("global_idx")};

              var offsets: array<u32, ${b}>;

              var value = ${_}(${c});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${b-1}u; j++) {
                  offsets[j] = offset / ${zt("uniforms.kernelStrides","j",b)};
                  offset -= offsets[j] * ${zt("uniforms.kernelStrides","j",b)};
                }
                offsets[${b-1}] = offset;

                isPad = false;
                for (var j = ${n-b}u; j < ${n}u; j++) {
                  xIndices[j] = indices[j] * ${zt("uniforms.strides",`j - ${n-b}u`,b)}
                    + offsets[j - ${n-b}u] - ${zt("uniforms.pads","j - 2u",D)};
                  ${T}
              }
              ${l}

              output[global_idx] = value;
            }`}},qw=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,I2=e=>`${qw(e)};${e.countIncludePad}`,O2=e=>`${qw(e)};${e.storageOrder};${e.dilations}`,Zw=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),Qw=(e,t,n,i)=>{let[r,o]=Ww(t,i,n),l=Ye("x",t.dataType,t.dims.length),c=l.type.value,d="value += x_val;",f="";r.countIncludePad?f+=`value /= ${c}(uniforms.kernelSize);`:f+=`value /= ${c}(i32(uniforms.kernelSize) - pad);`;let[p,h,m,_,v]=Hw(o,r);p.push(...Nt(t.dims,o));let b=["rank"];return{name:e,shaderCache:{hint:`${i.cacheKey};${m};${_};${v}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:o,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ue.size(o)/64)},programUniforms:p}),getShaderSource:D=>Kw(D,l,t.dims.length,o.length,r,d,f,0,h,m,_,v)}},QD=e=>{let t=e.count_include_pad!==0,n=Zw(e);if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let i={countIncludePad:t,...n,cacheKey:""};return{...i,cacheKey:I2(i)}},XD=(e,t)=>{zg(e.inputs),e.compute(Qw("AveragePool",e.inputs[0],!1,t))},Xw={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},YD=e=>{let t=e.format;return{format:t,...Xw,cacheKey:t}},JD=(e,t)=>{zg(e.inputs),e.compute(Qw("GlobalAveragePool",e.inputs[0],!0,t))},Yw=(e,t,n,i)=>{let[r,o]=Ww(t,i,n),l=`
      value = max(x_val, value);
    `,c="",d=Ye("x",t.dataType,t.dims.length),f=["rank"],[p,h,m,_,v]=Hw(o,r);return p.push(...Nt(t.dims,o)),{name:e,shaderCache:{hint:`${i.cacheKey};${m};${_};${v}`,inputDependencies:f},getRunData:()=>({outputs:[{dims:o,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ue.size(o)/64)},programUniforms:p}),getShaderSource:b=>Kw(b,d,t.dims.length,o.length,r,l,c,t.dataType===10?-65504:-1e5,h,m,_,v)}},ez=(e,t)=>{zg(e.inputs),e.compute(Yw("MaxPool",e.inputs[0],!1,t))},tz=e=>{let t=e.storage_order,n=e.dilations,i=Zw(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(i.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let r={storageOrder:t,dilations:n,...i,cacheKey:""};return{...r,cacheKey:O2(r)}},nz=e=>{let t=e.format;return{format:t,...Xw,cacheKey:t}},rz=(e,t)=>{zg(e.inputs),e.compute(Yw("GlobalMaxPool",e.inputs[0],!0,t))}}),D2,z2,iz,az,uH=ht(()=>{Zt(),sn(),Zr(),ln(),D2=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((n,i)=>n===e[2].dims[i]).reduce((n,i)=>n&&i,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((r,o)=>o===t.axis||r===e[0].dims[o]).reduce((r,o)=>r&&o,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let n=e[0].dims[t.axis],i=e[1].dims[t.axis];if(t.blockSize<Math.ceil(n/i)||t.blockSize>Math.ceil(n/(i-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},z2=(e,t)=>{let n=Ue.normalizeAxis(t.axis,e[0].dims.length),i=e[0].dataType,r=i===3,o=e[0].dims,l=e[1].dataType,c=Ue.size(o),d=i===3||i===2,f=d?[Math.ceil(Ue.size(e[0].dims)/4)]:e[0].dims,p=e[1].dims,h=e.length>2?e[2]:void 0,m=h?d?[Math.ceil(Ue.size(h.dims)/4)]:h.dims:void 0,_=p.length===0||p.length===1&&p[0]===1,v=_===!1&&p.length===1,b=Rr(c),D=_&&(!d||b===4),T=D?b:1,E=D&&!d?b:1,A=Ye("input",d?12:i,f.length,E),$=Ye("scale",l,p.length),P=h?Ye("zero_point",d?12:i,m.length):void 0,C=It("output",l,o.length,T),S=[A,$];P&&S.push(P);let O=[f,p];h&&O.push(m);let N=[{type:12,data:c/T},{type:12,data:n},{type:12,data:t.blockSize},...Nt(...O,o)],j=X=>{let Y=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${X.registerUniforms(Y).declareVariables(...S,C)}
      ${X.mainStart()}
          ${X.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${C.offsetToIndices("global_idx")};

          // Set input x
          ${d?`
            let input = ${A.getByOffset("global_idx / 4")};
            let x_vec = ${r?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${T===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${A.getByOffset("global_idx")};`};

          // Set scale input
          ${_?`let scale_value= ${$.getByOffset("0")}`:v?`
            let scale_index = ${C.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${$.getByOffset("scale_index")};`:`
            var scale_indices: ${$.type.indices} = output_indices;
            let index = ${$.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${$.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${$.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${P?_?d?`
                let zero_point_input = ${P.getByOffset("0")};
                let zero_point_vec =  ${r?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${P.getByOffset("0")}`:v?d?`
                let zero_point_index = ${C.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${P.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${r?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${C.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${P.getByOffset("zero_point_index")};`:d?`
                let zero_point_offset = ${$.indicesToOffset("scale_indices")};
                let zero_point_input = ${P.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${r?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${P.getByIndices("scale_indices")};`:`let zero_point_value = ${d?r?"i32":"u32":A.type.value}(0);`};
      // Compute and write output
      ${C.setByOffset("global_idx",`${C.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:P?["rank","rank","rank"]:["rank","rank"]},getShaderSource:j,getRunData:()=>({outputs:[{dims:o,dataType:l}],dispatchGroup:{x:Math.ceil(c/T/64),y:1,z:1},programUniforms:N})}},iz=(e,t)=>{D2(e.inputs,t),e.compute(z2(e.inputs,t))},az=e=>Nn({axis:e.axis,blockSize:e.blockSize})}),L2,R2,oz,dH=ht(()=>{rs(),Zt(),ln(),L2=(e,t,n)=>{let i=e===t,r=e<t&&n<0,o=e>t&&n>0;if(i||r||o)throw new Error("Range these inputs' contents are invalid.")},R2=(e,t,n,i)=>{let r=Math.abs(Math.ceil((t-e)/n)),o=[r],l=r,c=[{type:12,data:l},{type:i,data:e},{type:i,data:n},...Nt(o)],d=f=>{let p=It("output",i,o.length),h=p.type.value,m=[{name:"outputSize",type:"u32"},{name:"start",type:h},{name:"delta",type:h}];return`
        ${f.registerUniforms(m).declareVariables(p)}
        ${f.mainStart()}
        ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${h}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${i}`},getShaderSource:d,getRunData:()=>({outputs:[{dims:o,dataType:i}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c})}},oz=e=>{let t=0,n=0,i=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],n=e.inputs[1].getInt32Array()[0],i=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],n=e.inputs[1].getFloat32Array()[0],i=e.inputs[2].getFloat32Array()[0]),yr.webgpu.validateInputContent&&L2(t,n,i),e.compute(R2(t,n,i,e.inputs[0].dataType),{inputs:[]})}}),F2,Jw,ex,N2,sz,lz,fH=ht(()=>{Zt(),sn(),Zr(),ln(),F2=(e,t,n,i)=>{if(e!=="none"&&i!=="i32"&&i!=="u32"&&i!=="f32")throw new Error(`Input ${i} is not supported with reduction ${e}.`);let r=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,o=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${n};`;case"add":return i==="i32"||i==="u32"?`atomicAdd(&${t}, bitcast<${i}>(${n}));`:`
              ${r}bitcast<${i}>(oldValue) + (${n})${o}`;case"max":return i==="i32"||i==="u32"?`atomicMax(&${t}, bitcast<${i}>(${n}));`:`
                ${r}max(bitcast<f32>(oldValue), (${n}))${o}`;case"min":return i==="i32"||i==="u32"?`atomicMin(&${t}, bitcast<${i}>(${n}));`:`${r}min(bitcast<${i}>(oldValue), (${n}))${o}`;case"mul":return`${r}(bitcast<${i}>(oldValue) * (${n}))${o}`;default:throw new Error(`Reduction ${e} is not supported.`)}},Jw=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,ex=(e,t,n)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${n?"global_idx":"idx"} + i];
        ${F2(e.reduction,"output[data_offset + i]","value",t)}
      }`,N2=(e,t)=>{let n=e[0].dims,i=e[1].dims,r=n,o=1,l=Math.ceil(Ue.size(i)/o),c=i[i.length-1],d=Ue.sizeFromDimension(n,c),f=Ue.sizeFromDimension(i,0)/c,p=[{type:12,data:l},{type:12,data:c},{type:12,data:d},...Nt(e[1].dims,e[2].dims,r)],h=m=>{let _=Ye("indices",e[1].dataType,e[1].dims.length),v=Ye("updates",e[2].dataType,e[2].dims.length,o),b=t.reduction!=="none"&&t.reduction!==""?LI("output",e[0].dataType,r.length):It("output",e[0].dataType,r.length,o);return`
      ${m.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(_,v,b)}
      ${m.mainStart()}
        ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${f}; i = i + 1) {
      for (var j = i + 1; j < ${f}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${f}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${Jw(n.length,!1)}
      }
      ${ex(t,b.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${Jw(n.length,!0)}
  }
  ${ex(t,b.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:p}),getShaderSource:h}},sz=e=>Nn({reduction:e.reduction}),lz=(e,t)=>{e.compute(N2(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),j2,B2,U2,tx,V2,G2,W2,H2,K2,q2,Z2,Q2,nx,X2,Y2,J2,eC,tC,cz,uz,hH=ht(()=>{Zt(),sn(),Zr(),ln(),j2=(e,t)=>{if(e.every(n=>n>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},B2=(e,t,n)=>{t.every(r=>r>=0&&r<n||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let i=new Array(n).fill(1);return t.forEach((r,o)=>i[r]=e[o]),i},U2=(e,t,n,i,r,o)=>{let[l,c,d]=n>10?[1,2,3]:[-1,e.length>1?1:-1,-1],f=e[0].dims.length;if(l>0&&e.length>l&&e[l].dims.length>0)e[l].getFloat32Array().forEach(p=>o.push(p));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(c>0&&e.length>c&&e[c].dims.length===1&&e[c].dims[0]>0){if(e[c].getFloat32Array().forEach(p=>i.push(p)),i.length!==0&&i.length!==f&&n>=18&&i.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");j2(i,t),t.axes.length>0&&B2(i,t.axes,f).forEach((p,h)=>i[h]=p)}if(d>0&&e.length>d&&e[d].dims.length===1&&e[d].dims[0]>0&&(e[d].getBigInt64Array().forEach(p=>r.push(Number(p))),r.length!==0&&r.length!==f&&n>=18&&r.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(i.length!==0&&i.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(r.length!==0&&r.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof i<"u"&&typeof r<"u"&&i.length>0&&r.length>f)throw new Error("Resize requires only of scales or sizes to be specified")},tx=(e,t,n,i)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${i}(big / (${n}));
  let fract = ${i}(big % (${n})) / ${i}(${n});
  return whole + fract;
`,V2=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${tx("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${tx("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",G2=(e,t,n)=>`fn getNearestPixelFromOriginal(xOriginal: ${n}, isDownSample: bool) -> ${n} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",W2=(e,t,n)=>{let i=new Array(n).fill(0).concat(new Array(n).fill(1)),r=e.length===0?i:e.slice();return t.length>0?(t.forEach((o,l)=>{i[o]=r[l],i[l+n]=r[t.length+l]}),i):r},H2=(e,t,n,i)=>{let r=[];if(n.length>0)if(i.length>0){if(e.forEach(o=>r.push(o)),Math.max(...i)>e.length)throw new Error("axes is out of bound");i.forEach((o,l)=>r[o]=n[l])}else n.forEach(o=>r.push(o));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");r=e.map((o,l)=>Math.round(o*t[l]))}return r},K2=(e,t,n)=>{let i=(()=>{switch(n.keepAspectRatioPolicy){case"not_larger":return n.axes.length>0?Math.min(...n.axes.map(o=>t[o]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return n.axes.length>0?Math.max(...n.axes.map(o=>t[o]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${n.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let r=e.slice();return n.axes.length>0?(n.axes.forEach(o=>t[o]=i),n.axes.forEach(o=>r[o]=Math.round(e[o]*t[o]))):(t.fill(i,0,t.length),r.forEach((o,l)=>r[l]=Math.round(o*t[l]))),r},q2=(e,t,n,i,r)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${n.length}> {
      var original_indices: array<${e.type.value}, ${n.length}>;
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${zt("uniforms.scales","i",i)};
        var roi_low = ${zt("uniforms.roi","i",r)};
        var roi_hi = ${zt("uniforms.roi",`i + ${t.length}`,r)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${zt("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${zt("uniforms.output_shape","i",n.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,Z2=(e,t,n,i,r,o,l)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${i.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${zt("uniforms.scales","i",r)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${zt("uniforms.roi","i",o)};
          var roi_hi = ${zt("uniforms.roi",`i + ${n.length}`,o)};
          var input_shape_i = ${zt("uniforms.input_shape","i",n.length)};
          var output_shape_i = ${zt("uniforms.output_shape","i",i.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${l} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,Q2=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${zt("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,nx=(e,t,n,i)=>e.rank>i?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",n,"batch")};
`:"",X2=(e,t,n,i,r)=>{let[o,l,c,d]=n.length===2?[-1,0,1,-1]:[0,2,3,1],f=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${f} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",l,`max(0, min(row, ${n[l]} - 1))`)};
      ${e.indicesSet("input_indices",c,`max(0, min(col, ${n[c]} - 1))`)};
      ${nx(e,d,o,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${f} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${f} = originalIndices[${l}];
      var col:${f} = originalIndices[${c}];
      ${i?`if (row < 0 || row > (${n[l]} - 1) || col < 0 || col > (${n[c]} - 1)) {
        return ${r};
      }`:""};
      row = max(0, min(row, ${n[l]} - 1));
      col = max(0, min(col, ${n[c]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${n.length>2?`u32(originalIndices[${d}])`:"0"};
      var batch: u32 =  ${n.length>2?`u32(originalIndices[${o}])`:"0"};
      var x11: ${f} = getInputValue(batch, channel, row1, col1);
      var x12: ${f} = getInputValue(batch, channel, row1, col2);
      var x21: ${f} = getInputValue(batch, channel, row2, col1);
      var x22: ${f} = getInputValue(batch, channel, row2, col2);
      var dx1: ${f} = abs(row - ${f}(row1));
      var dx2: ${f} = abs(${f}(row2) - row);
      var dy1: ${f} = abs(col - ${f}(col1));
      var dy2: ${f} = abs(${f}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},Y2=(e,t,n,i,r,o,l,c,d,f)=>{let p=n.length===2,[h,m]=p?[0,1]:[2,3],_=e.type.value,v=b=>{let D=b===h?"row":"col";return`
      fn ${D}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${_} {
        var output_index = ${t.indicesGet("output_indices",b)};
        var originalIdx: ${_} = getOriginalCoordinateFromResizedCoordinate(output_index, ${r[b]},
        ${i[b]}, ${n[b]}, ${o[b]}, ${o[b]} + ${n.length});
        var fractOriginalIdx: ${_} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${c} && (originalIdx < 0 || originalIdx > (${n[b]} - 1))) {
          return ${d};
        }
        var data: array<${_}, 4> = array<${_}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${D}: ${_} = originalIdx + ${_}(i);
          if (${D} < 0 || ${D} >= ${n[b]}) {
            ${f?`coefs[i + 1] = 0.0;
                        continue;`:c?`return ${d};`:`${D} = max(0, min(${D}, ${n[b]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",b,`u32(${D})`)};
          data[i + 1] = ${b===h?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${v(h)};
    ${v(m)};
  fn getCubicInterpolationCoefs(s: ${_}) -> array<${_}, 4> {
    var absS = abs(s);
    var coeffs: array<${_}, 4> = array<${_}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${_} = 1.0 - absS;
    var twoMinusAbsS: ${_} = 2.0 - absS;
    var onePlusAbsS: ${_} = 1.0 + absS;
    coeffs[0] = ((${l} * onePlusAbsS - 5 * ${l}) * onePlusAbsS + 8 * ${l}) * onePlusAbsS - 4 * ${l};
    coeffs[1] = ((${l} + 2) * absS - (${l} + 3)) * absS * absS + 1;
    coeffs[2] = ((${l} + 2) * oneMinusAbsS - (${l} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${l} * twoMinusAbsS - 5 * ${l}) * twoMinusAbsS + 8 * ${l}) * twoMinusAbsS - 4 * ${l};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${_}, 4>, coefs: array<${_}, 4>) -> ${_} {
    var coefsSum: ${_} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${_} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},J2=(e,t,n,i,r)=>{let[o,l,c,d,f]=n.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],p=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${p} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",l,`max(0, min(depth, ${n[l]} - 1))`)};
      ${e.indicesSet("input_indices",c,`max(0, min(height, ${n[c]} - 1))`)};
      ${e.indicesSet("input_indices",d,`max(0, min(width, ${n[d]} - 1))`)};
      ${nx(e,f,o,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${p} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${p} = originalIndices[${l}];
      var height:${p} = originalIndices[${c}];
      var width:${p} = originalIndices[${d}];
      ${i?`if (depth < 0 || depth > (${n[l]} - 1) || height < 0 || height > (${n[c]} - 1) || width < 0 || (width > ${n[d]} - 1)) {
      return ${r};
        }`:""};

    depth = max(0, min(depth, ${n[l]} - 1));
      height = max(0, min(height, ${n[c]} - 1));
      width = max(0, min(width, ${n[d]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${n.length>3?`u32(originalIndices[${f}])`:"0"};
      var batch: u32 =  ${n.length>3?`u32(originalIndices[${o}])`:"0"};

      var x111: ${p} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${p} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${p} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${p} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${p} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${p} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${p} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${p} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${p} = abs(depth - ${p}(depth1));
      var dx2: ${p} = abs(${p}(depth2) - depth);
      var dy1: ${p} = abs(height - ${p}(height1));
      var dy2: ${p} = abs(${p}(height2) - height);
      var dz1: ${p} = abs(width - ${p}(width1));
      var dz2: ${p} = abs(${p}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},eC=(e,t,n,i,r,o)=>{let l=e.dims,c=W2(o,t.axes,l.length),d=H2(l,i,r,t.axes),f=i.slice();i.length===0&&(f=l.map((E,A)=>E===0?1:d[A]/E),t.keepAspectRatioPolicy!=="stretch"&&(d=K2(l,f,t)));let p=It("output",e.dataType,d.length),h=Ye("input",e.dataType,l.length),m=Ue.size(d),_=l.length===d.length&&l.every((E,A)=>E===d[A]),v=t.coordinateTransformMode==="tf_crop_and_resize",b=t.extrapolationValue,D=h.type.value,T=E=>`
      ${_?"":`
      ${V2(t.coordinateTransformMode,D)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${Q2(h,l)};
              ${G2(t.nearestMode,n,D)};
              ${Z2(h,p,l,d,f.length,c.length,v)};
              `;case"linear":return`
              ${q2(p,l,d,f.length,c.length)};
              ${(()=>{if(l.length===2||l.length===4)return`${X2(h,p,l,v,b)}`;if(l.length===3||l.length===5)return`${J2(h,p,l,v,b)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(l.length===2||l.length===4)return`${Y2(h,p,l,d,f,c,t.cubicCoeffA,v,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${E.registerUniform("output_size","u32").registerUniform("scales","f32",f.length).registerUniform("roi","f32",c.length).declareVariables(h,p)}
      ${E.mainStart()}
        ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${_?"output[global_idx] = input[global_idx];":`
        let output_indices = ${p.offsetToIndices("global_idx")};
        var input_indices: ${h.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${h.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${l.length===2||l.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${n}|${f.length>0?t.mode==="cubic"?f:f.length:""}|${r.length>0?r:""}|${c.length>0?c:""}|${_}|${t.mode==="nearest"?l.length:l}`,inputDependencies:["rank"]},getShaderSource:T,getRunData:()=>({outputs:[{dims:d,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},{type:1,data:f},{type:1,data:c},...Nt(l,d)]})}},tC=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},cz=(e,t)=>{let n=[],i=[],r=[],o=tC(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");U2(e.inputs,t,o,n,i,r),e.compute(eC(e.inputs[0],t,o,n,i,r),{inputs:[0]})},uz=e=>{let t=e.antialias,n=e.axes,i=e.coordinateTransformMode,r=e.cubicCoeffA,o=e.excludeOutside!==0,l=e.extrapolationValue,c=e.keepAspectRatioPolicy,d=e.mode,f=e.nearestMode===""?"simple":e.nearestMode;return Nn({antialias:t,axes:n,coordinateTransformMode:i,cubicCoeffA:r,excludeOutside:o,extrapolationValue:l,keepAspectRatioPolicy:c,mode:d,nearestMode:f})}}),nC,rC,dz,mH=ht(()=>{Zt(),sn(),ln(),nC=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],n=e[1],i=e[2];if(t.dataType!==n.dataType||t.dataType!==i.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(n.dims.length!==3&&n.dims.length!==2)throw new Error("Skip must be 2D or 3D");let r=t.dims[t.dims.length-1],o=t.dims[t.dims.length-2];if(n.dims[n.dims.length-1]!==r)throw new Error("Skip must have the same hidden size as input");if(n.dims[n.dims.length-2]!==o)throw new Error("Skip must have the same sequence length as input");if(i.dims.length!==1)throw new Error("Gamma must be 1D");if(i.dims[i.dims.length-1]!==r)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let l=e[3];if(l.dims.length!==1)throw new Error("Beta must be 1D");if(l.dims[l.dims.length-1]!==r)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let l=e[4];if(l.dims.length!==1)throw new Error("Bias must be 1D");if(l.dims[l.dims.length-1]!==r)throw new Error("Bias must have the same hidden size as input")}},rC=(e,t,n,i)=>{let r=t.simplified,o=e[0].dims,l=Ue.size(o),c=o,d=l,f=o.slice(-1)[0],p=i?o.slice(0,-1).concat(1):[],h=!r&&e.length>3,m=e.length>4,_=i&&n>1,v=i&&n>2,b=n>3,D=64,T=Rr(f),E=[{type:12,data:d},{type:12,data:T},{type:12,data:f},{type:1,data:t.epsilon}],A=P=>{let C=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],S=[Ye("x",e[0].dataType,e[0].dims,T),Ye("skip",e[1].dataType,e[1].dims,T),Ye("gamma",e[2].dataType,e[2].dims,T)];h&&S.push(Ye("beta",e[3].dataType,e[3].dims,T)),m&&S.push(Ye("bias",e[4].dataType,e[4].dims,T)),S.push(It("output",e[0].dataType,c,T)),_&&S.push(It("mean_output",1,p)),v&&S.push(It("inv_std_output",1,p)),b&&S.push(It("input_skip_bias_sum",e[0].dataType,c,T));let O=gi(e[0].dataType),N=gi(1,T);return`

      ${P.registerUniforms(C).declareVariables(...S)}
      var<workgroup> sum_shared : array<${N}, ${D}>;
      var<workgroup> sum_squared_shared : array<${N}, ${D}>;

      ${P.mainStart([D,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${D};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${D};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${D-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${m?"bias[offset1d + i]":O+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${b?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${zh(O,T,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${D};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${iu("sum",T)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${iu("square_sum",T)} / f32(uniforms.hidden_size) ${r?"":"- mean * mean"} + uniforms.epsilon);
        ${_?"mean_output[global_idx] = mean;":""}
        ${v?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${r?"":`- ${O}(mean)`}) *
            ${O}(inv_std_dev) * gamma[offset1d + i]
            ${h?"+ beta[offset1d + i]":""};
        }
      }`},$=[{dims:c,dataType:e[0].dataType}];return n>1&&$.push({dims:p,dataType:1}),n>2&&$.push({dims:p,dataType:1}),n>3&&$.push({dims:o,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${T};${_};${v};${b}`,inputDependencies:e.map((P,C)=>"type")},getShaderSource:A,getRunData:()=>({outputs:$,dispatchGroup:{x:Math.ceil(d/f)},programUniforms:E})}},dz=(e,t)=>{nC(e.inputs);let n=[0];e.outputCount>1&&n.push(-3),e.outputCount>2&&n.push(-3),e.outputCount>3&&n.push(3),e.compute(rC(e.inputs,t,e.outputCount,!1),{outputs:n})}}),iC,Lg,aC,rx,oC,sC,fz,hz,pH=ht(()=>{Zt(),sn(),Zr(),ln(),iC=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((n,i)=>{if(e[i+1].dataType!==6&&e[i+1].dataType!==7)throw new Error(`Input ${i} must be an array of int32 or int64`)})},Lg=(e,t)=>{let n=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(i=>n.push(Number(i)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(i=>n.push(Number(i)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return n},aC=(e,t)=>{if(e.length>1){let n=Lg(e,1),i=Lg(e,2),r=Lg(e,3);return r.length===0&&(r=[...Array(e[0].dims.length).keys()]),Nn({starts:n,ends:i,axes:r})}else return t},rx=(e,t,n,i,r)=>{let o=e;return e<0&&(o+=n[i[t]]),r[t]<0?Math.max(0,Math.min(o,n[i[t]]-1)):Math.max(0,Math.min(o,n[i[t]]))},oC=(e,t,n)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${n.length}; i >= 0; i--) {
            let input_shape_i = ${zt("uniforms.input_shape","i",n.length)};
            let steps_i = ${zt("uniforms.steps","i",n.length)};
            let signs_i = ${zt("uniforms.signs","i",n.length)};
            let starts_i = ${zt("uniforms.starts","i",n.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,sC=(e,t)=>{let n=e[0].dims,i=Ue.size(n),r=t.axes.length>0?Ue.normalizeAxes(t.axes,n.length):[...Array(n.length).keys()],o=Lg(e,4);o.forEach(T=>T!==0||(()=>{throw new Error("step cannot be 0")})),o.length===0&&(o=Array(r.length).fill(1));let l=t.starts.map((T,E)=>rx(T,E,n,r,o)),c=t.ends.map((T,E)=>rx(T,E,n,r,o));if(r.length!==l.length||r.length!==c.length)throw new Error("start, ends and axes should have the same number of elements");if(r.length!==n.length)for(let T=0;T<n.length;++T)r.includes(T)||(l.splice(T,0,0),c.splice(T,0,n[T]),o.splice(T,0,1));let d=o.map(T=>Math.sign(T));o.forEach((T,E,A)=>{if(T<0){let $=(c[E]-l[E])/T,P=l[E],C=P+$*o[E];l[E]=C,c[E]=P,A[E]=-T}});let f=n.slice(0);r.forEach((T,E)=>{f[T]=Math.ceil((c[T]-l[T])/o[T])});let p={dims:f,dataType:e[0].dataType},h=It("output",e[0].dataType,f.length),m=Ye("input",e[0].dataType,e[0].dims.length),_=Ue.size(f),v=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:l.length},{name:"signs",type:"i32",length:d.length},{name:"steps",type:"u32",length:o.length}],b=[{type:12,data:_},{type:12,data:l},{type:6,data:d},{type:12,data:o},...Nt(e[0].dims,f)],D=T=>`
      ${T.registerUniforms(v).declareVariables(m,h)}
        ${oC(m,h,n)}
        ${T.mainStart()}
          ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${h.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${h.setByOffset("global_idx",m.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${d.length}_${l.length}_${o.length}`,inputDependencies:["rank"]},getShaderSource:D,getRunData:()=>({outputs:[p],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:b})}},fz=(e,t)=>{iC(e.inputs,t);let n=aC(e.inputs,t);e.compute(sC(e.inputs,n),{inputs:[0]})},hz=e=>{let t=e.starts,n=e.ends,i=e.axes;return Nn({starts:t,ends:n,axes:i})}}),lC,cC,mz,pz,gH=ht(()=>{Zt(),sn(),Zr(),du(),ln(),lC=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},cC=(e,t)=>{let n=e.inputs[0],i=n.dims,r=Ue.size(i),o=i.length,l=Ue.normalizeAxis(t.axis,o),c=l<i.length-1,d,f=[];c?(f=Array.from({length:o},(S,O)=>O),f[l]=o-1,f[o-1]=l,d=e.compute(Va(n,f),{inputs:[n],outputs:[-1]})[0]):d=n;let p=d.dims,h=p[o-1],m=r/h,_=Rr(h),v=h/_,b=64;m===1&&(b=256);let D=(S,O)=>O===4?`max(max(${S}.x, ${S}.y), max(${S}.z, ${S}.w))`:O===2?`max(${S}.x, ${S}.y)`:O===3?`max(max(${S}.x, ${S}.y), ${S}.z)`:S,T=Ye("x",d.dataType,d.dims,_),E=It("result",d.dataType,d.dims,_),A=T.type.value,$=gi(d.dataType)==="f32"?`var threadMax = ${A}(-3.402823e+38f);`:`var threadMax = ${A}(-65504.0h);`,P=S=>`
      var<workgroup> rowMaxShared : ${A};
      var<workgroup> rowSumShared : ${A};
      var<workgroup> threadShared : array<${A}, ${b}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${A} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${A}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${S.registerUniform("packedCols","i32").declareVariables(T,E)}
      ${S.mainStart(b)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${b};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${$}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${A}(${D("threadShared[0]",_)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${A}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${A}(${iu("threadShared[0]",_)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,C=e.compute({name:"Softmax",shaderCache:{hint:`${_};${b}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:p,dataType:d.dataType}],dispatchGroup:{x:m},programUniforms:[{type:6,data:v}]}),getShaderSource:P},{inputs:[d],outputs:[c?-1:0]})[0];c&&e.compute(Va(C,f),{inputs:[C]})},mz=(e,t)=>{lC(e.inputs),cC(e,t)},pz=e=>Nn({axis:e.axis})}),ix,uC,dC,fC,gz,_H=ht(()=>{Zt(),sn(),ln(),ix=e=>Array.from(e.getBigInt64Array(),Number),uC=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(ix(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},dC=(e,t)=>{let n=[];for(let i=0;i<e.length;++i)n.push(e[i]*t[i]);return n},fC=(e,t)=>{let n=e[0].dims,i=t??ix(e[1]),r=dC(n,i),o=Ue.size(r),l=e[0].dataType,c=Ye("input",l,n.length),d=It("output",l,r.length),f=p=>`
      const inputShape = ${c.indices(...n)};
      ${p.registerUniform("output_size","u32").declareVariables(c,d)}
      ${p.mainStart()}
      ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${d.offsetToIndices("global_idx")};
      var input_indices: ${c.type.indices};
      for (var i = 0; i < ${n.length}; i++) {
        let input_dim_i = ${c.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${d.indicesGet("output_indices","i")}  % input_dim_i;

        ${c.indicesSet("input_indices","i","input_dim_value")}
      }
      ${d.setByOffset("global_idx",c.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${i}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:[{type:12,data:o},...Nt(e[0].dims,r)]}),getShaderSource:f}},gz=e=>{uC(e.inputs),e.compute(fC(e.inputs),{inputs:[0]})}}),hC,mC,_z,vH=ht(()=>{Zt(),sn(),ln(),hC=(e,t,n,i,r)=>{let o=It("output_data",r,n.length,4),l=Ye("a_data",t[1].dataType,t[1].dims.length,4),c=Ye("b_data",t[2].dataType,t[2].dims.length,4),d=Ye("c_data",t[0].dataType,t[0].dims.length,4),f,p=(h,m,_)=>`select(${m}, ${h}, ${_})`;if(!i)f=o.setByOffset("global_idx",p(l.getByOffset("global_idx"),c.getByOffset("global_idx"),d.getByOffset("global_idx")));else{let h=(m,_,v="")=>{let b=`a_data[index_a${_}][component_a${_}]`,D=`b_data[index_b${_}][component_b${_}]`,T=`bool(c_data[index_c${_}] & (0xffu << (component_c${_} * 8)))`;return`
            let output_indices${_} = ${o.offsetToIndices(`global_idx * 4u + ${_}u`)};
            let offset_a${_} = ${l.broadcastedIndicesToOffset(`output_indices${_}`,o)};
            let offset_b${_} = ${c.broadcastedIndicesToOffset(`output_indices${_}`,o)};
            let offset_c${_} = ${d.broadcastedIndicesToOffset(`output_indices${_}`,o)};
            let index_a${_} = offset_a${_} / 4u;
            let index_b${_} = offset_b${_} / 4u;
            let index_c${_} = offset_c${_} / 4u;
            let component_a${_} = offset_a${_} % 4u;
            let component_b${_} = offset_b${_} % 4u;
            let component_c${_} = offset_c${_} % 4u;
            ${m}[${_}] = ${v}(${p(b,D,T)});
          `};r===9?f=`
            var data = vec4<u32>(0);
            ${h("data",0,"u32")}
            ${h("data",1,"u32")}
            ${h("data",2,"u32")}
            ${h("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:f=`
            ${h("output_data[global_idx]",0)}
            ${h("output_data[global_idx]",1)}
            ${h("output_data[global_idx]",2)}
            ${h("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(d,l,c,o)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${f}
      }`},mC=e=>{let t=e[1].dims,n=e[2].dims,i=e[0].dims,r=e[1].dataType,o=!(Ue.areEqual(t,n)&&Ue.areEqual(n,i)),l=t,c=Ue.size(t);if(o){let f=Gh.calcShape(Gh.calcShape(t,n,!1),i,!1);if(!f)throw new Error("Can't perform where op on the given tensors");l=f,c=Ue.size(l)}let d=Math.ceil(c/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:f=>hC(f,e,l,o,r),getRunData:()=>({outputs:[{dims:l,dataType:r}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:d},...Nt(i,t,n,l)]})}},_z=e=>{e.compute(mC(e.inputs))}}),vz,yH=ht(()=>{OW(),s1(),DW(),zW(),LW(),RW(),FW(),VW(),WW(),HW(),KW(),qW(),ZW(),QW(),XW(),YW(),JW(),eH(),tH(),nH(),rH(),iH(),aH(),oH(),sH(),RD(),lH(),cH(),uH(),dH(),fH(),o1(),hH(),UD(),mH(),pH(),gH(),jD(),_H(),du(),l1(),vH(),vz=new Map([["Abs",[dO]],["Acos",[fO]],["Acosh",[hO]],["Add",[KO]],["ArgMax",[sO,Bx]],["ArgMin",[oO,Bx]],["Asin",[mO]],["Asinh",[pO]],["Atan",[gO]],["Atanh",[_O]],["Attention",[lO]],["AveragePool",[XD,QD]],["BatchNormalization",[cO]],["BiasAdd",[uO]],["BiasSplitGelu",[HO]],["Cast",[yO,vO]],["Ceil",[wO]],["Clip",[bO]],["Concat",[rD,iD]],["Conv",[Kx,Hx]],["ConvTranspose",[mD,hD]],["Cos",[xO]],["Cosh",[MO]],["CumSum",[pD,gD]],["DepthToSpace",[_D,vD]],["DequantizeLinear",[iz,az]],["Div",[qO]],["Einsum",[yD,bD]],["Elu",[TO,Gg]],["Equal",[ZO]],["Erf",[SO]],["Exp",[EO]],["Expand",[wD]],["FastGelu",[xD]],["Floor",[$O]],["FusedConv",[Kx,Hx]],["Gather",[TD,MD]],["GatherElements",[kD,CD]],["GatherBlockQuantized",[$D,PD]],["GatherND",[SD,ED]],["Gelu",[PO]],["Gemm",[ID,AD]],["GlobalAveragePool",[JD,YD]],["GlobalMaxPool",[rz,nz]],["Greater",[JO]],["GreaterOrEqual",[tD]],["GridSample",[OD,DD]],["GroupQueryAttention",[VD]],["HardSigmoid",[LO,zO]],["InstanceNormalization",[GD]],["LayerNormalization",[WD]],["LeakyRelu",[CO,Gg]],["Less",[eD]],["LessOrEqual",[nD]],["Log",[GO]],["MatMul",[HD]],["MatMulNBits",[KD,qD]],["MaxPool",[ez,tz]],["Mul",[QO]],["MultiHeadAttention",[LD,zD]],["Neg",[AO]],["Not",[kO]],["Pad",[ZD]],["Pow",[XO]],["QuickGelu",[WO,Gg]],["Range",[oz]],["Reciprocal",[IO]],["ReduceMin",[tO]],["ReduceMean",[QI]],["ReduceMax",[eO]],["ReduceSum",[rO]],["ReduceProd",[nO]],["ReduceL1",[XI]],["ReduceL2",[YI]],["ReduceLogSum",[aO]],["ReduceLogSumExp",[JI]],["ReduceSumSquare",[iO]],["Relu",[OO]],["Resize",[cz,uz]],["RotaryEmbedding",[BD]],["ScatterND",[lz,sz]],["Sigmoid",[DO]],["Sin",[RO]],["Sinh",[FO]],["Slice",[fz,hz]],["SkipLayerNormalization",[dz]],["Split",[FD,ND]],["Sqrt",[NO]],["Softmax",[mz,pz]],["Sub",[YO]],["Tan",[jO]],["Tanh",[BO]],["ThresholdedRelu",[VO,Gg]],["Tile",[gz]],["Transpose",[FI,NI]],["Where",[_z]]])}),yz,bH=ht(()=>{rs(),Gl(),ln(),yz=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,n,i,r){ns(e.programInfo.name);let o=this.backend.device,l=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let c=[];for(let f of t)c.push({binding:c.length,resource:{buffer:f.buffer}});for(let f of n)c.push({binding:c.length,resource:{buffer:f.buffer}});r&&c.push({binding:c.length,resource:r});let d=o.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:c,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let f={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:d,dispatchGroup:i};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(f)}l.setPipeline(e.computePipeline),l.setBindGroup(0,d),l.dispatchWorkgroups(...i),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),yo(e.programInfo.name)}dispose(){}build(e,t){ns(e.name);let n=this.backend.device,i=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(f=>{n.features.has(f.feature)&&i.push(`enable ${f.extension};`)});let r=RI(t,this.backend.device.limits),o=e.getShaderSource(r),l=`${i.join(`
`)}
${r.additionalImplementations}
${o}`,c=n.createShaderModule({code:l,label:e.name});En("verbose",()=>`[WebGPU] ${e.name} shader code: ${l}`);let d=n.createComputePipeline({compute:{module:c,entryPoint:"main"},layout:"auto",label:e.name});return yo(e.name),{programInfo:e,computePipeline:d,uniformVariablesInfo:r.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,n=typeof e=="number"?1:e.y||1,i=typeof e=="number"?1:e.z||1,r=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=r&&n<=r&&i<=r)return[t,n,i];let o=t*n*i,l=Math.ceil(Math.sqrt(o));if(l>r){if(l=Math.ceil(Math.cbrt(o)),l>r)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[l,l,l]}else return[l,l,1]}}}),bz={};nm(bz,{WebGpuBackend:()=>wz});var pC,gC,_C,wz,wH=ht(()=>{rs(),Zt(),Gl(),II(),AW(),yH(),bH(),pC=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let n=[];for(let i=0;i<e.length;++i){let r=e[i].dataType;switch(t[i]){case"none":{n.push("");break}case"type":{n.push(`${r}`);break}case"rank":{let o=e[i].dims.length;n.push(`${r};${o}`);break}case"dims":{let o=e[i].dims.join(",");n.push(`${r};${o}`);break}default:throw new Error(`unsupported input dependency: ${t[i]}`)}}return n.join("|")},gC=(e,t,n)=>{let i=e.name;return e.shaderCache?.hint&&(i+="["+e.shaderCache.hint+"]"),i+=":"+n+`:${pC(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,i},_C=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},wz=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let n=[],i={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:n},r=o=>t.features.has(o)&&n.push(o)&&!0;r("chromium-experimental-timestamp-query-inside-passes")||r("timestamp-query"),r("shader-f16"),r("subgroups"),this.device=await t.requestDevice(i),this.adapterInfo=new _C(t.info||await t.requestAdapterInfo()),this.gpuDataManager=zI(this),this.programManager=new yz(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,n1(e.logLevel,!!e.debug),this.device.onuncapturederror=o=>{o.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${o.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;ns(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{let t=new BigUint64Array(e.getMappedRange()),n=this.pendingQueries.get(e);for(let i=0;i<t.length/2;i++){let r=n[i],o=r.kernelId,l=this.kernels.get(o),c=l.kernelType,d=l.kernelName,f=r.programName,p=r.inputTensorViews,h=r.outputTensorViews,m=t[i*2],_=t[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=m);let v=Number(m-this.queryTimeBase),b=Number(_-this.queryTimeBase);if(!Number.isSafeInteger(v)||!Number.isSafeInteger(b))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:p.map(D=>({dims:D.dims,dataType:Rl(D.dataType)})),outputsMetadata:h.map(D=>({dims:D.dims,dataType:Rl(D.dataType)})),kernelId:o,kernelType:c,kernelName:d,programName:f,startTime:v,endTime:b});else{let D="";p.forEach((E,A)=>{D+=`input[${A}]: [${E.dims}] | ${Rl(E.dataType)}, `});let T="";h.forEach((E,A)=>{T+=`output[${A}]: [${E.dims}] | ${Rl(E.dataType)}, `}),console.log(`[profiling] kernel "${o}|${c}|${d}|${f}" ${D}${T}execution time: ${b-v} ns`)}l_("GPU",`${f}::${m}::${_}`)}e.unmap(),this.pendingQueries.delete(e)}),yo()}run(e,t,n,i,r,o){ns(e.name);let l=[];for(let E=0;E<t.length;++E){let A=t[E].data;if(A===0)continue;let $=this.gpuDataManager.get(A);if(!$)throw new Error(`no GPU data for input: ${A}`);l.push($)}let{outputs:c,dispatchGroup:d,programUniforms:f}=e.getRunData(t),p=n.length===0?c.map((E,A)=>A):n;if(p.length!==c.length)throw new Error(`Output size ${p.length} must be equal to ${c.length}.`);let h=[],m=[];for(let E=0;E<c.length;++E){if(!Number.isInteger(p[E])||p[E]<-3||p[E]>=o)throw new Error(`Invalid output index: ${p[E]}`);if(p[E]===-3)continue;let A=p[E]===-1,$=p[E]===-2,P=A||$?r(c[E].dataType,c[E].dims):i(p[E],c[E].dataType,c[E].dims);if(h.push(P),P.data===0)continue;let C=this.gpuDataManager.get(P.data);if(!C)throw new Error(`no GPU data for output: ${P.data}`);if(A&&this.temporaryData.push(C),$){let S=this.kernelPersistentData.get(this.currentKernelId);S||(S=[],this.kernelPersistentData.set(this.currentKernelId,S)),S.push(C)}m.push(C)}if(l.length!==t.length||m.length!==h.length){if(m.length===0)return yo(e.name),h;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let _;if(f){let E=0,A=[];f.forEach(S=>{let O=typeof S.data=="number"?[S.data]:S.data;if(O.length===0)return;let N=S.type===10?2:4,j,X;S.type===10?(X=O.length>4?16:O.length>2?8:O.length*N,j=O.length>4?16:N*O.length):(X=O.length<=2?O.length*N:16,j=16),E=Math.ceil(E/X)*X,A.push(E);let Y=S.type===10?8:4;E+=O.length>4?Math.ceil(O.length/Y)*j:O.length*N});let $=16;E=Math.ceil(E/$)*$;let P=new ArrayBuffer(E);f.forEach((S,O)=>{let N=A[O],j=typeof S.data=="number"?[S.data]:S.data;if(S.type===6)new Int32Array(P,N,j.length).set(j);else if(S.type===12)new Uint32Array(P,N,j.length).set(j);else if(S.type===10)new Uint16Array(P,N,j.length).set(j);else if(S.type===1)new Float32Array(P,N,j.length).set(j);else throw new Error(`Unsupported uniform type: ${Rl(S.type)}`)});let C=this.gpuDataManager.create(E,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(C.buffer,0,P,0,E),this.gpuDataManager.release(C.id),_={offset:0,size:E,buffer:C.buffer}}let v=this.programManager.normalizeDispatchGroupSize(d),b=v[1]===1&&v[2]===1,D=gC(e,t,b),T=this.programManager.getArtifact(D);if(T||(T=this.programManager.build(e,v),this.programManager.setArtifact(D,T),En("info",()=>`[artifact] key: ${D}, programName: ${e.name}`)),f&&T.uniformVariablesInfo){if(f.length!==T.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${T.uniformVariablesInfo.length}, got ${f.length} in program "${T.programInfo.name}".`);for(let E=0;E<f.length;E++){let A=f[E],$=A.type,P=typeof A.data=="number"?1:A.data.length,[C,S]=T.uniformVariablesInfo[E];if($!==C||P!==S)throw new Error(`Uniform variable ${E} mismatch: expect type ${C} with size ${S}, got type ${$} with size ${P} in program "${T.programInfo.name}".`)}}if(En("info",()=>`[ProgramManager] run "${e.name}" (key=${D}) with ${v[0]}x${v[1]}x${v[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let E={kernelId:this.currentKernelId,programName:T.programInfo.name,inputTensorViews:t,outputTensorViews:h};this.pendingKernels.push(E),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(E)}return this.programManager.run(T,l,m,v,_),yo(e.name),h}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,n,i){let r=vz.get(e);if(!r)throw new Error(`kernel not implemented: ${e}`);let o={kernelType:e,kernelName:i,kernelEntry:r[0],attributes:[r[1],n]};this.kernels.set(t,o)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let n of t)this.gpuDataManager.release(n.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,n){let i=this.kernels.get(e);if(!i)throw new Error(`kernel not created: ${e}`);let r=i.kernelType,o=i.kernelName,l=i.kernelEntry,c=i.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${r}] ${o}" is not allowed to be called recursively`);this.currentKernelId=e,c[0]&&(c[1]=c[0](c[1]),c[0]=void 0),En("info",()=>`[WebGPU] Start to run kernel "[${r}] ${o}"...`);let d=this.env.debug;this.temporaryData=[];try{return d&&this.device.pushErrorScope("validation"),l(t,c[1]),0}catch(f){return n.push(Promise.resolve(`[WebGPU] Kernel "[${r}] ${o}" failed. ${f}`)),1}finally{d&&n.push(this.device.popErrorScope().then(f=>f?`GPU validation error for kernel "[${r}] ${o}": ${f.message}`:null));for(let f of this.temporaryData)this.gpuDataManager.release(f.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,n,i){let r=this.sessionExternalDataMapping.get(e);r||(r=new Map,this.sessionExternalDataMapping.set(e,r));let o=r.get(t),l=this.gpuDataManager.registerExternalBuffer(n,i,o);return r.set(t,[l,n]),l}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(n=>this.gpuDataManager.unregisterExternalBuffer(n[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,n){return async()=>{let i=await Fx(this,e,t);return r1(i.buffer,n)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){En("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){En("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){En("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),n=e.length;this.pendingKernels=[];for(let i=0;i<n;i++){let r=this.getComputePassEncoder(),o=e[i];this.writeTimestamp(this.pendingDispatchNumber*2),r.setPipeline(o.computePipeline),r.setBindGroup(0,o.bindGroup),r.dispatchWorkgroups(...o.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[i]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),xz={};nm(xz,{init:()=>Mz});var ey,vC,Mz,xH=ht(()=>{Zt(),Gl(),sn(),kW(),ey=class Tz{constructor(t,n,i,r){this.module=t,this.dataType=n,this.data=i,this.dims=r}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(Ue.size(t)!==Ue.size(this.dims))throw new Error("Invalid new shape");return new Tz(this.module,this.dataType,this.data,t)}},vC=class{constructor(e,t,n){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let i=e.PTR_SIZE,r=n/e.PTR_SIZE,o=i===4?"i32":"i64";this.opKernelContext=Number(e.getValue(i*r++,o));let l=Number(e.getValue(i*r++,o));this.outputCount=Number(e.getValue(i*r++,o)),this.customDataOffset=Number(e.getValue(i*r++,"*")),this.customDataSize=Number(e.getValue(i*r++,o));let c=[];for(let d=0;d<l;d++){let f=Number(e.getValue(i*r++,o)),p=Number(e.getValue(i*r++,"*")),h=Number(e.getValue(i*r++,o)),m=[];for(let _=0;_<h;_++)m.push(Number(e.getValue(i*r++,o)));c.push(new ey(e,f,p,m))}this.inputs=c}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){let n=t?.inputs?.map(l=>typeof l=="number"?this.inputs[l]:l)??this.inputs,i=t?.outputs??[],r=(l,c,d)=>new ey(this.module,c,this.output(l,d),d),o=(l,c)=>{let d=Td(l,c);if(!d)throw new Error(`Unsupported data type: ${l}`);let f=d>0?this.backend.gpuDataManager.create(d).id:0;return new ey(this.module,l,f,c)};return this.backend.run(e,n,i,r,o,this.outputCount)}output(e,t){let n=this.module.stackSave();try{let i=this.module.PTR_SIZE,r=i===4?"i32":"i64",o=this.module.stackAlloc((1+t.length)*i);this.module.setValue(o,t.length,r);for(let l=0;l<t.length;l++)this.module.setValue(o+i*(l+1),t[l],r);return this.module._JsepOutput(this.opKernelContext,e,o)}catch(i){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${i}`)}finally{this.module.stackRestore(n)}}},Mz=async(e,t,n,i)=>{let r=t.jsepInit;if(!r)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let o=(wH(),s_(bz)).WebGpuBackend,l=new o;await l.initialize(n,i),r("webgpu",[l,c=>l.alloc(Number(c)),c=>l.free(c),(c,d,f,p=!1)=>{if(p)En("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(c)}, dst=${Number(d)}, size=${Number(f)}`),l.memcpy(Number(c),Number(d));else{En("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(c)}, gpuDataId=${Number(d)}, size=${Number(f)}`);let h=t.HEAPU8.subarray(Number(c>>>0),Number(c>>>0)+Number(f));l.upload(Number(d),h)}},async(c,d,f)=>{En("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${c}, dataOffset=${d}, size=${f}`),await l.download(Number(c),()=>t.HEAPU8.subarray(Number(d)>>>0,Number(d+f)>>>0))},(c,d,f)=>l.createKernel(c,Number(d),f,t.UTF8ToString(t._JsepGetNodeName(Number(d)))),c=>l.releaseKernel(c),(c,d,f,p)=>{En("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${f}, kernel=${c}, contextDataOffset=${d}`);let h=new vC(t,l,Number(d));return l.computeKernel(Number(c),h,p)},()=>l.captureBegin(),()=>l.captureEnd(),()=>l.replay()])}else{let o=new DI(n);r("webnn",[o,()=>o.reserveTensorId(),l=>o.releaseTensorId(l),async(l,c,d,f,p)=>o.ensureTensor(l,c,d,f,p),(l,c)=>{o.uploadTensor(l,c)},async(l,c)=>o.downloadTensor(l,c)])}}}),yC,m1,p1,Kc,bC,ax,Wy,g1,_1,ox,v1,y1,b1,Sz=ht(()=>{$W(),PW(),Zt(),Vd(),XM(),PI(),yC=(e,t)=>{dr()._OrtInit(e,t)!==0&&Qn("Can't initialize onnxruntime.")},m1=async e=>{yC(e.wasm.numThreads,jy(e.logLevel))},p1=async(e,t)=>{dr().asyncInit?.();{let n=(xH(),s_(xz)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let i=e.webgpu.adapter;if(i){if(typeof i.limits!="object"||typeof i.features!="object"||typeof i.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let r=e.webgpu.powerPreference;if(r!==void 0&&r!=="low-power"&&r!=="high-performance")throw new Error(`Invalid powerPreference setting: "${r}"`);let o=e.webgpu.forceFallbackAdapter;if(o!==void 0&&typeof o!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${o}"`);if(i=await navigator.gpu.requestAdapter({powerPreference:r,forceFallbackAdapter:o}),!i)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await n("webgpu",dr(),e,i)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await n("webnn",dr(),e)}}},Kc=new Map,bC=e=>{let t=dr(),n=t.stackSave();try{let i=t.PTR_SIZE,r=t.stackAlloc(2*i);t._OrtGetInputOutputCount(e,r,r+i)!==0&&Qn("Can't get session input/output count.");let o=i===4?"i32":"i64";return[Number(t.getValue(r,o)),Number(t.getValue(r+i,o))]}finally{t.stackRestore(n)}},ax=(e,t)=>{let n=dr(),i=n.stackSave(),r=0;try{let o=n.PTR_SIZE,l=n.stackAlloc(2*o);n._OrtGetInputOutputMetadata(e,t,l,l+o)!==0&&Qn("Can't get session input/output metadata.");let c=Number(n.getValue(l,"*"));r=Number(n.getValue(l+o,"*"));let d=n.HEAP32[r/4];if(d===0)return[c,0];let f=n.HEAPU32[r/4+1],p=[];for(let h=0;h<f;h++){let m=Number(n.getValue(r+8+h*o,"*"));p.push(m!==0?n.UTF8ToString(m):Number(n.getValue(r+8+(h+f)*o,"*")))}return[c,d,p]}finally{n.stackRestore(i),r!==0&&n._OrtFree(r)}},Wy=e=>{let t=dr(),n=t._malloc(e.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,n),[n,e.byteLength]},g1=async(e,t)=>{let n,i,r=dr();Array.isArray(e)?[n,i]=e:e.buffer===r.HEAPU8.buffer?[n,i]=[e.byteOffset,e.byteLength]:[n,i]=Wy(e);let o=0,l=0,c=0,d=[],f=[],p=[];try{if([l,d]=await $I(t),t?.externalData&&r.mountExternalData){let $=[];for(let P of t.externalData){let C=typeof P=="string"?P:P.path;$.push(t1(typeof P=="string"?P:P.data).then(S=>{r.mountExternalData(C,S)}))}await Promise.all($)}for(let $ of t?.executionProviders??[])if((typeof $=="string"?$:$.name)==="webnn"){if(r.shouldTransferToMLTensor=!1,typeof $!="string"){let P=$,C=P?.context,S=P?.gpuDevice,O=P?.deviceType,N=P?.powerPreference;C?r.currentContext=C:S?r.currentContext=await r.webnnCreateMLContext(S):r.currentContext=await r.webnnCreateMLContext({deviceType:O,powerPreference:N})}else r.currentContext=await r.webnnCreateMLContext();break}o=await r._OrtCreateSession(n,i,l),r.webgpuOnCreateSession?.(o),o===0&&Qn("Can't create a session."),r.jsepOnCreateSession?.(),r.currentContext&&(r.webnnRegisterMLContext(o,r.currentContext),r.currentContext=void 0,r.shouldTransferToMLTensor=!0);let[h,m]=bC(o),_=!!t?.enableGraphCapture,v=[],b=[],D=[],T=[],E=[];for(let $=0;$<h;$++){let[P,C,S]=ax(o,$);P===0&&Qn("Can't get an input name."),f.push(P);let O=r.UTF8ToString(P);v.push(O),D.push(C===0?{name:O,isTensor:!1}:{name:O,isTensor:!0,type:Rl(C),shape:S})}for(let $=0;$<m;$++){let[P,C,S]=ax(o,$+h);P===0&&Qn("Can't get an output name."),p.push(P);let O=r.UTF8ToString(P);b.push(O),T.push(C===0?{name:O,isTensor:!1}:{name:O,isTensor:!0,type:Rl(C),shape:S});{if(_&&t?.preferredOutputLocation===void 0){E.push("gpu-buffer");continue}let N=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[O]??"cpu";if(N!=="cpu"&&N!=="cpu-pinned"&&N!=="gpu-buffer"&&N!=="ml-tensor")throw new Error(`Not supported preferred output location: ${N}.`);if(_&&N!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${N}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);E.push(N)}}let A=null;return E.some($=>$==="gpu-buffer"||$==="ml-tensor")&&(c=r._OrtCreateBinding(o),c===0&&Qn("Can't create IO binding."),A={handle:c,outputPreferredLocations:E,outputPreferredLocationsEncoded:E.map($=>Lx($))}),Kc.set(o,[o,f,p,A,_,!1]),[o,v,b,D,T]}catch(h){throw f.forEach(m=>r._OrtFree(m)),p.forEach(m=>r._OrtFree(m)),c!==0&&r._OrtReleaseBinding(c)!==0&&Qn("Can't release IO binding."),o!==0&&r._OrtReleaseSession(o)!==0&&Qn("Can't release session."),h}finally{r._free(n),l!==0&&r._OrtReleaseSessionOptions(l)!==0&&Qn("Can't release session options."),d.forEach(h=>r._free(h)),r.unmountExternalData?.()}},_1=e=>{let t=dr(),n=Kc.get(e);if(!n)throw new Error(`cannot release session. invalid session id: ${e}`);let[i,r,o,l,c]=n;l&&(c&&t._OrtClearBoundOutputs(l.handle)!==0&&Qn("Can't clear bound outputs."),t._OrtReleaseBinding(l.handle)!==0&&Qn("Can't release IO binding.")),t.jsepOnReleaseSession?.(e),t.webnnOnReleaseSession?.(e),t.webgpuOnReleaseSession?.(e),r.forEach(d=>t._OrtFree(d)),o.forEach(d=>t._OrtFree(d)),t._OrtReleaseSession(i)!==0&&Qn("Can't release session."),Kc.delete(e)},ox=async(e,t,n,i,r,o,l=!1)=>{if(!e){t.push(0);return}let c=dr(),d=c.PTR_SIZE,f=e[0],p=e[1],h=e[3],m=h,_,v;if(f==="string"&&(h==="gpu-buffer"||h==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(l&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${o} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let T=e[2].gpuBuffer;v=Td(Ih(f),p);{let E=c.jsepRegisterBuffer;if(!E)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');_=E(i,o,T,v)}}else if(h==="ml-tensor"){let T=e[2].mlTensor;v=Td(Ih(f),p);let E=c.webnnRegisterMLTensor;if(!E)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');_=E(i,T,Ih(f),p)}else{let T=e[2];if(Array.isArray(T)){v=d*T.length,_=c._malloc(v),n.push(_);for(let E=0;E<T.length;E++){if(typeof T[E]!="string")throw new TypeError(`tensor data at index ${E} is not a string`);c.setValue(_+E*d,Zo(T[E],n),"*")}}else{let E=c.webnnIsGraphInput;if(f!=="string"&&E){let A=c.UTF8ToString(r);if(E(i,A)){let $=Ih(f);v=Td($,p),m="ml-tensor";let P=c.webnnCreateTemporaryTensor,C=c.webnnUploadTensor;if(!P||!C)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let S=await P(i,$,p);C(S,new Uint8Array(T.buffer,T.byteOffset,T.byteLength)),_=S}else v=T.byteLength,_=c._malloc(v),n.push(_),c.HEAPU8.set(new Uint8Array(T.buffer,T.byteOffset,v),_)}else v=T.byteLength,_=c._malloc(v),n.push(_),c.HEAPU8.set(new Uint8Array(T.buffer,T.byteOffset,v),_)}}let b=c.stackSave(),D=c.stackAlloc(4*p.length);try{p.forEach((E,A)=>c.setValue(D+A*d,E,d===4?"i32":"i64"));let T=c._OrtCreateTensor(Ih(f),_,v,D,p.length,Lx(m));T===0&&Qn(`Can't create tensor for input/output. session=${i}, index=${o}.`),t.push(T)}finally{c.stackRestore(b)}},v1=async(e,t,n,i,r,o)=>{let l=dr(),c=l.PTR_SIZE,d=Kc.get(e);if(!d)throw new Error(`cannot run inference. invalid session id: ${e}`);let f=d[0],p=d[1],h=d[2],m=d[3],_=d[4],v=d[5],b=t.length,D=i.length,T=0,E=[],A=[],$=[],P=[],C=l.stackSave(),S=l.stackAlloc(b*c),O=l.stackAlloc(b*c),N=l.stackAlloc(D*c),j=l.stackAlloc(D*c);try{[T,E]=EI(o);for(let K=0;K<b;K++)await ox(n[K],A,P,e,p[t[K]],t[K],_);for(let K=0;K<D;K++)await ox(r[K],$,P,e,h[i[K]],b+i[K],_);for(let K=0;K<b;K++)l.setValue(S+K*c,A[K],"*"),l.setValue(O+K*c,p[t[K]],"*");for(let K=0;K<D;K++)l.setValue(N+K*c,$[K],"*"),l.setValue(j+K*c,h[i[K]],"*");if(m&&!v){let{handle:K,outputPreferredLocations:se,outputPreferredLocationsEncoded:oe}=m;if(p.length!==b)throw new Error(`input count from feeds (${b}) is expected to be always equal to model's input count (${p.length}).`);for(let W=0;W<b;W++){let ne=t[W];await l._OrtBindInput(K,p[ne],A[W])!==0&&Qn(`Can't bind input[${W}] for session=${e}.`)}for(let W=0;W<D;W++){let ne=i[W];r[W]?.[3]?l._OrtBindOutput(K,h[ne],$[W],0)!==0&&Qn(`Can't bind pre-allocated output[${W}] for session=${e}.`):l._OrtBindOutput(K,h[ne],0,oe[ne])!==0&&Qn(`Can't bind output[${W}] to ${se[W]} for session=${e}.`)}Kc.set(e,[f,p,h,m,_,!0])}l.jsepOnRunStart?.(f),l.webnnOnRunStart?.(f);let X;m?X=await l._OrtRunWithBinding(f,m.handle,D,N,T):X=await l._OrtRun(f,O,S,b,j,D,N,T),X!==0&&Qn("failed to call OrtRun().");let Y=[];for(let K=0;K<D;K++){let se=Number(l.getValue(N+K*c,"*"));if(se===$[K]){Y.push(r[K]);continue}let oe=l.stackSave(),W=l.stackAlloc(4*c),ne=!1,ae,ge=0;try{l._OrtGetTensorData(se,W,W+c,W+2*c,W+3*c)!==0&&Qn(`Can't access output tensor data on index ${K}.`);let ye=c===4?"i32":"i64",G=Number(l.getValue(W,ye));ge=l.getValue(W+c,"*");let H=l.getValue(W+c*2,"*"),V=Number(l.getValue(W+c*3,ye)),U=[];for(let ke=0;ke<V;ke++)U.push(Number(l.getValue(H+ke*c,ye)));l._OrtFree(H)!==0&&Qn("Can't free memory for tensor dims.");let ce=U.reduce((ke,Le)=>ke*Le,1);ae=Rl(G);let ve=m?.outputPreferredLocations[i[K]];if(ae==="string"){if(ve==="gpu-buffer"||ve==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let ke=[];for(let Le=0;Le<ce;Le++){let Xe=l.getValue(ge+Le*c,"*"),Be=l.getValue(ge+(Le+1)*c,"*"),ue=Le===ce-1?void 0:Be-Xe;ke.push(l.UTF8ToString(Xe,ue))}Y.push([ae,U,ke,"cpu"])}else if(ve==="gpu-buffer"&&ce>0){let ke=l.jsepGetBuffer;if(!ke)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Le=ke(ge),Xe=Td(G,ce);if(Xe===void 0||!JM(ae))throw new Error(`Unsupported data type: ${ae}`);ne=!0,Y.push([ae,U,{gpuBuffer:Le,download:l.jsepCreateDownloader(Le,Xe,ae),dispose:()=>{l._OrtReleaseTensor(se)!==0&&Qn("Can't release tensor.")}},"gpu-buffer"])}else if(ve==="ml-tensor"&&ce>0){let ke=l.webnnEnsureTensor,Le=l.webnnIsInt64Supported;if(!ke||!Le)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(Td(G,ce)===void 0||!e1(ae))throw new Error(`Unsupported data type: ${ae}`);if(ae==="int64"&&!Le(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let Xe=await ke(e,ge,G,U,!1);ne=!0,Y.push([ae,U,{mlTensor:Xe,download:l.webnnCreateMLTensorDownloader(ge,ae),dispose:()=>{l.webnnReleaseTensorId(ge),l._OrtReleaseTensor(se)}},"ml-tensor"])}else{let ke=YM(ae),Le=new ke(ce);new Uint8Array(Le.buffer,Le.byteOffset,Le.byteLength).set(l.HEAPU8.subarray(ge,ge+Le.byteLength)),Y.push([ae,U,Le,"cpu"])}}finally{l.stackRestore(oe),ae==="string"&&ge&&l._free(ge),ne||l._OrtReleaseTensor(se),l.webnnOnRunEnd?.(f)}}return m&&!_&&(l._OrtClearBoundOutputs(m.handle)!==0&&Qn("Can't clear bound outputs."),Kc.set(e,[f,p,h,m,_,!1])),Y}finally{l.stackRestore(C),A.forEach(X=>l._OrtReleaseTensor(X)),$.forEach(X=>l._OrtReleaseTensor(X)),P.forEach(X=>l._free(X)),T!==0&&l._OrtReleaseRunOptions(T),E.forEach(X=>l._free(X))}},y1=e=>{let t=dr(),n=Kc.get(e);if(!n)throw new Error("invalid session id");let i=n[0],r=t._OrtEndProfiling(i);r===0&&Qn("Can't get an profile file name."),t._OrtFree(r)},b1=e=>{let t=[];for(let n of e){let i=n[2];!Array.isArray(i)&&"buffer"in i&&t.push(i.buffer)}return t}}),qc,fo,Ph,Rg,Fg,ty,sx,ny,yd,bd,wC,Ez,$z,Pz,Cz,kz,Az,Iz,Oz=ht(()=>{rs(),Sz(),Vd(),ZM(),qc=()=>!!yr.wasm.proxy&&typeof document<"u",Ph=!1,Rg=!1,Fg=!1,ny=new Map,yd=(e,t)=>{let n=ny.get(e);n?n.push(t):ny.set(e,[t])},bd=()=>{if(Ph||!Rg||Fg||!fo)throw new Error("worker not ready")},wC=e=>{switch(e.data.type){case"init-wasm":Ph=!1,e.data.err?(Fg=!0,sx[1](e.data.err)):(Rg=!0,sx[0]()),ty&&(URL.revokeObjectURL(ty),ty=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=ny.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},Ez=async()=>{if(!Rg){if(Ph)throw new Error("multiple calls to 'initWasm()' detected.");if(Fg)throw new Error("previous call to 'initWasm()' failed.");if(Ph=!0,qc())return new Promise((e,t)=>{fo?.terminate(),TI().then(([n,i])=>{try{fo=i,fo.onerror=o=>t(o),fo.onmessage=wC,sx=[e,t];let r={type:"init-wasm",in:yr};!r.in.wasm.wasmPaths&&(n||zx)&&(r.in.wasm.wasmPaths={wasm:new URL(""+new URL("ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href,import.meta.url).href}),fo.postMessage(r),ty=n}catch(r){t(r)}},t)});try{await QM(yr.wasm),await m1(yr),Rg=!0}catch(e){throw Fg=!0,e}finally{Ph=!1}}},$z=async e=>{if(qc())return bd(),new Promise((t,n)=>{yd("init-ep",[t,n]);let i={type:"init-ep",in:{epName:e,env:yr}};fo.postMessage(i)});await p1(yr,e)},Pz=async e=>qc()?(bd(),new Promise((t,n)=>{yd("copy-from",[t,n]);let i={type:"copy-from",in:{buffer:e}};fo.postMessage(i,[e.buffer])})):Wy(e),Cz=async(e,t)=>{if(qc()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return bd(),new Promise((n,i)=>{yd("create",[n,i]);let r={type:"create",in:{model:e,options:{...t}}},o=[];e instanceof Uint8Array&&o.push(e.buffer),fo.postMessage(r,o)})}else return g1(e,t)},kz=async e=>{if(qc())return bd(),new Promise((t,n)=>{yd("release",[t,n]);let i={type:"release",in:e};fo.postMessage(i)});_1(e)},Az=async(e,t,n,i,r,o)=>{if(qc()){if(n.some(l=>l[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(r.some(l=>l))throw new Error("pre-allocated output tensor is not supported for proxy.");return bd(),new Promise((l,c)=>{yd("run",[l,c]);let d=n,f={type:"run",in:{sessionId:e,inputIndices:t,inputs:d,outputIndices:i,options:o}};fo.postMessage(f,b1(d))})}else return v1(e,t,n,i,r,o)},Iz=async e=>{if(qc())return bd(),new Promise((t,n)=>{yd("end-profiling",[t,n]);let i={type:"end-profiling",in:e};fo.postMessage(i)});y1(e)}}),lx,xC,Dz,MH=ht(()=>{rs(),Oz(),Zt(),qM(),PI(),lx=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},xC=e=>{switch(e[3]){case"cpu":return new Xo(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!JM(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:n,download:i,dispose:r}=e[2];return Xo.fromGpuBuffer(n,{dataType:t,dims:e[1],download:i,dispose:r})}case"ml-tensor":{let t=e[0];if(!e1(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:n,download:i,dispose:r}=e[2];return Xo.fromMLTensor(n,{dataType:t,dims:e[1],download:i,dispose:r})}default:throw new Error(`invalid data location: ${e[3]}`)}},Dz=class{async fetchModelAndCopyToWasmMemory(e){return Pz(await t1(e))}async loadModel(e,t){ns();let n;typeof e=="string"?n=await this.fetchModelAndCopyToWasmMemory(e):n=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await Cz(n,t),yo()}async dispose(){return kz(this.sessionId)}async run(e,t,n){ns();let i=[],r=[];Object.entries(e).forEach(h=>{let m=h[0],_=h[1],v=this.inputNames.indexOf(m);if(v===-1)throw new Error(`invalid input '${m}'`);i.push(_),r.push(v)});let o=[],l=[];Object.entries(t).forEach(h=>{let m=h[0],_=h[1],v=this.outputNames.indexOf(m);if(v===-1)throw new Error(`invalid output '${m}'`);o.push(_),l.push(v)});let c=i.map((h,m)=>lx(h,()=>`input "${this.inputNames[r[m]]}"`)),d=o.map((h,m)=>h?lx(h,()=>`output "${this.outputNames[l[m]]}"`):null),f=await Az(this.sessionId,r,c,l,d,n),p={};for(let h=0;h<f.length;h++)p[this.outputNames[l[h]]]=o[h]??xC(f[h]);return yo(),p}startProfiling(){}endProfiling(){Iz(this.sessionId)}}}),zz={};nm(zz,{OnnxruntimeWebAssemblyBackend:()=>Qx,initializeFlags:()=>Zx,wasmBackend:()=>Lz});var Zx,Qx,Lz,TH=ht(()=>{rs(),Oz(),MH(),Zx=()=>{(typeof yr.wasm.initTimeout!="number"||yr.wasm.initTimeout<0)&&(yr.wasm.initTimeout=0);let e=yr.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),yr.wasm.simd=!1),typeof yr.wasm.proxy!="boolean"&&(yr.wasm.proxy=!1),typeof yr.wasm.trace!="boolean"&&(yr.wasm.trace=!1),typeof yr.wasm.numThreads!="number"||!Number.isInteger(yr.wasm.numThreads)||yr.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)yr.wasm.numThreads=1;else{let t=typeof navigator>"u"?uW("node:os").cpus().length:navigator.hardwareConcurrency;yr.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Qx=class{async init(e){Zx(),await Ez(),await $z(e)}async createInferenceSessionHandler(e,t){let n=new Dz;return await n.loadModel(e,t),n}},Lz=new Qx});rs();rs();rs();var SH="1.22.0-dev.20250409-89f8206ba4",EH=vI;{let e=(TH(),s_(zz)).wasmBackend;Ed("webgpu",e,5),Ed("webnn",e,5),Ed("cpu",e,10),Ed("wasm",e,10)}Object.defineProperty(yr.versions,"web",{value:SH,enumerable:!0});const $H=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return KM},get TRACE(){return l_},get TRACE_FUNC_BEGIN(){return ns},get TRACE_FUNC_END(){return yo},get Tensor(){return Xo},default:EH,get env(){return yr},get registerBackend(){return Ed}},Symbol.toStringTag,{value:"Module"}));var cx={},PH={"onnxruntime-common":(e=>{e.exports=oW}),"onnxruntime-web":(e=>{e.exports=$H}),"?2ce3":(()=>{}),"?7992":(()=>{}),"?5af5":(()=>{}),"?2b25":(()=>{}),"?db59":(()=>{}),"?383f":(()=>{}),"?fa4b":(()=>{}),"./node_modules/@huggingface/jinja/dist/index.js":((e,t,n)=>{n.r(t),n.d(t,{Environment:()=>kt,Interpreter:()=>kn,Template:()=>_a,parse:()=>ke,tokenize:()=>h});var i=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),r=class{constructor(L,de){this.value=L,this.type=de}};function o(L){return/\w/.test(L)}function l(L){return/[0-9]/.test(L)}function c(L){return/\s/.test(L)}var d=[["{%",i.OpenStatement],["%}",i.CloseStatement],["{{",i.OpenExpression],["}}",i.CloseExpression],["(",i.OpenParen],[")",i.CloseParen],["{",i.OpenCurlyBracket],["}",i.CloseCurlyBracket],["[",i.OpenSquareBracket],["]",i.CloseSquareBracket],[",",i.Comma],[".",i.Dot],[":",i.Colon],["|",i.Pipe],["<=",i.ComparisonBinaryOperator],[">=",i.ComparisonBinaryOperator],["==",i.ComparisonBinaryOperator],["!=",i.ComparisonBinaryOperator],["<",i.ComparisonBinaryOperator],[">",i.ComparisonBinaryOperator],["+",i.AdditiveBinaryOperator],["-",i.AdditiveBinaryOperator],["~",i.AdditiveBinaryOperator],["*",i.MultiplicativeBinaryOperator],["/",i.MultiplicativeBinaryOperator],["%",i.MultiplicativeBinaryOperator],["=",i.Equals]],f=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function p(L,de={}){return L.endsWith(`
`)&&(L=L.slice(0,-1)),de.lstrip_blocks&&(L=L.replace(/^[ \t]*({[#%-])/gm,"$1")),de.trim_blocks&&(L=L.replace(/([#%-]})\n/g,"$1")),L.replace(/{%\s*(end)?generation\s*%}/gs,"")}function h(L,de={}){const J=[],le=p(L,de);let fe=0,xe=0;const je=_t=>{let Gt="";for(;_t(le[fe]);){if(le[fe]==="\\"){if(++fe,fe>=le.length)throw new SyntaxError("Unexpected end of input");const yt=le[fe++],rn=f.get(yt);if(rn===void 0)throw new SyntaxError(`Unexpected escaped character: ${yt}`);Gt+=rn;continue}if(Gt+=le[fe++],fe>=le.length)throw new SyntaxError("Unexpected end of input")}return Gt},mt=()=>{const _t=J.at(-1);_t&&_t.type===i.Text&&(_t.value=_t.value.trimEnd(),_t.value===""&&J.pop())},Et=()=>{for(;fe<le.length&&c(le[fe]);)++fe};e:for(;fe<le.length;){const _t=J.at(-1)?.type;if(_t===void 0||_t===i.CloseStatement||_t===i.CloseExpression||_t===i.Comment){let yt="";for(;fe<le.length&&!(le[fe]==="{"&&(le[fe+1]==="%"||le[fe+1]==="{"||le[fe+1]==="#"));)yt+=le[fe++];if(yt.length>0){J.push(new r(yt,i.Text));continue}}if(le[fe]==="{"&&le[fe+1]==="#"){fe+=2;const yt=le[fe]==="-";yt&&++fe;let rn="";for(;le[fe]!=="#"||le[fe+1]!=="}";){if(fe+2>=le.length)throw new SyntaxError("Missing end of comment tag");rn+=le[fe++]}const cn=rn.endsWith("-");cn&&(rn=rn.slice(0,-1)),yt&&mt(),J.push(new r(rn,i.Comment)),fe+=2,cn&&Et();continue}if(le.slice(fe,fe+3)==="{%-"){mt(),J.push(new r("{%",i.OpenStatement)),fe+=3;continue}if(le.slice(fe,fe+3)==="{{-"){mt(),J.push(new r("{{",i.OpenExpression)),xe=0,fe+=3;continue}if(je(c),le.slice(fe,fe+3)==="-%}"){J.push(new r("%}",i.CloseStatement)),fe+=3,Et();continue}if(le.slice(fe,fe+3)==="-}}"){J.push(new r("}}",i.CloseExpression)),fe+=3,Et();continue}const Gt=le[fe];if(Gt==="-"||Gt==="+"){const yt=J.at(-1)?.type;if(yt===i.Text||yt===void 0)throw new SyntaxError(`Unexpected character: ${Gt}`);switch(yt){case i.Identifier:case i.NumericLiteral:case i.StringLiteral:case i.CloseParen:case i.CloseSquareBracket:break;default:{++fe;const rn=je(l);J.push(new r(`${Gt}${rn}`,rn.length>0?i.NumericLiteral:i.UnaryOperator));continue}}}for(const[yt,rn]of d){if(yt==="}}"&&xe>0)continue;if(le.slice(fe,fe+yt.length)===yt){J.push(new r(yt,rn)),rn===i.OpenExpression?xe=0:rn===i.OpenCurlyBracket?++xe:rn===i.CloseCurlyBracket&&--xe,fe+=yt.length;continue e}}if(Gt==="'"||Gt==='"'){++fe;const yt=je(rn=>rn!==Gt);J.push(new r(yt,i.StringLiteral)),++fe;continue}if(l(Gt)){let yt=je(l);if(le[fe]==="."&&l(le[fe+1])){++fe;const rn=je(l);yt=`${yt}.${rn}`}J.push(new r(yt,i.NumericLiteral));continue}if(o(Gt)){const yt=je(o);J.push(new r(yt,i.Identifier));continue}throw new SyntaxError(`Unexpected character: ${Gt}`)}return J}var m=class{type="Statement"},_=class extends m{constructor(L){super(),this.body=L}type="Program"},v=class extends m{constructor(L,de,J){super(),this.test=L,this.body=de,this.alternate=J}type="If"},b=class extends m{constructor(L,de,J,le){super(),this.loopvar=L,this.iterable=de,this.body=J,this.defaultBlock=le}type="For"},D=class extends m{type="Break"},T=class extends m{type="Continue"},E=class extends m{constructor(L,de,J){super(),this.assignee=L,this.value=de,this.body=J}type="Set"},A=class extends m{constructor(L,de,J){super(),this.name=L,this.args=de,this.body=J}type="Macro"},$=class extends m{constructor(L){super(),this.value=L}type="Comment"},P=class extends m{type="Expression"},C=class extends P{constructor(L,de,J){super(),this.object=L,this.property=de,this.computed=J}type="MemberExpression"},S=class extends P{constructor(L,de){super(),this.callee=L,this.args=de}type="CallExpression"},O=class extends P{constructor(L){super(),this.value=L}type="Identifier"},N=class extends P{constructor(L){super(),this.value=L}type="Literal"},j=class extends N{type="IntegerLiteral"},X=class extends N{type="FloatLiteral"},Y=class extends N{type="StringLiteral"},K=class extends N{type="ArrayLiteral"},se=class extends N{type="TupleLiteral"},oe=class extends N{type="ObjectLiteral"},W=class extends P{constructor(L,de,J){super(),this.operator=L,this.left=de,this.right=J}type="BinaryExpression"},ne=class extends P{constructor(L,de){super(),this.operand=L,this.filter=de}type="FilterExpression"},ae=class extends m{constructor(L,de){super(),this.filter=L,this.body=de}type="FilterStatement"},ge=class extends P{constructor(L,de){super(),this.lhs=L,this.test=de}type="SelectExpression"},ye=class extends P{constructor(L,de,J){super(),this.operand=L,this.negate=de,this.test=J}type="TestExpression"},G=class extends P{constructor(L,de){super(),this.operator=L,this.argument=de}type="UnaryExpression"},H=class extends P{constructor(L=void 0,de=void 0,J=void 0){super(),this.start=L,this.stop=de,this.step=J}type="SliceExpression"},V=class extends P{constructor(L,de){super(),this.key=L,this.value=de}type="KeywordArgumentExpression"},U=class extends P{constructor(L){super(),this.argument=L}type="SpreadExpression"},ce=class extends m{constructor(L,de,J){super(),this.call=L,this.callerArgs=de,this.body=J}type="CallStatement"},ve=class extends P{constructor(L,de,J){super(),this.condition=L,this.trueExpr=de,this.falseExpr=J}type="Ternary"};function ke(L){const de=new _([]);let J=0;function le(lt,dt){const Ct=L[J++];if(!Ct||Ct.type!==lt)throw new Error(`Parser Error: ${dt}. ${Ct.type} !== ${lt}.`);return Ct}function fe(lt){if(!Et(lt))throw new SyntaxError(`Expected ${lt}`);++J}function xe(){switch(L[J].type){case i.Comment:return new $(L[J++].value);case i.Text:return _t();case i.OpenStatement:return Gt();case i.OpenExpression:return yt();default:throw new SyntaxError(`Unexpected token type: ${L[J].type}`)}}function je(...lt){return J+lt.length<=L.length&&lt.every((dt,Ct)=>dt===L[J+Ct].type)}function mt(...lt){return L[J]?.type===i.OpenStatement&&L[J+1]?.type===i.Identifier&&lt.includes(L[J+1]?.value)}function Et(...lt){return J+lt.length<=L.length&&lt.every((dt,Ct)=>L[J+Ct].type==="Identifier"&&dt===L[J+Ct].value)}function _t(){return new Y(le(i.Text,"Expected text token").value)}function Gt(){if(le(i.OpenStatement,"Expected opening statement token"),L[J].type!==i.Identifier)throw new SyntaxError(`Unknown statement, got ${L[J].type}`);const lt=L[J].value;let dt;switch(lt){case"set":++J,dt=rn();break;case"if":++J,dt=cn(),le(i.OpenStatement,"Expected {% token"),fe("endif"),le(i.CloseStatement,"Expected %} token");break;case"macro":++J,dt=fr(),le(i.OpenStatement,"Expected {% token"),fe("endmacro"),le(i.CloseStatement,"Expected %} token");break;case"for":++J,dt=Hn(),le(i.OpenStatement,"Expected {% token"),fe("endfor"),le(i.CloseStatement,"Expected %} token");break;case"call":{++J;let Ct=null;je(i.OpenParen)&&(Ct=Mi());const An=ci();if(An.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const Eo=Mi();le(i.CloseStatement,"Expected closing statement token");const Nr=[];for(;!mt("endcall");)Nr.push(xe());le(i.OpenStatement,"Expected '{%'"),fe("endcall"),le(i.CloseStatement,"Expected closing statement token");const va=new S(An,Eo);dt=new ce(va,Ct,Nr);break}case"break":++J,le(i.CloseStatement,"Expected closing statement token"),dt=new D;break;case"continue":++J,le(i.CloseStatement,"Expected closing statement token"),dt=new T;break;case"filter":{++J;let Ct=ci();Ct instanceof O&&je(i.OpenParen)&&(Ct=Tr(Ct)),le(i.CloseStatement,"Expected closing statement token");const An=[];for(;!mt("endfilter");)An.push(xe());le(i.OpenStatement,"Expected '{%'"),fe("endfilter"),le(i.CloseStatement,"Expected '%}'"),dt=new ae(Ct,An);break}default:throw new SyntaxError(`Unknown statement type: ${lt}`)}return dt}function yt(){le(i.OpenExpression,"Expected opening expression token");const lt=mr();return le(i.CloseExpression,"Expected closing expression token"),lt}function rn(){const lt=hr();let dt=null;const Ct=[];if(je(i.Equals))++J,dt=hr();else{for(le(i.CloseStatement,"Expected %} token");!mt("endset");)Ct.push(xe());le(i.OpenStatement,"Expected {% token"),fe("endset")}return le(i.CloseStatement,"Expected closing statement token"),new E(lt,dt,Ct)}function cn(){const lt=mr();le(i.CloseStatement,"Expected closing statement token");const dt=[],Ct=[];for(;!mt("elif","else","endif");)dt.push(xe());if(mt("elif")){++J,++J;const An=cn();Ct.push(An)}else if(mt("else"))for(++J,++J,le(i.CloseStatement,"Expected closing statement token");!mt("endif");)Ct.push(xe());return new v(lt,dt,Ct)}function fr(){const lt=ci();if(lt.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const dt=Mi();le(i.CloseStatement,"Expected closing statement token");const Ct=[];for(;!mt("endmacro");)Ct.push(xe());return new A(lt,dt,Ct)}function hr(lt=!1){const dt=lt?ci:mr,Ct=[dt()],An=je(i.Comma);for(;An&&(++J,Ct.push(dt()),!!je(i.Comma)););return An?new se(Ct):Ct[0]}function Hn(){const lt=hr(!0);if(!(lt instanceof O||lt instanceof se))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${lt.type} instead`);if(!Et("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++J;const dt=mr();le(i.CloseStatement,"Expected closing statement token");const Ct=[];for(;!mt("endfor","else");)Ct.push(xe());const An=[];if(mt("else"))for(++J,++J,le(i.CloseStatement,"Expected closing statement token");!mt("endfor");)An.push(xe());return new b(lt,dt,Ct,An)}function mr(){return Ai()}function Ai(){const lt=Or();if(Et("if")){++J;const dt=Or();if(Et("else")){++J;const Ct=Ai();return new ve(dt,lt,Ct)}else return new ge(lt,dt)}return lt}function Or(){let lt=er();for(;Et("or");){const dt=L[J];++J;const Ct=er();lt=new W(dt,lt,Ct)}return lt}function er(){let lt=ti();for(;Et("and");){const dt=L[J];++J;const Ct=ti();lt=new W(dt,lt,Ct)}return lt}function ti(){let lt;for(;Et("not");){const dt=L[J];++J;const Ct=ti();lt=new G(dt,Ct)}return lt??ni()}function ni(){let lt=ri();for(;;){let dt;if(Et("not","in"))dt=new r("not in",i.Identifier),J+=2;else if(Et("in"))dt=L[J++];else if(je(i.ComparisonBinaryOperator))dt=L[J++];else break;const Ct=ri();lt=new W(dt,lt,Ct)}return lt}function ri(){let lt=qi();for(;je(i.AdditiveBinaryOperator);){const dt=L[J];++J;const Ct=qi();lt=new W(dt,lt,Ct)}return lt}function or(){const lt=Ki(ci());return je(i.OpenParen)?Tr(lt):lt}function Tr(lt){let dt=new S(lt,Mi());return dt=Ki(dt),je(i.OpenParen)&&(dt=Tr(dt)),dt}function Mi(){le(i.OpenParen,"Expected opening parenthesis for arguments list");const lt=Hi();return le(i.CloseParen,"Expected closing parenthesis for arguments list"),lt}function Hi(){const lt=[];for(;!je(i.CloseParen);){let dt;if(L[J].type===i.MultiplicativeBinaryOperator&&L[J].value==="*"){++J;const Ct=mr();dt=new U(Ct)}else if(dt=mr(),je(i.Equals)){if(++J,!(dt instanceof O))throw new SyntaxError("Expected identifier for keyword argument");const Ct=mr();dt=new V(dt,Ct)}lt.push(dt),je(i.Comma)&&++J}return lt}function So(){const lt=[];let dt=!1;for(;!je(i.CloseSquareBracket);)je(i.Colon)?(lt.push(void 0),++J,dt=!0):(lt.push(mr()),je(i.Colon)&&(++J,dt=!0));if(lt.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(dt){if(lt.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new H(...lt)}return lt[0]}function Ki(lt){for(;je(i.Dot)||je(i.OpenSquareBracket);){const dt=L[J];++J;let Ct;const An=dt.type===i.OpenSquareBracket;if(An)Ct=So(),le(i.CloseSquareBracket,"Expected closing square bracket");else if(Ct=ci(),Ct.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");lt=new C(lt,Ct,An)}return lt}function qi(){let lt=ii();for(;je(i.MultiplicativeBinaryOperator);){const dt=L[J++],Ct=ii();lt=new W(dt,lt,Ct)}return lt}function ii(){let lt=$r();for(;Et("is");){++J;const dt=Et("not");dt&&++J;const Ct=ci();if(!(Ct instanceof O))throw new SyntaxError("Expected identifier for the test");lt=new ye(lt,dt,Ct)}return lt}function $r(){let lt=or();for(;je(i.Pipe);){++J;let dt=ci();if(!(dt instanceof O))throw new SyntaxError("Expected identifier for the filter");je(i.OpenParen)&&(dt=Tr(dt)),lt=new ne(lt,dt)}return lt}function ci(){const lt=L[J++];switch(lt.type){case i.NumericLiteral:{const dt=lt.value;return dt.includes(".")?new X(Number(dt)):new j(Number(dt))}case i.StringLiteral:{let dt=lt.value;for(;je(i.StringLiteral);)dt+=L[J++].value;return new Y(dt)}case i.Identifier:return new O(lt.value);case i.OpenParen:{const dt=hr();return le(i.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),dt}case i.OpenSquareBracket:{const dt=[];for(;!je(i.CloseSquareBracket);)dt.push(mr()),je(i.Comma)&&++J;return++J,new K(dt)}case i.OpenCurlyBracket:{const dt=new Map;for(;!je(i.CloseCurlyBracket);){const Ct=mr();le(i.Colon,"Expected colon between key and value in object literal");const An=mr();dt.set(Ct,An),je(i.Comma)&&++J}return++J,new oe(dt)}default:throw new SyntaxError(`Unexpected token: ${lt.type}`)}}for(;J<L.length;)de.body.push(xe());return de}function Le(L,de,J=1){de===void 0&&(de=L,L=0);const le=[];for(let fe=L;fe<de;fe+=J)le.push(fe);return le}function Xe(L,de,J,le=1){const fe=Math.sign(le);fe>=0?(de=(de??=0)<0?Math.max(L.length+de,0):Math.min(de,L.length),J=(J??=L.length)<0?Math.max(L.length+J,0):Math.min(J,L.length)):(de=(de??=L.length-1)<0?Math.max(L.length+de,-1):Math.min(de,L.length-1),J=(J??=-1)<-1?Math.max(L.length+J,-1):Math.min(J,L.length-1));const xe=[];for(let je=de;fe*je<fe*J;je+=le)xe.push(L[je]);return xe}function Be(L){return L.replace(/\b\w/g,de=>de.toUpperCase())}function ue(L){return Z(new Date,L)}function Z(L,de){const J=new Intl.DateTimeFormat(void 0,{month:"long"}),le=new Intl.DateTimeFormat(void 0,{month:"short"}),fe=xe=>xe<10?"0"+xe:xe.toString();return de.replace(/%[YmdbBHM%]/g,xe=>{switch(xe){case"%Y":return L.getFullYear().toString();case"%m":return fe(L.getMonth()+1);case"%d":return fe(L.getDate());case"%b":return le.format(L);case"%B":return J.format(L);case"%H":return fe(L.getHours());case"%M":return fe(L.getMinutes());case"%%":return"%";default:return xe}})}function Se(L){return L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Re(L,de,J,le){if(le===0)return L;let fe=le==null||le<0?1/0:le;const xe=de.length===0?new RegExp("(?=)","gu"):new RegExp(Se(de),"gu");return L.replaceAll(xe,je=>fe>0?(--fe,J):je)}var Ve=class extends Error{},Ge=class extends Error{},Ke=class{type="RuntimeValue";value;builtins=new Map;constructor(L=void 0){this.value=L}__bool__(){return new We(!!this.value)}toString(){return String(this.value)}},Ie=class extends Ke{type="IntegerValue"},nt=class extends Ke{type="FloatValue";toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},Ae=class extends Ke{type="StringValue";builtins=new Map([["upper",new Tt(()=>new Ae(this.value.toUpperCase()))],["lower",new Tt(()=>new Ae(this.value.toLowerCase()))],["strip",new Tt(()=>new Ae(this.value.trim()))],["title",new Tt(()=>new Ae(Be(this.value)))],["capitalize",new Tt(()=>new Ae(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new Ie(this.value.length)],["rstrip",new Tt(()=>new Ae(this.value.trimEnd()))],["lstrip",new Tt(()=>new Ae(this.value.trimStart()))],["startswith",new Tt(L=>{if(L.length===0)throw new Error("startswith() requires at least one argument");const de=L[0];if(de instanceof Ae)return new We(this.value.startsWith(de.value));if(de instanceof rt){for(const J of de.value){if(!(J instanceof Ae))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(J.value))return new We(!0)}return new We(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new Tt(L=>{if(L.length===0)throw new Error("endswith() requires at least one argument");const de=L[0];if(de instanceof Ae)return new We(this.value.endsWith(de.value));if(de instanceof rt){for(const J of de.value){if(!(J instanceof Ae))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(J.value))return new We(!0)}return new We(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new Tt(L=>{const de=L[0]??new ut;if(!(de instanceof Ae||de instanceof ut))throw new Error("sep argument must be a string or null");const J=L[1]??new Ie(-1);if(!(J instanceof Ie))throw new Error("maxsplit argument must be a number");let le=[];if(de instanceof ut){const fe=this.value.trimStart();for(const{0:xe,index:je}of fe.matchAll(/\S+/g)){if(J.value!==-1&&le.length>=J.value&&je!==void 0){le.push(xe+fe.slice(je+xe.length));break}le.push(xe)}}else{if(de.value==="")throw new Error("empty separator");le=this.value.split(de.value),J.value!==-1&&le.length>J.value&&le.push(le.splice(J.value).join(de.value))}return new rt(le.map(fe=>new Ae(fe)))})],["replace",new Tt(L=>{if(L.length<2)throw new Error("replace() requires at least two arguments");const de=L[0],J=L[1];if(!(de instanceof Ae&&J instanceof Ae))throw new Error("replace() arguments must be strings");let le;if(L.length>2?L[2].type==="KeywordArgumentsValue"?le=L[2].value.get("count")??new ut:le=L[2]:le=new ut,!(le instanceof Ie||le instanceof ut))throw new Error("replace() count argument must be a number or null");return new Ae(Re(this.value,de.value,J.value,le.value))})]])},We=class extends Ke{type="BooleanValue"};function ft(L,de,J,le=!0){const fe=J??0;switch(L.type){case"NullValue":return"null";case"UndefinedValue":return le?"null":"undefined";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(L.value);case"ArrayValue":case"ObjectValue":{const xe=de?" ".repeat(de):"",je=`
`+xe.repeat(fe),mt=je+xe;if(L.type==="ArrayValue"){const Et=L.value.map(_t=>ft(_t,de,fe+1,le));return de?`[${mt}${Et.join(`,${mt}`)}${je}]`:`[${Et.join(", ")}]`}else{const Et=Array.from(L.value.entries()).map(([_t,Gt])=>{const yt=`"${_t}": ${ft(Gt,de,fe+1,le)}`;return de?`${mt}${yt}`:yt});return de?`{${Et.join(",")}${je}}`:`{${Et.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${L.type}`)}}var Fe=class extends Ke{type="ObjectValue";__bool__(){return new We(this.value.size>0)}builtins=new Map([["get",new Tt(([L,de])=>{if(!(L instanceof Ae))throw new Error(`Object key must be a string: got ${L.type}`);return this.value.get(L.value)??de??new ut})],["items",new Tt(()=>this.items())],["keys",new Tt(()=>this.keys())],["values",new Tt(()=>this.values())],["dictsort",new Tt(L=>{let de=new Map;const J=L.filter(mt=>mt instanceof ot?(de=mt.value,!1):!0),le=J.at(0)??de.get("case_sensitive")??new We(!1);if(!(le instanceof We))throw new Error("case_sensitive must be a boolean");const fe=J.at(1)??de.get("by")??new Ae("key");if(!(fe instanceof Ae))throw new Error("by must be a string");if(!["key","value"].includes(fe.value))throw new Error("by must be either 'key' or 'value'");const xe=J.at(2)??de.get("reverse")??new We(!1);if(!(xe instanceof We))throw new Error("reverse must be a boolean");const je=Array.from(this.value.entries()).map(([mt,Et])=>new rt([new Ae(mt),Et])).sort((mt,Et)=>{const _t=fe.value==="key"?0:1,Gt=mt.value[_t],yt=Et.value[_t],rn=Qt(Gt,yt,le.value);return xe.value?-rn:rn});return new rt(je)})]]);items(){return new rt(Array.from(this.value.entries()).map(([L,de])=>new rt([new Ae(L),de])))}keys(){return new rt(Array.from(this.value.keys()).map(L=>new Ae(L)))}values(){return new rt(Array.from(this.value.values()))}toString(){return ft(this,null,0,!1)}},ot=class extends Fe{type="KeywordArgumentsValue"},rt=class extends Ke{type="ArrayValue";builtins=new Map([["length",new Ie(this.value.length)]]);__bool__(){return new We(this.value.length>0)}toString(){return ft(this,null,0,!1)}},St=class extends rt{type="TupleValue"},Tt=class extends Ke{type="FunctionValue"},ut=class extends Ke{type="NullValue"},et=class extends Ke{type="UndefinedValue"},kt=class{constructor(L){this.parent=L}variables=new Map([["namespace",new Tt(L=>{if(L.length===0)return new Fe(new Map);if(L.length!==1||!(L[0]instanceof Fe))throw new Error("`namespace` expects either zero arguments or a single object argument");return L[0]})]]);tests=new Map([["boolean",L=>L.type==="BooleanValue"],["callable",L=>L instanceof Tt],["odd",L=>{if(!(L instanceof Ie))throw new Error(`cannot odd on ${L.type}`);return L.value%2!==0}],["even",L=>{if(!(L instanceof Ie))throw new Error(`cannot even on ${L.type}`);return L.value%2===0}],["false",L=>L.type==="BooleanValue"&&!L.value],["true",L=>L.type==="BooleanValue"&&L.value],["none",L=>L.type==="NullValue"],["string",L=>L.type==="StringValue"],["number",L=>L instanceof Ie||L instanceof nt],["integer",L=>L instanceof Ie],["iterable",L=>L.type==="ArrayValue"||L.type==="StringValue"],["mapping",L=>L.type==="ObjectValue"],["lower",L=>{const de=L.value;return L.type==="StringValue"&&de===de.toLowerCase()}],["upper",L=>{const de=L.value;return L.type==="StringValue"&&de===de.toUpperCase()}],["none",L=>L.type==="NullValue"],["defined",L=>L.type!=="UndefinedValue"],["undefined",L=>L.type==="UndefinedValue"],["equalto",(L,de)=>L.value===de.value],["eq",(L,de)=>L.value===de.value]]);set(L,de){return this.declareVariable(L,Mr(de))}declareVariable(L,de){if(this.variables.has(L))throw new SyntaxError(`Variable already declared: ${L}`);return this.variables.set(L,de),de}setVariable(L,de){return this.variables.set(L,de),de}resolve(L){if(this.variables.has(L))return this;if(this.parent)return this.parent.resolve(L);throw new Error(`Unknown variable: ${L}`)}lookupVariable(L){try{return this.resolve(L).variables.get(L)??new et}catch{return new et}}};function jt(L){L.set("false",!1),L.set("true",!0),L.set("none",null),L.set("raise_exception",de=>{throw new Error(de)}),L.set("range",Le),L.set("strftime_now",ue),L.set("True",!0),L.set("False",!1),L.set("None",null)}function Cn(L,de){const J=de.split(".");let le=L;for(const fe of J)if(le instanceof Fe)le=le.value.get(fe)??new et;else if(le instanceof rt){const xe=parseInt(fe,10);if(!isNaN(xe)&&xe>=0&&xe<le.value.length)le=le.value[xe];else return new et}else return new et;return le}function Qt(L,de,J=!1){if(L instanceof ut&&de instanceof ut)return 0;if(L instanceof ut||de instanceof ut)throw new Error(`Cannot compare ${L.type} with ${de.type}`);if(L instanceof et&&de instanceof et)return 0;if(L instanceof et||de instanceof et)throw new Error(`Cannot compare ${L.type} with ${de.type}`);const le=xe=>xe instanceof Ie||xe instanceof nt||xe instanceof We,fe=xe=>xe instanceof We?xe.value?1:0:xe.value;if(le(L)&&le(de)){const xe=fe(L),je=fe(de);return xe<je?-1:xe>je?1:0}if(L.type!==de.type)throw new Error(`Cannot compare different types: ${L.type} and ${de.type}`);if(L.type==="StringValue"){let xe=L.value,je=de.value;return J||(xe=xe.toLowerCase(),je=je.toLowerCase()),xe<je?-1:xe>je?1:0}else throw new Error(`Cannot compare type: ${L.type}`)}var kn=class{global;constructor(L){this.global=L??new kt}run(L){return this.evaluate(L,this.global)}evaluateBinaryExpression(L,de){const J=this.evaluate(L.left,de);switch(L.operator.value){case"and":return J.__bool__().value?this.evaluate(L.right,de):J;case"or":return J.__bool__().value?J:this.evaluate(L.right,de)}const le=this.evaluate(L.right,de);switch(L.operator.value){case"==":return new We(J.value==le.value);case"!=":return new We(J.value!=le.value)}if(J instanceof et||le instanceof et){if(le instanceof et&&["in","not in"].includes(L.operator.value))return new We(L.operator.value==="not in");throw new Error(`Cannot perform operation ${L.operator.value} on undefined values`)}else{if(J instanceof ut||le instanceof ut)throw new Error("Cannot perform operation on null values");if(L.operator.value==="~")return new Ae(J.value.toString()+le.value.toString());if((J instanceof Ie||J instanceof nt)&&(le instanceof Ie||le instanceof nt)){const fe=J.value,xe=le.value;switch(L.operator.value){case"+":case"-":case"*":{const je=L.operator.value==="+"?fe+xe:L.operator.value==="-"?fe-xe:fe*xe;return J instanceof nt||le instanceof nt?new nt(je):new Ie(je)}case"/":return new nt(fe/xe);case"%":{const je=fe%xe;return J instanceof nt||le instanceof nt?new nt(je):new Ie(je)}case"<":return new We(fe<xe);case">":return new We(fe>xe);case">=":return new We(fe>=xe);case"<=":return new We(fe<=xe)}}else if(J instanceof rt&&le instanceof rt){if(L.operator.value==="+")return new rt(J.value.concat(le.value))}else if(le instanceof rt){const fe=le.value.find(xe=>xe.value===J.value)!==void 0;switch(L.operator.value){case"in":return new We(fe);case"not in":return new We(!fe)}}}if((J instanceof Ae||le instanceof Ae)&&L.operator.value==="+")return new Ae(J.value.toString()+le.value.toString());if(J instanceof Ae&&le instanceof Ae)switch(L.operator.value){case"in":return new We(le.value.includes(J.value));case"not in":return new We(!le.value.includes(J.value))}if(J instanceof Ae&&le instanceof Fe)switch(L.operator.value){case"in":return new We(le.value.has(J.value));case"not in":return new We(!le.value.has(J.value))}throw new SyntaxError(`Unknown operator "${L.operator.value}" between ${J.type} and ${le.type}`)}evaluateArguments(L,de){const J=[],le=new Map;for(const fe of L)if(fe.type==="SpreadExpression"){const xe=fe,je=this.evaluate(xe.argument,de);if(!(je instanceof rt))throw new Error(`Cannot unpack non-iterable type: ${je.type}`);for(const mt of je.value)J.push(mt)}else if(fe.type==="KeywordArgumentExpression"){const xe=fe;le.set(xe.key.value,this.evaluate(xe.value,de))}else{if(le.size>0)throw new Error("Positional arguments must come before keyword arguments");J.push(this.evaluate(fe,de))}return[J,le]}applyFilter(L,de,J){if(de.type==="Identifier"){const le=de;if(le.value==="tojson")return new Ae(ft(L));if(L instanceof rt)switch(le.value){case"list":return L;case"first":return L.value[0];case"last":return L.value[L.value.length-1];case"length":return new Ie(L.value.length);case"reverse":return new rt(L.value.slice().reverse());case"sort":return new rt(L.value.slice().sort((fe,xe)=>Qt(fe,xe,!1)));case"join":return new Ae(L.value.map(fe=>fe.value).join(""));case"string":return new Ae(ft(L,null,0,!1));case"unique":{const fe=new Set,xe=[];for(const je of L.value)fe.has(je.value)||(fe.add(je.value),xe.push(je));return new rt(xe)}default:throw new Error(`Unknown ArrayValue filter: ${le.value}`)}else if(L instanceof Ae)switch(le.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const fe=L.builtins.get(le.value);if(fe instanceof Tt)return fe.value([],J);if(fe instanceof Ie)return fe;throw new Error(`Unknown StringValue filter: ${le.value}`)}case"trim":return new Ae(L.value.trim());case"indent":return new Ae(L.value.split(`
`).map((fe,xe)=>xe===0||fe.length===0?fe:"    "+fe).join(`
`));case"join":case"string":return L;case"int":{const fe=parseInt(L.value,10);return new Ie(isNaN(fe)?0:fe)}case"float":{const fe=parseFloat(L.value);return new nt(isNaN(fe)?0:fe)}default:throw new Error(`Unknown StringValue filter: ${le.value}`)}else if(L instanceof Ie||L instanceof nt)switch(le.value){case"abs":return L instanceof Ie?new Ie(Math.abs(L.value)):new nt(Math.abs(L.value));case"int":return new Ie(Math.floor(L.value));case"float":return new nt(L.value);default:throw new Error(`Unknown NumericValue filter: ${le.value}`)}else if(L instanceof Fe)switch(le.value){case"items":return new rt(Array.from(L.value.entries()).map(([fe,xe])=>new rt([new Ae(fe),xe])));case"length":return new Ie(L.value.size);default:{const fe=L.builtins.get(le.value);if(fe)return fe instanceof Tt?fe.value([],J):fe;throw new Error(`Unknown ObjectValue filter: ${le.value}`)}}else if(L instanceof We)switch(le.value){case"bool":return new We(L.value);case"int":return new Ie(L.value?1:0);case"float":return new nt(L.value?1:0);case"string":return new Ae(L.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${le.value}`)}throw new Error(`Cannot apply filter "${le.value}" to type: ${L.type}`)}else if(de.type==="CallExpression"){const le=de;if(le.callee.type!=="Identifier")throw new Error(`Unknown filter: ${le.callee.type}`);const fe=le.callee.value;if(fe==="tojson"){const[,xe]=this.evaluateArguments(le.args,J),je=xe.get("indent")??new ut;if(!(je instanceof Ie||je instanceof ut))throw new Error("If set, indent must be a number");return new Ae(ft(L,je.value))}else if(fe==="join"){let xe;if(L instanceof Ae)xe=Array.from(L.value);else if(L instanceof rt)xe=L.value.map(_t=>_t.value);else throw new Error(`Cannot apply filter "${fe}" to type: ${L.type}`);const[je,mt]=this.evaluateArguments(le.args,J),Et=je.at(0)??mt.get("separator")??new Ae("");if(!(Et instanceof Ae))throw new Error("separator must be a string");return new Ae(xe.join(Et.value))}else if(fe==="int"||fe==="float"){const[xe,je]=this.evaluateArguments(le.args,J),mt=xe.at(0)??je.get("default")??(fe==="int"?new Ie(0):new nt(0));if(L instanceof Ae){const Et=fe==="int"?parseInt(L.value,10):parseFloat(L.value);return isNaN(Et)?mt:fe==="int"?new Ie(Et):new nt(Et)}else{if(L instanceof Ie||L instanceof nt)return L;if(L instanceof We)return fe==="int"?new Ie(L.value?1:0):new nt(L.value?1:0);throw new Error(`Cannot apply filter "${fe}" to type: ${L.type}`)}}else if(fe==="default"){const[xe,je]=this.evaluateArguments(le.args,J),mt=xe[0]??new Ae(""),Et=xe[1]??je.get("boolean")??new We(!1);if(!(Et instanceof We))throw new Error("`default` filter flag must be a boolean");return L instanceof et||Et.value&&!L.__bool__().value?mt:L}if(L instanceof rt){switch(fe){case"sort":{const[xe,je]=this.evaluateArguments(le.args,J),mt=xe.at(0)??je.get("reverse")??new We(!1);if(!(mt instanceof We))throw new Error("reverse must be a boolean");const Et=xe.at(1)??je.get("case_sensitive")??new We(!1);if(!(Et instanceof We))throw new Error("case_sensitive must be a boolean");const _t=xe.at(2)??je.get("attribute")??new ut;if(!(_t instanceof Ae||_t instanceof Ie||_t instanceof ut))throw new Error("attribute must be a string, integer, or null");const Gt=yt=>{if(_t instanceof ut)return yt;const rn=_t instanceof Ie?String(_t.value):_t.value;return Cn(yt,rn)};return new rt(L.value.slice().sort((yt,rn)=>{const cn=Gt(yt),fr=Gt(rn),hr=Qt(cn,fr,Et.value);return mt.value?-hr:hr}))}case"selectattr":case"rejectattr":{const xe=fe==="selectattr";if(L.value.some(yt=>!(yt instanceof Fe)))throw new Error(`\`${fe}\` can only be applied to array of objects`);if(le.args.some(yt=>yt.type!=="StringLiteral"))throw new Error(`arguments of \`${fe}\` must be strings`);const[je,mt,Et]=le.args.map(yt=>this.evaluate(yt,J));let _t;if(mt){const yt=J.tests.get(mt.value);if(!yt)throw new Error(`Unknown test: ${mt.value}`);_t=yt}else _t=(...yt)=>yt[0].__bool__().value;const Gt=L.value.filter(yt=>{const rn=yt.value.get(je.value),cn=rn?_t(rn,Et):!1;return xe?cn:!cn});return new rt(Gt)}case"map":{const[,xe]=this.evaluateArguments(le.args,J);if(xe.has("attribute")){const je=xe.get("attribute");if(!(je instanceof Ae))throw new Error("attribute must be a string");const mt=xe.get("default"),Et=L.value.map(_t=>{if(!(_t instanceof Fe))throw new Error("items in map must be an object");const Gt=Cn(_t,je.value);return Gt instanceof et?mt??new et:Gt});return new rt(Et)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${fe}`)}else if(L instanceof Ae){switch(fe){case"indent":{const[xe,je]=this.evaluateArguments(le.args,J),mt=xe.at(0)??je.get("width")??new Ie(4);if(!(mt instanceof Ie))throw new Error("width must be a number");const Et=xe.at(1)??je.get("first")??new We(!1),_t=xe.at(2)??je.get("blank")??new We(!1),Gt=L.value.split(`
`),yt=" ".repeat(mt.value),rn=Gt.map((cn,fr)=>!Et.value&&fr===0||!_t.value&&cn.length===0?cn:yt+cn);return new Ae(rn.join(`
`))}case"replace":{const xe=L.builtins.get("replace");if(!(xe instanceof Tt))throw new Error("replace filter not available");const[je,mt]=this.evaluateArguments(le.args,J);return xe.value([...je,new ot(mt)],J)}}throw new Error(`Unknown StringValue filter: ${fe}`)}else if(L instanceof Fe){const xe=L.builtins.get(fe);if(xe&&xe instanceof Tt){const[je,mt]=this.evaluateArguments(le.args,J);return mt.size>0&&je.push(new ot(mt)),xe.value(je,J)}throw new Error(`Unknown ObjectValue filter: ${fe}`)}else throw new Error(`Cannot apply filter "${fe}" to type: ${L.type}`)}throw new Error(`Unknown filter: ${de.type}`)}evaluateFilterExpression(L,de){const J=this.evaluate(L.operand,de);return this.applyFilter(J,L.filter,de)}evaluateTestExpression(L,de){const J=this.evaluate(L.operand,de),le=de.tests.get(L.test.value);if(!le)throw new Error(`Unknown test: ${L.test.value}`);const fe=le(J);return new We(L.negate?!fe:fe)}evaluateSelectExpression(L,de){return this.evaluate(L.test,de).__bool__().value?this.evaluate(L.lhs,de):new et}evaluateUnaryExpression(L,de){const J=this.evaluate(L.argument,de);if(L.operator.value==="not")return new We(!J.value);throw new SyntaxError(`Unknown operator: ${L.operator.value}`)}evaluateTernaryExpression(L,de){return this.evaluate(L.condition,de).__bool__().value?this.evaluate(L.trueExpr,de):this.evaluate(L.falseExpr,de)}evalProgram(L,de){return this.evaluateBlock(L.body,de)}evaluateBlock(L,de){let J="";for(const le of L){const fe=this.evaluate(le,de);fe.type!=="NullValue"&&fe.type!=="UndefinedValue"&&(J+=fe.toString())}return new Ae(J)}evaluateIdentifier(L,de){return de.lookupVariable(L.value)}evaluateCallExpression(L,de){const[J,le]=this.evaluateArguments(L.args,de);le.size>0&&J.push(new ot(le));const fe=this.evaluate(L.callee,de);if(fe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${fe.type}`);return fe.value(J,de)}evaluateSliceExpression(L,de,J){if(!(L instanceof rt||L instanceof Ae))throw new Error("Slice object must be an array or string");const le=this.evaluate(de.start,J),fe=this.evaluate(de.stop,J),xe=this.evaluate(de.step,J);if(!(le instanceof Ie||le instanceof et))throw new Error("Slice start must be numeric or undefined");if(!(fe instanceof Ie||fe instanceof et))throw new Error("Slice stop must be numeric or undefined");if(!(xe instanceof Ie||xe instanceof et))throw new Error("Slice step must be numeric or undefined");return L instanceof rt?new rt(Xe(L.value,le.value,fe.value,xe.value)):new Ae(Xe(Array.from(L.value),le.value,fe.value,xe.value).join(""))}evaluateMemberExpression(L,de){const J=this.evaluate(L.object,de);let le;if(L.computed){if(L.property.type==="SliceExpression")return this.evaluateSliceExpression(J,L.property,de);le=this.evaluate(L.property,de)}else le=new Ae(L.property.value);let fe;if(J instanceof Fe){if(!(le instanceof Ae))throw new Error(`Cannot access property with non-string: got ${le.type}`);fe=J.value.get(le.value)??J.builtins.get(le.value)}else if(J instanceof rt||J instanceof Ae)if(le instanceof Ie)fe=J.value.at(le.value),J instanceof Ae&&(fe=new Ae(J.value.at(le.value)));else if(le instanceof Ae)fe=J.builtins.get(le.value);else throw new Error(`Cannot access property with non-string/non-number: got ${le.type}`);else{if(!(le instanceof Ae))throw new Error(`Cannot access property with non-string: got ${le.type}`);fe=J.builtins.get(le.value)}return fe instanceof Ke?fe:new et}evaluateSet(L,de){const J=L.value?this.evaluate(L.value,de):this.evaluateBlock(L.body,de);if(L.assignee.type==="Identifier"){const le=L.assignee.value;de.setVariable(le,J)}else if(L.assignee.type==="TupleLiteral"){const le=L.assignee;if(!(J instanceof rt))throw new Error(`Cannot unpack non-iterable type in set: ${J.type}`);const fe=J.value;if(fe.length!==le.value.length)throw new Error(`Too ${le.value.length>fe.length?"few":"many"} items to unpack in set`);for(let xe=0;xe<le.value.length;++xe){const je=le.value[xe];if(je.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${je.type}`);de.setVariable(je.value,fe[xe])}}else if(L.assignee.type==="MemberExpression"){const le=L.assignee,fe=this.evaluate(le.object,de);if(!(fe instanceof Fe))throw new Error("Cannot assign to member of non-object");if(le.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");fe.value.set(le.property.value,J)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(L.assignee)}`);return new ut}evaluateIf(L,de){const J=this.evaluate(L.test,de);return this.evaluateBlock(J.__bool__().value?L.body:L.alternate,de)}evaluateFor(L,de){const J=new kt(de);let le,fe;if(L.iterable.type==="SelectExpression"){const _t=L.iterable;fe=this.evaluate(_t.lhs,J),le=_t.test}else fe=this.evaluate(L.iterable,J);if(!(fe instanceof rt||fe instanceof Fe))throw new Error(`Expected iterable or object type in for loop: got ${fe.type}`);fe instanceof Fe&&(fe=fe.keys());const xe=[],je=[];for(let _t=0;_t<fe.value.length;++_t){const Gt=new kt(J),yt=fe.value[_t];let rn;if(L.loopvar.type==="Identifier")rn=cn=>cn.setVariable(L.loopvar.value,yt);else if(L.loopvar.type==="TupleLiteral"){const cn=L.loopvar;if(yt.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${yt.type}`);const fr=yt;if(cn.value.length!==fr.value.length)throw new Error(`Too ${cn.value.length>fr.value.length?"few":"many"} items to unpack`);rn=hr=>{for(let Hn=0;Hn<cn.value.length;++Hn){if(cn.value[Hn].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${cn.value[Hn].type}`);hr.setVariable(cn.value[Hn].value,fr.value[Hn])}}}else throw new Error(`Invalid loop variable(s): ${L.loopvar.type}`);le&&(rn(Gt),!this.evaluate(le,Gt).__bool__().value)||(xe.push(yt),je.push(rn))}let mt="",Et=!0;for(let _t=0;_t<xe.length;++_t){const Gt=new Map([["index",new Ie(_t+1)],["index0",new Ie(_t)],["revindex",new Ie(xe.length-_t)],["revindex0",new Ie(xe.length-_t-1)],["first",new We(_t===0)],["last",new We(_t===xe.length-1)],["length",new Ie(xe.length)],["previtem",_t>0?xe[_t-1]:new et],["nextitem",_t<xe.length-1?xe[_t+1]:new et]]);J.setVariable("loop",new Fe(Gt)),je[_t](J);try{const yt=this.evaluateBlock(L.body,J);mt+=yt.value}catch(yt){if(yt instanceof Ge)continue;if(yt instanceof Ve)break;throw yt}Et=!1}if(Et){const _t=this.evaluateBlock(L.defaultBlock,J);mt+=_t.value}return new Ae(mt)}evaluateMacro(L,de){return de.setVariable(L.name.value,new Tt((J,le)=>{const fe=new kt(le);J=J.slice();let xe;J.at(-1)?.type==="KeywordArgumentsValue"&&(xe=J.pop());for(let je=0;je<L.args.length;++je){const mt=L.args[je],Et=J[je];if(mt.type==="Identifier"){const _t=mt;if(!Et)throw new Error(`Missing positional argument: ${_t.value}`);fe.setVariable(_t.value,Et)}else if(mt.type==="KeywordArgumentExpression"){const _t=mt,Gt=Et??xe?.value.get(_t.key.value)??this.evaluate(_t.value,fe);fe.setVariable(_t.key.value,Gt)}else throw new Error(`Unknown argument type: ${mt.type}`)}return this.evaluateBlock(L.body,fe)})),new ut}evaluateCallStatement(L,de){const J=new Tt((mt,Et)=>{const _t=new kt(Et);if(L.callerArgs)for(let Gt=0;Gt<L.callerArgs.length;++Gt){const yt=L.callerArgs[Gt];if(yt.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${yt.type}`);_t.setVariable(yt.value,mt[Gt]??new et)}return this.evaluateBlock(L.body,_t)}),[le,fe]=this.evaluateArguments(L.call.args,de);le.push(new ot(fe));const xe=this.evaluate(L.call.callee,de);if(xe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${xe.type}`);const je=new kt(de);return je.setVariable("caller",J),xe.value(le,je)}evaluateFilterStatement(L,de){const J=this.evaluateBlock(L.body,de);return this.applyFilter(J,L.filter,de)}evaluate(L,de){if(!L)return new et;switch(L.type){case"Program":return this.evalProgram(L,de);case"Set":return this.evaluateSet(L,de);case"If":return this.evaluateIf(L,de);case"For":return this.evaluateFor(L,de);case"Macro":return this.evaluateMacro(L,de);case"CallStatement":return this.evaluateCallStatement(L,de);case"Break":throw new Ve;case"Continue":throw new Ge;case"IntegerLiteral":return new Ie(L.value);case"FloatLiteral":return new nt(L.value);case"StringLiteral":return new Ae(L.value);case"ArrayLiteral":return new rt(L.value.map(J=>this.evaluate(J,de)));case"TupleLiteral":return new St(L.value.map(J=>this.evaluate(J,de)));case"ObjectLiteral":{const J=new Map;for(const[le,fe]of L.value){const xe=this.evaluate(le,de);if(!(xe instanceof Ae))throw new Error(`Object keys must be strings: got ${xe.type}`);J.set(xe.value,this.evaluate(fe,de))}return new Fe(J)}case"Identifier":return this.evaluateIdentifier(L,de);case"CallExpression":return this.evaluateCallExpression(L,de);case"MemberExpression":return this.evaluateMemberExpression(L,de);case"UnaryExpression":return this.evaluateUnaryExpression(L,de);case"BinaryExpression":return this.evaluateBinaryExpression(L,de);case"FilterExpression":return this.evaluateFilterExpression(L,de);case"FilterStatement":return this.evaluateFilterStatement(L,de);case"TestExpression":return this.evaluateTestExpression(L,de);case"SelectExpression":return this.evaluateSelectExpression(L,de);case"Ternary":return this.evaluateTernaryExpression(L,de);case"Comment":return new ut;default:throw new SyntaxError(`Unknown node type: ${L.type}`)}}};function Mr(L){switch(typeof L){case"number":return Number.isInteger(L)?new Ie(L):new nt(L);case"string":return new Ae(L);case"boolean":return new We(L);case"undefined":return new et;case"object":return L===null?new ut:Array.isArray(L)?new rt(L.map(Mr)):new Fe(new Map(Object.entries(L).map(([de,J])=>[de,Mr(J)])));case"function":return new Tt((de,J)=>{const le=L(...de.map(fe=>fe.value))??null;return Mr(le)});default:throw new Error(`Cannot convert to runtime value: ${L}`)}}var an=`
`,_i="{%- ",is=" -%}";function as(L){switch(L.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return L.operator.value==="and"?1:L.operator.value==="in"||L.operator.value==="not in"?2:0}return 0}function pa(L,de="	"){const J=typeof de=="number"?" ".repeat(de):de;return Ir(L.body,0,J).replace(/\n$/,"")}function Jn(...L){return _i+L.join(" ")+is}function Ir(L,de,J){return L.map(le=>Yr(le,de,J)).join(an)}function Yr(L,de,J){const le=J.repeat(de);switch(L.type){case"Program":return Ir(L.body,de,J);case"If":return ra(L,de,J);case"For":return Bt(L,de,J);case"Set":return Wn(L,de,J);case"Macro":return ga(L,de,J);case"Break":return le+Jn("break");case"Continue":return le+Jn("continue");case"CallStatement":return ia(L,de,J);case"FilterStatement":return ei(L,de,J);case"Comment":return le+"{# "+L.value+" #}";default:return le+"{{- "+Xt(L)+" -}}"}}function ra(L,de,J){const le=J.repeat(de),fe=[];let xe=L;for(;xe&&(fe.push({test:xe.test,body:xe.body}),xe.alternate.length===1&&xe.alternate[0].type==="If");)xe=xe.alternate[0];let je=le+Jn("if",Xt(fe[0].test))+an+Ir(fe[0].body,de+1,J);for(let mt=1;mt<fe.length;++mt)je+=an+le+Jn("elif",Xt(fe[mt].test))+an+Ir(fe[mt].body,de+1,J);return xe&&xe.alternate.length>0&&(je+=an+le+Jn("else")+an+Ir(xe.alternate,de+1,J)),je+=an+le+Jn("endif"),je}function Bt(L,de,J){const le=J.repeat(de);let fe="";if(L.iterable.type==="SelectExpression"){const je=L.iterable;fe=`${Xt(je.lhs)} if ${Xt(je.test)}`}else fe=Xt(L.iterable);let xe=le+Jn("for",Xt(L.loopvar),"in",fe)+an+Ir(L.body,de+1,J);return L.defaultBlock.length>0&&(xe+=an+le+Jn("else")+an+Ir(L.defaultBlock,de+1,J)),xe+=an+le+Jn("endfor"),xe}function Wn(L,de,J){const le=J.repeat(de),fe=Xt(L.assignee),xe=L.value?Xt(L.value):"",je=le+Jn("set",`${fe}${L.value?" = "+xe:""}`);return L.body.length===0?je:je+an+Ir(L.body,de+1,J)+an+le+Jn("endset")}function ga(L,de,J){const le=J.repeat(de),fe=L.args.map(Xt).join(", ");return le+Jn("macro",`${L.name.value}(${fe})`)+an+Ir(L.body,de+1,J)+an+le+Jn("endmacro")}function ia(L,de,J){const le=J.repeat(de),fe=L.callerArgs&&L.callerArgs.length>0?`(${L.callerArgs.map(Xt).join(", ")})`:"",xe=Xt(L.call);let je=le+Jn(`call${fe}`,xe)+an;return je+=Ir(L.body,de+1,J)+an,je+=le+Jn("endcall"),je}function ei(L,de,J){const le=J.repeat(de),fe=L.filter.type==="Identifier"?L.filter.value:Xt(L.filter);let xe=le+Jn("filter",fe)+an;return xe+=Ir(L.body,de+1,J)+an,xe+=le+Jn("endfilter"),xe}function Xt(L,de=-1){switch(L.type){case"SpreadExpression":return`*${Xt(L.argument)}`;case"Identifier":return L.value;case"IntegerLiteral":return`${L.value}`;case"FloatLiteral":return`${L.value}`;case"StringLiteral":return JSON.stringify(L.value);case"BinaryExpression":{const J=L,le=as(J),fe=Xt(J.left,le),xe=Xt(J.right,le+1),je=`${fe} ${J.operator.value} ${xe}`;return le<de?`(${je})`:je}case"UnaryExpression":{const J=L;return J.operator.value+(J.operator.value==="not"?" ":"")+Xt(J.argument,1/0)}case"CallExpression":{const J=L,le=J.args.map(Xt).join(", ");return`${Xt(J.callee)}(${le})`}case"MemberExpression":{const J=L;let le=Xt(J.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(J.object.type)||(le=`(${le})`);let fe=Xt(J.property);return!J.computed&&J.property.type!=="Identifier"&&(fe=`(${fe})`),J.computed?`${le}[${fe}]`:`${le}.${fe}`}case"FilterExpression":{const J=L,le=Xt(J.operand,1/0);return J.filter.type==="CallExpression"?`${le} | ${Xt(J.filter)}`:`${le} | ${J.filter.value}`}case"SelectExpression":{const J=L;return`${Xt(J.lhs)} if ${Xt(J.test)}`}case"TestExpression":{const J=L;return`${Xt(J.operand)} is${J.negate?" not":""} ${J.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const J=L.value.map(Xt),le=L.type==="ArrayLiteral"?"[]":"()";return`${le[0]}${J.join(", ")}${le[1]}`}case"ObjectLiteral":return`{${Array.from(L.value.entries()).map(([le,fe])=>`${Xt(le)}: ${Xt(fe)}`).join(", ")}}`;case"SliceExpression":{const J=L,le=J.start?Xt(J.start):"",fe=J.stop?Xt(J.stop):"",xe=J.step?`:${Xt(J.step)}`:"";return`${le}:${fe}${xe}`}case"KeywordArgumentExpression":{const J=L;return`${J.key.value}=${Xt(J.value)}`}case"Ternary":{const J=L,le=`${Xt(J.trueExpr)} if ${Xt(J.condition,0)} else ${Xt(J.falseExpr)}`;return de>-1?`(${le})`:le}default:throw new Error(`Unknown expression type: ${L.type}`)}}var _a=class{parsed;constructor(L){const de=h(L,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=ke(de)}render(L){const de=new kt;if(jt(de),L)for(const[fe,xe]of Object.entries(L))de.set(fe,xe);return new kn(de).run(this.parsed).value}format(L){return pa(this.parsed,L?.indent||"	")}}}),"./src/backends/onnx.js":((e,t,n)=>{var i;n.r(t),n.d(t,{Tensor:()=>c.Tensor,createInferenceSession:()=>D,deviceToExecutionProviders:()=>v,isONNXProxy:()=>C,isONNXTensor:()=>$,runInferenceSession:()=>A});var r=n("./src/env.js"),o=n("?2ce3"),l=n("onnxruntime-web"),c=n("onnxruntime-common");const d=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),f=[];let p,h;const m=Symbol.for("onnxruntime");if(m in globalThis)h=globalThis[m];else if(r.apis.IS_NODE_ENV){switch(h=o??(i||(i=n.t(o,2))),process.platform){case"win32":f.push("dml");break;case"linux":process.arch==="x64"&&f.push("cuda");break}f.push("cpu"),p=["cpu"]}else h=l,r.apis.IS_WEBNN_AVAILABLE&&f.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),r.apis.IS_WEBGPU_AVAILABLE&&f.push("webgpu"),f.push("wasm"),p=["wasm"];const _=h.InferenceSession;function v(S=null){if(!S)return p;switch(S){case"auto":return f;case"gpu":return f.filter(O=>["webgpu","cuda","dml","webnn-gpu"].includes(O))}if(f.includes(S))return[d[S]??S];throw new Error(`Unsupported device: "${S}". Should be one of: ${f.join(", ")}.`)}let b=null;async function D(S,O,N){b&&await b;const j=_.create(S,O);b??=j;const X=await j;return X.config=N,X}let T=Promise.resolve();const E=r.apis.IS_BROWSER_ENV||r.apis.IS_WEBWORKER_ENV;async function A(S,O){const N=()=>S.run(O);return await(E?T=T.then(N):N())}function $(S){return S instanceof h.Tensor}const P=h?.env;P?.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!P.wasm.wasmPaths&&(P.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${r.env.version}/dist/`),P.wasm.proxy=!1),P?.webgpu&&(P.webgpu.powerPreference="high-performance");function C(){return P?.wasm?.proxy}r.env.backends.onnx=P}),"./src/base/feature_extraction_utils.js":((e,t,n)=>{n.r(t),n.d(t,{FeatureExtractor:()=>l,validate_audio_inputs:()=>c});var i=n("./src/utils/constants.js"),r=n("./src/utils/generic.js"),o=n("./src/utils/hub.js");class l extends r.Callable{constructor(f){super(),this.config=f}static async from_pretrained(f,p={}){const h=await(0,o.getModelJSON)(f,i.FEATURE_EXTRACTOR_NAME,!0,p);return new this(h)}}function c(d,f){if(!(d instanceof Float32Array||d instanceof Float64Array))throw new Error(`${f} expects input to be a Float32Array or a Float64Array, but got ${d?.constructor?.name??typeof d} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}}),"./src/base/image_processors_utils.js":((e,t,n)=>{n.r(t),n.d(t,{ImageProcessor:()=>$,center_to_corners_format:()=>h,post_process_instance_segmentation:()=>A,post_process_object_detection:()=>m,post_process_panoptic_segmentation:()=>E,post_process_semantic_segmentation:()=>_});var i=n("./src/utils/generic.js"),r=n("./src/utils/tensor.js"),o=n("./src/utils/maths.js");n("./src/utils/image.js");var l=n("./src/utils/core.js"),c=n("./src/utils/hub.js"),d=n("./src/utils/constants.js");function f(P,C,S=0,O=null){const N=P/C;let j=(0,o.bankers_round)(N)*C;return O!==null&&j>O&&(j=Math.floor(N)*C),j<S&&(j=Math.ceil(N)*C),j}function p([P,C],S){return[Math.max(Math.floor(P/S),1)*S,Math.max(Math.floor(C/S),1)*S]}function h([P,C,S,O]){return[P-S/2,C-O/2,P+S/2,C+O/2]}function m(P,C=.5,S=null,O=!1){const N=P.logits,j=P.pred_boxes,[X,Y,K]=N.dims;if(S!==null&&S.length!==X)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let se=[];for(let oe=0;oe<X;++oe){let W=S!==null?S[oe]:null,ne={boxes:[],classes:[],scores:[]},ae=N[oe],ge=j[oe];for(let ye=0;ye<Y;++ye){let G=ae[ye],H=[],V;if(O){V=G.sigmoid().data;for(let U=0;U<V.length;++U)V[U]>C&&H.push(U)}else{let U=(0,o.max)(G.data)[1];if(U===K-1||(V=(0,o.softmax)(G.data),V[U]<C))continue;H.push(U)}for(const U of H){let ce=ge[ye].data;ce=h(ce),W!==null&&(ce=ce.map((ve,ke)=>ve*W[(ke+1)%2])),ne.boxes.push(ce),ne.classes.push(U),ne.scores.push(V[U])}}se.push(ne)}return se}function _(P,C=null){const S=P.logits,O=S.dims[0];if(C!==null&&C.length!==O)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const N=[];for(let j=0;j<O;++j){const X=C!==null?C[j]:null;let Y=S[j];X!==null&&(Y=(0,r.interpolate)(Y,X,"bilinear",!1));const[K,se]=X??Y.dims.slice(-2),oe=new r.Tensor("int32",new Int32Array(K*se),[K,se]),W=Y[0].data,ne=oe.data;for(let ye=1;ye<Y.dims[0];++ye){const G=Y[ye].data;for(let H=0;H<G.length;++H)G[H]>W[H]&&(W[H]=G[H],ne[H]=ye)}const ae=new Array(Y.dims[0]);for(let ye=0;ye<ne.length;++ye){const G=ne[ye];ae[G]=G}const ge=ae.filter(ye=>ye!==void 0);N.push({segmentation:oe,labels:ge})}return N}function v(P,C,S,O){const N=[],j=[],X=[];for(let Y=0;Y<P.dims[0];++Y){const K=P[Y],se=C[Y],oe=(0,o.max)(K.data)[1];if(oe===O)continue;const ne=(0,o.softmax)(K.data)[oe];ne>S&&(N.push(se),j.push(ne),X.push(oe))}return[N,j,X]}function b(P,C,S,O=.5,N=.8){const j=[];let X=0,Y=0;const K=C[S].data;for(let oe=0;oe<P.length;++oe)P[oe]===S&&(j.push(oe),++X),K[oe]>=O&&++Y;let se=X>0&&Y>0;return se&&(se=X/Y>N),[se,j]}function D(P,C,S,O,N,j=null,X=null){const[Y,K]=X??P[0].dims,se=new r.Tensor("int32",new Int32Array(Y*K),[Y,K]),oe=[];if(X!==null)for(let ye=0;ye<P.length;++ye)P[ye]=(0,r.interpolate)(P[ye],X,"bilinear",!1);const W=new Int32Array(P[0].data.length),ne=new Float32Array(P[0].data.length);for(let ye=0;ye<P.length;++ye){let G=C[ye];const H=P[ye].data;for(let V=0;V<H.length;++V)H[V]*=G,H[V]>ne[V]&&(W[V]=ye,ne[V]=H[V])}let ae=0;const ge=se.data;for(let ye=0;ye<S.length;++ye){const G=S[ye],[H,V]=b(W,P,ye,O,N);if(H){++ae;for(const U of V)ge[U]=ae;oe.push({id:ae,label_id:G,score:C[ye]})}}return[se,oe]}function T(P,C,S=28,O=3136,N=784*1280){if(P<S||C<S)throw new Error(`height:${P} or width:${C} must be larger than factor:${S}`);if(Math.max(P,C)/Math.min(P,C)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(P,C)/Math.min(P,C)}`);let j=Math.round(P/S)*S,X=Math.round(C/S)*S;if(j*X>N){const Y=Math.sqrt(P*C/N);j=Math.floor(P/Y/S)*S,X=Math.floor(C/Y/S)*S}else if(j*X<O){const Y=Math.sqrt(O/(P*C));j=Math.ceil(P*Y/S)*S,X=Math.ceil(C*Y/S)*S}return[j,X]}function E(P,C=.5,S=.5,O=.8,N=null,j=null){N===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),N=new Set);const X=P.class_queries_logits??P.logits,K=(P.masks_queries_logits??P.pred_masks).sigmoid();let[se,oe,W]=X.dims;if(W-=1,j!==null&&j.length!==se)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let ne=[];for(let ae=0;ae<se;++ae){let ge=j!==null?j[ae]:null,ye=X[ae],G=K[ae],[H,V,U]=v(ye,G,C,W);if(U.length===0){let[ke,Le]=ge??G.dims.slice(-2),Xe=new r.Tensor("int32",new Int32Array(ke*Le).fill(-1),[ke,Le]);ne.push({segmentation:Xe,segments_info:[]});continue}let[ce,ve]=D(H,V,U,S,O,N,ge);ne.push({segmentation:ce,segments_info:ve})}return ne}function A(P,C=.5,S=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class $ extends i.Callable{constructor(C){super(),this.image_mean=C.image_mean??C.mean,this.image_std=C.image_std??C.std,this.resample=C.resample??2,this.do_rescale=C.do_rescale??!0,this.rescale_factor=C.rescale_factor??1/255,this.do_normalize=C.do_normalize,this.do_thumbnail=C.do_thumbnail,this.size=C.size??C.image_size,this.do_resize=C.do_resize??this.size!==void 0,this.size_divisibility=C.size_divisibility??C.size_divisor,this.do_center_crop=C.do_center_crop,this.crop_size=C.crop_size,this.do_convert_rgb=C.do_convert_rgb??!0,this.do_crop_margin=C.do_crop_margin,this.pad_size=C.pad_size,this.do_pad=C.do_pad,this.min_pixels=C.min_pixels,this.max_pixels=C.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=C.do_flip_channel_order??!1,this.config=C}async thumbnail(C,S,O=2){const N=C.height,j=C.width,X=S.height,Y=S.width;let K=Math.min(N,X),se=Math.min(j,Y);return K===N&&se===j?C:(N>j?se=Math.floor(j*K/N):j>N&&(K=Math.floor(N*se/j)),await C.resize(se,K,{resample:O}))}async crop_margin(C,S=200){const O=C.clone().grayscale(),N=(0,o.min)(O.data)[0],X=(0,o.max)(O.data)[0]-N;if(X===0)return C;const Y=S/255;let K=O.width,se=O.height,oe=0,W=0;const ne=O.data;for(let ae=0;ae<O.height;++ae){const ge=ae*O.width;for(let ye=0;ye<O.width;++ye)(ne[ge+ye]-N)/X<Y&&(K=Math.min(K,ye),se=Math.min(se,ae),oe=Math.max(oe,ye),W=Math.max(W,ae))}return C=await C.crop([K,se,oe,W]),C}pad_image(C,S,O,{mode:N="constant",center:j=!1,constant_values:X=0}={}){const[Y,K,se]=S;let oe,W;if(typeof O=="number"?(oe=O,W=O):O==="square"?oe=W=Math.max(Y,K):(oe=O.width,W=O.height),oe!==K||W!==Y){const ne=new Float32Array(oe*W*se);if(Array.isArray(X))for(let ye=0;ye<ne.length;++ye)ne[ye]=X[ye%se];else X!==0&&ne.fill(X);const[ae,ge]=j?[Math.floor((oe-K)/2),Math.floor((W-Y)/2)]:[0,0];for(let ye=0;ye<Y;++ye){const G=(ye+ge)*oe,H=ye*K;for(let V=0;V<K;++V){const U=(G+V+ae)*se,ce=(H+V)*se;for(let ve=0;ve<se;++ve)ne[U+ve]=C[ce+ve]}}if(N==="symmetric"){if(j)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const ye=Y-1,G=K-1;for(let H=0;H<W;++H){const V=H*oe,U=(0,l.calculateReflectOffset)(H,ye)*K;for(let ce=0;ce<oe;++ce){if(H<Y&&ce<K)continue;const ve=(V+ce)*se,ke=(U+(0,l.calculateReflectOffset)(ce,G))*se;for(let Le=0;Le<se;++Le)ne[ve+Le]=C[ke+Le]}}}C=ne,S=[W,oe,se]}return[C,S]}rescale(C){for(let S=0;S<C.length;++S)C[S]=this.rescale_factor*C[S]}get_resize_output_image_size(C,S){const[O,N]=C.size;let j,X;if(this.do_thumbnail){const{height:Y,width:K}=S;j=Math.min(Y,K)}else Number.isInteger(S)?(j=S,X=this.config.max_size??j):S!==void 0&&(j=S.shortest_edge,X=S.longest_edge);if(j!==void 0||X!==void 0){const Y=j===void 0?1:Math.max(j/O,j/N),K=O*Y,se=N*Y,oe=X===void 0?1:Math.min(X/K,X/se);let W=Math.floor(Number((K*oe).toFixed(2))),ne=Math.floor(Number((se*oe).toFixed(2)));return this.size_divisibility!==void 0&&([W,ne]=p([W,ne],this.size_divisibility)),[W,ne]}else if(S!==void 0&&S.width!==void 0&&S.height!==void 0){let Y=S.width,K=S.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let se=K/N,oe=Y/O;Math.abs(1-oe)<Math.abs(1-se)?se=oe:oe=se,K=f(se*N,this.config.ensure_multiple_of),Y=f(oe*O,this.config.ensure_multiple_of)}return[Y,K]}else{if(this.size_divisibility!==void 0)return p([O,N],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const Y=this.config.patch_size*this.config.merge_size;return T(N,O,Y,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(S)}`)}}async resize(C){const[S,O]=this.get_resize_output_image_size(C,this.size);return await C.resize(S,O,{resample:this.resample})}async preprocess(C,{do_normalize:S=null,do_pad:O=null,do_convert_rgb:N=null,do_convert_grayscale:j=null,do_flip_channel_order:X=null}={}){this.do_crop_margin&&(C=await this.crop_margin(C));const[Y,K]=C.size;if(N??this.do_convert_rgb?C=C.rgb():j&&(C=C.grayscale()),this.do_resize&&(C=await this.resize(C)),this.do_thumbnail&&(C=await this.thumbnail(C,this.size,this.resample)),this.do_center_crop){let ae,ge;Number.isInteger(this.crop_size)?(ae=this.crop_size,ge=this.crop_size):(ae=this.crop_size.width,ge=this.crop_size.height),C=await C.center_crop(ae,ge)}const se=[C.height,C.width];let oe=Float32Array.from(C.data),W=[C.height,C.width,C.channels];if(this.do_rescale&&this.rescale(oe),S??this.do_normalize){let ae=this.image_mean;Array.isArray(this.image_mean)||(ae=new Array(C.channels).fill(ae));let ge=this.image_std;if(Array.isArray(this.image_std)||(ge=new Array(C.channels).fill(ge)),ae.length!==C.channels||ge.length!==C.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${ae.length}) and \`image_std\` (${ge.length}) must match the number of channels in the image (${C.channels}).`);for(let ye=0;ye<oe.length;ye+=C.channels)for(let G=0;G<C.channels;++G)oe[ye+G]=(oe[ye+G]-ae[G])/ge[G]}if(O??this.do_pad){if(this.pad_size)[oe,W]=this.pad_image(oe,[C.height,C.width,C.channels],this.pad_size);else if(this.size_divisibility){const[ae,ge]=p([W[1],W[0]],this.size_divisibility);[oe,W]=this.pad_image(oe,W,{width:ae,height:ge})}}if(X??this.do_flip_channel_order){if(W[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let ae=0;ae<oe.length;ae+=3){const ge=oe[ae];oe[ae]=oe[ae+2],oe[ae+2]=ge}}const ne=new r.Tensor("float32",oe,W).permute(2,0,1);return{original_size:[K,Y],reshaped_input_size:se,pixel_values:ne}}async _call(C,...S){Array.isArray(C)||(C=[C]);const O=await Promise.all(C.map(j=>this.preprocess(j)));return{pixel_values:(0,r.stack)(O.map(j=>j.pixel_values),0),original_sizes:O.map(j=>j.original_size),reshaped_input_sizes:O.map(j=>j.reshaped_input_size)}}static async from_pretrained(C,S={}){const O=await(0,c.getModelJSON)(C,d.IMAGE_PROCESSOR_NAME,!0,S);return new this(O)}}}),"./src/base/processing_utils.js":((e,t,n)=>{n.r(t),n.d(t,{Processor:()=>l});var i=n("./src/utils/constants.js"),r=n("./src/utils/generic.js"),o=n("./src/utils/hub.js");class l extends r.Callable{static classes=["image_processor_class","tokenizer_class","feature_extractor_class"];static uses_processor_config=!1;static uses_chat_template_file=!1;constructor(d,f,p){super(),this.config=d,this.components=f,this.chat_template=p}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(d,f={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(d,{tokenize:!1,chat_template:this.chat_template??void 0,...f})}batch_decode(...d){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...d)}decode(...d){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...d)}async _call(d,...f){for(const p of[this.image_processor,this.feature_extractor,this.tokenizer])if(p)return p(d,...f);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(d,f={}){const[p,h,m]=await Promise.all([this.uses_processor_config?(0,o.getModelJSON)(d,i.PROCESSOR_NAME,!0,f):{},Promise.all(this.classes.filter(_=>_ in this).map(async _=>{const v=await this[_].from_pretrained(d,f);return[_.replace(/_class$/,""),v]})).then(Object.fromEntries),this.uses_chat_template_file?(0,o.getModelText)(d,i.CHAT_TEMPLATE_NAME,!0,f):null]);return new this(p,h,m)}}}),"./src/configs.js":((e,t,n)=>{n.r(t),n.d(t,{AutoConfig:()=>p,PretrainedConfig:()=>f,getCacheShapes:()=>c});var i=n("./src/utils/core.js"),r=n("./src/utils/hub.js");async function o(h,m){return await(0,r.getModelJSON)(h,"config.json",!0,m)}function l(h){const m={};let _={};switch(h.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":case"mistral3":_=l(h.text_config);break;case"moondream1":_=l(h.phi_config);break;case"musicgen":_=l(h.decoder);break;case"multi_modality":_=l(h.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":m.num_heads="n_head",m.num_layers="n_layer",m.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":m.num_heads="num_attention_heads",m.num_layers="num_hidden_layers",m.hidden_size="hidden_size";break;case"llama":case"llama4_text":case"nanochat":case"arcee":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"granitemoehybrid":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":m.num_heads="num_key_value_heads",m.num_layers="num_hidden_layers",m.hidden_size="hidden_size",m.num_attention_heads="num_attention_heads",m.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"vaultgemma":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":case"ministral":case"ministral3":m.num_heads="num_key_value_heads",m.num_layers="num_hidden_layers",m.dim_kv="head_dim";break;case"openelm":m.num_heads="num_kv_heads",m.num_layers="num_transformer_layers",m.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":m.num_heads="num_heads",m.num_layers="num_layers",m.hidden_size="hidden_size";break;case"bloom":m.num_heads="n_head",m.num_layers="n_layer",m.hidden_size="hidden_size";break;case"mpt":m.num_heads="n_heads",m.num_layers="n_layers",m.hidden_size="d_model";break;case"exaone":m.num_heads="num_key_value_heads",m.num_layers="num_layers",m.dim_kv="head_dim",m.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":m.num_decoder_layers="num_decoder_layers",m.num_decoder_heads="num_heads",m.decoder_dim_kv="d_kv",m.num_encoder_layers="num_layers",m.num_encoder_heads="num_heads",m.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":m.num_decoder_layers="decoder_layers",m.num_decoder_heads="decoder_attention_heads",m.decoder_hidden_size="d_model",m.num_encoder_layers="encoder_layers",m.num_encoder_heads="encoder_attention_heads",m.encoder_hidden_size="d_model";break;case"speecht5":m.num_decoder_layers="decoder_layers",m.num_decoder_heads="decoder_attention_heads",m.decoder_hidden_size="hidden_size",m.num_encoder_layers="encoder_layers",m.num_encoder_heads="encoder_attention_heads",m.encoder_hidden_size="hidden_size";break;case"trocr":m.num_encoder_layers=m.num_decoder_layers="decoder_layers",m.num_encoder_heads=m.num_decoder_heads="decoder_attention_heads",m.encoder_hidden_size=m.decoder_hidden_size="d_model";break;case"musicgen_decoder":m.num_encoder_layers=m.num_decoder_layers="num_hidden_layers",m.num_encoder_heads=m.num_decoder_heads="num_attention_heads",m.encoder_hidden_size=m.decoder_hidden_size="hidden_size";break;case"moonshine":m.num_decoder_layers="decoder_num_hidden_layers",m.num_decoder_heads="decoder_num_key_value_heads",m.num_encoder_layers="encoder_num_hidden_layers",m.num_encoder_heads="encoder_num_key_value_heads",m.encoder_hidden_size=m.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const b=l(h.decoder),D="num_decoder_layers"in b,T=(0,i.pick)(h,["model_type","is_encoder_decoder"]);return D?(T.num_decoder_layers=b.num_decoder_layers,T.num_decoder_heads=b.num_decoder_heads,T.decoder_hidden_size=b.decoder_hidden_size,T.num_encoder_layers=b.num_encoder_layers,T.num_encoder_heads=b.num_encoder_heads,T.encoder_hidden_size=b.encoder_hidden_size):(T.num_layers=b.num_layers,T.num_heads=b.num_heads,T.hidden_size=b.hidden_size),T}const v={..._,...(0,i.pick)(h,["model_type","multi_query","is_encoder_decoder"])};for(const b in m)v[b]=h[m[b]];return v}function c(h,m){if(h.model_type==="lfm2"){const _=m?.prefix??"past_key_values",v=_==="present"?"present":"past",b={},{layer_types:D,num_attention_heads:T,num_key_value_heads:E,hidden_size:A,conv_L_cache:$}=h,P=A/T,C=m?.batch_size??1;for(let S=0;S<D.length;++S)if(D[S]==="full_attention")for(const O of["key","value"])b[`${_}.${S}.${O}`]=[C,E,0,P];else if(D[S]==="conv")b[`${v}_conv.${S}`]=[C,A,$];else throw new Error(`Unsupported layer type: ${D[S]}`);return b}return d(h,m)}function d(h,{prefix:m="past_key_values",batch_size:_=1}={}){const v={},b=h.normalized_config;if(b.is_encoder_decoder&&"num_encoder_heads"in b&&"num_decoder_heads"in b){const D=b.encoder_dim_kv??b.encoder_hidden_size/b.num_encoder_heads,T=b.decoder_dim_kv??b.decoder_hidden_size/b.num_decoder_heads,E=[_,b.num_encoder_heads,0,D],A=[_,b.num_decoder_heads,0,T];for(let $=0;$<b.num_decoder_layers;++$)v[`${m}.${$}.encoder.key`]=E,v[`${m}.${$}.encoder.value`]=E,v[`${m}.${$}.decoder.key`]=A,v[`${m}.${$}.decoder.value`]=A}else{const D=b.num_heads,T=b.num_layers,E=b.dim_kv??b.hidden_size/(b.num_attention_heads??D);if(b.model_type==="falcon"){const A=[_*D,0,E];for(let $=0;$<T;++$)v[`${m}.${$}.key`]=A,v[`${m}.${$}.value`]=A}else if(b.multi_query){const A=[_*D,0,2*E];for(let $=0;$<T;++$)v[`${m}.${$}.key_value`]=A}else if(b.model_type==="bloom"){const A=[_*D,E,0],$=[_*D,0,E];for(let P=0;P<T;++P)v[`${m}.${P}.key`]=A,v[`${m}.${P}.value`]=$}else if(b.model_type==="openelm")for(let A=0;A<T;++A){const $=[_,D[A],0,E];v[`${m}.${A}.key`]=$,v[`${m}.${A}.value`]=$}else{const A=[_,D,0,E];for(let $=0;$<T;++$)v[`${m}.${$}.key`]=A,v[`${m}.${$}.value`]=A}}return v}class f{model_type=null;is_encoder_decoder=!1;max_position_embeddings;"transformers.js_config";constructor(m){Object.assign(this,m),this.normalized_config=l(this)}static async from_pretrained(m,{progress_callback:_=null,config:v=null,cache_dir:b=null,local_files_only:D=!1,revision:T="main"}={}){v&&!(v instanceof f)&&(v=new f(v));const E=v??await o(m,{progress_callback:_,config:v,cache_dir:b,local_files_only:D,revision:T});return new this(E)}}class p{static async from_pretrained(...m){return f.from_pretrained(...m)}}}),"./src/env.js":((e,t,n)=>{n.r(t),n.d(t,{apis:()=>T,env:()=>S});var i=n("?db59"),r=n("?383f"),o=n("?fa4b");const l="3.8.1",c=typeof window<"u"&&typeof window.document<"u",d=typeof self<"u"&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes(self.constructor?.name),f=typeof self<"u"&&"caches"in self,p=typeof navigator<"u"&&"gpu"in navigator,h=typeof navigator<"u"&&"ml"in navigator,m=typeof process<"u",_=m&&process?.release?.name==="node",v=!O(i),b=!O(r),D=typeof globalThis.Deno<"u",T=Object.freeze({IS_BROWSER_ENV:c,IS_WEBWORKER_ENV:d,IS_WEB_CACHE_AVAILABLE:f,IS_WEBGPU_AVAILABLE:p,IS_WEBNN_AVAILABLE:h,IS_PROCESS_AVAILABLE:m,IS_NODE_ENV:_,IS_FS_AVAILABLE:v,IS_PATH_AVAILABLE:b}),E=v&&b;let A="./";if(E){const N=Object(import.meta).url;N?A=r.dirname(r.dirname(o.fileURLToPath(N))):typeof __dirname<"u"&&(A=r.dirname(__dirname))}const $=E?r.join(A,"/.cache/"):null,P="/models/",C=E?r.join(A,P):P,S={version:l,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(c||d),localModelPath:C,useFS:v,useBrowserCache:f&&!D,useFSCache:v,cacheDir:$,useCustomCache:!1,customCache:null};function O(N){return Object.keys(N).length===0}}),"./src/generation/configuration_utils.js":((e,t,n)=>{n.r(t),n.d(t,{GenerationConfig:()=>r});var i=n("./src/utils/core.js");class r{max_length=20;max_new_tokens=null;min_length=0;min_new_tokens=null;early_stopping=!1;max_time=null;do_sample=!1;num_beams=1;num_beam_groups=1;penalty_alpha=null;use_cache=!0;temperature=1;top_k=50;top_p=1;typical_p=1;epsilon_cutoff=0;eta_cutoff=0;diversity_penalty=0;repetition_penalty=1;encoder_repetition_penalty=1;length_penalty=1;no_repeat_ngram_size=0;bad_words_ids=null;force_words_ids=null;renormalize_logits=!1;constraints=null;forced_bos_token_id=null;forced_eos_token_id=null;remove_invalid_values=!1;exponential_decay_length_penalty=null;suppress_tokens=null;streamer=null;begin_suppress_tokens=null;forced_decoder_ids=null;guidance_scale=null;num_return_sequences=1;output_attentions=!1;output_hidden_states=!1;output_scores=!1;return_dict_in_generate=!1;pad_token_id=null;bos_token_id=null;eos_token_id=null;encoder_no_repeat_ngram_size=0;decoder_start_token_id=null;generation_kwargs={};constructor(l){Object.assign(this,(0,i.pick)(l,Object.getOwnPropertyNames(this)))}}}),"./src/generation/logits_process.js":((e,t,n)=>{n.r(t),n.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>T,ForcedBOSTokenLogitsProcessor:()=>d,ForcedEOSTokenLogitsProcessor:()=>f,LogitsProcessor:()=>o,LogitsProcessorList:()=>c,LogitsWarper:()=>l,MinLengthLogitsProcessor:()=>v,MinNewTokensLengthLogitsProcessor:()=>b,NoBadWordsLogitsProcessor:()=>D,NoRepeatNGramLogitsProcessor:()=>m,RepetitionPenaltyLogitsProcessor:()=>_,SuppressTokensAtBeginLogitsProcessor:()=>p,TemperatureLogitsWarper:()=>E,TopKLogitsWarper:()=>$,TopPLogitsWarper:()=>A,WhisperTimeStampLogitsProcessor:()=>h});var i=n("./src/utils/generic.js");n("./src/utils/tensor.js");var r=n("./src/utils/maths.js");class o extends i.Callable{_call(C,S){throw Error("`_call` should be implemented in a subclass")}}class l extends i.Callable{_call(C,S){throw Error("`_call` should be implemented in a subclass")}}class c extends i.Callable{constructor(){super(),this.processors=[]}push(C){this.processors.push(C)}extend(C){this.processors.push(...C)}_call(C,S){let O=S;for(const N of this.processors)O=N(C,O);return O}[Symbol.iterator](){return this.processors.values()}}class d extends o{constructor(C){super(),this.bos_token_id=C}_call(C,S){for(let O=0;O<C.length;++O)if(C[O].length===1){const N=S[O].data;N.fill(-1/0),N[this.bos_token_id]=0}return S}}class f extends o{constructor(C,S){super(),this.max_length=C,this.eos_token_id=Array.isArray(S)?S:[S]}_call(C,S){for(let O=0;O<C.length;++O)if(C[O].length===this.max_length-1){const N=S[O].data;N.fill(-1/0);for(const j of this.eos_token_id)N[j]=0}return S}}class p extends o{constructor(C,S){super(),this.begin_suppress_tokens=C,this.begin_index=S}_call(C,S){for(let O=0;O<C.length;++O)if(C[O].length===this.begin_index){const N=S[O].data;for(const j of this.begin_suppress_tokens)N[j]=-1/0}return S}}class h extends o{constructor(C,S){super(),this.eos_token_id=Array.isArray(C.eos_token_id)?C.eos_token_id[0]:C.eos_token_id,this.no_timestamps_token_id=C.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=S.length,S.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=C.max_initial_timestamp_index}_call(C,S){for(let O=0;O<C.length;++O){const N=S[O].data;if(N[this.no_timestamps_token_id]=-1/0,C[O].length===this.begin_index-1){N.fill(-1/0),N[this.timestamp_begin]=0;continue}const j=C[O].slice(this.begin_index),X=j.length>=1&&j[j.length-1]>=this.timestamp_begin,Y=j.length<2||j[j.length-2]>=this.timestamp_begin;if(X&&(Y?N.subarray(this.timestamp_begin).fill(-1/0):N.subarray(0,this.eos_token_id).fill(-1/0)),C[O].length===this.begin_index&&this.max_initial_timestamp_index!==null){const W=this.timestamp_begin+this.max_initial_timestamp_index;N.subarray(W+1).fill(-1/0)}const K=(0,r.log_softmax)(N),se=Math.log(K.subarray(this.timestamp_begin).map(Math.exp).reduce((W,ne)=>W+ne)),oe=(0,r.max)(K.subarray(0,this.timestamp_begin))[0];se>oe&&N.subarray(0,this.timestamp_begin).fill(-1/0)}return S}}class m extends o{constructor(C){super(),this.no_repeat_ngram_size=C}getNgrams(C){const S=C.length,O=[];for(let j=0;j<S+1-this.no_repeat_ngram_size;++j){const X=[];for(let Y=0;Y<this.no_repeat_ngram_size;++Y)X.push(C[j+Y]);O.push(X.map(Number))}const N=new Map;for(const j of O){const X=j.slice(0,j.length-1),Y=JSON.stringify(X),K=N.get(Y)??[];K.push(j[j.length-1]),N.set(Y,K)}return N}getGeneratedNgrams(C,S){const O=S.slice(S.length+1-this.no_repeat_ngram_size,S.length);return C.get(JSON.stringify(O.map(Number)))??[]}calcBannedNgramTokens(C){const S=[];if(C.length+1<this.no_repeat_ngram_size)return S;{const O=this.getNgrams(C);return this.getGeneratedNgrams(O,C)}}_call(C,S){for(let O=0;O<C.length;++O){const N=S[O].data,j=this.calcBannedNgramTokens(C[O]);for(const X of j)N[X]=-1/0}return S}}class _ extends o{constructor(C){super(),this.penalty=C}_call(C,S){for(let O=0;O<C.length;++O){const N=S[O].data;for(const j of new Set(C[O])){const X=Number(j);N[X]<0?N[X]*=this.penalty:N[X]/=this.penalty}}return S}}class v extends o{constructor(C,S){super(),this.min_length=C,this.eos_token_id=Array.isArray(S)?S:[S]}_call(C,S){for(let O=0;O<C.length;++O)if(C[O].length<this.min_length){const N=S[O].data;for(const j of this.eos_token_id)N[j]=-1/0}return S}}class b extends o{constructor(C,S,O){super(),this.prompt_length_to_skip=C,this.min_new_tokens=S,this.eos_token_id=Array.isArray(O)?O:[O]}_call(C,S){for(let O=0;O<C.length;++O)if(C[O].length-this.prompt_length_to_skip<this.min_new_tokens){const j=S[O].data;for(const X of this.eos_token_id)j[X]=-1/0}return S}}class D extends o{constructor(C,S){super(),this.bad_words_ids=C,this.eos_token_id=Array.isArray(S)?S:[S]}_call(C,S){for(let O=0;O<C.length;++O){const N=S[O].data,j=C[O];for(const X of this.bad_words_ids){if(j.length<X.length-1)continue;let Y=!0;for(let K=1;K<=X.length-1;++K)if(X.at(-K-1)!=j.at(-K)){Y=!1;break}Y&&(N[X.at(-1)]=-1/0)}}return S}}class T extends o{constructor(C){if(super(),C<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${C}.`);this.guidance_scale=C}_call(C,S){if(S.dims[0]!==2*C.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${S.dims[0]} for the logits and ${C.length} for the input ids.`);const O=C.length,N=S.slice([0,O],null),j=S.slice([O,S.dims[0]],null);for(let X=0;X<j.data.length;++X)j.data[X]+=(N.data[X]-j.data[X])*this.guidance_scale;return j}}class E extends l{constructor(C){super(),this.temperature=C}_call(C,S){const O=S.data;for(let N=0;N<O.length;++N)O[N]/=this.temperature;return S}}class A extends l{constructor(C,{filter_value:S=-1/0,min_tokens_to_keep:O=1}={}){if(super(),C<0||C>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${C}`);if(!Number.isInteger(O)||O<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${O}`);this.top_p=C,this.filter_value=S,this.min_tokens_to_keep=O}}class $ extends l{constructor(C,{filter_value:S=-1/0,min_tokens_to_keep:O=1}={}){if(super(),!Number.isInteger(C)||C<0)throw new Error(`\`top_k\` must be a positive integer, but is ${C}`);this.top_k=Math.max(C,O),this.filter_value=S}}}),"./src/generation/logits_sampler.js":((e,t,n)=>{n.r(t),n.d(t,{LogitsSampler:()=>l});var i=n("./src/utils/generic.js"),r=n("./src/utils/tensor.js"),o=n("./src/utils/maths.js");n("./src/generation/configuration_utils.js");class l extends i.Callable{constructor(h){super(),this.generation_config=h}async _call(h){return this.sample(h)}async sample(h){throw Error("sample should be implemented in subclasses.")}getLogits(h,m){let _=h.dims.at(-1),v=h.data;if(m===-1)v=v.slice(-_);else{let b=m*_;v=v.slice(b,b+_)}return v}randomSelect(h){let m=0;for(let v=0;v<h.length;++v)m+=h[v];let _=Math.random()*m;for(let v=0;v<h.length;++v)if(_-=h[v],_<=0)return v;return 0}static getSampler(h){if(h.do_sample)return new d(h);if(h.num_beams>1)return new f(h);if(h.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${h.num_return_sequences}.`);return new c(h)}}class c extends l{async sample(h){const m=(0,o.max)(h.data)[1];return[[BigInt(m),0]]}}class d extends l{async sample(h){let m=h.dims.at(-1);this.generation_config.top_k>0&&(m=Math.min(this.generation_config.top_k,m));const[_,v]=await(0,r.topk)(h,m),b=(0,o.softmax)(_.data);return Array.from({length:this.generation_config.num_beams},()=>{const D=this.randomSelect(b);return[v.data[D],Math.log(b[D])]})}}class f extends l{async sample(h){let m=h.dims.at(-1);this.generation_config.top_k>0&&(m=Math.min(this.generation_config.top_k,m));const[_,v]=await(0,r.topk)(h,m),b=(0,o.softmax)(_.data);return Array.from({length:this.generation_config.num_beams},(D,T)=>[v.data[T],Math.log(b[T])])}}}),"./src/generation/stopping_criteria.js":((e,t,n)=>{n.r(t),n.d(t,{EosTokenCriteria:()=>c,InterruptableStoppingCriteria:()=>d,MaxLengthCriteria:()=>l,StoppingCriteria:()=>r,StoppingCriteriaList:()=>o});var i=n("./src/utils/generic.js");class r extends i.Callable{_call(p,h){throw Error("StoppingCriteria needs to be subclassed")}}class o extends i.Callable{constructor(){super(),this.criteria=[]}push(p){this.criteria.push(p)}extend(p){p instanceof o?p=p.criteria:p instanceof r&&(p=[p]),this.criteria.push(...p)}_call(p,h){const m=new Array(p.length).fill(!1);for(const _ of this.criteria){const v=_(p,h);for(let b=0;b<m.length;++b)m[b]||=v[b]}return m}[Symbol.iterator](){return this.criteria.values()}}class l extends r{constructor(p,h=null){super(),this.max_length=p,this.max_position_embeddings=h}_call(p){return p.map(h=>h.length>=this.max_length)}}class c extends r{constructor(p){super(),Array.isArray(p)||(p=[p]),this.eos_token_id=p}_call(p,h){return p.map(m=>{const _=m.at(-1);return this.eos_token_id.some(v=>_==v)})}}class d extends r{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(p,h){return new Array(p.length).fill(this.interrupted)}}}),"./src/generation/streamers.js":((e,t,n)=>{n.r(t),n.d(t,{BaseStreamer:()=>l,TextStreamer:()=>d,WhisperTextStreamer:()=>f});var i=n("./src/utils/core.js"),r=n("./src/tokenizers.js"),o=n("./src/env.js");class l{put(h){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const c=o.apis.IS_PROCESS_AVAILABLE?p=>process.stdout.write(p):p=>console.log(p);class d extends l{constructor(h,{skip_prompt:m=!1,callback_function:_=null,token_callback_function:v=null,skip_special_tokens:b=!0,decode_kwargs:D={},...T}={}){super(),this.tokenizer=h,this.skip_prompt=m,this.callback_function=_??c,this.token_callback_function=v,this.decode_kwargs={skip_special_tokens:b,...D,...T},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(h){if(h.length>1)throw Error("TextStreamer only supports batch size of 1");const m=this.next_tokens_are_prompt;if(m&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const _=h[0];this.token_callback_function?.(_),this.token_cache=(0,i.mergeArrays)(this.token_cache,_);const v=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let b;m||v.endsWith(`
`)?(b=v.slice(this.print_len),this.token_cache=[],this.print_len=0):v.length>0&&(0,r.is_chinese_char)(v.charCodeAt(v.length-1))?(b=v.slice(this.print_len),this.print_len+=b.length):(b=v.slice(this.print_len,v.lastIndexOf(" ")+1),this.print_len+=b.length),this.on_finalized_text(b,!1)}end(){let h;this.token_cache.length>0?(h=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):h="",this.next_tokens_are_prompt=!0,this.on_finalized_text(h,!0)}on_finalized_text(h,m){h.length>0&&this.callback_function?.(h),m&&this.callback_function===c&&o.apis.IS_PROCESS_AVAILABLE&&this.callback_function?.(`
`)}}class f extends d{constructor(h,{skip_prompt:m=!1,callback_function:_=null,token_callback_function:v=null,on_chunk_start:b=null,on_chunk_end:D=null,on_finalize:T=null,time_precision:E=.02,skip_special_tokens:A=!0,decode_kwargs:$={}}={}){super(h,{skip_prompt:m,skip_special_tokens:A,callback_function:_,token_callback_function:v,decode_kwargs:$}),this.timestamp_begin=h.timestamp_begin,this.on_chunk_start=b,this.on_chunk_end=D,this.on_finalize=T,this.time_precision=E,this.waiting_for_timestamp=!1}put(h){if(h.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const m=h[0];if(m.length===1){const _=Number(m[0])-this.timestamp_begin;if(_>=0){const v=_*this.time_precision;this.waiting_for_timestamp?this.on_chunk_end?.(v):this.on_chunk_start?.(v),this.waiting_for_timestamp=!this.waiting_for_timestamp,this.token_callback_function?.(m);return}}return super.put(h)}end(){super.end(),this.on_finalize?.()}}}),"./src/models.js":((e,t,n)=>{n.r(t),n.d(t,{ASTForAudioClassification:()=>Ys,ASTModel:()=>_u,ASTPreTrainedModel:()=>gu,AlbertForMaskedLM:()=>vt,AlbertForQuestionAnswering:()=>Mt,AlbertForSequenceClassification:()=>bt,AlbertModel:()=>xt,AlbertPreTrainedModel:()=>Ze,ArceeForCausalLM:()=>Tu,ArceeModel:()=>of,ArceePreTrainedModel:()=>hs,AutoModel:()=>h0,AutoModelForAudioClassification:()=>ig,AutoModelForAudioFrameClassification:()=>vv,AutoModelForAudioTextToText:()=>xn,AutoModelForCTC:()=>v0,AutoModelForCausalLM:()=>ng,AutoModelForDepthEstimation:()=>b0,AutoModelForDocumentQuestionAnswering:()=>y0,AutoModelForImageClassification:()=>uo,AutoModelForImageFeatureExtraction:()=>x0,AutoModelForImageMatting:()=>ag,AutoModelForImageSegmentation:()=>ud,AutoModelForImageTextToText:()=>yv,AutoModelForImageToImage:()=>og,AutoModelForMaskGeneration:()=>gv,AutoModelForMaskedLM:()=>wh,AutoModelForNormalEstimation:()=>w0,AutoModelForObjectDetection:()=>mv,AutoModelForPoseEstimation:()=>dd,AutoModelForQuestionAnswering:()=>rg,AutoModelForSemanticSegmentation:()=>_0,AutoModelForSeq2SeqLM:()=>p0,AutoModelForSequenceClassification:()=>fv,AutoModelForSpeechSeq2Seq:()=>g0,AutoModelForTextToSpectrogram:()=>bh,AutoModelForTextToWaveform:()=>Nc,AutoModelForTokenClassification:()=>m0,AutoModelForUniversalSegmentation:()=>hv,AutoModelForVision2Seq:()=>As,AutoModelForXVector:()=>_v,AutoModelForZeroShotObjectDetection:()=>pv,BartForConditionalGeneration:()=>Xn,BartForSequenceClassification:()=>sr,BartModel:()=>Jr,BartPretrainedModel:()=>Sr,BaseModelOutput:()=>Re,BeitForImageClassification:()=>Sm,BeitModel:()=>Nu,BeitPreTrainedModel:()=>xs,BertForMaskedLM:()=>Ke,BertForQuestionAnswering:()=>Ae,BertForSequenceClassification:()=>Ie,BertForTokenClassification:()=>nt,BertModel:()=>Ge,BertPreTrainedModel:()=>Ve,BlenderbotForConditionalGeneration:()=>Sn,BlenderbotModel:()=>nr,BlenderbotPreTrainedModel:()=>Er,BlenderbotSmallForConditionalGeneration:()=>aa,BlenderbotSmallModel:()=>ai,BlenderbotSmallPreTrainedModel:()=>Bn,BloomForCausalLM:()=>hc,BloomModel:()=>fc,BloomPreTrainedModel:()=>Ou,CLIPModel:()=>rc,CLIPPreTrainedModel:()=>ba,CLIPSegForImageSegmentation:()=>ui,CLIPSegModel:()=>Mu,CLIPSegPreTrainedModel:()=>al,CLIPTextModel:()=>ds,CLIPTextModelWithProjection:()=>Co,CLIPVisionModel:()=>af,CLIPVisionModelWithProjection:()=>tl,CamembertForMaskedLM:()=>xe,CamembertForQuestionAnswering:()=>Et,CamembertForSequenceClassification:()=>je,CamembertForTokenClassification:()=>mt,CamembertModel:()=>fe,CamembertPreTrainedModel:()=>le,CausalLMOutput:()=>Ia,CausalLMOutputWithPast:()=>M0,ChineseCLIPModel:()=>ac,ChineseCLIPPreTrainedModel:()=>xu,ClapAudioModelWithProjection:()=>sh,ClapModel:()=>so,ClapPreTrainedModel:()=>Yu,ClapTextModelWithProjection:()=>Ur,CodeGenForCausalLM:()=>ct,CodeGenModel:()=>qe,CodeGenPreTrainedModel:()=>be,CohereForCausalLM:()=>oi,CohereModel:()=>dm,CoherePreTrainedModel:()=>Cu,ConvBertForMaskedLM:()=>Bt,ConvBertForQuestionAnswering:()=>ia,ConvBertForSequenceClassification:()=>Wn,ConvBertForTokenClassification:()=>ga,ConvBertModel:()=>ra,ConvBertPreTrainedModel:()=>Yr,ConvNextForImageClassification:()=>Ff,ConvNextModel:()=>Vm,ConvNextPreTrainedModel:()=>Tc,ConvNextV2ForImageClassification:()=>Hm,ConvNextV2Model:()=>Wm,ConvNextV2PreTrainedModel:()=>Gm,DFineForObjectDetection:()=>Ml,DFineModel:()=>xc,DFinePreTrainedModel:()=>wc,DINOv3ConvNextModel:()=>Z_,DINOv3ConvNextPreTrainedModel:()=>Ym,DINOv3ViTModel:()=>Xm,DINOv3ViTPreTrainedModel:()=>jf,DPTForDepthEstimation:()=>Cm,DPTModel:()=>Pm,DPTPreTrainedModel:()=>Df,DacDecoderModel:()=>rd,DacDecoderOutput:()=>td,DacEncoderModel:()=>nd,DacEncoderOutput:()=>ph,DacModel:()=>Fp,DacPreTrainedModel:()=>hi,DebertaForMaskedLM:()=>yt,DebertaForQuestionAnswering:()=>fr,DebertaForSequenceClassification:()=>rn,DebertaForTokenClassification:()=>cn,DebertaModel:()=>Gt,DebertaPreTrainedModel:()=>_t,DebertaV2ForMaskedLM:()=>mr,DebertaV2ForQuestionAnswering:()=>er,DebertaV2ForSequenceClassification:()=>Ai,DebertaV2ForTokenClassification:()=>Or,DebertaV2Model:()=>Hn,DebertaV2PreTrainedModel:()=>hr,DecisionTransformerModel:()=>ed,DecisionTransformerPreTrainedModel:()=>Lp,DeiTForImageClassification:()=>K_,DeiTModel:()=>$m,DeiTPreTrainedModel:()=>Pf,DepthAnythingForDepthEstimation:()=>Am,DepthAnythingPreTrainedModel:()=>km,DepthProForDepthEstimation:()=>Dm,DepthProPreTrainedModel:()=>Om,DetrForObjectDetection:()=>zi,DetrForSegmentation:()=>Li,DetrModel:()=>Mf,DetrObjectDetectionOutput:()=>ro,DetrPreTrainedModel:()=>yc,DetrSegmentationOutput:()=>Tf,Dinov2ForImageClassification:()=>qm,Dinov2Model:()=>Km,Dinov2PreTrainedModel:()=>Nf,Dinov2WithRegistersForImageClassification:()=>Qm,Dinov2WithRegistersModel:()=>Zm,Dinov2WithRegistersPreTrainedModel:()=>Hu,DistilBertForMaskedLM:()=>Mi,DistilBertForQuestionAnswering:()=>Tr,DistilBertForSequenceClassification:()=>ri,DistilBertForTokenClassification:()=>or,DistilBertModel:()=>ni,DistilBertPreTrainedModel:()=>ti,DonutSwinModel:()=>Wu,DonutSwinPreTrainedModel:()=>Um,EdgeTamModel:()=>rp,EfficientNetForImageClassification:()=>iv,EfficientNetModel:()=>Ip,EfficientNetPreTrainedModel:()=>ch,ElectraForMaskedLM:()=>_a,ElectraForQuestionAnswering:()=>J,ElectraForSequenceClassification:()=>L,ElectraForTokenClassification:()=>de,ElectraModel:()=>Xt,ElectraPreTrainedModel:()=>ei,Ernie4_5ForCausalLM:()=>$a,Ernie4_5Model:()=>Ic,Ernie4_5PreTrainedModel:()=>rh,EsmForMaskedLM:()=>Ki,EsmForSequenceClassification:()=>qi,EsmForTokenClassification:()=>ii,EsmModel:()=>So,EsmPreTrainedModel:()=>Hi,ExaoneForCausalLM:()=>lm,ExaoneModel:()=>uf,ExaonePreTrainedModel:()=>Io,FalconForCausalLM:()=>Xu,FalconModel:()=>oh,FalconPreTrainedModel:()=>Qu,FastViTForImageClassification:()=>wm,FastViTModel:()=>Ru,FastViTPreTrainedModel:()=>bl,Florence2ForConditionalGeneration:()=>Jl,Florence2PreTrainedModel:()=>nf,GLPNForDepthEstimation:()=>Tl,GLPNModel:()=>Bm,GLPNPreTrainedModel:()=>jm,GPT2LMHeadModel:()=>oc,GPT2Model:()=>ol,GPT2PreTrainedModel:()=>Za,GPTBigCodeForCausalLM:()=>re,GPTBigCodeModel:()=>q,GPTBigCodePreTrainedModel:()=>B,GPTJForCausalLM:()=>z,GPTJModel:()=>w,GPTJPreTrainedModel:()=>oa,GPTNeoForCausalLM:()=>cl,GPTNeoModel:()=>wa,GPTNeoPreTrainedModel:()=>ll,GPTNeoXForCausalLM:()=>lc,GPTNeoXModel:()=>ul,GPTNeoXPreTrainedModel:()=>Qa,Gemma2ForCausalLM:()=>Do,Gemma2Model:()=>ff,Gemma2PreTrainedModel:()=>Di,Gemma3ForCausalLM:()=>uc,Gemma3Model:()=>mf,Gemma3PreTrainedModel:()=>zo,Gemma3nForConditionalGeneration:()=>Js,Gemma3nPreTrainedModel:()=>Po,GemmaForCausalLM:()=>Oo,GemmaModel:()=>Tn,GemmaPreTrainedModel:()=>rr,GlmForCausalLM:()=>Eu,GlmModel:()=>sm,GlmPreTrainedModel:()=>xa,GraniteForCausalLM:()=>Ta,GraniteModel:()=>Ma,GraniteMoeHybridForCausalLM:()=>df,GraniteMoeHybridModel:()=>um,GraniteMoeHybridPreTrainedModel:()=>Sa,GranitePreTrainedModel:()=>Xa,GroundingDinoForObjectDetection:()=>Jm,GroundingDinoPreTrainedModel:()=>Bf,GroupViTModel:()=>Lu,GroupViTPreTrainedModel:()=>gc,HeliumForCausalLM:()=>cf,HeliumModel:()=>Oi,HeliumPreTrainedModel:()=>om,HieraForImageClassification:()=>kf,HieraModel:()=>Cf,HieraPreTrainedModel:()=>Bu,HubertForCTC:()=>yp,HubertForSequenceClassification:()=>bp,HubertModel:()=>vp,HubertPreTrainedModel:()=>_p,IJepaForImageClassification:()=>vl,IJepaModel:()=>_m,IJepaPreTrainedModel:()=>mc,Idefics3ForConditionalGeneration:()=>ya,Idefics3PreTrainedModel:()=>wu,ImageMattingOutput:()=>lg,JAISLMHeadModel:()=>Ao,JAISModel:()=>sc,JAISPreTrainedModel:()=>sl,JinaCLIPModel:()=>rl,JinaCLIPPreTrainedModel:()=>fs,JinaCLIPTextModel:()=>Qi,JinaCLIPVisionModel:()=>il,Lfm2ForCausalLM:()=>ms,Lfm2Model:()=>sf,Lfm2PreTrainedModel:()=>cc,LiteWhisperForConditionalGeneration:()=>vu,Llama4ForCausalLM:()=>$n,Llama4PreTrainedModel:()=>yn,LlamaForCausalLM:()=>Yt,LlamaModel:()=>At,LlamaPreTrainedModel:()=>wt,LlavaForConditionalGeneration:()=>Yl,LlavaOnevisionForConditionalGeneration:()=>ef,LlavaPreTrainedModel:()=>bu,LlavaQwen2ForCausalLM:()=>ec,LongT5ForConditionalGeneration:()=>jn,LongT5Model:()=>In,LongT5PreTrainedModel:()=>Pr,M2M100ForConditionalGeneration:()=>qf,M2M100Model:()=>Kf,M2M100PreTrainedModel:()=>Hf,MBartForCausalLM:()=>Si,MBartForConditionalGeneration:()=>Ii,MBartForSequenceClassification:()=>Dr,MBartModel:()=>Ti,MBartPreTrainedModel:()=>lr,MPNetForMaskedLM:()=>Nr,MPNetForQuestionAnswering:()=>Me,MPNetForSequenceClassification:()=>va,MPNetForTokenClassification:()=>Zs,MPNetModel:()=>Eo,MPNetPreTrainedModel:()=>An,MT5ForConditionalGeneration:()=>Zi,MT5Model:()=>vi,MT5PreTrainedModel:()=>Ln,MarianMTModel:()=>Wf,MarianModel:()=>ap,MarianPreTrainedModel:()=>El,MaskFormerForInstanceSegmentation:()=>Nm,MaskFormerModel:()=>Fm,MaskFormerPreTrainedModel:()=>Rf,MaskedLMOutput:()=>Gr,Metric3DForDepthEstimation:()=>Lf,Metric3DPreTrainedModel:()=>zm,Metric3Dv2ForDepthEstimation:()=>Rm,Metric3Dv2PreTrainedModel:()=>Lm,MgpstrForSceneTextRecognition:()=>Yn,MgpstrModelOutput:()=>ov,MgpstrPreTrainedModel:()=>On,MimiDecoderModel:()=>Rc,MimiDecoderOutput:()=>mh,MimiEncoderModel:()=>Al,MimiEncoderOutput:()=>Ps,MimiModel:()=>Ni,MimiPreTrainedModel:()=>ka,Ministral3ForCausalLM:()=>$p,Ministral3Model:()=>No,Ministral3PreTrainedModel:()=>Pl,MinistralForCausalLM:()=>Ep,MinistralModel:()=>nv,MinistralPreTrainedModel:()=>Sp,Mistral3ForConditionalGeneration:()=>us,MistralForCausalLM:()=>cr,MistralModel:()=>Ac,MistralPreTrainedModel:()=>kc,MobileBertForMaskedLM:()=>lt,MobileBertForQuestionAnswering:()=>Ct,MobileBertForSequenceClassification:()=>dt,MobileBertModel:()=>ci,MobileBertPreTrainedModel:()=>$r,MobileLLMForCausalLM:()=>Xi,MobileLLMModel:()=>cm,MobileLLMPreTrainedModel:()=>$u,MobileNetV1ForImageClassification:()=>co,MobileNetV1ForSemanticSegmentation:()=>$s,MobileNetV1Model:()=>Op,MobileNetV1PreTrainedModel:()=>fi,MobileNetV2ForImageClassification:()=>fh,MobileNetV2ForSemanticSegmentation:()=>ca,MobileNetV2Model:()=>dh,MobileNetV2PreTrainedModel:()=>la,MobileNetV3ForImageClassification:()=>Dc,MobileNetV3ForSemanticSegmentation:()=>zc,MobileNetV3Model:()=>Cl,MobileNetV3PreTrainedModel:()=>Ju,MobileNetV4ForImageClassification:()=>zp,MobileNetV4ForSemanticSegmentation:()=>Lc,MobileNetV4Model:()=>Dp,MobileNetV4PreTrainedModel:()=>jo,MobileViTForImageClassification:()=>wf,MobileViTModel:()=>bf,MobileViTPreTrainedModel:()=>to,MobileViTV2ForImageClassification:()=>_c,MobileViTV2Model:()=>Lo,MobileViTV2PreTrainedModel:()=>no,ModelOutput:()=>Se,ModernBertDecoderForCausalLM:()=>kn,ModernBertDecoderModel:()=>Qt,ModernBertDecoderPreTrainedModel:()=>Cn,ModernBertForMaskedLM:()=>et,ModernBertForSequenceClassification:()=>kt,ModernBertForTokenClassification:()=>jt,ModernBertModel:()=>ut,ModernBertPreTrainedModel:()=>Tt,Moondream1ForConditionalGeneration:()=>tf,MoonshineForConditionalGeneration:()=>Ql,MoonshineModel:()=>am,MoonshinePreTrainedModel:()=>yu,MptForCausalLM:()=>_l,MptModel:()=>gl,MptPreTrainedModel:()=>Du,MultiModalityCausalLM:()=>av,MultiModalityPreTrainedModel:()=>Rp,MusicgenForCausalLM:()=>Pa,MusicgenForConditionalGeneration:()=>uh,MusicgenModel:()=>Fi,MusicgenPreTrainedModel:()=>Oc,NanoChatForCausalLM:()=>Ei,NanoChatModel:()=>sa,NanoChatPreTrainedModel:()=>Rn,NeoBertForMaskedLM:()=>Fe,NeoBertForQuestionAnswering:()=>St,NeoBertForSequenceClassification:()=>ot,NeoBertForTokenClassification:()=>rt,NeoBertModel:()=>ft,NeoBertPreTrainedModel:()=>We,NomicBertModel:()=>an,NomicBertPreTrainedModel:()=>Mr,OPTForCausalLM:()=>H_,OPTModel:()=>gm,OPTPreTrainedModel:()=>pm,Olmo2ForCausalLM:()=>Ji,Olmo2Model:()=>Yi,Olmo2PreTrainedModel:()=>hl,OlmoForCausalLM:()=>Pu,OlmoModel:()=>fl,OlmoPreTrainedModel:()=>ps,OpenELMForCausalLM:()=>Ya,OpenELMModel:()=>gs,OpenELMPreTrainedModel:()=>ku,OwlViTForObjectDetection:()=>vc,OwlViTModel:()=>xf,OwlViTPreTrainedModel:()=>Fu,Owlv2ForObjectDetection:()=>Tm,Owlv2Model:()=>Mm,Owlv2PreTrainedModel:()=>wl,PaliGemmaForConditionalGeneration:()=>rf,PaliGemmaPreTrainedModel:()=>cs,ParakeetForCTC:()=>Ku,ParakeetPreTrainedModel:()=>cp,PatchTSMixerForPrediction:()=>kl,PatchTSMixerModel:()=>Bo,PatchTSMixerPreTrainedModel:()=>$i,PatchTSTForPrediction:()=>Un,PatchTSTModel:()=>wn,PatchTSTPreTrainedModel:()=>gn,Phi3ForCausalLM:()=>jr,Phi3Model:()=>W_,Phi3PreTrainedModel:()=>mm,Phi3VForCausalLM:()=>nc,Phi3VPreTrainedModel:()=>tc,PhiForCausalLM:()=>G_,PhiModel:()=>hm,PhiPreTrainedModel:()=>dc,PreTrainedModel:()=>Z,PretrainedMixin:()=>mn,PvtForImageClassification:()=>ym,PvtModel:()=>vm,PvtPreTrainedModel:()=>pc,PyAnnoteForAudioFrameClassification:()=>up,PyAnnoteModel:()=>Qf,PyAnnotePreTrainedModel:()=>Zf,QuestionAnsweringModelOutput:()=>Wr,Qwen2ForCausalLM:()=>pf,Qwen2Model:()=>eo,Qwen2PreTrainedModel:()=>Ja,Qwen2VLForConditionalGeneration:()=>si,Qwen2VLPreTrainedModel:()=>_s,Qwen3ForCausalLM:()=>Iu,Qwen3Model:()=>pl,Qwen3PreTrainedModel:()=>Au,RFDetrForObjectDetection:()=>xl,RFDetrModel:()=>ju,RFDetrObjectDetectionOutput:()=>Ms,RFDetrPreTrainedModel:()=>zr,RTDetrForObjectDetection:()=>Ri,RTDetrModel:()=>Ro,RTDetrObjectDetectionOutput:()=>pr,RTDetrPreTrainedModel:()=>Sf,RTDetrV2ForObjectDetection:()=>un,RTDetrV2Model:()=>io,RTDetrV2ObjectDetectionOutput:()=>Kn,RTDetrV2PreTrainedModel:()=>bc,ResNetForImageClassification:()=>Uu,ResNetModel:()=>Lr,ResNetPreTrainedModel:()=>di,RoFormerForMaskedLM:()=>as,RoFormerForQuestionAnswering:()=>Ir,RoFormerForSequenceClassification:()=>pa,RoFormerForTokenClassification:()=>Jn,RoFormerModel:()=>is,RoFormerPreTrainedModel:()=>_i,RobertaForMaskedLM:()=>Hl,RobertaForQuestionAnswering:()=>hu,RobertaForSequenceClassification:()=>os,RobertaForTokenClassification:()=>Xs,RobertaModel:()=>Qs,RobertaPreTrainedModel:()=>qa,Sam2ImageSegmentationOutput:()=>Sc,Sam2Model:()=>Sl,Sam2PreTrainedModel:()=>Gf,Sam3TrackerModel:()=>ip,SamImageSegmentationOutput:()=>np,SamModel:()=>X_,SamPreTrainedModel:()=>Q_,SapiensForDepthEstimation:()=>Im,SapiensForNormalEstimation:()=>q_,SapiensForSemanticSegmentation:()=>zf,SapiensPreTrainedModel:()=>Gu,SegformerForImageClassification:()=>kp,SegformerForSemanticSegmentation:()=>gr,SegformerModel:()=>rv,SegformerPreTrainedModel:()=>lh,Seq2SeqLMOutput:()=>sg,SequenceClassifierOutput:()=>qt,SiglipModel:()=>ic,SiglipPreTrainedModel:()=>nl,SiglipTextModel:()=>ko,SiglipVisionModel:()=>Ot,SmolLM3ForCausalLM:()=>dl,SmolLM3Model:()=>Su,SmolLM3PreTrainedModel:()=>lf,SmolVLMForConditionalGeneration:()=>el,SnacDecoderModel:()=>Il,SnacEncoderModel:()=>Uo,SnacModel:()=>Xr,SnacPreTrainedModel:()=>Aa,SpeechT5ForSpeechToText:()=>oo,SpeechT5ForTextToSpeech:()=>th,SpeechT5HifiGan:()=>tv,SpeechT5Model:()=>ev,SpeechT5PreTrainedModel:()=>Cc,SqueezeBertForMaskedLM:()=>he,SqueezeBertForQuestionAnswering:()=>ze,SqueezeBertForSequenceClassification:()=>me,SqueezeBertModel:()=>ie,SqueezeBertPreTrainedModel:()=>R,StableLmForCausalLM:()=>Ap,StableLmModel:()=>lo,StableLmPreTrainedModel:()=>yi,Starcoder2ForCausalLM:()=>Pp,Starcoder2Model:()=>ah,Starcoder2PreTrainedModel:()=>ih,StyleTextToSpeech2Model:()=>xp,StyleTextToSpeech2PreTrainedModel:()=>eh,SupertonicForConditionalGeneration:()=>Ea,SupertonicPreTrainedModel:()=>Mp,Swin2SRForImageSuperResolution:()=>Of,Swin2SRModel:()=>If,Swin2SRPreTrainedModel:()=>Mc,SwinForImageClassification:()=>Af,SwinForSemanticSegmentation:()=>ao,SwinModel:()=>Vu,SwinPreTrainedModel:()=>Ts,T5ForConditionalGeneration:()=>tr,T5Model:()=>Vt,T5PreTrainedModel:()=>en,TableTransformerForObjectDetection:()=>Ef,TableTransformerModel:()=>Cr,TableTransformerObjectDetectionOutput:()=>$f,TableTransformerPreTrainedModel:()=>Em,TokenClassifierOutput:()=>Vr,TrOCRForCausalLM:()=>Tp,TrOCRPreTrainedModel:()=>nh,UltravoxModel:()=>Ca,UltravoxPreTrainedModel:()=>hh,UniSpeechForCTC:()=>li,UniSpeechForSequenceClassification:()=>fp,UniSpeechModel:()=>Br,UniSpeechPreTrainedModel:()=>Ec,UniSpeechSatForAudioFrameClassification:()=>pp,UniSpeechSatForCTC:()=>mp,UniSpeechSatForSequenceClassification:()=>Pc,UniSpeechSatModel:()=>hp,UniSpeechSatPreTrainedModel:()=>$c,VaultGemmaForCausalLM:()=>ml,VaultGemmaModel:()=>fm,VaultGemmaPreTrainedModel:()=>hf,ViTForImageClassification:()=>_f,ViTMAEModel:()=>bs,ViTMAEPreTrainedModel:()=>ys,ViTMSNForImageClassification:()=>yl,ViTMSNModel:()=>bm,ViTMSNPreTrainedModel:()=>yf,ViTModel:()=>vs,ViTPreTrainedModel:()=>gf,VisionEncoderDecoderModel:()=>Xl,VitMatteForImageMatting:()=>xm,VitMattePreTrainedModel:()=>ws,VitPoseForPoseEstimation:()=>zu,VitPosePreTrainedModel:()=>vf,VitsModel:()=>Qr,VitsModelOutput:()=>bv,VitsPreTrainedModel:()=>Cp,VoxtralForConditionalGeneration:()=>kr,Wav2Vec2BertForCTC:()=>J_,Wav2Vec2BertForSequenceClassification:()=>qu,Wav2Vec2BertModel:()=>gp,Wav2Vec2BertPreTrainedModel:()=>$l,Wav2Vec2ForAudioFrameClassification:()=>lp,Wav2Vec2ForCTC:()=>Ss,Wav2Vec2ForSequenceClassification:()=>sp,Wav2Vec2Model:()=>op,Wav2Vec2PreTrainedModel:()=>Fo,WavLMForAudioFrameClassification:()=>Zu,WavLMForCTC:()=>Yf,WavLMForSequenceClassification:()=>wp,WavLMForXVector:()=>Jf,WavLMModel:()=>Xf,WavLMPreTrainedModel:()=>Es,WeSpeakerResNetModel:()=>Y_,WeSpeakerResNetPreTrainedModel:()=>dp,WhisperForConditionalGeneration:()=>Zl,WhisperModel:()=>Jd,WhisperPreTrainedModel:()=>$o,XLMForQuestionAnswering:()=>Qd,XLMForSequenceClassification:()=>Kl,XLMForTokenClassification:()=>Zd,XLMModel:()=>Kd,XLMPreTrainedModel:()=>ss,XLMRobertaForMaskedLM:()=>mu,XLMRobertaForQuestionAnswering:()=>Yd,XLMRobertaForSequenceClassification:()=>ql,XLMRobertaForTokenClassification:()=>pu,XLMRobertaModel:()=>Xd,XLMRobertaPreTrainedModel:()=>ls,XLMWithLMHeadModel:()=>qd,XVectorOutput:()=>xh,YolosForObjectDetection:()=>ep,YolosModel:()=>Vf,YolosObjectDetectionOutput:()=>tp,YolosPreTrainedModel:()=>Uf});var i=n("./src/configs.js"),r=n("./src/backends/onnx.js"),o=n("./src/utils/dtypes.js"),l=n("./src/utils/generic.js"),c=n("./src/utils/core.js"),d=n("./src/utils/hub.js"),f=n("./src/utils/constants.js"),p=n("./src/generation/logits_process.js"),h=n("./src/generation/configuration_utils.js"),m=n("./src/utils/tensor.js"),_=n("./src/utils/image.js"),v=n("./src/utils/maths.js"),b=n("./src/generation/stopping_criteria.js"),D=n("./src/generation/logits_sampler.js"),T=n("./src/env.js"),E=n("./src/models/whisper/generation_whisper.js"),A=n("./src/models/whisper/common_whisper.js");const $={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12,Supertonic:13},P=new Map,C=new Map,S=new Map;async function O(k,I,te){let pe=te.config?.["transformers.js_config"]??{},Ce=te.device??pe.device;Ce&&typeof Ce!="string"&&(Ce.hasOwnProperty(I)?Ce=Ce[I]:(console.warn(`device not specified for "${I}". Using the default device.`),Ce=null));const $e=Ce??(T.apis.IS_NODE_ENV?"cpu":"wasm"),Qe=(0,r.deviceToExecutionProviders)($e),st=pe.device_config??{};st.hasOwnProperty($e)&&(pe={...pe,...st[$e]});let pt=te.dtype??pe.dtype;if(typeof pt!="string"&&(pt&&pt.hasOwnProperty(I)?pt=pt[I]:(pt=o.DEFAULT_DEVICE_DTYPE_MAPPING[$e]??o.DATA_TYPES.fp32,console.warn(`dtype not specified for "${I}". Using the default dtype (${pt}) for this device (${$e}).`))),pt===o.DATA_TYPES.auto){let dn=pe.dtype;typeof dn!="string"&&(dn=dn?.[I]),dn&&dn!==o.DATA_TYPES.auto&&o.DATA_TYPES.hasOwnProperty(dn)?pt=dn:pt=o.DEFAULT_DEVICE_DTYPE_MAPPING[$e]??o.DATA_TYPES.fp32}const $t=pt;if(o.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty($t)){if($t===o.DATA_TYPES.fp16&&$e==="webgpu"&&!await(0,o.isWebGpuFp16Supported)())throw new Error(`The device (${$e}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${$t}. Should be one of: ${Object.keys(o.DATA_TYPES).join(", ")}`);const Kt=pe.kv_cache_dtype,Wt=Kt?typeof Kt=="string"?Kt:Kt[$t]??"float32":void 0;if(Wt&&!["float32","float16"].includes(Wt))throw new Error(`Invalid kv_cache_dtype: ${Wt}. Should be one of: float32, float16`);const tn={dtype:$t,kv_cache_dtype:Wt,device:$e},Lt=o.DEFAULT_DTYPE_SUFFIX_MAPPING[$t],Mn=`${I}${Lt}.onnx`,Rt=`${te.subfolder??""}/${Mn}`,Ft={...te.session_options};Ft.executionProviders??=Qe;const _n=pe.free_dimension_overrides;_n?Ft.freeDimensionOverrides??=_n:$e.startsWith("webnn")&&!Ft.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${$e}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const Dn=T.apis.IS_NODE_ENV&&T.env.useFSCache,ir=(0,d.getModelFile)(k,Rt,!0,te,Dn),_r=te.use_external_data_format??pe.use_external_data_format;let Ar=[];if(_r){let dn;typeof _r=="object"?_r.hasOwnProperty(Mn)?dn=_r[Mn]:_r.hasOwnProperty(I)?dn=_r[I]:dn=!1:dn=_r;const vr=+dn;if(vr>d.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${vr}) exceeds the maximum allowed value (${d.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let Hr=0;Hr<vr;++Hr){const Dl=`${Mn}_data${Hr===0?"":"_"+Hr}`,Ci=`${te.subfolder??""}/${Dl}`;Ar.push(new Promise(async(ua,Is)=>{const Os=await(0,d.getModelFile)(k,Ci,!0,te,Dn);ua(Os instanceof Uint8Array?{path:Dl,data:Os}:Dl)}))}}else Ft.externalData!==void 0&&(Ar=Ft.externalData.map(async dn=>{if(typeof dn.data=="string"){const vr=await(0,d.getModelFile)(k,dn.data,!0,te);return{...dn,data:vr}}return dn}));if(Ar.length>0){const dn=await Promise.all(Ar);T.apis.IS_NODE_ENV||(Ft.externalData=dn)}if($e==="webgpu"){const dn=(0,i.getCacheShapes)(te.config,{prefix:"present"});if(Object.keys(dn).length>0&&!(0,r.isONNXProxy)()){const vr={};for(const Hr in dn)vr[Hr]="gpu-buffer";Ft.preferredOutputLocation=vr}}return{buffer_or_path:await ir,session_options:Ft,session_config:tn}}async function N(k,I,te){return Object.fromEntries(await Promise.all(Object.keys(I).map(async pe=>{const{buffer_or_path:Ce,session_options:$e,session_config:Qe}=await O(k,I[pe],te),st=await(0,r.createInferenceSession)(Ce,$e,Qe);return[pe,st]})))}async function j(k,I,te){return Object.fromEntries(await Promise.all(Object.keys(I).map(async pe=>{const Ce=await(0,d.getModelJSON)(k,I[pe],!1,te);return[pe,Ce]})))}function X(k,I){const te=Object.create(null),pe=[];for(const Qe of k.inputNames){const st=I[Qe];if(!(st instanceof m.Tensor)){pe.push(Qe);continue}te[Qe]=(0,r.isONNXProxy)()?st.clone():st}if(pe.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${pe.join(", ")}.`);const Ce=Object.keys(I).length,$e=k.inputNames.length;if(Ce>$e){let Qe=Object.keys(I).filter(st=>!k.inputNames.includes(st));console.warn(`WARNING: Too many inputs were provided (${Ce} > ${$e}). The following inputs will be ignored: "${Qe.join(", ")}".`)}return te}async function Y(k,I){const te=X(k,I);try{const pe=Object.fromEntries(Object.entries(te).map(([$e,Qe])=>[$e,Qe.ort_tensor])),Ce=await(0,r.runInferenceSession)(k,pe);return K(Ce)}catch(pe){const Ce=Object.fromEntries(Object.entries(te).map(([$e,Qe])=>{const st={type:Qe.type,dims:Qe.dims,location:Qe.location};return st.location!=="gpu-buffer"&&(st.data=Qe.data),[$e,st]}));throw console.error(`An error occurred during model execution: "${pe}".`),console.error("Inputs given to model:",Ce),pe}}function K(k){for(let I in k)(0,r.isONNXTensor)(k[I])?k[I]=new m.Tensor(k[I]):typeof k[I]=="object"&&K(k[I]);return k}function se(k){if(k instanceof m.Tensor)return k;if(k.length===0)throw Error("items must be non-empty");if(Array.isArray(k[0])){if(k.some(I=>I.length!==k[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new m.Tensor("int64",BigInt64Array.from(k.flat().map(I=>BigInt(I))),[k.length,k[0].length])}else return new m.Tensor("int64",BigInt64Array.from(k.map(I=>BigInt(I))),[1,k.length])}function oe(k){return new m.Tensor("bool",[k],[1])}async function W(k,I){let{encoder_outputs:te,input_ids:pe,decoder_input_ids:Ce,...$e}=I;if(!te){const st=(0,c.pick)(I,k.sessions.model.inputNames);te=(await ne(k,st)).last_hidden_state}return $e.input_ids=Ce,$e.encoder_hidden_states=te,k.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&($e.encoder_attention_mask=I.attention_mask),await ge(k,$e,!0)}async function ne(k,I){const te=k.sessions.model,pe=(0,c.pick)(I,te.inputNames);if(te.inputNames.includes("inputs_embeds")&&!pe.inputs_embeds){if(!I.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");pe.inputs_embeds=await k.encode_text({input_ids:I.input_ids})}if(te.inputNames.includes("token_type_ids")&&!pe.token_type_ids){if(!pe.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");pe.token_type_ids=(0,m.zeros_like)(pe.input_ids)}if(te.inputNames.includes("pixel_mask")&&!pe.pixel_mask){if(!pe.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const Ce=pe.pixel_values.dims;pe.pixel_mask=(0,m.ones)([Ce[0],Ce[2],Ce[3]])}return await Y(te,pe)}async function ae(k,I){const te=await k.encode(I);return await k.decode(te)}async function ge(k,I,te=!1){const pe=k.sessions[te?"decoder_model_merged":"model"],{past_key_values:Ce,...$e}=I;if(pe.inputNames.includes("use_cache_branch")&&($e.use_cache_branch=oe(!!Ce)),pe.inputNames.includes("position_ids")&&$e.attention_mask&&!$e.position_ids){const st=["paligemma","gemma3_text","gemma3"].includes(k.config.model_type)?1:0;$e.position_ids=ke($e,Ce,st)}k.addPastKeyValues($e,Ce);const Qe=(0,c.pick)($e,pe.inputNames);return await Y(pe,Qe)}function ye({modality_token_id:k,inputs_embeds:I,modality_features:te,input_ids:pe,attention_mask:Ce}){const $e=pe.tolist().map($t=>$t.reduce((Kt,Wt,tn)=>(Wt==k&&Kt.push(tn),Kt),[])),Qe=$e.reduce(($t,Kt)=>$t+Kt.length,0),st=te.dims[0];if(Qe!==st)throw new Error(`Number of tokens and features do not match: tokens: ${Qe}, features ${st}`);let pt=0;for(let $t=0;$t<$e.length;++$t){const Kt=$e[$t],Wt=I[$t];for(let tn=0;tn<Kt.length;++tn)Wt[Kt[tn]].data.set(te[pt++].data)}return{inputs_embeds:I,attention_mask:Ce}}function G({image_token_id:k,inputs_embeds:I,image_features:te,input_ids:pe,attention_mask:Ce}){return ye({modality_token_id:k,inputs_embeds:I,modality_features:te,input_ids:pe,attention_mask:Ce})}function H({audio_token_id:k,inputs_embeds:I,audio_features:te,input_ids:pe,attention_mask:Ce}){return ye({modality_token_id:k,inputs_embeds:I,modality_features:te,input_ids:pe,attention_mask:Ce})}async function V(k,{encode_function:I,merge_function:te,modality_input_name:pe,modality_output_name:Ce,input_ids:$e=null,attention_mask:Qe=null,position_ids:st=null,inputs_embeds:pt=null,past_key_values:$t=null,generation_config:Kt=null,logits_processor:Wt=null,...tn}){const Lt=tn[pe];if(!pt){if(pt=await k.encode_text({input_ids:$e,...tn}),Lt&&$e.dims[1]!==1){const Rt=await I({[pe]:Lt,...tn});({inputs_embeds:pt,attention_mask:Qe}=te({[Ce]:Rt,inputs_embeds:pt,input_ids:$e,attention_mask:Qe}))}else if($t&&Lt&&$e.dims[1]===1){const Rt=$e.dims[1],Ft=Object.values($t)[0].dims.at(-2);Qe=(0,m.cat)([(0,m.ones)([$e.dims[0],Ft]),Qe.slice(null,[Qe.dims[1]-Rt,Qe.dims[1]])],1)}}if(!st&&k.config.model_type==="qwen2_vl"){const{image_grid_thw:Rt,video_grid_thw:Ft}=tn;[st]=k.get_rope_index($e,Rt,Ft,Qe)}return await ge(k,{inputs_embeds:pt,past_key_values:$t,attention_mask:Qe,position_ids:st,generation_config:Kt,logits_processor:Wt},!0)}async function U(k,I){return await V(k,{...I,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:k.encode_audio.bind(k),merge_function:k._merge_input_ids_with_audio_features.bind(k)})}async function ce(k,I){return await V(k,{...I,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:k.encode_image.bind(k),merge_function:k._merge_input_ids_with_image_features.bind(k)})}function ve(k,I=0){const[te,pe]=k.dims,Ce=k.data,$e=new BigInt64Array(Ce.length);for(let Qe=0;Qe<te;++Qe){const st=Qe*pe;let pt=BigInt(I);for(let $t=0;$t<pe;++$t){const Kt=st+$t;Ce[Kt]===0n?$e[Kt]=BigInt(1):($e[Kt]=pt,pt+=Ce[Kt])}}return{data:$e,dims:k.dims}}function ke(k,I=null,te=0){const{input_ids:pe,inputs_embeds:Ce,attention_mask:$e}=k,{data:Qe,dims:st}=ve($e,te);let pt=new m.Tensor("int64",Qe,st);if(I){const $t=-(pe??Ce).dims.at(1);pt=pt.slice(null,[$t,null])}return pt}function Le(k,I,te,pe){const Ce=te.past_key_values?Object.values(te.past_key_values)[0].dims.at(-2):0;if(!te.attention_mask){let $e;for(const Qe of["input_ids","inputs_embeds","position_ids"])if(te[Qe]){$e=te[Qe].dims;break}if(!$e)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");te.attention_mask=(0,m.ones)([$e[0],Ce+$e[1]])}if(te.past_key_values){const{input_ids:$e,attention_mask:Qe}=te;Qe&&Qe.dims[1]>$e.dims[1]||Ce<$e.dims[1]&&(te.input_ids=$e.slice(null,[Ce,null]))}return te}function Xe(k,I,te,pe){return te.past_key_values&&(I=I.map(Ce=>[Ce.at(-1)])),{...te,decoder_input_ids:se(I)}}function Be(k,...I){return k.config.is_encoder_decoder?Xe(k,...I):Le(k,...I)}function ue(k,I,te,pe){const Ce=!!te.past_key_values;return pe.guidance_scale!==null&&pe.guidance_scale>1&&(Ce?te.input_ids=(0,m.cat)([te.input_ids,te.input_ids],0):(te.input_ids=(0,m.cat)([te.input_ids,(0,m.full_like)(te.input_ids,BigInt(pe.pad_token_id))],0),te.attention_mask=(0,m.cat)([te.attention_mask,(0,m.full_like)(te.attention_mask,0n)],0))),(Ce||!te.pixel_values)&&(te.pixel_values=(0,m.full)([0,0,3,384,384],1)),Ce&&(te.images_seq_mask=new m.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),te.images_emb_mask=new m.Tensor("bool",new Array(0).fill(!1),[1,1,0])),te}class Z extends l.Callable{main_input_name="input_ids";forward_params=["input_ids","attention_mask"];constructor(I,te,pe){super(),this.config=I,this.sessions=te,this.configs=pe;const Ce=S.get(this.constructor),$e=P.get(Ce);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,$e){case $.DecoderOnly:this.can_generate=!0,this._forward=ge,this._prepare_inputs_for_generation=Le;break;case $.Seq2Seq:case $.Vision2Seq:case $.Musicgen:this.can_generate=!0,this._forward=W,this._prepare_inputs_for_generation=Xe;break;case $.EncoderDecoder:this._forward=W;break;case $.ImageTextToText:this.can_generate=!0,this._forward=ce,this._prepare_inputs_for_generation=Be;break;case $.AudioTextToText:this.can_generate=!0,this._forward=U,this._prepare_inputs_for_generation=Be;break;case $.Phi3V:case $.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=Be;break;case $.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=ue;break;case $.AutoEncoder:this._forward=ae;break;default:this._forward=ne;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){const I=[];for(const te of Object.values(this.sessions))te?.handler?.dispose&&I.push(te.handler.dispose());return await Promise.all(I)}static async from_pretrained(I,{progress_callback:te=null,config:pe=null,cache_dir:Ce=null,local_files_only:$e=!1,revision:Qe="main",model_file_name:st=null,subfolder:pt="onnx",device:$t=null,dtype:Kt=null,use_external_data_format:Wt=null,session_options:tn={}}={}){let Lt={progress_callback:te,config:pe,cache_dir:Ce,local_files_only:$e,revision:Qe,model_file_name:st,subfolder:pt,device:$t,dtype:Kt,use_external_data_format:Wt,session_options:tn};const Mn=S.get(this),Rt=P.get(Mn);pe=Lt.config=await i.AutoConfig.from_pretrained(I,Lt);let Ft;if(Rt===$.DecoderOnly)Ft=await Promise.all([N(I,{model:Lt.model_file_name??"model"},Lt),j(I,{generation_config:"generation_config.json"},Lt)]);else if(Rt===$.Seq2Seq||Rt===$.Vision2Seq)Ft=await Promise.all([N(I,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},Lt),j(I,{generation_config:"generation_config.json"},Lt)]);else if(Rt===$.MaskGeneration)Ft=await Promise.all([N(I,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},Lt)]);else if(Rt===$.EncoderDecoder)Ft=await Promise.all([N(I,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},Lt)]);else if(Rt===$.ImageTextToText){const _n={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};pe.is_encoder_decoder&&(_n.model="encoder_model"),Ft=await Promise.all([N(I,_n,Lt),j(I,{generation_config:"generation_config.json"},Lt)])}else if(Rt===$.AudioTextToText){const _n={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};Ft=await Promise.all([N(I,_n,Lt),j(I,{generation_config:"generation_config.json"},Lt)])}else if(Rt===$.ImageAudioTextToText){const _n={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Ft=await Promise.all([N(I,_n,Lt),j(I,{generation_config:"generation_config.json"},Lt)])}else if(Rt===$.Musicgen)Ft=await Promise.all([N(I,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},Lt),j(I,{generation_config:"generation_config.json"},Lt)]);else if(Rt===$.MultiModality)Ft=await Promise.all([N(I,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},Lt),j(I,{generation_config:"generation_config.json"},Lt)]);else if(Rt===$.Phi3V)Ft=await Promise.all([N(I,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},Lt),j(I,{generation_config:"generation_config.json"},Lt)]);else if(Rt===$.AutoEncoder)Ft=await Promise.all([N(I,{encoder_model:"encoder_model",decoder_model:"decoder_model"},Lt)]);else if(Rt===$.Supertonic)Ft=await Promise.all([N(I,{text_encoder:"text_encoder",latent_denoiser:"latent_denoiser",voice_decoder:"voice_decoder"},Lt)]);else{if(Rt!==$.EncoderOnly){const _n=Mn??pe?.model_type;_n!=="custom"&&console.warn(`Model type for '${_n}' not found, assuming encoder-only architecture. Please report this at ${f.GITHUB_ISSUE_URL}.`)}Ft=await Promise.all([N(I,{model:Lt.model_file_name??"model"},Lt)])}return new this(pe,...Ft)}async _call(I){return await this.forward(I)}async forward(I){return await this._forward(this,I)}get generation_config(){return this.configs?.generation_config??null}_get_logits_processor(I,te,pe=null){const Ce=new p.LogitsProcessorList;if(I.repetition_penalty!==null&&I.repetition_penalty!==1&&Ce.push(new p.RepetitionPenaltyLogitsProcessor(I.repetition_penalty)),I.no_repeat_ngram_size!==null&&I.no_repeat_ngram_size>0&&Ce.push(new p.NoRepeatNGramLogitsProcessor(I.no_repeat_ngram_size)),I.bad_words_ids!==null&&Ce.push(new p.NoBadWordsLogitsProcessor(I.bad_words_ids,I.eos_token_id)),I.min_length!==null&&I.eos_token_id!==null&&I.min_length>0&&Ce.push(new p.MinLengthLogitsProcessor(I.min_length,I.eos_token_id)),I.min_new_tokens!==null&&I.eos_token_id!==null&&I.min_new_tokens>0&&Ce.push(new p.MinNewTokensLengthLogitsProcessor(te,I.min_new_tokens,I.eos_token_id)),I.forced_bos_token_id!==null&&Ce.push(new p.ForcedBOSTokenLogitsProcessor(I.forced_bos_token_id)),I.forced_eos_token_id!==null&&Ce.push(new p.ForcedEOSTokenLogitsProcessor(I.max_length,I.forced_eos_token_id)),I.begin_suppress_tokens!==null){const $e=te>1||I.forced_bos_token_id===null?te:te+1;Ce.push(new p.SuppressTokensAtBeginLogitsProcessor(I.begin_suppress_tokens,$e))}return I.guidance_scale!==null&&I.guidance_scale>1&&Ce.push(new p.ClassifierFreeGuidanceLogitsProcessor(I.guidance_scale)),I.temperature===0&&I.do_sample&&(console.warn("`do_sample` changed to false because `temperature: 0` implies greedy sampling (always selecting the most likely token), which is incompatible with `do_sample: true`."),I.do_sample=!1),I.do_sample&&I.temperature!==null&&I.temperature!==1&&Ce.push(new p.TemperatureLogitsWarper(I.temperature)),pe!==null&&Ce.extend(pe),Ce}_prepare_generation_config(I,te,pe=h.GenerationConfig){const Ce={...this.config};for(const Qe of["decoder","generator","text_config"])Qe in Ce&&Object.assign(Ce,Ce[Qe]);const $e=new pe(Ce);return Object.assign($e,this.generation_config??{}),I&&Object.assign($e,I),te&&Object.assign($e,(0,c.pick)(te,Object.getOwnPropertyNames($e))),$e}_get_stopping_criteria(I,te=null){const pe=new b.StoppingCriteriaList;return I.max_length!==null&&pe.push(new b.MaxLengthCriteria(I.max_length,this.config.max_position_embeddings??null)),I.eos_token_id!==null&&pe.push(new b.EosTokenCriteria(I.eos_token_id)),te&&pe.extend(te),pe}_validate_model_class(){if(!this.can_generate){const I=[Vp,ks,gh,ad],te=S.get(this.constructor),pe=new Set,Ce=this.config.model_type;for(const Qe of I){const st=Qe.get(Ce);st&&pe.add(st[0])}let $e=`The current model class (${te}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw pe.size>0&&($e+=` Please use the following class instead: ${[...pe].join(", ")}`),Error($e)}}prepare_inputs_for_generation(...I){return this._prepare_inputs_for_generation(this,...I)}_update_model_kwargs_for_generation({generated_input_ids:I,outputs:te,model_inputs:pe,is_encoder_decoder:Ce}){return pe.past_key_values=this.getPastKeyValues(te,pe.past_key_values),pe.input_ids=new m.Tensor("int64",I.flat(),[I.length,1]),Ce||(pe.attention_mask=(0,m.cat)([pe.attention_mask,(0,m.ones)([pe.attention_mask.dims[0],1])],1)),pe.position_ids=null,pe}_prepare_model_inputs({inputs:I,bos_token_id:te,model_kwargs:pe}){const Ce=(0,c.pick)(pe,this.forward_params),$e=this.main_input_name;if($e in Ce){if(I)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else Ce[$e]=I;return{inputs_tensor:Ce[$e],model_inputs:Ce,model_input_name:$e}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:I,model_inputs:te,model_input_name:pe,generation_config:Ce}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!te.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:Qe,pixel_values:st,attention_mask:pt,...$t}=te,Kt=await this._prepare_inputs_embeds(te);te={...$t,...(0,c.pick)(Kt,["inputs_embeds","attention_mask"])}}let{last_hidden_state:$e}=await ne(this,te);if(Ce.guidance_scale!==null&&Ce.guidance_scale>1)$e=(0,m.cat)([$e,(0,m.full_like)($e,0)],0),"attention_mask"in te&&(te.attention_mask=(0,m.cat)([te.attention_mask,(0,m.zeros_like)(te.attention_mask)],0));else if(te.decoder_input_ids){const Qe=se(te.decoder_input_ids).dims[0];if(Qe!==$e.dims[0]){if($e.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${$e.dims[0]}) than the decoder inputs (${Qe}).`);$e=(0,m.cat)(Array.from({length:Qe},()=>$e),0)}}return te.encoder_outputs=$e,te}_prepare_decoder_input_ids_for_generation({batch_size:I,model_input_name:te,model_kwargs:pe,decoder_start_token_id:Ce,bos_token_id:$e,generation_config:Qe}){let{decoder_input_ids:st,...pt}=pe;if(!(st instanceof m.Tensor)){if(st)Array.isArray(st[0])||(st=Array.from({length:I},()=>st));else if(Ce??=$e,this.config.model_type==="musicgen")st=Array.from({length:I*this.config.decoder.num_codebooks},()=>[Ce]);else if(Array.isArray(Ce)){if(Ce.length!==I)throw new Error(`\`decoder_start_token_id\` expcted to have length ${I} but got ${Ce.length}`);st=Ce}else st=Array.from({length:I},()=>[Ce]);st=se(st)}return pe.decoder_attention_mask=(0,m.ones_like)(st),{input_ids:st,model_inputs:pt}}async generate({inputs:I=null,generation_config:te=null,logits_processor:pe=null,stopping_criteria:Ce=null,streamer:$e=null,...Qe}){this._validate_model_class(),te=this._prepare_generation_config(te,Qe);let{inputs_tensor:st,model_inputs:pt,model_input_name:$t}=this._prepare_model_inputs({inputs:I,model_kwargs:Qe});const Kt=this.config.is_encoder_decoder;Kt&&("encoder_outputs"in pt||(pt=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:st,model_inputs:pt,model_input_name:$t,generation_config:te})));let Wt;Kt?{input_ids:Wt,model_inputs:pt}=this._prepare_decoder_input_ids_for_generation({batch_size:pt[$t].dims.at(0),model_input_name:$t,model_kwargs:pt,decoder_start_token_id:te.decoder_start_token_id,bos_token_id:te.bos_token_id,generation_config:te}):Wt=pt[$t];let tn=Wt.dims.at(-1);te.max_new_tokens!==null&&(te.max_length=tn+te.max_new_tokens);const Lt=this._get_logits_processor(te,tn,pe),Mn=this._get_stopping_criteria(te,Ce),Rt=pt[$t].dims.at(0),Ft=D.LogitsSampler.getSampler(te),_n=new Array(Rt).fill(0),Dn=Wt.tolist();$e&&$e.put(Dn);let ir,_r={};for(;;){if(pt=this.prepare_inputs_for_generation(Dn,pt,te),ir=await this.forward(pt),te.output_attentions&&te.return_dict_in_generate){const Ci=this.getAttentions(ir);for(const ua in Ci)ua in _r||(_r[ua]=[]),_r[ua].push(Ci[ua])}const dn=ir.logits.slice(null,-1,null),vr=Lt(Dn,dn),Hr=[];for(let Ci=0;Ci<vr.dims.at(0);++Ci){const ua=vr[Ci],Is=await Ft(ua);for(const[Os,Mh]of Is){const bi=BigInt(Os);_n[Ci]+=Mh,Dn[Ci].push(bi),Hr.push([bi]);break}}if($e&&$e.put(Hr),Mn(Dn).every(Ci=>Ci))break;pt=this._update_model_kwargs_for_generation({generated_input_ids:Hr,outputs:ir,model_inputs:pt,is_encoder_decoder:Kt})}$e&&$e.end();const Ar=this.getPastKeyValues(ir,pt.past_key_values,!0),Zn=new m.Tensor("int64",Dn.flat(),[Dn.length,Dn[0].length]);if(te.return_dict_in_generate)return{sequences:Zn,past_key_values:Ar,..._r};for(const dn of Object.values(ir))dn.location==="gpu-buffer"&&dn.dispose();return Zn}getPastKeyValues(I,te,pe=!1){const Ce=Object.create(null);for(const $e in I)if($e.startsWith("present")){const Qe=$e.replace("present_conv","past_conv").replace("present","past_key_values"),st=$e.includes("encoder");if(st&&te?Ce[Qe]=te[Qe]:Ce[Qe]=I[$e],te&&(!st||pe)){const pt=te[Qe];pt.location==="gpu-buffer"&&pt.dispose()}}return Ce}getAttentions(I){const te={};for(const pe of["cross_attentions","encoder_attentions","decoder_attentions"])for(const Ce in I)Ce.startsWith(pe)&&(pe in te||(te[pe]=[]),te[pe].push(I[Ce]));return te}addPastKeyValues(I,te){if(te)Object.assign(I,te);else{const pe=this.sessions.decoder_model_merged??this.sessions.model,Ce=(I[this.main_input_name]??I.attention_mask)?.dims?.[0]??1,$e=pe?.config?.kv_cache_dtype??"float32",Qe=$e==="float16"?m.DataTypeMap.float16:m.DataTypeMap.float32,st=(0,i.getCacheShapes)(this.config,{batch_size:Ce});for(const pt in st){const $t=st[pt].reduce((Kt,Wt)=>Kt*Wt,1);I[pt]=new m.Tensor($e,new Qe($t),st[pt])}}}async encode_image({pixel_values:I}){return(await Y(this.sessions.vision_encoder,{pixel_values:I})).image_features}async encode_text({input_ids:I}){return(await Y(this.sessions.embed_tokens,{input_ids:I})).inputs_embeds}async encode_audio({audio_values:I}){return(await Y(this.sessions.audio_encoder,{audio_values:I})).audio_features}}class Se{}class Re extends Se{constructor({last_hidden_state:I,hidden_states:te=null,attentions:pe=null}){super(),this.last_hidden_state=I,this.hidden_states=te,this.attentions=pe}}class Ve extends Z{}class Ge extends Ve{}class Ke extends Ve{async _call(I){return new Gr(await super._call(I))}}class Ie extends Ve{async _call(I){return new qt(await super._call(I))}}class nt extends Ve{async _call(I){return new Vr(await super._call(I))}}class Ae extends Ve{async _call(I){return new Wr(await super._call(I))}}class We extends Z{}class ft extends We{}class Fe extends We{async _call(I){return new Gr(await super._call(I))}}class ot extends We{async _call(I){return new qt(await super._call(I))}}class rt extends We{async _call(I){return new Vr(await super._call(I))}}class St extends We{async _call(I){return new Wr(await super._call(I))}}class Tt extends Z{}class ut extends Tt{}class et extends Tt{async _call(I){return new Gr(await super._call(I))}}class kt extends Tt{async _call(I){return new qt(await super._call(I))}}class jt extends Tt{async _call(I){return new Vr(await super._call(I))}}class Cn extends Z{}class Qt extends Cn{}class kn extends Cn{}class Mr extends Z{}class an extends Mr{}class _i extends Z{}class is extends _i{}class as extends _i{async _call(I){return new Gr(await super._call(I))}}class pa extends _i{async _call(I){return new qt(await super._call(I))}}class Jn extends _i{async _call(I){return new Vr(await super._call(I))}}class Ir extends _i{async _call(I){return new Wr(await super._call(I))}}class Yr extends Z{}class ra extends Yr{}class Bt extends Yr{async _call(I){return new Gr(await super._call(I))}}class Wn extends Yr{async _call(I){return new qt(await super._call(I))}}class ga extends Yr{async _call(I){return new Vr(await super._call(I))}}class ia extends Yr{async _call(I){return new Wr(await super._call(I))}}class ei extends Z{}class Xt extends ei{}class _a extends ei{async _call(I){return new Gr(await super._call(I))}}class L extends ei{async _call(I){return new qt(await super._call(I))}}class de extends ei{async _call(I){return new Vr(await super._call(I))}}class J extends ei{async _call(I){return new Wr(await super._call(I))}}class le extends Z{}class fe extends le{}class xe extends le{async _call(I){return new Gr(await super._call(I))}}class je extends le{async _call(I){return new qt(await super._call(I))}}class mt extends le{async _call(I){return new Vr(await super._call(I))}}class Et extends le{async _call(I){return new Wr(await super._call(I))}}class _t extends Z{}class Gt extends _t{}class yt extends _t{async _call(I){return new Gr(await super._call(I))}}class rn extends _t{async _call(I){return new qt(await super._call(I))}}class cn extends _t{async _call(I){return new Vr(await super._call(I))}}class fr extends _t{async _call(I){return new Wr(await super._call(I))}}class hr extends Z{}class Hn extends hr{}class mr extends hr{async _call(I){return new Gr(await super._call(I))}}class Ai extends hr{async _call(I){return new qt(await super._call(I))}}class Or extends hr{async _call(I){return new Vr(await super._call(I))}}class er extends hr{async _call(I){return new Wr(await super._call(I))}}class ti extends Z{}class ni extends ti{}class ri extends ti{async _call(I){return new qt(await super._call(I))}}class or extends ti{async _call(I){return new Vr(await super._call(I))}}class Tr extends ti{async _call(I){return new Wr(await super._call(I))}}class Mi extends ti{async _call(I){return new Gr(await super._call(I))}}class Hi extends Z{}class So extends Hi{}class Ki extends Hi{async _call(I){return new Gr(await super._call(I))}}class qi extends Hi{async _call(I){return new qt(await super._call(I))}}class ii extends Hi{async _call(I){return new Vr(await super._call(I))}}class $r extends Z{}class ci extends $r{}class lt extends $r{async _call(I){return new Gr(await super._call(I))}}class dt extends $r{async _call(I){return new qt(await super._call(I))}}class Ct extends $r{async _call(I){return new Wr(await super._call(I))}}class An extends Z{}class Eo extends An{}class Nr extends An{async _call(I){return new Gr(await super._call(I))}}class va extends An{async _call(I){return new qt(await super._call(I))}}class Zs extends An{async _call(I){return new Vr(await super._call(I))}}class Me extends An{async _call(I){return new Wr(await super._call(I))}}class R extends Z{}class ie extends R{}class he extends R{async _call(I){return new Gr(await super._call(I))}}class me extends R{async _call(I){return new qt(await super._call(I))}}class ze extends R{async _call(I){return new Wr(await super._call(I))}}class Ze extends Z{}class xt extends Ze{}class bt extends Ze{async _call(I){return new qt(await super._call(I))}}class Mt extends Ze{async _call(I){return new Wr(await super._call(I))}}class vt extends Ze{async _call(I){return new Gr(await super._call(I))}}class en extends Z{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"]}class Vt extends en{}class tr extends en{}class Pr extends Z{}class In extends Pr{}class jn extends Pr{}class Ln extends Z{}class vi extends Ln{}class Zi extends Ln{}class Sr extends Z{}class Jr extends Sr{}class Xn extends Sr{}class sr extends Sr{async _call(I){return new qt(await super._call(I))}}class lr extends Z{}class Ti extends lr{}class Ii extends lr{}class Dr extends lr{async _call(I){return new qt(await super._call(I))}}class Si extends lr{}class Er extends Z{}class nr extends Er{}class Sn extends Er{}class Bn extends Z{}class ai extends Bn{}class aa extends Bn{}class qa extends Z{}class Qs extends qa{}class Hl extends qa{async _call(I){return new Gr(await super._call(I))}}class os extends qa{async _call(I){return new qt(await super._call(I))}}class Xs extends qa{async _call(I){return new Vr(await super._call(I))}}class hu extends qa{async _call(I){return new Wr(await super._call(I))}}class ss extends Z{}class Kd extends ss{}class qd extends ss{async _call(I){return new Gr(await super._call(I))}}class Kl extends ss{async _call(I){return new qt(await super._call(I))}}class Zd extends ss{async _call(I){return new Vr(await super._call(I))}}class Qd extends ss{async _call(I){return new Wr(await super._call(I))}}class ls extends Z{}class Xd extends ls{}class mu extends ls{async _call(I){return new Gr(await super._call(I))}}class ql extends ls{async _call(I){return new qt(await super._call(I))}}class pu extends ls{async _call(I){return new Vr(await super._call(I))}}class Yd extends ls{async _call(I){return new Wr(await super._call(I))}}class gu extends Z{}class _u extends gu{}class Ys extends gu{}class $o extends Z{requires_attention_mask=!1;main_input_name="input_features";forward_params=["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"]}class Jd extends $o{}class Zl extends $o{_prepare_generation_config(I,te){return super._prepare_generation_config(I,te,E.WhisperGenerationConfig)}_retrieve_init_tokens(I){const te=[I.decoder_start_token_id];let pe=I.language;const Ce=I.task;if(I.is_multilingual){pe||(console.warn("No language specified - defaulting to English (en)."),pe="en");const Qe=`<|${(0,A.whisper_language_to_code)(pe)}|>`;te.push(I.lang_to_id[Qe]),te.push(I.task_to_id[Ce??"transcribe"])}else if(pe||Ce)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!I.return_timestamps&&I.no_timestamps_token_id&&te.at(-1)!==I.no_timestamps_token_id?te.push(I.no_timestamps_token_id):I.return_timestamps&&te.at(-1)===I.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),te.pop()),te.filter($e=>$e!=null)}async generate({inputs:I=null,generation_config:te=null,logits_processor:pe=null,stopping_criteria:Ce=null,...$e}){te=this._prepare_generation_config(te,$e);const Qe=$e.decoder_input_ids??this._retrieve_init_tokens(te);if(te.return_timestamps&&(pe??=new p.LogitsProcessorList,pe.push(new p.WhisperTimeStampLogitsProcessor(te,Qe))),te.begin_suppress_tokens&&(pe??=new p.LogitsProcessorList,pe.push(new p.SuppressTokensAtBeginLogitsProcessor(te.begin_suppress_tokens,Qe.length))),te.return_token_timestamps){if(!te.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");te.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),te.output_attentions=!0,te.return_dict_in_generate=!0}const st=await super.generate({inputs:I,generation_config:te,logits_processor:pe,decoder_input_ids:Qe,...$e});return te.return_token_timestamps&&(st.token_timestamps=this._extract_token_timestamps(st,te.alignment_heads,te.num_frames)),st}_extract_token_timestamps(I,te,pe=null,Ce=.02){if(!I.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");pe==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let $e=this.config.median_filter_width;$e===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),$e=7);const Qe=I.cross_attentions,st=Array.from({length:this.config.decoder_layers},(Rt,Ft)=>(0,m.cat)(Qe.map(_n=>_n[Ft]),2)),pt=(0,m.stack)(te.map(([Rt,Ft])=>{if(Rt>=st.length)throw new Error(`Layer index ${Rt} is out of bounds for cross attentions (length ${st.length}).`);return pe?st[Rt].slice(null,Ft,null,[0,pe]):st[Rt].slice(null,Ft)})).transpose(1,0,2,3),[$t,Kt]=(0,m.std_mean)(pt,-2,0,!0),Wt=pt.clone();for(let Rt=0;Rt<Wt.dims[0];++Rt){const Ft=Wt[Rt];for(let _n=0;_n<Ft.dims[0];++_n){const Dn=Ft[_n],ir=$t[Rt][_n][0].data,_r=Kt[Rt][_n][0].data;for(let Ar=0;Ar<Dn.dims[0];++Ar){let Zn=Dn[Ar].data;for(let dn=0;dn<Zn.length;++dn)Zn[dn]=(Zn[dn]-_r[dn])/ir[dn];Zn.set((0,v.medianFilter)(Zn,$e))}}}const tn=[(0,m.mean)(Wt,1)],Lt=I.sequences.dims,Mn=new m.Tensor("float32",new Float32Array(Lt[0]*Lt[1]),Lt);for(let Rt=0;Rt<Lt[0];++Rt){const Ft=tn[Rt].neg().squeeze_(0),[_n,Dn]=(0,v.dynamic_time_warping)(Ft.tolist()),ir=Array.from({length:_n.length-1},(Zn,dn)=>_n[dn+1]-_n[dn]),_r=(0,c.mergeArrays)([1],ir).map(Zn=>!!Zn),Ar=[];for(let Zn=0;Zn<_r.length;++Zn)_r[Zn]&&Ar.push(Dn[Zn]*Ce);Mn[Rt].data.set(Ar,1)}return Mn}}class vu extends Zl{}class yu extends Z{requires_attention_mask=!1;main_input_name="input_values";forward_params=["input_values","decoder_input_ids","past_key_values"]}class am extends yu{}class Ql extends yu{}class Xl extends Z{main_input_name="pixel_values";forward_params=["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"]}class bu extends Z{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class Yl extends bu{_merge_input_ids_with_image_features(I){const te=I.image_features.dims.at(-1),pe=I.image_features.view(-1,te);return G({image_token_id:this.config.image_token_index,...I,image_features:pe})}}class ef extends Yl{}class tf extends Yl{}class nf extends Z{forward_params=["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"];main_input_name="inputs_embeds"}class Jl extends nf{_merge_input_ids_with_image_features({inputs_embeds:I,image_features:te,input_ids:pe,attention_mask:Ce}){return{inputs_embeds:(0,m.cat)([te,I],1),attention_mask:(0,m.cat)([(0,m.ones)(te.dims.slice(0,2)),Ce],1)}}async _prepare_inputs_embeds({input_ids:I,pixel_values:te,inputs_embeds:pe,attention_mask:Ce}){if(!I&&!te)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let $e,Qe;return I&&($e=await this.encode_text({input_ids:I})),te&&(Qe=await this.encode_image({pixel_values:te})),$e&&Qe?{inputs_embeds:pe,attention_mask:Ce}=this._merge_input_ids_with_image_features({inputs_embeds:$e,image_features:Qe,input_ids:I,attention_mask:Ce}):pe=$e||Qe,{inputs_embeds:pe,attention_mask:Ce}}async forward({input_ids:I,pixel_values:te,attention_mask:pe,decoder_input_ids:Ce,decoder_attention_mask:$e,encoder_outputs:Qe,past_key_values:st,inputs_embeds:pt,decoder_inputs_embeds:$t}){if(pt||({inputs_embeds:pt,attention_mask:pe}=await this._prepare_inputs_embeds({input_ids:I,pixel_values:te,inputs_embeds:pt,attention_mask:pe})),!Qe){let{last_hidden_state:tn}=await ne(this,{inputs_embeds:pt,attention_mask:pe});Qe=tn}if(!$t){if(!Ce)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");$t=await this.encode_text({input_ids:Ce})}return await ge(this,{inputs_embeds:$t,attention_mask:$e,encoder_attention_mask:pe,encoder_hidden_states:Qe,past_key_values:st},!0)}}class cs extends Z{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class rf extends cs{_merge_input_ids_with_image_features(I){const te=I.image_features.dims.at(-1),pe=I.image_features.view(-1,te);return G({image_token_id:this.config.image_token_index,...I,image_features:pe})}}class ec extends bu{_merge_input_ids_with_image_features(I){const te=I.image_features.dims.at(-1),pe=I.image_features.view(-1,te);return G({image_token_id:this.config.image_token_index,...I,image_features:pe})}}class us extends ec{}class Po extends Z{forward_params=["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"]}class Js extends Po{async forward({input_ids:I=null,attention_mask:te=null,pixel_values:pe=null,input_features:Ce=null,input_features_mask:$e=null,position_ids:Qe=null,inputs_embeds:st=null,per_layer_inputs:pt=null,past_key_values:$t=null,generation_config:Kt=null,logits_processor:Wt=null,...tn}){if((!st||!pt)&&({inputs_embeds:st,per_layer_inputs:pt}=await Y(this.sessions.embed_tokens,{input_ids:I}),I.dims[1]!==1)){if(pe){const{image_features:Mn}=await Y(this.sessions.vision_encoder,{pixel_values:pe});({inputs_embeds:st,attention_mask:te}=this._merge_input_ids_with_image_features({image_features:Mn,inputs_embeds:st,input_ids:I,attention_mask:te}))}if(Ce){const{audio_features:Mn}=await Y(this.sessions.audio_encoder,{input_features:Ce,input_features_mask:$e});({inputs_embeds:st,attention_mask:te}=this._merge_input_ids_with_audio_features({audio_features:Mn,inputs_embeds:st,input_ids:I,attention_mask:te}))}}return await ge(this,{inputs_embeds:st,per_layer_inputs:pt,past_key_values:$t,attention_mask:te,position_ids:Qe,generation_config:Kt,logits_processor:Wt},!0)}_merge_input_ids_with_image_features(I){const te=I.image_features.dims.at(-1),pe=I.image_features.view(-1,te);return G({image_token_id:this.config.image_token_id,...I,image_features:pe})}_merge_input_ids_with_audio_features(I){const te=I.audio_features.dims.at(-1),pe=I.audio_features.view(-1,te);return H({audio_token_id:this.config.audio_token_id,...I,audio_features:pe})}}class wu extends Z{forward_params=["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"]}class ya extends wu{async encode_image({pixel_values:I,pixel_attention_mask:te}){return(await Y(this.sessions.vision_encoder,{pixel_values:I,pixel_attention_mask:te})).image_features}_merge_input_ids_with_image_features(I){const te=I.image_features.dims.at(-1),pe=I.image_features.view(-1,te);return G({image_token_id:this.config.image_token_id,...I,image_features:pe})}}class el extends ya{}class tc extends Z{forward_params=["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"]}class nc extends tc{async forward({input_ids:I=null,attention_mask:te=null,pixel_values:pe=null,image_sizes:Ce=null,position_ids:$e=null,inputs_embeds:Qe=null,past_key_values:st=null,generation_config:pt=null,logits_processor:$t=null,...Kt}){if(!Qe){let tn;if(pe&&I.dims[1]!==1){if(!Ce)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:tn}=await Y(this.sessions.vision_encoder,{pixel_values:pe,image_sizes:Ce}))}else{const Lt=this.config.normalized_config.hidden_size;tn=new m.Tensor("float32",[],[0,Lt])}({inputs_embeds:Qe}=await Y(this.sessions.prepare_inputs_embeds,{input_ids:I,image_features:tn}))}return await ge(this,{inputs_embeds:Qe,past_key_values:st,attention_mask:te,position_ids:$e,generation_config:pt,logits_processor:$t},!1)}}class ba extends Z{}class rc extends ba{}class ds extends ba{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"text_model"})}}class Co extends ba{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"text_model"})}}class af extends ba{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"vision_model"})}}class tl extends ba{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"vision_model"})}}class nl extends Z{}class ic extends nl{}class ko extends nl{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"text_model"})}}class Ot extends ba{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"vision_model"})}}class xu extends Z{}class ac extends xu{}class fs extends Z{}class rl extends fs{async forward(I){const te=!I.input_ids,pe=!I.pixel_values;if(te&&pe)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(te&&(I.input_ids=(0,m.ones)([I.pixel_values.dims[0],1])),pe){const{image_size:$t}=this.config.vision_config;I.pixel_values=(0,m.full)([0,3,$t,$t],0)}const{text_embeddings:Ce,image_embeddings:$e,l2norm_text_embeddings:Qe,l2norm_image_embeddings:st}=await super.forward(I),pt={};return te||(pt.text_embeddings=Ce,pt.l2norm_text_embeddings=Qe),pe||(pt.image_embeddings=$e,pt.l2norm_image_embeddings=st),pt}}class Qi extends fs{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"text_model"})}}class il extends fs{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"vision_model"})}}class al extends Z{}class Mu extends al{}class ui extends al{}class Za extends Z{}class ol extends Za{}class oc extends Za{}class sl extends Z{}class sc extends sl{}class Ao extends sl{}class ll extends Z{}class wa extends ll{}class cl extends ll{}class Qa extends Z{}class ul extends Qa{}class lc extends Qa{}class oa extends Z{}class w extends oa{}class z extends oa{}class B extends Z{}class q extends B{}class re extends B{}class be extends Z{}class qe extends be{}class ct extends be{}class wt extends Z{}class At extends wt{}class Yt extends wt{}class yn extends Z{}class $n extends yn{}class Rn extends Z{}class sa extends Rn{}class Ei extends Rn{}class hs extends Z{}class of extends hs{}class Tu extends hs{}class cc extends Z{}class sf extends cc{}class ms extends cc{}class lf extends Z{}class Su extends lf{}class dl extends lf{}class om extends Z{}class Oi extends om{}class cf extends om{}class xa extends Z{}class sm extends xa{}class Eu extends xa{}class Io extends Z{}class uf extends Io{}class lm extends Io{}class $u extends Z{}class cm extends $u{}class Xi extends $u{}class ps extends Z{}class fl extends ps{}class Pu extends ps{}class hl extends Z{}class Yi extends hl{}class Ji extends hl{}class Xa extends Z{}class Ma extends Xa{}class Ta extends Xa{}class Sa extends Z{}class um extends Sa{}class df extends Sa{}class Cu extends Z{}class dm extends Cu{}class oi extends Cu{}class rr extends Z{}class Tn extends rr{}class Oo extends rr{}class Di extends Z{}class ff extends Di{}class Do extends Di{}class hf extends Z{}class fm extends hf{}class ml extends hf{}class zo extends Z{}class mf extends zo{}class uc extends zo{}class ku extends Z{}class gs extends ku{}class Ya extends ku{}class Ja extends Z{}class eo extends Ja{}class pf extends Ja{}class Au extends Z{}class pl extends Au{}class Iu extends Au{}class _s extends Z{forward_params=["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"]}class si extends _s{get_rope_index(I,te,pe,Ce){const{vision_config:$e,image_token_id:Qe,video_token_id:st,vision_start_token_id:pt}=this.config,$t=$e.spatial_merge_size??2,Kt=[];if(te||pe){let Wt=I.tolist();Ce||(Ce=(0,m.ones_like)(I));const tn=Ce.tolist(),Lt=Array.from({length:3},Dn=>Array.from({length:I.dims[0]},ir=>Array.from({length:I.dims[1]},_r=>1))),Mn=te?te.tolist():[],Rt=pe?pe.tolist():[];let Ft=0,_n=0;for(let Dn=0;Dn<Wt.length;++Dn){const ir=Wt[Dn].filter((ar,Kr)=>tn[Dn][Kr]==1),Ar=ir.reduce((ar,Kr,Vo)=>(Kr==pt&&ar.push(Vo),ar),[]).map(ar=>ir[ar+1]),Zn=Ar.filter(ar=>ar==Qe).length,dn=Ar.filter(ar=>ar==st).length;let vr=[],Hr=0,Dl=Zn,Ci=dn;for(let ar=0;ar<Ar.length;++ar){const Kr=ir.findIndex((zs,wi)=>wi>Hr&&zs==Qe),Vo=ir.findIndex((zs,wi)=>wi>Hr&&zs==st),Oa=Dl>0&&Kr!==-1?Kr:ir.length+1,mi=Ci>0&&Vo!==-1?Vo:ir.length+1;let fd,jc,Da,ug;Oa<mi?([jc,Da,ug]=Mn[Ft],++Ft,--Dl,fd=Oa):([jc,Da,ug]=Rt[_n],++_n,--Ci,fd=mi);const[T0,Ds,hd]=[Number(jc),Math.floor(Number(Da)/$t),Math.floor(Number(ug)/$t)],dg=fd-Hr,wv=vr.length>0?(0,v.max)(vr.at(-1))[0]+1:0;vr.push(Array.from({length:3*dg},(zs,wi)=>wv+wi%dg));const fg=dg+wv,Th=T0*Ds*hd,S0=Array.from({length:Th},(zs,wi)=>fg+Math.floor(wi/(Ds*hd))),E0=Array.from({length:Th},(zs,wi)=>fg+Math.floor(wi/hd)%Ds),$0=Array.from({length:Th},(zs,wi)=>fg+wi%hd);vr.push([S0,E0,$0].flat()),Hr=fd+Th}if(Hr<ir.length){const ar=vr.length>0?(0,v.max)(vr.at(-1))[0]+1:0,Kr=ir.length-Hr;vr.push(Array.from({length:3*Kr},(Vo,Oa)=>ar+Oa%Kr))}const ua=vr.reduce((ar,Kr)=>ar+Kr.length,0),Is=new Array(ua);let Os=0;for(let ar=0;ar<3;++ar)for(let Kr=0;Kr<vr.length;++Kr){const Vo=vr[Kr],Oa=Vo.length/3;for(let mi=ar*Oa;mi<(ar+1)*Oa;++mi)Is[Os++]=Vo[mi]}let Mh=0;const bi=tn[Dn];for(let ar=0;ar<bi.length;++ar)if(bi[ar]==1){for(let Kr=0;Kr<3;++Kr)Lt[Kr][Dn][ar]=Is[Kr*ua/3+Mh];++Mh}const cg=(0,v.max)(Is)[0];Kt.push(cg+1-Wt[Dn].length)}return[new m.Tensor("int64",Lt.flat(1/0),[3,I.dims[0],I.dims[1]]),new m.Tensor("int64",Kt,[Kt.length,1])]}else if(Ce){const{data:Wt,dims:tn}=ve(Ce),Lt=BigInt64Array.from({length:3*Wt.length},(Rt,Ft)=>Wt[Ft%Wt.length]),Mn=Array.from({length:tn[0]},(Rt,Ft)=>(0,v.max)(Wt.subarray(tn[1]*Ft,tn[1]*(Ft+1)))[0]+1n+BigInt(tn[1]));return[new m.Tensor("int64",Lt,[3,...tn]),new m.Tensor("int64",Mn,[Mn.length,1])]}else{const[Wt,tn]=I.dims,Lt=BigInt64Array.from({length:3*Wt*tn},(Mn,Rt)=>BigInt(Math.floor(Rt%tn/Wt)));return[new m.Tensor("int64",Lt,[3,...I.dims]),(0,m.zeros)([Wt,1])]}}async encode_image({pixel_values:I,image_grid_thw:te}){return(await Y(this.sessions.vision_encoder,{pixel_values:I,grid_thw:te})).image_features}_merge_input_ids_with_image_features(I){return G({image_token_id:this.config.image_token_id,...I})}prepare_inputs_for_generation(I,te,pe){if(te.attention_mask&&!te.position_ids)if(!te.past_key_values)[te.position_ids,te.rope_deltas]=this.get_rope_index(te.input_ids,te.image_grid_thw,te.video_grid_thw,te.attention_mask);else{te.pixel_values=null;const Ce=BigInt(Object.values(te.past_key_values)[0].dims.at(-2)),$e=te.rope_deltas.map(Qe=>Ce+Qe);te.position_ids=(0,m.stack)([$e,$e,$e],0)}return te}}class dc extends Z{}class hm extends dc{}class G_ extends dc{}class mm extends Z{}class W_ extends mm{}class jr extends mm{}class Ou extends Z{}class fc extends Ou{}class hc extends Ou{}class Du extends Z{}class gl extends Du{}class _l extends Du{}class pm extends Z{}class gm extends pm{}class H_ extends pm{}class gf extends Z{}class vs extends gf{}class _f extends gf{async _call(I){return new qt(await super._call(I))}}class mc extends Z{}class _m extends mc{}class vl extends mc{async _call(I){return new qt(await super._call(I))}}class vf extends Z{}class zu extends vf{}class pc extends Z{}class vm extends pc{}class ym extends pc{async _call(I){return new qt(await super._call(I))}}class ys extends Z{}class bs extends ys{}class yf extends Z{}class bm extends yf{}class yl extends yf{async _call(I){return new qt(await super._call(I))}}class gc extends Z{}class Lu extends gc{}class bl extends Z{}class Ru extends bl{}class wm extends bl{async _call(I){return new qt(await super._call(I))}}class ws extends Z{}class xm extends ws{async _call(I){return new lg(await super._call(I))}}class to extends Z{}class bf extends to{}class wf extends to{async _call(I){return new qt(await super._call(I))}}class no extends Z{}class Lo extends no{}class _c extends no{async _call(I){return new qt(await super._call(I))}}class Fu extends Z{}class xf extends Fu{}class vc extends Fu{}class wl extends Z{}class Mm extends wl{}class Tm extends wl{}class xs extends Z{}class Nu extends xs{}class Sm extends xs{async _call(I){return new qt(await super._call(I))}}class yc extends Z{}class Mf extends yc{}class zi extends yc{async _call(I){return new ro(await super._call(I))}}class Li extends yc{async _call(I){return new Tf(await super._call(I))}}class ro extends Se{constructor({logits:I,pred_boxes:te}){super(),this.logits=I,this.pred_boxes=te}}class Tf extends Se{constructor({logits:I,pred_boxes:te,pred_masks:pe}){super(),this.logits=I,this.pred_boxes=te,this.pred_masks=pe}}class Sf extends Z{}class Ro extends Sf{}class Ri extends Sf{async _call(I){return new pr(await super._call(I))}}class pr extends Se{constructor({logits:I,pred_boxes:te}){super(),this.logits=I,this.pred_boxes=te}}class bc extends Z{}class io extends bc{}class un extends bc{async _call(I){return new Kn(await super._call(I))}}class Kn extends pr{}class zr extends Z{}class ju extends zr{}class xl extends zr{async _call(I){return new Ms(await super._call(I))}}class Ms extends pr{}class wc extends Z{}class xc extends wc{}class Ml extends wc{async _call(I){return new pr(await super._call(I))}}class Em extends Z{}class Cr extends Em{}class Ef extends Em{async _call(I){return new $f(await super._call(I))}}class $f extends ro{}class Pf extends Z{}class $m extends Pf{}class K_ extends Pf{async _call(I){return new qt(await super._call(I))}}class Bu extends Z{}class Cf extends Bu{}class kf extends Bu{async _call(I){return new qt(await super._call(I))}}class di extends Z{}class Lr extends di{}class Uu extends di{async _call(I){return new qt(await super._call(I))}}class Ts extends Z{}class Vu extends Ts{}class Af extends Ts{async _call(I){return new qt(await super._call(I))}}class ao extends Ts{}class Mc extends Z{}class If extends Mc{}class Of extends Mc{}class Df extends Z{}class Pm extends Df{}class Cm extends Df{}class km extends Z{}class Am extends km{}class Gu extends Z{}class zf extends Gu{}class Im extends Gu{}class q_ extends Gu{}class Om extends Z{}class Dm extends Om{}class zm extends Z{}class Lf extends zm{}class Lm extends Z{}class Rm extends Lm{}class Rf extends Z{}class Fm extends Rf{}class Nm extends Rf{}class jm extends Z{}class Bm extends jm{}class Tl extends jm{}class Um extends Z{}class Wu extends Um{}class Tc extends Z{}class Vm extends Tc{}class Ff extends Tc{async _call(I){return new qt(await super._call(I))}}class Gm extends Z{}class Wm extends Gm{}class Hm extends Gm{async _call(I){return new qt(await super._call(I))}}class Nf extends Z{}class Km extends Nf{}class qm extends Nf{async _call(I){return new qt(await super._call(I))}}class Hu extends Z{}class Zm extends Hu{}class Qm extends Hu{async _call(I){return new qt(await super._call(I))}}class jf extends Z{}class Xm extends jf{}class Ym extends Z{}class Z_ extends Ym{}class Bf extends Z{}class Jm extends Bf{}class Uf extends Z{}class Vf extends Uf{}class ep extends Uf{async _call(I){return new tp(await super._call(I))}}class tp extends Se{constructor({logits:I,pred_boxes:te}){super(),this.logits=I,this.pred_boxes=te}}class Q_ extends Z{}class X_ extends Q_{async get_image_embeddings({pixel_values:I}){return await ne(this,{pixel_values:I})}async forward(I){!I.image_embeddings||!I.image_positional_embeddings?I={...I,...await this.get_image_embeddings(I)}:I={...I},I.input_labels??=(0,m.ones)(I.input_points.dims.slice(0,-1));const te={image_embeddings:I.image_embeddings,image_positional_embeddings:I.image_positional_embeddings};return I.input_points&&(te.input_points=I.input_points),I.input_labels&&(te.input_labels=I.input_labels),I.input_boxes&&(te.input_boxes=I.input_boxes),await Y(this.sessions.prompt_encoder_mask_decoder,te)}async _call(I){return new np(await super._call(I))}}class np extends Se{constructor({iou_scores:I,pred_masks:te}){super(),this.iou_scores=I,this.pred_masks=te}}class Sc extends Se{constructor({iou_scores:I,pred_masks:te,object_score_logits:pe}){super(),this.iou_scores=I,this.pred_masks=te,this.object_score_logits=pe}}class Gf extends Z{}class Sl extends Gf{async get_image_embeddings({pixel_values:I}){return await ne(this,{pixel_values:I})}async forward(I){const{num_feature_levels:te}=this.config.vision_config;if(Array.from({length:te},(Qe,st)=>`image_embeddings.${st}`).some(Qe=>!I[Qe])?I={...I,...await this.get_image_embeddings(I)}:I={...I},I.input_points){if(I.input_boxes&&I.input_boxes.dims[1]!==1)throw new Error("When both `input_points` and `input_boxes` are provided, the number of boxes per image must be 1.");const Qe=I.input_points.dims;I.input_labels??=(0,m.ones)(Qe.slice(0,-1)),I.input_boxes??=(0,m.full)([Qe[0],0,4],0)}else if(I.input_boxes){const Qe=I.input_boxes.dims;I.input_labels=(0,m.full)([Qe[0],Qe[1],0],-1n),I.input_points=(0,m.full)([Qe[0],1,0,2],0)}else throw new Error("At least one of `input_points` or `input_boxes` must be provided.");const Ce=this.sessions.prompt_encoder_mask_decoder,$e=(0,c.pick)(I,Ce.inputNames);return await Y(Ce,$e)}async _call(I){return new Sc(await super._call(I))}}class rp extends Sl{}class ip extends Sl{}class El extends Z{}class ap extends El{}class Wf extends El{}class Hf extends Z{}class Kf extends Hf{}class qf extends Hf{}class Fo extends Z{}class op extends Fo{}class Ss extends Fo{async _call(I){return new Ia(await super._call(I))}}class sp extends Fo{async _call(I){return new qt(await super._call(I))}}class lp extends Fo{async _call(I){return new Vr(await super._call(I))}}class cp extends Z{}class Ku extends cp{async _call(I){return new Ia(await super._call(I))}}class Zf extends Z{}class Qf extends Zf{}class up extends Zf{async _call(I){return new Vr(await super._call(I))}}class dp extends Z{}class Y_ extends dp{}class Ec extends Z{}class Br extends Ec{}class li extends Ec{async _call(I){return new Ia(await super._call(I))}}class fp extends Ec{async _call(I){return new qt(await super._call(I))}}class $c extends Z{}class hp extends $c{}class mp extends $c{async _call(I){return new Ia(await super._call(I))}}class Pc extends $c{async _call(I){return new qt(await super._call(I))}}class pp extends $c{async _call(I){return new Vr(await super._call(I))}}class $l extends Z{}class gp extends $l{}class J_ extends $l{async _call(I){return new Ia(await super._call(I))}}class qu extends $l{async _call(I){return new qt(await super._call(I))}}class _p extends Z{}class vp extends Fo{}class yp extends Fo{async _call(I){return new Ia(await super._call(I))}}class bp extends Fo{async _call(I){return new qt(await super._call(I))}}class Es extends Z{}class Xf extends Es{}class Yf extends Es{async _call(I){return new Ia(await super._call(I))}}class wp extends Es{async _call(I){return new qt(await super._call(I))}}class Jf extends Es{async _call(I){return new xh(await super._call(I))}}class Zu extends Es{async _call(I){return new Vr(await super._call(I))}}class eh extends Z{}class xp extends eh{}class Cc extends Z{}class ev extends Cc{}class oo extends Cc{}class th extends Cc{async generate_speech(I,te,{threshold:pe=.5,minlenratio:Ce=0,maxlenratio:$e=20,vocoder:Qe=null}={}){const st={input_ids:I},{encoder_outputs:pt,encoder_attention_mask:$t}=await ne(this,st),Kt=pt.dims[1]/this.config.reduction_factor,Wt=Math.floor(Kt*$e),tn=Math.floor(Kt*Ce),Lt=this.config.num_mel_bins;let Mn=[],Rt=null,Ft=null,_n=0;for(;;){++_n;const _r=oe(!!Ft);let Ar;Ft?Ar=Ft.output_sequence_out:Ar=new m.Tensor("float32",new Float32Array(Lt),[1,1,Lt]);let Zn={use_cache_branch:_r,output_sequence:Ar,encoder_attention_mask:$t,speaker_embeddings:te,encoder_hidden_states:pt};this.addPastKeyValues(Zn,Rt),Ft=await Y(this.sessions.decoder_model_merged,Zn),Rt=this.getPastKeyValues(Ft,Rt);const{prob:dn,spectrum:vr}=Ft;if(Mn.push(vr),_n>=tn&&(Array.from(dn.data).filter(Hr=>Hr>=pe).length>0||_n>=Wt))break}const Dn=(0,m.cat)(Mn),{waveform:ir}=await Y(Qe.sessions.model,{spectrogram:Dn});return{spectrogram:Dn,waveform:ir}}}class tv extends Z{main_input_name="spectrogram"}class Mp extends Z{}class Ea extends Mp{async generate_speech({input_ids:I,attention_mask:te,style:pe,num_inference_steps:Ce=5,speed:$e=1.05}){const{sampling_rate:Qe,chunk_compress_factor:st,base_chunk_size:pt,latent_dim:$t}=this.config,{last_hidden_state:Kt,durations:Wt}=await Y(this.sessions.text_encoder,{input_ids:I,attention_mask:te,style:pe});Wt.div_($e);const tn=Wt.max().item()*Qe,Lt=pt*st,Mn=Math.floor((tn+Lt-1)/Lt),Rt=I.dims[0],Ft=(0,m.ones)([Rt,Mn]),_n=(0,m.full)([Rt],Ce);let Dn=(0,m.randn)([Rt,$t*st,Mn]);for(let _r=0;_r<Ce;++_r){const Ar=(0,m.full)([Rt],_r);({denoised_latents:Dn}=await Y(this.sessions.latent_denoiser,{style:pe,noisy_latents:Dn,latent_mask:Ft,encoder_outputs:Kt,attention_mask:te,timestep:Ar,num_inference_steps:_n}))}const{waveform:ir}=await Y(this.sessions.voice_decoder,{latents:Dn});return{waveform:ir,durations:Wt}}}class nh extends Z{}class Tp extends nh{}class kc extends Z{}class Ac extends kc{}class cr extends kc{}class Sp extends Z{}class nv extends Sp{}class Ep extends Sp{}class Pl extends Z{}class No extends Pl{}class $p extends Pl{}class rh extends Z{}class Ic extends rh{}class $a extends rh{}class ih extends Z{}class ah extends ih{}class Pp extends ih{}class Qu extends Z{}class oh extends Qu{}class Xu extends Qu{}class Yu extends Z{}class so extends Yu{}class Ur extends Yu{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"text_model"})}}class sh extends Yu{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"audio_model"})}}class Cp extends Z{}class Qr extends Cp{async _call(I){return new bv(await super._call(I))}}class lh extends Z{}class rv extends lh{}class kp extends lh{}class gr extends lh{}class yi extends Z{}class lo extends yi{}class Ap extends yi{}class ch extends Z{}class Ip extends ch{}class iv extends ch{async _call(I){return new qt(await super._call(I))}}class Oc extends Z{}class Fi extends Oc{}class Pa extends Oc{}class uh extends Z{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"];_apply_and_filter_by_delay_pattern_mask(I){const[te,pe]=I.dims,Ce=this.config.decoder.num_codebooks,$e=pe-Ce;let Qe=0;for(let $t=0;$t<I.size;++$t){if(I.data[$t]===this.config.decoder.pad_token_id)continue;const Kt=$t%pe,Wt=Math.floor($t/pe)%Ce,tn=Kt-Wt;tn>0&&tn<=$e&&(I.data[Qe++]=I.data[$t])}const st=Math.floor(te/Ce),pt=Qe/(st*Ce);return new m.Tensor(I.type,I.data.slice(0,Qe),[st,Ce,pt])}prepare_inputs_for_generation(I,te,pe){let Ce=structuredClone(I);for(let Qe=0;Qe<Ce.length;++Qe)for(let st=0;st<Ce[Qe].length;++st)Qe%this.config.decoder.num_codebooks>=st&&(Ce[Qe][st]=BigInt(this.config.decoder.pad_token_id));return pe.guidance_scale!==null&&pe.guidance_scale>1&&(Ce=Ce.concat(Ce)),super.prepare_inputs_for_generation(Ce,te,pe)}async generate(I){const te=await super.generate(I),pe=this._apply_and_filter_by_delay_pattern_mask(te).unsqueeze_(0),{audio_values:Ce}=await Y(this.sessions.encodec_decode,{audio_codes:pe});return Ce}}class fi extends Z{}class Op extends fi{}class co extends fi{async _call(I){return new qt(await super._call(I))}}class $s extends fi{}class la extends Z{}class dh extends la{}class fh extends la{async _call(I){return new qt(await super._call(I))}}class ca extends la{}class Ju extends Z{}class Cl extends Ju{}class Dc extends Ju{async _call(I){return new qt(await super._call(I))}}class zc extends Ju{}class jo extends Z{}class Dp extends jo{}class zp extends jo{async _call(I){return new qt(await super._call(I))}}class Lc extends jo{}class Lp extends Z{}class ed extends Lp{}class Rp extends Z{}class av extends Rp{forward_params=["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"];constructor(...I){super(...I),this._generation_mode="text"}async forward(I){const te=this._generation_mode??"text";let pe;if(te==="text"||!I.past_key_values){const pt=this.sessions.prepare_inputs_embeds,$t=(0,c.pick)(I,pt.inputNames);pe=await Y(pt,$t)}else{const pt=this.sessions.gen_img_embeds,$t=(0,c.pick)({image_ids:I.input_ids},pt.inputNames);pe=await Y(pt,$t)}const Ce={...I,...pe},$e=await ge(this,Ce),Qe=this.sessions[te==="text"?"lm_head":"gen_head"];if(!Qe)throw new Error(`Unable to find "${Qe}" generation head`);const st=await Y(Qe,(0,c.pick)($e,Qe.inputNames));return{...pe,...$e,...st}}async generate(I){return this._generation_mode="text",super.generate(I)}async generate_images(I){this._generation_mode="image";const te=(I.inputs??I[this.main_input_name]).dims[1],Ce=(await super.generate(I)).slice(null,[te,null]),$e=this.sessions.image_decode,{decoded_image:Qe}=await Y($e,{generated_tokens:Ce}),st=Qe.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),pt=[];for(const $t of st){const Kt=_.RawImage.fromTensor($t);pt.push(Kt)}return pt}}class ov extends Se{constructor({char_logits:I,bpe_logits:te,wp_logits:pe}){super(),this.char_logits=I,this.bpe_logits=te,this.wp_logits=pe}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class On extends Z{}class Yn extends On{async _call(I){return new ov(await super._call(I))}}class gn extends Z{}class wn extends gn{}class Un extends gn{}class $i extends Z{}class Bo extends $i{}class kl extends $i{}class hh extends Z{forward_params=["input_ids","attention_mask","position_ids","audio_values","past_key_values"]}class Ca extends hh{_merge_input_ids_with_audio_features(I){const te=I.audio_features.dims.at(-1),pe=I.audio_features.view(-1,te);return H({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...I,audio_features:pe})}}class kr extends Ca{}class ka extends Z{main_input_name="input_values";forward_params=["input_values"]}class Ps extends Se{constructor({audio_codes:I}){super(),this.audio_codes=I}}class mh extends Se{constructor({audio_values:I}){super(),this.audio_values=I}}class Ni extends ka{async encode(I){return new Ps(await Y(this.sessions.encoder_model,I))}async decode(I){return new mh(await Y(this.sessions.decoder_model,I))}}class Al extends ka{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"encoder_model"})}}class Rc extends ka{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"decoder_model"})}}class hi extends Z{main_input_name="input_values";forward_params=["input_values"]}class ph extends Se{constructor({audio_codes:I}){super(),this.audio_codes=I}}class td extends Se{constructor({audio_values:I}){super(),this.audio_values=I}}class Fp extends hi{async encode(I){return new ph(await Y(this.sessions.encoder_model,I))}async decode(I){return new td(await Y(this.sessions.decoder_model,I))}}class nd extends hi{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"encoder_model"})}}class rd extends hi{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"decoder_model"})}}class Aa extends Z{main_input_name="input_values";forward_params=["input_values"]}class Xr extends Aa{async encode(I){return await Y(this.sessions.encoder_model,I)}async decode(I){return await Y(this.sessions.decoder_model,I)}}class Uo extends Aa{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"encoder_model"})}}class Il extends Aa{static async from_pretrained(I,te={}){return super.from_pretrained(I,{...te,model_file_name:te.model_file_name??"decoder_model"})}}class mn{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(I,{progress_callback:te=null,config:pe=null,cache_dir:Ce=null,local_files_only:$e=!1,revision:Qe="main",model_file_name:st=null,subfolder:pt="onnx",device:$t=null,dtype:Kt=null,use_external_data_format:Wt=null,session_options:tn={}}={}){const Lt={progress_callback:te,config:pe,cache_dir:Ce,local_files_only:$e,revision:Qe,model_file_name:st,subfolder:pt,device:$t,dtype:Kt,use_external_data_format:Wt,session_options:tn};if(Lt.config=await i.AutoConfig.from_pretrained(I,Lt),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const Mn=Lt.config.model_type;for(const Rt of this.MODEL_CLASS_MAPPINGS){let Ft=Rt.get(Mn);if(!Ft){for(const _n of Rt.values())if(_n[0]===Mn){Ft=_n;break}if(!Ft)continue}return await Ft[1].from_pretrained(I,Lt)}if(this.BASE_IF_FAIL)return yh.has(Mn)||console.warn(`Unknown model class "${Mn}", attempting to construct from base class.`),await Z.from_pretrained(I,Lt);throw Error(`Unsupported model type: ${Mn}`)}}const Np=new Map([["bert",["BertModel",Ge]],["neobert",["NeoBertModel",ft]],["modernbert",["ModernBertModel",ut]],["nomic_bert",["NomicBertModel",an]],["roformer",["RoFormerModel",is]],["electra",["ElectraModel",Xt]],["esm",["EsmModel",So]],["convbert",["ConvBertModel",ra]],["camembert",["CamembertModel",fe]],["deberta",["DebertaModel",Gt]],["deberta-v2",["DebertaV2Model",Hn]],["mpnet",["MPNetModel",Eo]],["albert",["AlbertModel",xt]],["distilbert",["DistilBertModel",ni]],["roberta",["RobertaModel",Qs]],["xlm",["XLMModel",Kd]],["xlm-roberta",["XLMRobertaModel",Xd]],["clap",["ClapModel",so]],["clip",["CLIPModel",rc]],["clipseg",["CLIPSegModel",Mu]],["chinese_clip",["ChineseCLIPModel",ac]],["siglip",["SiglipModel",ic]],["jina_clip",["JinaCLIPModel",rl]],["mobilebert",["MobileBertModel",ci]],["squeezebert",["SqueezeBertModel",ie]],["wav2vec2",["Wav2Vec2Model",op]],["wav2vec2-bert",["Wav2Vec2BertModel",gp]],["unispeech",["UniSpeechModel",Br]],["unispeech-sat",["UniSpeechSatModel",hp]],["hubert",["HubertModel",vp]],["wavlm",["WavLMModel",Xf]],["audio-spectrogram-transformer",["ASTModel",_u]],["vits",["VitsModel",Qr]],["pyannote",["PyAnnoteModel",Qf]],["wespeaker-resnet",["WeSpeakerResNetModel",Y_]],["detr",["DetrModel",Mf]],["rt_detr",["RTDetrModel",Ro]],["rt_detr_v2",["RTDetrV2Model",io]],["rf_detr",["RFDetrModel",ju]],["d_fine",["DFineModel",xc]],["table-transformer",["TableTransformerModel",Cr]],["vit",["ViTModel",vs]],["ijepa",["IJepaModel",_m]],["pvt",["PvtModel",vm]],["vit_msn",["ViTMSNModel",bm]],["vit_mae",["ViTMAEModel",bs]],["groupvit",["GroupViTModel",Lu]],["fastvit",["FastViTModel",Ru]],["mobilevit",["MobileViTModel",bf]],["mobilevitv2",["MobileViTV2Model",Lo]],["owlvit",["OwlViTModel",xf]],["owlv2",["Owlv2Model",Mm]],["beit",["BeitModel",Nu]],["deit",["DeiTModel",$m]],["hiera",["HieraModel",Cf]],["convnext",["ConvNextModel",Vm]],["convnextv2",["ConvNextV2Model",Wm]],["dinov2",["Dinov2Model",Km]],["dinov2_with_registers",["Dinov2WithRegistersModel",Zm]],["dinov3_vit",["DINOv3ViTModel",Xm]],["dinov3_convnext",["DINOv3ConvNextModel",Z_]],["resnet",["ResNetModel",Lr]],["swin",["SwinModel",Vu]],["swin2sr",["Swin2SRModel",If]],["donut-swin",["DonutSwinModel",Wu]],["yolos",["YolosModel",Vf]],["dpt",["DPTModel",Pm]],["glpn",["GLPNModel",Bm]],["hifigan",["SpeechT5HifiGan",tv]],["efficientnet",["EfficientNetModel",Ip]],["decision_transformer",["DecisionTransformerModel",ed]],["patchtst",["PatchTSTForPrediction",wn]],["patchtsmixer",["PatchTSMixerForPrediction",Bo]],["mobilenet_v1",["MobileNetV1Model",Op]],["mobilenet_v2",["MobileNetV2Model",dh]],["mobilenet_v3",["MobileNetV3Model",Cl]],["mobilenet_v4",["MobileNetV4Model",Dp]],["maskformer",["MaskFormerModel",Fm]],["mgp-str",["MgpstrForSceneTextRecognition",Yn]],["style_text_to_speech_2",["StyleTextToSpeech2Model",xp]]]),jp=new Map([["t5",["T5Model",Vt]],["longt5",["LongT5Model",In]],["mt5",["MT5Model",vi]],["bart",["BartModel",Jr]],["mbart",["MBartModel",Ti]],["marian",["MarianModel",ap]],["whisper",["WhisperModel",Jd]],["m2m_100",["M2M100Model",Kf]],["blenderbot",["BlenderbotModel",nr]],["blenderbot-small",["BlenderbotSmallModel",ai]]]),sv=new Map([["mimi",["MimiModel",Ni]],["dac",["DacModel",Fp]],["snac",["SnacModel",Xr]]]),id=new Map([["bloom",["BloomModel",fc]],["jais",["JAISModel",sc]],["gpt2",["GPT2Model",ol]],["gptj",["GPTJModel",w]],["gpt_bigcode",["GPTBigCodeModel",q]],["gpt_neo",["GPTNeoModel",wa]],["gpt_neox",["GPTNeoXModel",ul]],["codegen",["CodeGenModel",qe]],["llama",["LlamaModel",At]],["nanochat",["NanoChatModel",sa]],["arcee",["ArceeModel",of]],["lfm2",["Lfm2Model",sf]],["smollm3",["SmolLM3Model",Su]],["exaone",["ExaoneModel",uf]],["olmo",["OlmoModel",fl]],["olmo2",["Olmo2Model",Yi]],["mobilellm",["MobileLLMModel",cm]],["granite",["GraniteModel",Ma]],["granitemoehybrid",["GraniteMoeHybridModel",um]],["cohere",["CohereModel",dm]],["gemma",["GemmaModel",Tn]],["gemma2",["Gemma2Model",ff]],["vaultgemma",["VaultGemmaModel",fm]],["gemma3_text",["Gemma3Model",mf]],["helium",["HeliumModel",Oi]],["glm",["GlmModel",sm]],["openelm",["OpenELMModel",gs]],["qwen2",["Qwen2Model",eo]],["qwen3",["Qwen3Model",pl]],["phi",["PhiModel",hm]],["phi3",["Phi3Model",W_]],["mpt",["MptModel",gl]],["opt",["OPTModel",gm]],["mistral",["MistralModel",Ac]],["ministral",["MinistralModel",nv]],["ministral3",["Ministral3Model",No]],["ernie4_5",["Ernie4_5Model",Ic]],["starcoder2",["Starcoder2Model",ah]],["falcon",["FalconModel",oh]],["stablelm",["StableLmModel",lo]],["modernbert-decoder",["ModernBertDecoderModel",Qt]]]),ad=new Map([["speecht5",["SpeechT5ForSpeechToText",oo]],["whisper",["WhisperForConditionalGeneration",Zl]],["lite-whisper",["LiteWhisperForConditionalGeneration",vu]],["moonshine",["MoonshineForConditionalGeneration",Ql]]]),ji=new Map([["speecht5",["SpeechT5ForTextToSpeech",th]]]),Bp=new Map([["vits",["VitsModel",Qr]],["musicgen",["MusicgenForConditionalGeneration",uh]],["supertonic",["SupertonicForConditionalGeneration",Ea]]]),Pi=new Map([["bert",["BertForSequenceClassification",Ie]],["neobert",["NeoBertForSequenceClassification",ot]],["modernbert",["ModernBertForSequenceClassification",kt]],["roformer",["RoFormerForSequenceClassification",pa]],["electra",["ElectraForSequenceClassification",L]],["esm",["EsmForSequenceClassification",qi]],["convbert",["ConvBertForSequenceClassification",Wn]],["camembert",["CamembertForSequenceClassification",je]],["deberta",["DebertaForSequenceClassification",rn]],["deberta-v2",["DebertaV2ForSequenceClassification",Ai]],["mpnet",["MPNetForSequenceClassification",va]],["albert",["AlbertForSequenceClassification",bt]],["distilbert",["DistilBertForSequenceClassification",ri]],["roberta",["RobertaForSequenceClassification",os]],["xlm",["XLMForSequenceClassification",Kl]],["xlm-roberta",["XLMRobertaForSequenceClassification",ql]],["bart",["BartForSequenceClassification",sr]],["mbart",["MBartForSequenceClassification",Dr]],["mobilebert",["MobileBertForSequenceClassification",dt]],["squeezebert",["SqueezeBertForSequenceClassification",me]]]),Up=new Map([["bert",["BertForTokenClassification",nt]],["neobert",["NeoBertForTokenClassification",rt]],["modernbert",["ModernBertForTokenClassification",jt]],["roformer",["RoFormerForTokenClassification",Jn]],["electra",["ElectraForTokenClassification",de]],["esm",["EsmForTokenClassification",ii]],["convbert",["ConvBertForTokenClassification",ga]],["camembert",["CamembertForTokenClassification",mt]],["deberta",["DebertaForTokenClassification",cn]],["deberta-v2",["DebertaV2ForTokenClassification",Or]],["mpnet",["MPNetForTokenClassification",Zs]],["distilbert",["DistilBertForTokenClassification",or]],["roberta",["RobertaForTokenClassification",Xs]],["xlm",["XLMForTokenClassification",Zd]],["xlm-roberta",["XLMRobertaForTokenClassification",pu]]]),gh=new Map([["t5",["T5ForConditionalGeneration",tr]],["longt5",["LongT5ForConditionalGeneration",jn]],["mt5",["MT5ForConditionalGeneration",Zi]],["bart",["BartForConditionalGeneration",Xn]],["mbart",["MBartForConditionalGeneration",Ii]],["marian",["MarianMTModel",Wf]],["m2m_100",["M2M100ForConditionalGeneration",qf]],["blenderbot",["BlenderbotForConditionalGeneration",Sn]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",aa]]]),Vp=new Map([["bloom",["BloomForCausalLM",hc]],["gpt2",["GPT2LMHeadModel",oc]],["jais",["JAISLMHeadModel",Ao]],["gptj",["GPTJForCausalLM",z]],["gpt_bigcode",["GPTBigCodeForCausalLM",re]],["gpt_neo",["GPTNeoForCausalLM",cl]],["gpt_neox",["GPTNeoXForCausalLM",lc]],["codegen",["CodeGenForCausalLM",ct]],["llama",["LlamaForCausalLM",Yt]],["nanochat",["NanoChatForCausalLM",Ei]],["llama4_text",["Llama4ForCausalLM",$n]],["arcee",["ArceeForCausalLM",Tu]],["lfm2",["Lfm2ForCausalLM",ms]],["smollm3",["SmolLM3ForCausalLM",dl]],["exaone",["ExaoneForCausalLM",lm]],["olmo",["OlmoForCausalLM",Pu]],["olmo2",["Olmo2ForCausalLM",Ji]],["mobilellm",["MobileLLMForCausalLM",Xi]],["granite",["GraniteForCausalLM",Ta]],["granitemoehybrid",["GraniteMoeHybridForCausalLM",df]],["cohere",["CohereForCausalLM",oi]],["gemma",["GemmaForCausalLM",Oo]],["gemma2",["Gemma2ForCausalLM",Do]],["vaultgemma",["VaultGemmaForCausalLM",ml]],["gemma3_text",["Gemma3ForCausalLM",uc]],["helium",["HeliumForCausalLM",cf]],["glm",["GlmForCausalLM",Eu]],["openelm",["OpenELMForCausalLM",Ya]],["qwen2",["Qwen2ForCausalLM",pf]],["qwen3",["Qwen3ForCausalLM",Iu]],["phi",["PhiForCausalLM",G_]],["phi3",["Phi3ForCausalLM",jr]],["mpt",["MptForCausalLM",_l]],["opt",["OPTForCausalLM",H_]],["mbart",["MBartForCausalLM",Si]],["mistral",["MistralForCausalLM",cr]],["ministral",["MinistralForCausalLM",Ep]],["ministral3",["Ministral3ForCausalLM",$p]],["ernie4_5",["Ernie4_5ForCausalLM",$a]],["starcoder2",["Starcoder2ForCausalLM",Pp]],["falcon",["FalconForCausalLM",Xu]],["trocr",["TrOCRForCausalLM",Tp]],["stablelm",["StableLmForCausalLM",Ap]],["modernbert-decoder",["ModernBertDecoderForCausalLM",kn]],["phi3_v",["Phi3VForCausalLM",nc]]]),Cs=new Map([["multi_modality",["MultiModalityCausalLM",av]]]),od=new Map([["bert",["BertForMaskedLM",Ke]],["neobert",["NeoBertForMaskedLM",Fe]],["modernbert",["ModernBertForMaskedLM",et]],["roformer",["RoFormerForMaskedLM",as]],["electra",["ElectraForMaskedLM",_a]],["esm",["EsmForMaskedLM",Ki]],["convbert",["ConvBertForMaskedLM",Bt]],["camembert",["CamembertForMaskedLM",xe]],["deberta",["DebertaForMaskedLM",yt]],["deberta-v2",["DebertaV2ForMaskedLM",mr]],["mpnet",["MPNetForMaskedLM",Nr]],["albert",["AlbertForMaskedLM",vt]],["distilbert",["DistilBertForMaskedLM",Mi]],["roberta",["RobertaForMaskedLM",Hl]],["xlm",["XLMWithLMHeadModel",qd]],["xlm-roberta",["XLMRobertaForMaskedLM",mu]],["mobilebert",["MobileBertForMaskedLM",lt]],["squeezebert",["SqueezeBertForMaskedLM",he]]]),_h=new Map([["bert",["BertForQuestionAnswering",Ae]],["neobert",["NeoBertForQuestionAnswering",St]],["roformer",["RoFormerForQuestionAnswering",Ir]],["electra",["ElectraForQuestionAnswering",J]],["convbert",["ConvBertForQuestionAnswering",ia]],["camembert",["CamembertForQuestionAnswering",Et]],["deberta",["DebertaForQuestionAnswering",fr]],["deberta-v2",["DebertaV2ForQuestionAnswering",er]],["mpnet",["MPNetForQuestionAnswering",Me]],["albert",["AlbertForQuestionAnswering",Mt]],["distilbert",["DistilBertForQuestionAnswering",Tr]],["roberta",["RobertaForQuestionAnswering",hu]],["xlm",["XLMForQuestionAnswering",Qd]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Yd]],["mobilebert",["MobileBertForQuestionAnswering",Ct]],["squeezebert",["SqueezeBertForQuestionAnswering",ze]]]),ks=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Xl]],["idefics3",["Idefics3ForConditionalGeneration",ya]],["smolvlm",["SmolVLMForConditionalGeneration",el]]]),Gp=new Map([["llava",["LlavaForConditionalGeneration",Yl]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",ef]],["moondream1",["Moondream1ForConditionalGeneration",tf]],["florence2",["Florence2ForConditionalGeneration",Jl]],["qwen2-vl",["Qwen2VLForConditionalGeneration",si]],["idefics3",["Idefics3ForConditionalGeneration",ya]],["smolvlm",["SmolVLMForConditionalGeneration",el]],["paligemma",["PaliGemmaForConditionalGeneration",rf]],["llava_qwen2",["LlavaQwen2ForCausalLM",ec]],["gemma3n",["Gemma3nForConditionalGeneration",Js]],["mistral3",["Mistral3ForConditionalGeneration",us]]]),Wp=new Map([["ultravox",["UltravoxModel",Ca]],["voxtral",["VoxtralForConditionalGeneration",kr]]]),lv=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Xl]]]),Hp=new Map([["vit",["ViTForImageClassification",_f]],["ijepa",["IJepaForImageClassification",vl]],["pvt",["PvtForImageClassification",ym]],["vit_msn",["ViTMSNForImageClassification",yl]],["fastvit",["FastViTForImageClassification",wm]],["mobilevit",["MobileViTForImageClassification",wf]],["mobilevitv2",["MobileViTV2ForImageClassification",_c]],["beit",["BeitForImageClassification",Sm]],["deit",["DeiTForImageClassification",K_]],["hiera",["HieraForImageClassification",kf]],["convnext",["ConvNextForImageClassification",Ff]],["convnextv2",["ConvNextV2ForImageClassification",Hm]],["dinov2",["Dinov2ForImageClassification",qm]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",Qm]],["resnet",["ResNetForImageClassification",Uu]],["swin",["SwinForImageClassification",Af]],["segformer",["SegformerForImageClassification",kp]],["efficientnet",["EfficientNetForImageClassification",iv]],["mobilenet_v1",["MobileNetV1ForImageClassification",co]],["mobilenet_v2",["MobileNetV2ForImageClassification",fh]],["mobilenet_v3",["MobileNetV3ForImageClassification",Dc]],["mobilenet_v4",["MobileNetV4ForImageClassification",zp]]]),sd=new Map([["detr",["DetrForObjectDetection",zi]],["rt_detr",["RTDetrForObjectDetection",Ri]],["rt_detr_v2",["RTDetrV2ForObjectDetection",un]],["rf_detr",["RFDetrForObjectDetection",xl]],["d_fine",["DFineForObjectDetection",Ml]],["table-transformer",["TableTransformerForObjectDetection",Ef]],["yolos",["YolosForObjectDetection",ep]]]),vh=new Map([["owlvit",["OwlViTForObjectDetection",vc]],["owlv2",["Owlv2ForObjectDetection",Tm]],["grounding-dino",["GroundingDinoForObjectDetection",Jm]]]),Fc=new Map([["detr",["DetrForSegmentation",Li]],["clipseg",["CLIPSegForImageSegmentation",ui]]]),cv=new Map([["segformer",["SegformerForSemanticSegmentation",gr]],["sapiens",["SapiensForSemanticSegmentation",zf]],["swin",["SwinForSemanticSegmentation",ao]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",$s]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",ca]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",zc]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",Lc]]]),uv=new Map([["detr",["DetrForSegmentation",Li]],["maskformer",["MaskFormerForInstanceSegmentation",Nm]]]),Kp=new Map([["sam",["SamModel",X_]],["sam2",["Sam2Model",Sl]],["edgetam",["EdgeTamModel",rp]],["sam3_tracker",["Sam3TrackerModel",ip]]]),qp=new Map([["wav2vec2",["Wav2Vec2ForCTC",Ss]],["wav2vec2-bert",["Wav2Vec2BertForCTC",J_]],["unispeech",["UniSpeechForCTC",li]],["unispeech-sat",["UniSpeechSatForCTC",mp]],["wavlm",["WavLMForCTC",Yf]],["hubert",["HubertForCTC",yp]],["parakeet_ctc",["ParakeetForCTC",Ku]]]),Ol=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",sp]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",qu]],["unispeech",["UniSpeechForSequenceClassification",fp]],["unispeech-sat",["UniSpeechSatForSequenceClassification",Pc]],["wavlm",["WavLMForSequenceClassification",wp]],["hubert",["HubertForSequenceClassification",bp]],["audio-spectrogram-transformer",["ASTForAudioClassification",Ys]]]),ld=new Map([["wavlm",["WavLMForXVector",Jf]]]),Zp=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",pp]],["wavlm",["WavLMForAudioFrameClassification",Zu]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",lp]],["pyannote",["PyAnnoteForAudioFrameClassification",up]]]),Qp=new Map([["vitmatte",["VitMatteForImageMatting",xm]]]),dv=new Map([["patchtst",["PatchTSTForPrediction",Un]],["patchtsmixer",["PatchTSMixerForPrediction",kl]]]),Xp=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Of]]]),Yp=new Map([["dpt",["DPTForDepthEstimation",Cm]],["depth_anything",["DepthAnythingForDepthEstimation",Am]],["glpn",["GLPNForDepthEstimation",Tl]],["sapiens",["SapiensForDepthEstimation",Im]],["depth_pro",["DepthProForDepthEstimation",Dm]],["metric3d",["Metric3DForDepthEstimation",Lf]],["metric3dv2",["Metric3Dv2ForDepthEstimation",Rm]]]),Jp=new Map([["sapiens",["SapiensForNormalEstimation",q_]]]),cd=new Map([["vitpose",["VitPoseForPoseEstimation",zu]]]),eg=new Map([["clip",["CLIPVisionModelWithProjection",tl]],["siglip",["SiglipVisionModel",Ot]],["jina_clip",["JinaCLIPVisionModel",il]]]),tg=[[Np,$.EncoderOnly],[jp,$.EncoderDecoder],[id,$.DecoderOnly],[sv,$.AutoEncoder],[Pi,$.EncoderOnly],[Up,$.EncoderOnly],[gh,$.Seq2Seq],[ad,$.Seq2Seq],[Vp,$.DecoderOnly],[Cs,$.MultiModality],[od,$.EncoderOnly],[_h,$.EncoderOnly],[ks,$.Vision2Seq],[Gp,$.ImageTextToText],[Wp,$.AudioTextToText],[Hp,$.EncoderOnly],[Fc,$.EncoderOnly],[uv,$.EncoderOnly],[cv,$.EncoderOnly],[Qp,$.EncoderOnly],[dv,$.EncoderOnly],[Xp,$.EncoderOnly],[Yp,$.EncoderOnly],[Jp,$.EncoderOnly],[cd,$.EncoderOnly],[sd,$.EncoderOnly],[vh,$.EncoderOnly],[Kp,$.MaskGeneration],[qp,$.EncoderOnly],[Ol,$.EncoderOnly],[ji,$.Seq2Seq],[Bp,$.EncoderOnly],[ld,$.EncoderOnly],[Zp,$.EncoderOnly],[eg,$.EncoderOnly]];for(const[k,I]of tg)for(const[te,pe]of k.values())P.set(te,I),S.set(pe,te),C.set(te,pe);const qn=[["MusicgenForConditionalGeneration",uh,$.Musicgen],["Phi3VForCausalLM",nc,$.Phi3V],["CLIPTextModelWithProjection",Co,$.EncoderOnly],["SiglipTextModel",ko,$.EncoderOnly],["JinaCLIPTextModel",Qi,$.EncoderOnly],["ClapTextModelWithProjection",Ur,$.EncoderOnly],["ClapAudioModelWithProjection",sh,$.EncoderOnly],["DacEncoderModel",nd,$.EncoderOnly],["DacDecoderModel",rd,$.EncoderOnly],["MimiEncoderModel",Al,$.EncoderOnly],["MimiDecoderModel",Rc,$.EncoderOnly],["SnacEncoderModel",Uo,$.EncoderOnly],["SnacDecoderModel",Il,$.EncoderOnly],["Gemma3nForConditionalGeneration",Js,$.ImageAudioTextToText],["SupertonicForConditionalGeneration",Ea,$.Supertonic]];for(const[k,I,te]of qn)P.set(k,te),S.set(I,k),C.set(k,I);const yh=new Map([["modnet",Fc],["birefnet",Fc],["isnet",Fc],["ben",Fc]]);for(const[k,I]of yh.entries())I.set(k,["PreTrainedModel",Z]),P.set(k,$.EncoderOnly),S.set(Z,k),C.set(k,Z);class h0 extends mn{static MODEL_CLASS_MAPPINGS=tg.map(I=>I[0]);static BASE_IF_FAIL=!0}class fv extends mn{static MODEL_CLASS_MAPPINGS=[Pi]}class m0 extends mn{static MODEL_CLASS_MAPPINGS=[Up]}class p0 extends mn{static MODEL_CLASS_MAPPINGS=[gh]}class g0 extends mn{static MODEL_CLASS_MAPPINGS=[ad]}class bh extends mn{static MODEL_CLASS_MAPPINGS=[ji]}class Nc extends mn{static MODEL_CLASS_MAPPINGS=[Bp]}class ng extends mn{static MODEL_CLASS_MAPPINGS=[Vp]}class wh extends mn{static MODEL_CLASS_MAPPINGS=[od]}class rg extends mn{static MODEL_CLASS_MAPPINGS=[_h]}class As extends mn{static MODEL_CLASS_MAPPINGS=[ks]}class uo extends mn{static MODEL_CLASS_MAPPINGS=[Hp]}class ud extends mn{static MODEL_CLASS_MAPPINGS=[Fc]}class _0 extends mn{static MODEL_CLASS_MAPPINGS=[cv]}class hv extends mn{static MODEL_CLASS_MAPPINGS=[uv]}class mv extends mn{static MODEL_CLASS_MAPPINGS=[sd]}class pv extends mn{static MODEL_CLASS_MAPPINGS=[vh]}class gv extends mn{static MODEL_CLASS_MAPPINGS=[Kp]}class v0 extends mn{static MODEL_CLASS_MAPPINGS=[qp]}class ig extends mn{static MODEL_CLASS_MAPPINGS=[Ol]}class _v extends mn{static MODEL_CLASS_MAPPINGS=[ld]}class vv extends mn{static MODEL_CLASS_MAPPINGS=[Zp]}class y0 extends mn{static MODEL_CLASS_MAPPINGS=[lv]}class ag extends mn{static MODEL_CLASS_MAPPINGS=[Qp]}class og extends mn{static MODEL_CLASS_MAPPINGS=[Xp]}class b0 extends mn{static MODEL_CLASS_MAPPINGS=[Yp]}class w0 extends mn{static MODEL_CLASS_MAPPINGS=[Jp]}class dd extends mn{static MODEL_CLASS_MAPPINGS=[cd]}class x0 extends mn{static MODEL_CLASS_MAPPINGS=[eg]}class yv extends mn{static MODEL_CLASS_MAPPINGS=[Gp]}class xn extends mn{static MODEL_CLASS_MAPPINGS=[Wp]}class sg extends Se{constructor({logits:I,past_key_values:te,encoder_outputs:pe,decoder_attentions:Ce=null,cross_attentions:$e=null}){super(),this.logits=I,this.past_key_values=te,this.encoder_outputs=pe,this.decoder_attentions=Ce,this.cross_attentions=$e}}class qt extends Se{constructor({logits:I,...te}){super(),this.logits=I;const pe=Object.values(te);pe.length>0&&(this.attentions=pe)}}class xh extends Se{constructor({logits:I,embeddings:te}){super(),this.logits=I,this.embeddings=te}}class Vr extends Se{constructor({logits:I}){super(),this.logits=I}}class Gr extends Se{constructor({logits:I}){super(),this.logits=I}}class Wr extends Se{constructor({start_logits:I,end_logits:te}){super(),this.start_logits=I,this.end_logits=te}}class Ia extends Se{constructor({logits:I}){super(),this.logits=I}}class M0 extends Se{constructor({logits:I,past_key_values:te}){super(),this.logits=I,this.past_key_values=te}}class lg extends Se{constructor({alphas:I}){super(),this.alphas=I}}class bv extends Se{constructor({waveform:I,spectrogram:te}){super(),this.waveform=I,this.spectrogram=te}}}),"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":((e,t,n)=>{n.r(t),n.d(t,{ASTFeatureExtractor:()=>o});var i=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var r=n("./src/utils/audio.js");class o extends i.FeatureExtractor{constructor(c){super(c);const d=this.config.sampling_rate,f=(0,r.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(d/2),d,null,"kaldi",!0);this.mel_filters=f,this.window=(0,r.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(c,d){return(0,r.spectrogram)(c,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:d,transpose:!0})}async _call(c){(0,i.validate_audio_inputs)(c,"ASTFeatureExtractor");const d=await this._extract_fbank_features(c,this.config.max_length);if(this.config.do_normalize){const f=this.std*2,p=d.data;for(let h=0;h<p.length;++h)p[h]=(p[h]-this.mean)/f}return{input_values:d.unsqueeze_(0)}}}}),"./src/models/auto/feature_extraction_auto.js":((e,t,n)=>{n.r(t),n.d(t,{AutoFeatureExtractor:()=>l});var i=n("./src/utils/constants.js"),r=n("./src/utils/hub.js");n("./src/base/feature_extraction_utils.js");var o=n("./src/models/feature_extractors.js");class l{static async from_pretrained(d,f={}){const p=await(0,r.getModelJSON)(d,i.FEATURE_EXTRACTOR_NAME,!0,f),h=p.feature_extractor_type,m=o[h];if(!m)throw new Error(`Unknown feature_extractor_type: '${h}'. Please report this at ${i.GITHUB_ISSUE_URL}.`);return new m(p)}}}),"./src/models/auto/image_processing_auto.js":((e,t,n)=>{n.r(t),n.d(t,{AutoImageProcessor:()=>c});var i=n("./src/utils/constants.js"),r=n("./src/utils/hub.js"),o=n("./src/base/image_processors_utils.js"),l=n("./src/models/image_processors.js");class c{static async from_pretrained(f,p={}){const h=await(0,r.getModelJSON)(f,i.IMAGE_PROCESSOR_NAME,!0,p),m=h.image_processor_type??h.feature_extractor_type;let _=l[m?.replace(/Fast$/,"")];return _||(m!==void 0&&console.warn(`Image processor type '${m}' not found, assuming base ImageProcessor. Please report this at ${i.GITHUB_ISSUE_URL}.`),_=o.ImageProcessor),new _(h)}}}),"./src/models/auto/processing_auto.js":((e,t,n)=>{n.r(t),n.d(t,{AutoProcessor:()=>f});var i=n("./src/utils/constants.js"),r=n("./src/utils/hub.js"),o=n("./src/base/processing_utils.js"),l=n("./src/models/processors.js"),c=n("./src/models/image_processors.js"),d=n("./src/models/feature_extractors.js");class f{static async from_pretrained(h,m={}){const _=await(0,r.getModelJSON)(h,i.IMAGE_PROCESSOR_NAME,!0,m),{image_processor_type:v,feature_extractor_type:b,processor_class:D}=_;if(D&&l[D])return l[D].from_pretrained(h,m);if(!v&&!b)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const T={};if(v){const A=c[v.replace(/Fast$/,"")];if(!A)throw new Error(`Unknown image_processor_type: '${v}'.`);T.image_processor=new A(_)}if(b){const A=c[b];if(A)T.image_processor=new A(_);else{const $=d[b];if(!$)throw new Error(`Unknown feature_extractor_type: '${b}'.`);T.feature_extractor=new $(_)}}const E={};return new o.Processor(E,T,null)}}}),"./src/models/beit/image_processing_beit.js":((e,t,n)=>{n.r(t),n.d(t,{BeitFeatureExtractor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/bit/image_processing_bit.js":((e,t,n)=>{n.r(t),n.d(t,{BitImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/chinese_clip/image_processing_chinese_clip.js":((e,t,n)=>{n.r(t),n.d(t,{ChineseCLIPFeatureExtractor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/clap/feature_extraction_clap.js":((e,t,n)=>{n.r(t),n.d(t,{ClapFeatureExtractor:()=>o});var i=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var r=n("./src/utils/audio.js");class o extends i.FeatureExtractor{constructor(c){super(c),this.mel_filters=(0,r.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,r.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,r.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(c,d,f,p){let h;const m=c.length-d;if(m>0)if(f==="rand_trunc"){const _=Math.floor(Math.random()*(m+1));c=c.subarray(_,_+d),h=await this._extract_fbank_features(c,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${f}" not implemented`);else{if(m<0){let _=new Float64Array(d);if(_.set(c),p==="repeat")for(let v=c.length;v<d;v+=c.length)_.set(c.subarray(0,Math.min(c.length,d-v)),v);else if(p==="repeatpad")for(let v=c.length;v<-m;v+=c.length)_.set(c,v);c=_}if(f==="fusion")throw new Error(`Truncation strategy "${f}" not implemented`);h=await this._extract_fbank_features(c,this.mel_filters_slaney,this.config.nb_max_samples)}return h.unsqueeze_(0)}async _extract_fbank_features(c,d,f=null){return(0,r.spectrogram)(c,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:d,log_mel:"dB",max_num_frames:f,do_pad:!1,transpose:!0})}async _call(c,{max_length:d=null}={}){return(0,i.validate_audio_inputs)(c,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(c,d??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}}),"./src/models/clip/image_processing_clip.js":((e,t,n)=>{n.r(t),n.d(t,{CLIPFeatureExtractor:()=>o,CLIPImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/convnext/image_processing_convnext.js":((e,t,n)=>{n.r(t),n.d(t,{ConvNextFeatureExtractor:()=>o,ConvNextImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{constructor(c){super(c),this.crop_pct=this.config.crop_pct??224/256}async resize(c){const d=this.size?.shortest_edge;if(d===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(d<384){const f=Math.floor(d/this.crop_pct),[p,h]=this.get_resize_output_image_size(c,{shortest_edge:f});c=await c.resize(p,h,{resample:this.resample}),c=await c.center_crop(d,d)}else c=await c.resize(d,d,{resample:this.resample});return c}}class o extends r{}}),"./src/models/dac/feature_extraction_dac.js":((e,t,n)=>{n.r(t),n.d(t,{DacFeatureExtractor:()=>r});var i=n("./src/models/encodec/feature_extraction_encodec.js");class r extends i.EncodecFeatureExtractor{}}),"./src/models/deit/image_processing_deit.js":((e,t,n)=>{n.r(t),n.d(t,{DeiTFeatureExtractor:()=>o,DeiTImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/detr/image_processing_detr.js":((e,t,n)=>{n.r(t),n.d(t,{DetrFeatureExtractor:()=>l,DetrImageProcessor:()=>o});var i=n("./src/base/image_processors_utils.js"),r=n("./src/utils/tensor.js");class o extends i.ImageProcessor{async _call(d){const f=await super._call(d),p=[f.pixel_values.dims[0],64,64],h=(0,r.full)(p,1n);return{...f,pixel_mask:h}}post_process_object_detection(...d){return(0,i.post_process_object_detection)(...d)}post_process_panoptic_segmentation(...d){return(0,i.post_process_panoptic_segmentation)(...d)}post_process_instance_segmentation(...d){return(0,i.post_process_instance_segmentation)(...d)}}class l extends o{}}),"./src/models/dinov3_vit/image_processing_dinov3_vit.js":((e,t,n)=>{n.r(t),n.d(t,{DINOv3ViTImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/donut/image_processing_donut.js":((e,t,n)=>{n.r(t),n.d(t,{DonutFeatureExtractor:()=>o,DonutImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{pad_image(c,d,f,p={}){const[h,m,_]=d;let v=this.image_mean;Array.isArray(this.image_mean)||(v=new Array(_).fill(v));let b=this.image_std;Array.isArray(b)||(b=new Array(_).fill(v));const D=v.map((T,E)=>-T/b[E]);return super.pad_image(c,d,f,{center:!0,constant_values:D,...p})}}class o extends r{}}),"./src/models/dpt/image_processing_dpt.js":((e,t,n)=>{n.r(t),n.d(t,{DPTFeatureExtractor:()=>o,DPTImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/efficientnet/image_processing_efficientnet.js":((e,t,n)=>{n.r(t),n.d(t,{EfficientNetImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{constructor(l){super(l),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(c=>c*c))}}}),"./src/models/encodec/feature_extraction_encodec.js":((e,t,n)=>{n.r(t),n.d(t,{EncodecFeatureExtractor:()=>o});var i=n("./src/base/feature_extraction_utils.js"),r=n("./src/utils/tensor.js");class o extends i.FeatureExtractor{async _call(c){(0,i.validate_audio_inputs)(c,"EncodecFeatureExtractor"),c instanceof Float64Array&&(c=new Float32Array(c));const d=this.config.feature_size;if(c.length%d!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${d}).`);const f=[1,d,c.length/d];return{input_values:new r.Tensor("float32",c,f)}}}}),"./src/models/feature_extractors.js":((e,t,n)=>{n.r(t),n.d(t,{ASTFeatureExtractor:()=>i.ASTFeatureExtractor,ClapFeatureExtractor:()=>o.ClapFeatureExtractor,DacFeatureExtractor:()=>l.DacFeatureExtractor,EncodecFeatureExtractor:()=>r.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>c.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>T.ImageProcessor,MoonshineFeatureExtractor:()=>d.MoonshineFeatureExtractor,ParakeetFeatureExtractor:()=>f.ParakeetFeatureExtractor,PyAnnoteFeatureExtractor:()=>p.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>h.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>m.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>_.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>v.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>b.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>D.WhisperFeatureExtractor});var i=n("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),r=n("./src/models/encodec/feature_extraction_encodec.js"),o=n("./src/models/clap/feature_extraction_clap.js"),l=n("./src/models/dac/feature_extraction_dac.js"),c=n("./src/models/gemma3n/feature_extraction_gemma3n.js"),d=n("./src/models/moonshine/feature_extraction_moonshine.js"),f=n("./src/models/parakeet/feature_extraction_parakeet.js"),p=n("./src/models/pyannote/feature_extraction_pyannote.js"),h=n("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),m=n("./src/models/snac/feature_extraction_snac.js"),_=n("./src/models/speecht5/feature_extraction_speecht5.js"),v=n("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),b=n("./src/models/wespeaker/feature_extraction_wespeaker.js"),D=n("./src/models/whisper/feature_extraction_whisper.js"),T=n("./src/base/image_processors_utils.js")}),"./src/models/florence2/processing_florence2.js":((e,t,n)=>{n.r(t),n.d(t,{Florence2Processor:()=>l});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");class l extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor;constructor(d,f,p){super(d,f,p);const{tasks_answer_post_processing_type:h,task_prompts_without_inputs:m,task_prompts_with_input:_}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(h??{})),this.task_prompts_without_inputs=new Map(Object.entries(m??{})),this.task_prompts_with_input=new Map(Object.entries(_??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(d){typeof d=="string"&&(d=[d]);const f=[];for(const p of d)if(this.task_prompts_without_inputs.has(p))f.push(this.task_prompts_without_inputs.get(p));else{for(const[h,m]of this.task_prompts_with_input)if(p.includes(h)){f.push(m.replaceAll("{input}",p).replaceAll(h,""));break}f.length!==d.length&&f.push(p)}return f}post_process_generation(d,f,p){const h=this.tasks_answer_post_processing_type.get(f)??"pure_text";d=d.replaceAll("<s>","").replaceAll("</s>","");let m;switch(h){case"pure_text":m=d;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const _=h==="ocr"?"quad_boxes":"bboxes",v=d.matchAll(this.regexes[_]),b=[],D=[];for(const[T,E,...A]of v)b.push(E?E.trim():b.at(-1)??""),D.push(A.map(($,P)=>(Number($)+.5)/this.size_per_bin*p[P%2]));m={labels:b,[_]:D};break;default:throw new Error(`Task "${f}" (of type "${h}") not yet implemented.`)}return{[f]:m}}async _call(d,f=null,p={}){if(!d&&!f)throw new Error("Either text or images must be provided");const h=await this.image_processor(d,p),m=f?this.tokenizer(this.construct_prompts(f),p):{};return{...h,...m}}}}),"./src/models/gemma3n/feature_extraction_gemma3n.js":((e,t,n)=>{n.r(t),n.d(t,{Gemma3nAudioFeatureExtractor:()=>l});var i=n("./src/base/feature_extraction_utils.js"),r=n("./src/utils/tensor.js"),o=n("./src/utils/audio.js");class l extends i.FeatureExtractor{constructor(d){super(d);const{fft_length:f,feature_size:p,min_frequency:h,max_frequency:m,sampling_rate:_,frame_length:v}=this.config,b=(0,o.mel_filter_bank)(Math.floor(1+f/2),p,h,m,_,null,"htk",!1);this.mel_filters=b,this.window=(0,o.window_function)(v,"hann")}async _extract_fbank_features(d,f){return(0,o.spectrogram)(d,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(d,{max_length:f=48e4,truncation:p=!0,padding:h=!0,pad_to_multiple_of:m=128}={}){if((0,i.validate_audio_inputs)(d,"Gemma3nAudioFeatureExtractor"),p&&d.length>f&&(d=d.slice(0,f)),h&&d.length%m!==0){const b=m-d.length%m,D=new Float64Array(d.length+b);D.set(d),this.config.padding_value!==0&&D.fill(this.config.padding_value,d.length),d=D}const _=await this._extract_fbank_features(d,this.config.max_length),v=(0,r.full)([1,_.dims[0]],!0);return{input_features:_.unsqueeze_(0),input_features_mask:v}}}}),"./src/models/gemma3n/processing_gemma3n.js":((e,t,n)=>{n.r(t),n.d(t,{Gemma3nProcessor:()=>c});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/models/auto/feature_extraction_auto.js"),l=n("./src/tokenizers.js");n("./src/utils/image.js"),n("./src/utils/audio.js");class c extends i.Processor{static image_processor_class=r.AutoImageProcessor;static feature_extractor_class=o.AutoFeatureExtractor;static tokenizer_class=l.AutoTokenizer;static uses_processor_config=!0;static uses_chat_template_file=!0;constructor(f,p,h){super(f,p,h),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:m,boa_token:_,audio_token:v,eoa_token:b,image_token_id:D,boi_token:T,image_token:E,eoi_token:A}=this.tokenizer.config;this.audio_token_id=m,this.boa_token=_,this.audio_token=v;const $=v.repeat(this.audio_seq_length);this.full_audio_sequence=`

${_}${$}${b}

`,this.image_token_id=D,this.boi_token=T,this.image_token=E;const P=E.repeat(this.image_seq_length);this.full_image_sequence=`

${T}${P}${A}

`}async _call(f,p=null,h=null,m={}){typeof f=="string"&&(f=[f]);let _;h&&(_=await this.feature_extractor(h,m),f=f.map(D=>D.replaceAll(this.audio_token,this.full_audio_sequence)));let v;return p&&(v=await this.image_processor(p,m),f=f.map(D=>D.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(f,m),...v,..._}}}}),"./src/models/glpn/image_processing_glpn.js":((e,t,n)=>{n.r(t),n.d(t,{GLPNFeatureExtractor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/grounding_dino/image_processing_grounding_dino.js":((e,t,n)=>{n.r(t),n.d(t,{GroundingDinoImageProcessor:()=>o});var i=n("./src/base/image_processors_utils.js"),r=n("./src/utils/tensor.js");class o extends i.ImageProcessor{async _call(c){const d=await super._call(c),f=d.pixel_values.dims,p=(0,r.ones)([f[0],f[2],f[3]]);return{...d,pixel_mask:p}}}}),"./src/models/grounding_dino/processing_grounding_dino.js":((e,t,n)=>{n.r(t),n.d(t,{GroundingDinoProcessor:()=>d});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js"),l=n("./src/base/image_processors_utils.js");function c(f,p){const m=f.dims.at(-1)-1,_=f.tolist();_.fill(!1,0,1),_.fill(!1,m);const v=p.tolist();return _.map((b,D)=>b?D:null).filter(b=>b!==null).map(b=>v[b])}class d extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor;async _call(p,h,m={}){const _=p?await this.image_processor(p,m):{};return{...h?this.tokenizer(h,m):{},..._}}post_process_grounded_object_detection(p,h,{box_threshold:m=.25,text_threshold:_=.25,target_sizes:v=null}={}){const{logits:b,pred_boxes:D}=p,T=b.dims[0];if(v!==null&&v.length!==T)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const E=b.dims.at(1),A=b.sigmoid(),$=A.max(-1).tolist(),P=D.tolist().map(S=>S.map(O=>(0,l.center_to_corners_format)(O))),C=[];for(let S=0;S<T;++S){const O=v!==null?v[S]:null;O!==null&&(P[S]=P[S].map(K=>K.map((se,oe)=>se*O[(oe+1)%2])));const N=$[S],j=[],X=[],Y=[];for(let K=0;K<E;++K){const se=N[K];if(se<=m)continue;const oe=P[S][K],W=A[S][K];j.push(se),Y.push(oe);const ne=c(W.gt(_),h[S]);X.push(ne)}C.push({scores:j,boxes:Y,labels:this.batch_decode(X)})}return C}}}),"./src/models/idefics3/image_processing_idefics3.js":((e,t,n)=>{n.r(t),n.d(t,{Idefics3ImageProcessor:()=>o});var i=n("./src/base/image_processors_utils.js"),r=n("./src/utils/tensor.js");class o extends i.ImageProcessor{constructor(c){super(c),this.do_image_splitting=c.do_image_splitting??!0,this.max_image_size=c.max_image_size}get_resize_for_vision_encoder(c,d){let[f,p]=c.dims.slice(-2);const h=p/f;return p>=f?(p=Math.ceil(p/d)*d,f=Math.floor(p/h),f=Math.ceil(f/d)*d):(f=Math.ceil(f/d)*d,p=Math.floor(f*h),p=Math.ceil(p/d)*d),{height:f,width:p}}async _call(c,{do_image_splitting:d=null,return_row_col_info:f=!1}={}){let p;if(!Array.isArray(c))p=[[c]];else{if(c.length===0||!c[0])throw new Error("No images provided.");Array.isArray(c[0])?p=c:p=[c]}let h=[],m=[],_=[];const v=[],b=[];for(const S of p){let O=await Promise.all(S.map(X=>this.preprocess(X)));v.push(...O.map(X=>X.original_size)),b.push(...O.map(X=>X.reshaped_input_size)),O.forEach(X=>X.pixel_values.unsqueeze_(0));const{longest_edge:N}=this.max_image_size;let j;if(d??this.do_image_splitting){let X=new Array(O.length),Y=new Array(O.length);j=await Promise.all(O.map(async(K,se)=>{const oe=this.get_resize_for_vision_encoder(K.pixel_values,N),W=await(0,r.interpolate_4d)(K.pixel_values,{size:[oe.height,oe.width]}),{frames:ne,num_splits_h:ae,num_splits_w:ge}=await this.split_image(W,this.max_image_size);return X[se]=ae,Y[se]=ge,(0,r.cat)(ne,0)})),m.push(X),_.push(Y)}else{const X=[N,N];j=await Promise.all(O.map(Y=>(0,r.interpolate_4d)(Y.pixel_values,{size:X}))),m.push(new Array(O.length).fill(0)),_.push(new Array(O.length).fill(0))}h.push((0,r.cat)(j,0))}const D=h.length,[T,E,A,$]=h[0].dims;let P,C;if(D===1)P=h[0].unsqueeze_(0),C=(0,r.full)([D,T,A,$],!0);else{const S=Math.max(...h.map(j=>j.dims.at(0)));C=(0,r.full)([D,S,A,$],!0);const O=C.data,N=S*A*$;for(let j=0;j<D;++j){const X=h[j].dims[0];if(X<S){h[j]=(0,r.cat)([h[j],(0,r.full)([S-X,E,A,$],0)],0);const Y=j*N+X*A*$,K=(j+1)*N;O.fill(!1,Y,K)}}P=(0,r.stack)(h,0)}return{pixel_values:P,pixel_attention_mask:C,original_sizes:v,reshaped_input_sizes:b,...f?{rows:m,cols:_}:{}}}async split_image(c,{longest_edge:d}){const f=d,p=d,h=[],[m,_]=c.dims.slice(-2);let v=0,b=0;if(m>f||_>p){v=Math.ceil(m/f),b=Math.ceil(_/p);const D=Math.ceil(m/v),T=Math.ceil(_/b);for(let $=0;$<v;++$)for(let P=0;P<b;++P){let C,S,O,N;$===v-1?(S=m-D,N=m):(S=$*D,N=($+1)*D),P===b-1?(C=_-T,O=_):(C=P*T,O=(P+1)*T);const j=[S,C],X=[N,O],Y=await(0,r.slice)(c,j,X,[2,3]);h.push(Y)}const E=f,A=p;(m!==E||_!==A)&&(c=await(0,r.interpolate_4d)(c,{size:[E,A]}))}return h.push(c),{frames:h,num_splits_h:v,num_splits_w:b}}}}),"./src/models/idefics3/processing_idefics3.js":((e,t,n)=>{n.r(t),n.d(t,{Idefics3Processor:()=>p});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");n("./src/utils/image.js");var l=n("./src/utils/core.js");function c(h,m,_,v,b,D){let T="";for(let E=0;E<m;++E){for(let A=0;A<_;++A)T+=v+`<row_${E+1}_col_${A+1}>`+b.repeat(h);T+=`
`}return T+=`
${v}${D}`+b.repeat(h)+`${v}`,T}function d(h,m,_,v){return`${m}${v}`+_.repeat(h)+`${m}`}function f(h,m,_,v,b,D){return h===0&&m===0?d(_,v,b,D):c(_,h,m,v,b,D)}class p extends i.Processor{static image_processor_class=r.AutoImageProcessor;static tokenizer_class=o.AutoTokenizer;static uses_processor_config=!0;fake_image_token="<fake_token_around_image>";image_token="<image>";global_img_token="<global-img>";async _call(m,_=null,v={}){v.return_row_col_info??=!0;let b;_&&(b=await this.image_processor(_,v)),Array.isArray(m)||(m=[m]);const D=b.rows??[new Array(m.length).fill(0)],T=b.cols??[new Array(m.length).fill(0)],E=this.config.image_seq_len,A=[],$=[];for(let C=0;C<m.length;++C){const S=m[C],O=D[C],N=T[C];A.push((0,l.count)(S,this.image_token));const j=O.map((K,se)=>f(K,N[se],E,this.fake_image_token,this.image_token,this.global_img_token)),X=S.split(this.image_token);if(X.length===0)throw new Error("The image token should be present in the text.");let Y=X[0];for(let K=0;K<j.length;++K)Y+=j[K]+X[K+1];$.push(Y)}return{...this.tokenizer($),...b}}}}),"./src/models/image_processors.js":((e,t,n)=>{n.r(t),n.d(t,{BeitFeatureExtractor:()=>i.BeitFeatureExtractor,BitImageProcessor:()=>r.BitImageProcessor,CLIPFeatureExtractor:()=>l.CLIPFeatureExtractor,CLIPImageProcessor:()=>l.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>o.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>c.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>c.ConvNextImageProcessor,DINOv3ViTImageProcessor:()=>p.DINOv3ViTImageProcessor,DPTFeatureExtractor:()=>m.DPTFeatureExtractor,DPTImageProcessor:()=>m.DPTImageProcessor,DeiTFeatureExtractor:()=>d.DeiTFeatureExtractor,DeiTImageProcessor:()=>d.DeiTImageProcessor,DetrFeatureExtractor:()=>f.DetrFeatureExtractor,DetrImageProcessor:()=>f.DetrImageProcessor,DonutFeatureExtractor:()=>h.DonutFeatureExtractor,DonutImageProcessor:()=>h.DonutImageProcessor,EfficientNetImageProcessor:()=>_.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>v.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>b.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>D.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>E.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>A.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>$.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>P.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>P.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>C.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>C.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>S.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>S.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>O.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>O.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>N.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>N.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>j.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>j.MobileViTImageProcessor,NougatImageProcessor:()=>X.NougatImageProcessor,OwlViTFeatureExtractor:()=>K.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>K.OwlViTImageProcessor,Owlv2ImageProcessor:()=>Y.Owlv2ImageProcessor,Phi3VImageProcessor:()=>se.Phi3VImageProcessor,PixtralImageProcessor:()=>oe.PixtralImageProcessor,PvtImageProcessor:()=>W.PvtImageProcessor,Qwen2VLImageProcessor:()=>ne.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>ae.RTDetrImageProcessor,Sam2ImageProcessor:()=>ye.Sam2ImageProcessor,Sam3ImageProcessor:()=>G.Sam3ImageProcessor,SamImageProcessor:()=>ge.SamImageProcessor,SegformerFeatureExtractor:()=>H.SegformerFeatureExtractor,SegformerImageProcessor:()=>H.SegformerImageProcessor,SiglipImageProcessor:()=>V.SiglipImageProcessor,SmolVLMImageProcessor:()=>U.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>ce.Swin2SRImageProcessor,VLMImageProcessor:()=>T.VLMImageProcessor,ViTFeatureExtractor:()=>ve.ViTFeatureExtractor,ViTImageProcessor:()=>ve.ViTImageProcessor,VitMatteImageProcessor:()=>ke.VitMatteImageProcessor,VitPoseImageProcessor:()=>Le.VitPoseImageProcessor,YolosFeatureExtractor:()=>Xe.YolosFeatureExtractor,YolosImageProcessor:()=>Xe.YolosImageProcessor});var i=n("./src/models/beit/image_processing_beit.js"),r=n("./src/models/bit/image_processing_bit.js"),o=n("./src/models/chinese_clip/image_processing_chinese_clip.js"),l=n("./src/models/clip/image_processing_clip.js"),c=n("./src/models/convnext/image_processing_convnext.js"),d=n("./src/models/deit/image_processing_deit.js"),f=n("./src/models/detr/image_processing_detr.js"),p=n("./src/models/dinov3_vit/image_processing_dinov3_vit.js"),h=n("./src/models/donut/image_processing_donut.js"),m=n("./src/models/dpt/image_processing_dpt.js"),_=n("./src/models/efficientnet/image_processing_efficientnet.js"),v=n("./src/models/glpn/image_processing_glpn.js"),b=n("./src/models/grounding_dino/image_processing_grounding_dino.js"),D=n("./src/models/idefics3/image_processing_idefics3.js"),T=n("./src/models/janus/image_processing_janus.js"),E=n("./src/models/jina_clip/image_processing_jina_clip.js"),A=n("./src/models/llava_onevision/image_processing_llava_onevision.js"),$=n("./src/models/mask2former/image_processing_mask2former.js"),P=n("./src/models/maskformer/image_processing_maskformer.js"),C=n("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),S=n("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),O=n("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),N=n("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),j=n("./src/models/mobilevit/image_processing_mobilevit.js"),X=n("./src/models/nougat/image_processing_nougat.js"),Y=n("./src/models/owlv2/image_processing_owlv2.js"),K=n("./src/models/owlvit/image_processing_owlvit.js"),se=n("./src/models/phi3_v/image_processing_phi3_v.js"),oe=n("./src/models/pixtral/image_processing_pixtral.js"),W=n("./src/models/pvt/image_processing_pvt.js"),ne=n("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),ae=n("./src/models/rt_detr/image_processing_rt_detr.js"),ge=n("./src/models/sam/image_processing_sam.js"),ye=n("./src/models/sam2/image_processing_sam2.js"),G=n("./src/models/sam3/image_processing_sam3.js"),H=n("./src/models/segformer/image_processing_segformer.js"),V=n("./src/models/siglip/image_processing_siglip.js"),U=n("./src/models/smolvlm/image_processing_smolvlm.js"),ce=n("./src/models/swin2sr/image_processing_swin2sr.js"),ve=n("./src/models/vit/image_processing_vit.js"),ke=n("./src/models/vitmatte/image_processing_vitmatte.js"),Le=n("./src/models/vitpose/image_processing_vitpose.js"),Xe=n("./src/models/yolos/image_processing_yolos.js")}),"./src/models/janus/image_processing_janus.js":((e,t,n)=>{n.r(t),n.d(t,{VLMImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{constructor(l){super({do_pad:!0,pad_size:{width:l.image_size,height:l.image_size},...l}),this.constant_values=this.config.background_color.map(c=>c*this.rescale_factor)}pad_image(l,c,d,f){return super.pad_image(l,c,d,{constant_values:this.constant_values,center:!0,...f})}}}),"./src/models/janus/processing_janus.js":((e,t,n)=>{n.r(t),n.d(t,{VLChatProcessor:()=>f});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js"),l=n("./src/utils/core.js"),c=n("./src/utils/tensor.js"),d=n("./src/utils/image.js");class f extends i.Processor{static image_processor_class=r.AutoImageProcessor;static tokenizer_class=o.AutoTokenizer;static uses_processor_config=!0;constructor(h,m,_){super(h,m,_),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(h,{images:m=null,chat_template:_="default"}={}){m?Array.isArray(m)||(m=[m]):m=await Promise.all(h.filter(j=>j.images).flatMap(j=>j.images).map(j=>d.RawImage.read(j)));const v=this.tokenizer,b=v.apply_chat_template(h,{tokenize:!1,add_generation_prompt:!0,chat_template:_}),D=j=>v.encode(j,{add_special_tokens:!1}),T=b.split(this.image_tag),E=T.length-1;if(m.length!==E)throw new Error(`Number of images provided (${m.length}) does not match number of "${this.image_tag}" image tags (${E})`);const[A,$,P]=v.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let C=D(T[0]),S=new Array(C.length).fill(!1);for(let j=1;j<T.length;++j){const X=new Array(this.num_image_tokens).fill(A),Y=D(T[j]);C=(0,l.mergeArrays)(C,[$],X,[P],Y);const K=new Array(this.num_image_tokens).fill(!0);S=(0,l.mergeArrays)(S,[!1],K,[!1],new Array(Y.length).fill(!1))}const O=[1,C.length],N={input_ids:new c.Tensor("int64",C,O),attention_mask:new c.Tensor("int64",new Array(C.length).fill(1),O),images_seq_mask:new c.Tensor("bool",S,O),images_emb_mask:new c.Tensor("bool",new Array(E*this.num_image_tokens).fill(!0),[1,E,this.num_image_tokens])};if(m&&m.length>0){const j=await this.image_processor(m);return j.pixel_values.unsqueeze_(0),{...N,...j}}return N}}}),"./src/models/jina_clip/image_processing_jina_clip.js":((e,t,n)=>{n.r(t),n.d(t,{JinaCLIPImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{constructor(l){const{resize_mode:c,fill_color:d,interpolation:f,size:p,...h}=l,m=c==="squash"?{width:p,height:p}:c==="shortest"?{shortest_edge:p}:{longest_edge:p},_=f==="bicubic"?3:2;super({...h,size:m,resample:_,do_center_crop:!0,crop_size:p,do_normalize:!0})}}}),"./src/models/jina_clip/processing_jina_clip.js":((e,t,n)=>{n.r(t),n.d(t,{JinaCLIPProcessor:()=>l});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");class l extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor;async _call(d=null,f=null,p={}){if(!d&&!f)throw new Error("Either text or images must be provided");const h=d?this.tokenizer(d,p):{},m=f?await this.image_processor(f,p):{};return{...h,...m}}}}),"./src/models/llava/processing_llava.js":((e,t,n)=>{n.r(t),n.d(t,{LlavaProcessor:()=>l});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");class l extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor;static uses_processor_config=!0;async _call(d,f=null,p={}){const h=await this.image_processor(d,p);if(f){const[_,v]=h.pixel_values.dims.slice(-2),{image_token:b,patch_size:D,num_additional_image_tokens:T}=this.config,E=Math.floor(_/D)*Math.floor(v/D)+T;f=structuredClone(f),Array.isArray(f)||(f=[f]);for(let A=0;A<f.length;++A)f[A]=f[A].replace(b,b.repeat(E))}const m=f?this.tokenizer(f,p):{};return{...h,...m}}}}),"./src/models/llava_onevision/image_processing_llava_onevision.js":((e,t,n)=>{n.r(t),n.d(t,{LlavaOnevisionImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/mask2former/image_processing_mask2former.js":((e,t,n)=>{n.r(t),n.d(t,{Mask2FormerImageProcessor:()=>r});var i=n("./src/models/maskformer/image_processing_maskformer.js");class r extends i.MaskFormerImageProcessor{}}),"./src/models/maskformer/image_processing_maskformer.js":((e,t,n)=>{n.r(t),n.d(t,{MaskFormerFeatureExtractor:()=>o,MaskFormerImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{post_process_panoptic_segmentation(...c){return(0,i.post_process_panoptic_segmentation)(...c)}post_process_instance_segmentation(...c){return(0,i.post_process_instance_segmentation)(...c)}}class o extends r{}}),"./src/models/mgp_str/processing_mgp_str.js":((e,t,n)=>{n.r(t),n.d(t,{MgpstrProcessor:()=>d});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js"),l=n("./src/utils/maths.js");const c={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class d extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor;get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(p,h){if(!c.hasOwnProperty(h))throw new Error(`Format ${h} is not supported.`);const[m,_]=c[h],v=this[m].bind(this),[b,D]=p.dims,T=[],E=[],A=p.tolist();for(let P=0;P<b;++P){const C=A[P],S=[],O=[];for(let j=1;j<D;++j){const[X,Y]=(0,l.max)((0,l.softmax)(C[j]));if(O.push(X),Y==_)break;S.push(Y)}const N=O.length>0?O.reduce((j,X)=>j*X,1):0;E.push(S),T.push(N)}return[v(E),T]}char_decode(p){return this.char_tokenizer.batch_decode(p).map(h=>h.replaceAll(" ",""))}bpe_decode(p){return this.bpe_tokenizer.batch_decode(p)}wp_decode(p){return this.wp_tokenizer.batch_decode(p).map(h=>h.replaceAll(" ",""))}batch_decode([p,h,m]){const[_,v]=this._decode_helper(p,"char"),[b,D]=this._decode_helper(h,"bpe"),[T,E]=this._decode_helper(m,"wp"),A=[],$=[];for(let P=0;P<_.length;++P){const[C,S]=(0,l.max)([v[P],D[P],E[P]]);A.push([_[P],b[P],T[P]][S]),$.push(C)}return{generated_text:A,scores:$,char_preds:_,bpe_preds:b,wp_preds:T}}static async from_pretrained(...p){const h=await super.from_pretrained(...p),m=await o.AutoTokenizer.from_pretrained("Xenova/gpt2"),_=await o.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return h.components={image_processor:h.image_processor,char_tokenizer:h.tokenizer,bpe_tokenizer:m,wp_tokenizer:_},h}async _call(p,h=null){const m=await this.image_processor(p);return h&&(m.labels=this.tokenizer(h).input_ids),m}}}),"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV1FeatureExtractor:()=>o,MobileNetV1ImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV2FeatureExtractor:()=>o,MobileNetV2ImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV3FeatureExtractor:()=>o,MobileNetV3ImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":((e,t,n)=>{n.r(t),n.d(t,{MobileNetV4FeatureExtractor:()=>o,MobileNetV4ImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/mobilevit/image_processing_mobilevit.js":((e,t,n)=>{n.r(t),n.d(t,{MobileViTFeatureExtractor:()=>o,MobileViTImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/moonshine/feature_extraction_moonshine.js":((e,t,n)=>{n.r(t),n.d(t,{MoonshineFeatureExtractor:()=>o});var i=n("./src/base/feature_extraction_utils.js"),r=n("./src/utils/tensor.js");class o extends i.FeatureExtractor{async _call(c){(0,i.validate_audio_inputs)(c,"MoonshineFeatureExtractor"),c instanceof Float64Array&&(c=new Float32Array(c));const d=[1,c.length];return{input_values:new r.Tensor("float32",c,d)}}}}),"./src/models/moonshine/processing_moonshine.js":((e,t,n)=>{n.r(t),n.d(t,{MoonshineProcessor:()=>l});var i=n("./src/models/auto/feature_extraction_auto.js"),r=n("./src/tokenizers.js"),o=n("./src/base/processing_utils.js");class l extends o.Processor{static tokenizer_class=r.AutoTokenizer;static feature_extractor_class=i.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/nougat/image_processing_nougat.js":((e,t,n)=>{n.r(t),n.d(t,{NougatImageProcessor:()=>r});var i=n("./src/models/donut/image_processing_donut.js");class r extends i.DonutImageProcessor{}}),"./src/models/owlv2/image_processing_owlv2.js":((e,t,n)=>{n.r(t),n.d(t,{Owlv2ImageProcessor:()=>r});var i=n("./src/models/owlvit/image_processing_owlvit.js");class r extends i.OwlViTImageProcessor{}}),"./src/models/owlvit/image_processing_owlvit.js":((e,t,n)=>{n.r(t),n.d(t,{OwlViTFeatureExtractor:()=>o,OwlViTImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{post_process_object_detection(...c){return(0,i.post_process_object_detection)(...c)}}class o extends r{}}),"./src/models/owlvit/processing_owlvit.js":((e,t,n)=>{n.r(t),n.d(t,{OwlViTProcessor:()=>l});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");class l extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor}}),"./src/models/paligemma/processing_paligemma.js":((e,t,n)=>{n.r(t),n.d(t,{PaliGemmaProcessor:()=>d});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");const l="<image>";function c(f,p,h,m,_){return`${m.repeat(h*_)}${p}${f}
`}class d extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor;static uses_processor_config=!1;async _call(p,h=null,m={}){h||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),h=""),Array.isArray(p)||(p=[p]),Array.isArray(h)||(h=[h]);const _=this.tokenizer.bos_token,v=this.image_processor.config.image_seq_length;let b;h.some(E=>E.includes(l))?b=h.map(E=>{const A=E.replaceAll(l,l.repeat(v)),$=A.lastIndexOf(l),P=$===-1?0:$+l.length;return A.slice(0,P)+_+A.slice(P)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),b=h.map(E=>c(E,_,v,l,p.length)));const D=this.tokenizer(b,m);return{...await this.image_processor(p,m),...D}}}}),"./src/models/parakeet/feature_extraction_parakeet.js":((e,t,n)=>{n.r(t),n.d(t,{ParakeetFeatureExtractor:()=>c});var i=n("./src/base/feature_extraction_utils.js"),r=n("./src/utils/tensor.js"),o=n("./src/utils/audio.js");const l=1e-5;class c extends i.FeatureExtractor{constructor(f){super(f),this.config.mel_filters??=(0,o.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,this.config.sampling_rate/2,this.config.sampling_rate,"slaney","slaney");const p=(0,o.window_function)(this.config.win_length,"hann",{periodic:!1});this.window=new Float64Array(this.config.n_fft);const h=Math.floor((this.config.n_fft-this.config.win_length)/2);this.window.set(p,h)}async _extract_fbank_features(f){const p=this.config.preemphasis;f=new Float64Array(f);for(let m=f.length-1;m>=1;--m)f[m]-=p*f[m-1];return await(0,o.spectrogram)(f,this.window,this.window.length,this.config.hop_length,{fft_length:this.config.n_fft,power:2,mel_filters:this.config.mel_filters,log_mel:"log",mel_floor:-1/0,pad_mode:"constant",center:!0,transpose:!0,mel_offset:2**-24})}async _call(f){(0,i.validate_audio_inputs)(f,"ParakeetFeatureExtractor");const p=await this._extract_fbank_features(f),h=Math.floor((f.length+Math.floor(this.config.n_fft/2)*2-this.config.n_fft)/this.config.hop_length),m=p.data;m.fill(0,h*p.dims[1]);const[_,v]=p.dims,b=new Float64Array(v),D=new Float64Array(v);for(let A=0;A<h;++A){const $=A*v;for(let P=0;P<v;++P){const C=m[$+P];b[P]+=C,D[P]+=C*C}}const T=h>1?h-1:1;for(let A=0;A<v;++A){const $=b[A]/h,P=(D[A]-h*$*$)/T,S=1/(Math.sqrt(P)+l);for(let O=0;O<h;++O){const N=O*v+A;m[N]=(m[N]-$)*S}}const E=new BigInt64Array(_);return E.fill(1n,0,h),{input_features:p.unsqueeze_(0),attention_mask:new r.Tensor("int64",E,[1,_])}}}}),"./src/models/phi3_v/image_processing_phi3_v.js":((e,t,n)=>{n.r(t),n.d(t,{Phi3VImageProcessor:()=>p});var i=n("./src/base/image_processors_utils.js"),r=n("./src/utils/tensor.js");const o=336,l=[2,3],{ceil:c,floor:d,sqrt:f}=Math;class p extends i.ImageProcessor{constructor(m){super({...m,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=m.num_crops}calc_num_image_tokens_from_image_size(m,_){const{num_img_tokens:v}=this.config;return d((d(_/o)*d(m/o)+1)*v+1+(d(_/o)+1)*f(v))}get_resize_output_image_size(m,_){const v=this._num_crops,[b,D]=m.size;let T=b/D,E=1;for(;E*Math.ceil(E/T)<=v;)E+=1;E-=1;const A=Math.floor(E*336),$=Math.floor(A/T);return[A,$]}pad_image(m,_,v,b={}){const[D,T]=_,E=o*c(D/o),A=o*c(T/o),$=[1,1,1].map((P,C)=>(P-this.image_mean[C])/this.image_std[C]);return super.pad_image(m,_,{width:A,height:E},{center:!0,constant_values:$,...b})}async _call(m,{num_crops:_=null}={}){if(this._num_crops=_??=this.config.num_crops,_<4||f(_)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(m)||(m=[m]);const v=m.length,b=await Promise.all(m.map(S=>this.preprocess(S))),D=b.map(S=>S.original_size),T=b.map(S=>S.reshaped_input_size),E=[];for(const{pixel_values:S}of b){S.unsqueeze_(0);const[O,N]=S.dims.slice(-2),j=await(0,r.interpolate_4d)(S,{size:[o,o],mode:"bicubic"});if(_>0){const X=[],Y=f(_),K=d(N/Y),se=d(O/Y);for(let W=0;W<Y;++W)for(let ne=0;ne<Y;++ne){let ae,ge,ye,G;W===Y-1?(ge=O-se,G=O):(ge=W*se,G=(W+1)*se),ne===Y-1?(ae=N-K,ye=N):(ae=ne*K,ye=(ne+1)*K);const H=[ge,ae],V=[G,ye],U=await(0,r.slice)(S,H,V,l);X.push(U)}const oe=await(0,r.interpolate_4d)((0,r.cat)(X,0),{size:[o,o],mode:"bicubic"});E.push((0,r.cat)([j,oe],0))}else E.push(j)}const A=(0,r.stack)(E,0),$=T.map(S=>S.map(O=>o*c(O/o))),P=new r.Tensor("int64",$.flat(),[v,2]),C=$.map(([S,O])=>this.calc_num_image_tokens_from_image_size(O,S));return{pixel_values:A,original_sizes:D,reshaped_input_sizes:T,image_sizes:P,num_img_tokens:C}}}}),"./src/models/phi3_v/processing_phi3_v.js":((e,t,n)=>{n.r(t),n.d(t,{Phi3VProcessor:()=>d});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");n("./src/utils/image.js");const l="<|image|>",c=/<\|image_\d+\|>/g;class d extends i.Processor{static image_processor_class=r.AutoImageProcessor;static tokenizer_class=o.AutoTokenizer;async _call(p,h=null,{padding:m=!0,truncation:_=!0,num_crops:v=null}={}){Array.isArray(p)||(p=[p]);let b,D;if(h){D=await this.image_processor(h,{num_crops:v});const{num_img_tokens:T}=D,E=p.map(($,P)=>$.split(c).join(l.repeat(T[P])));b=this.tokenizer(E,{padding:m,truncation:_});const A=this.tokenizer.model.convert_tokens_to_ids([l])[0];b.input_ids.map_($=>$==A?-$:$)}else b=this.tokenizer(p);return{...b,...D}}}}),"./src/models/pixtral/image_processing_pixtral.js":((e,t,n)=>{n.r(t),n.d(t,{PixtralImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{get_resize_output_image_size(l,c){const{longest_edge:d}=c;if(d===void 0)throw new Error("size must contain 'longest_edge'");const[f,p]=l.size,h=Math.max(f,p)/d;let m=f,_=p;h>1&&(m=Math.floor(f/h),_=Math.floor(p/h));const{patch_size:v,spatial_merge_size:b}=this.config;if(!b)throw new Error("config must contain 'spatial_merge_size'");const D=v*b,T=Math.floor((m-1)/D)+1,E=Math.floor((_-1)/D)+1;return[T*D,E*D]}}}),"./src/models/pixtral/processing_pixtral.js":((e,t,n)=>{n.r(t),n.d(t,{PixtralProcessor:()=>l});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");class l extends i.Processor{static tokenizer_class=o.AutoTokenizer;static image_processor_class=r.AutoImageProcessor;static uses_processor_config=!0;async _call(d,f=null,p={}){const h=await this.image_processor(d,p);if(f){const[_,v]=h.pixel_values.dims.slice(-2),{image_token:b,image_break_token:D,image_end_token:T,patch_size:E,spatial_merge_size:A}=this.config,$=E*A,P=Math.floor(_/$),C=Math.floor(v/$);f=structuredClone(f),Array.isArray(f)||(f=[f]);for(let S=0;S<f.length;++S){const O=b.repeat(C),N=O+D,j=O+T,X=N.repeat(P-1)+j;f[S]=f[S].replace(b,X)}}const m=f?this.tokenizer(f,p):{};return{...h,...m}}}}),"./src/models/processors.js":((e,t,n)=>{n.r(t),n.d(t,{Florence2Processor:()=>i.Florence2Processor,Gemma3nProcessor:()=>r.Gemma3nProcessor,GroundingDinoProcessor:()=>o.GroundingDinoProcessor,Idefics3Processor:()=>l.Idefics3Processor,JinaCLIPProcessor:()=>d.JinaCLIPProcessor,LlavaProcessor:()=>f.LlavaProcessor,MgpstrProcessor:()=>p.MgpstrProcessor,MoonshineProcessor:()=>h.MoonshineProcessor,OwlViTProcessor:()=>m.OwlViTProcessor,PaliGemmaProcessor:()=>_.PaliGemmaProcessor,Phi3VProcessor:()=>v.Phi3VProcessor,PixtralProcessor:()=>b.PixtralProcessor,PyAnnoteProcessor:()=>D.PyAnnoteProcessor,Qwen2VLProcessor:()=>T.Qwen2VLProcessor,Sam2Processor:()=>A.Sam2Processor,Sam2VideoProcessor:()=>A.Sam2VideoProcessor,SamProcessor:()=>E.SamProcessor,SmolVLMProcessor:()=>$.SmolVLMProcessor,SpeechT5Processor:()=>P.SpeechT5Processor,UltravoxProcessor:()=>C.UltravoxProcessor,VLChatProcessor:()=>c.VLChatProcessor,VoxtralProcessor:()=>S.VoxtralProcessor,Wav2Vec2Processor:()=>O.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>N.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>j.WhisperProcessor});var i=n("./src/models/florence2/processing_florence2.js"),r=n("./src/models/gemma3n/processing_gemma3n.js"),o=n("./src/models/grounding_dino/processing_grounding_dino.js"),l=n("./src/models/idefics3/processing_idefics3.js"),c=n("./src/models/janus/processing_janus.js"),d=n("./src/models/jina_clip/processing_jina_clip.js"),f=n("./src/models/llava/processing_llava.js"),p=n("./src/models/mgp_str/processing_mgp_str.js"),h=n("./src/models/moonshine/processing_moonshine.js"),m=n("./src/models/owlvit/processing_owlvit.js"),_=n("./src/models/paligemma/processing_paligemma.js"),v=n("./src/models/phi3_v/processing_phi3_v.js"),b=n("./src/models/pixtral/processing_pixtral.js"),D=n("./src/models/pyannote/processing_pyannote.js"),T=n("./src/models/qwen2_vl/processing_qwen2_vl.js"),E=n("./src/models/sam/processing_sam.js"),A=n("./src/models/sam2/processing_sam2.js"),$=n("./src/models/smolvlm/processing_smolvlm.js"),P=n("./src/models/speecht5/processing_speecht5.js"),C=n("./src/models/ultravox/processing_ultravox.js"),S=n("./src/models/voxtral/processing_voxtral.js"),O=n("./src/models/wav2vec2/processing_wav2vec2.js"),N=n("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),j=n("./src/models/whisper/processing_whisper.js")}),"./src/models/pvt/image_processing_pvt.js":((e,t,n)=>{n.r(t),n.d(t,{PvtImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/pyannote/feature_extraction_pyannote.js":((e,t,n)=>{n.r(t),n.d(t,{PyAnnoteFeatureExtractor:()=>l});var i=n("./src/base/feature_extraction_utils.js"),r=n("./src/utils/tensor.js"),o=n("./src/utils/maths.js");class l extends i.FeatureExtractor{async _call(d){(0,i.validate_audio_inputs)(d,"PyAnnoteFeatureExtractor"),d instanceof Float64Array&&(d=new Float32Array(d));const f=[1,1,d.length];return{input_values:new r.Tensor("float32",d,f)}}samples_to_frames(d){return(d-this.config.offset)/this.config.step}post_process_speaker_diarization(d,f){const p=f/this.samples_to_frames(f)/this.config.sampling_rate,h=[];for(const m of d.tolist()){const _=[];let v=-1;for(let b=0;b<m.length;++b){const D=(0,o.softmax)(m[b]),[T,E]=(0,o.max)(D),[A,$]=[b,b+1];E!==v?(v=E,_.push({id:E,start:A,end:$,score:T})):(_.at(-1).end=$,_.at(-1).score+=T)}h.push(_.map(({id:b,start:D,end:T,score:E})=>({id:b,start:D*p,end:T*p,confidence:E/(T-D)})))}return h}}}),"./src/models/pyannote/processing_pyannote.js":((e,t,n)=>{n.r(t),n.d(t,{PyAnnoteProcessor:()=>o});var i=n("./src/base/processing_utils.js"),r=n("./src/models/pyannote/feature_extraction_pyannote.js");class o extends i.Processor{static feature_extractor_class=r.PyAnnoteFeatureExtractor;async _call(c){return await this.feature_extractor(c)}post_process_speaker_diarization(...c){return this.feature_extractor.post_process_speaker_diarization(...c)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}}),"./src/models/qwen2_vl/image_processing_qwen2_vl.js":((e,t,n)=>{n.r(t),n.d(t,{Qwen2VLImageProcessor:()=>o});var i=n("./src/base/image_processors_utils.js"),r=n("./src/utils/tensor.js");class o extends i.ImageProcessor{async _call(c,...d){const{pixel_values:f,original_sizes:p,reshaped_input_sizes:h}=await super._call(c,...d);let m=f;const{temporal_patch_size:_,merge_size:v,patch_size:b}=this.config;m.dims[0]===1&&(m=(0,r.cat)(Array.from({length:_},()=>m),0));const D=m.dims[0]/_,T=m.dims[1],E=Math.floor(m.dims[2]/b),A=Math.floor(m.dims[3]/b),$=m.view(D,_,T,Math.floor(E/v),v,b,Math.floor(A/v),v,b).permute(0,3,6,4,7,2,1,5,8).view(D*E*A,T*_*b*b),P=new r.Tensor("int64",[D,E,A],[1,3]);return{pixel_values:$,image_grid_thw:P,original_sizes:p,reshaped_input_sizes:h}}}}),"./src/models/qwen2_vl/processing_qwen2_vl.js":((e,t,n)=>{n.r(t),n.d(t,{Qwen2VLProcessor:()=>l});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js"),o=n("./src/tokenizers.js");n("./src/utils/image.js");class l extends i.Processor{static image_processor_class=r.AutoImageProcessor;static tokenizer_class=o.AutoTokenizer;async _call(d,f=null,...p){Array.isArray(d)||(d=[d]);let h,m;if(f&&(h=await this.image_processor(f),m=h.image_grid_thw),m){let v=this.image_processor.config.merge_size**2,b=0;const D=m.tolist();d=d.map(T=>{for(;T.includes("<|image_pad|>");){const E=Number(D[b++].reduce((A,$)=>A*$,1n));T=T.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(E/v)))}return T.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(d),...h}}}}),"./src/models/rt_detr/image_processing_rt_detr.js":((e,t,n)=>{n.r(t),n.d(t,{RTDetrImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{post_process_object_detection(...l){return(0,i.post_process_object_detection)(...l)}}}),"./src/models/sam/image_processing_sam.js":((e,t,n)=>{n.r(t),n.d(t,{SamImageProcessor:()=>l});var i=n("./src/base/image_processors_utils.js"),r=n("./src/utils/core.js"),o=n("./src/utils/tensor.js");class l extends i.ImageProcessor{reshape_input_points(d,f,p,h=!1){d=structuredClone(d);let m=(0,r.calculateDimensions)(d);if(m.length===3)h||(m=[1,...m]),d=[d];else if(m.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let _=0;_<d.length;++_){const[v,b]=f[_],[D,T]=p[_],E=[T/b,D/v];for(let A=0;A<d[_].length;++A)for(let $=0;$<d[_][A].length;++$)for(let P=0;P<d[_][A][$].length;++P)d[_][A][$][P]*=E[P%2]}return new o.Tensor("float32",Float32Array.from(d.flat(1/0)),m)}add_input_labels(d,f){let p=(0,r.calculateDimensions)(d);if(p.length===2)p=[1,...p],d=[d];else if(p.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(p.some((h,m)=>h!==f.dims[m]))throw Error(`The first ${p.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new o.Tensor("int64",d.flat(1/0).map(BigInt),p)}async _call(d,{input_points:f=null,input_labels:p=null,input_boxes:h=null}={}){const m=await super._call(d);if(f&&(m.input_points=this.reshape_input_points(f,m.original_sizes,m.reshaped_input_sizes)),p){if(!m.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");m.input_labels=this.add_input_labels(p,m.input_points)}return h&&(m.input_boxes=this.reshape_input_points(h,m.original_sizes,m.reshaped_input_sizes,!0)),m}async post_process_masks(d,f,p,{mask_threshold:h=0,binarize:m=!0,pad_size:_=null}={}){const v=[];_=_??this.pad_size??this.size;const b=[_.height,_.width];for(let D=0;D<f.length;++D){const T=f[D],E=p[D];let A=await(0,o.interpolate_4d)(d[D],{mode:"bilinear",size:b});if(A=A.slice(null,null,[0,E[0]],[0,E[1]]),A=await(0,o.interpolate_4d)(A,{mode:"bilinear",size:T}),m){const $=A.data,P=new Uint8Array($.length);for(let C=0;C<$.length;++C)$[C]>h&&(P[C]=1);A=new o.Tensor("bool",P,A.dims)}v.push(A)}return v}generate_crop_boxes(d,f,{crop_n_layers:p=0,overlap_ratio:h=512/1500,points_per_crop:m=32,crop_n_points_downscale_factor:_=1}={}){}}}),"./src/models/sam/processing_sam.js":((e,t,n)=>{n.r(t),n.d(t,{SamProcessor:()=>o});var i=n("./src/base/processing_utils.js"),r=n("./src/models/auto/image_processing_auto.js");class o extends i.Processor{static image_processor_class=r.AutoImageProcessor;async _call(...c){return await this.image_processor(...c)}post_process_masks(...c){return this.image_processor.post_process_masks(...c)}reshape_input_points(...c){return this.image_processor.reshape_input_points(...c)}}}),"./src/models/sam2/image_processing_sam2.js":((e,t,n)=>{n.r(t),n.d(t,{Sam2ImageProcessor:()=>i.SamImageProcessor});var i=n("./src/models/sam/image_processing_sam.js")}),"./src/models/sam2/processing_sam2.js":((e,t,n)=>{n.r(t),n.d(t,{Sam2Processor:()=>r,Sam2VideoProcessor:()=>o});var i=n("./src/models/sam/processing_sam.js");class r extends i.SamProcessor{}class o extends r{}}),"./src/models/sam3/image_processing_sam3.js":((e,t,n)=>{n.r(t),n.d(t,{Sam3ImageProcessor:()=>i.Sam2ImageProcessor});var i=n("./src/models/sam2/image_processing_sam2.js")}),"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":((e,t,n)=>{n.r(t),n.d(t,{SeamlessM4TFeatureExtractor:()=>l});var i=n("./src/base/feature_extraction_utils.js"),r=n("./src/utils/tensor.js"),o=n("./src/utils/audio.js");class l extends i.FeatureExtractor{constructor(d){super(d);const f=this.config.sampling_rate,p=(0,o.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(f/2),f,null,"kaldi",!0);this.mel_filters=p,this.window=(0,o.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(d,f){return d=d.map(p=>p*32768),(0,o.spectrogram)(d,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:f,transpose:!0})}async _call(d,{padding:f=!0,pad_to_multiple_of:p=2,do_normalize_per_mel_bins:h=!0,return_attention_mask:m=!0}={}){(0,i.validate_audio_inputs)(d,"SeamlessM4TFeatureExtractor");let _=await this._extract_fbank_features(d,this.config.max_length);if(h){const[P,C]=_.dims,S=_.data;for(let O=0;O<C;++O){let N=0;for(let K=0;K<P;++K)N+=S[K*C+O];const j=N/P;let X=0;for(let K=0;K<P;++K)X+=(S[K*C+O]-j)**2;X/=P-1;const Y=Math.sqrt(X+1e-7);for(let K=0;K<P;++K){const se=K*C+O;S[se]=(S[se]-j)/Y}}}let v;if(f){const[P,C]=_.dims,S=_.data,O=P%p;if(O>0){const N=new Float32Array(C*(P+O));N.set(S),N.fill(this.config.padding_value,S.length);const j=P+O;_=new r.Tensor(_.type,N,[j,C]),m&&(v=new r.Tensor("int64",new BigInt64Array(j),[1,j]),v.data.fill(1n,0,P))}}const[b,D]=_.dims,T=this.config.stride;if(b%T!==0)throw new Error(`The number of frames (${b}) must be a multiple of the stride (${T}).`);const A=_.view(1,Math.floor(b/T),D*T),$={input_features:A};if(m){const P=A.dims[1],C=new BigInt64Array(P);if(v){const S=v.data;for(let O=1,N=0;O<b;O+=T,++N)C[N]=S[O]}else C.fill(1n);$.attention_mask=new r.Tensor("int64",C,[1,P])}return $}}}),"./src/models/segformer/image_processing_segformer.js":((e,t,n)=>{n.r(t),n.d(t,{SegformerFeatureExtractor:()=>o,SegformerImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{post_process_semantic_segmentation(...c){return(0,i.post_process_semantic_segmentation)(...c)}}class o extends r{}}),"./src/models/siglip/image_processing_siglip.js":((e,t,n)=>{n.r(t),n.d(t,{SiglipImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}}),"./src/models/smolvlm/image_processing_smolvlm.js":((e,t,n)=>{n.r(t),n.d(t,{SmolVLMImageProcessor:()=>i.Idefics3ImageProcessor});var i=n("./src/models/idefics3/image_processing_idefics3.js")}),"./src/models/smolvlm/processing_smolvlm.js":((e,t,n)=>{n.r(t),n.d(t,{SmolVLMProcessor:()=>i.Idefics3Processor});var i=n("./src/models/idefics3/processing_idefics3.js")}),"./src/models/snac/feature_extraction_snac.js":((e,t,n)=>{n.r(t),n.d(t,{SnacFeatureExtractor:()=>r});var i=n("./src/models/dac/feature_extraction_dac.js");class r extends i.DacFeatureExtractor{}}),"./src/models/speecht5/feature_extraction_speecht5.js":((e,t,n)=>{n.r(t),n.d(t,{SpeechT5FeatureExtractor:()=>r});var i=n("./src/base/feature_extraction_utils.js");class r extends i.FeatureExtractor{}}),"./src/models/speecht5/processing_speecht5.js":((e,t,n)=>{n.r(t),n.d(t,{SpeechT5Processor:()=>l});var i=n("./src/base/processing_utils.js"),r=n("./src/tokenizers.js"),o=n("./src/models/auto/feature_extraction_auto.js");class l extends i.Processor{static tokenizer_class=r.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/swin2sr/image_processing_swin2sr.js":((e,t,n)=>{n.r(t),n.d(t,{Swin2SRImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{pad_image(l,c,d,f={}){const[p,h,m]=c;return super.pad_image(l,c,{width:h+(d-h%d)%d,height:p+(d-p%d)%d},{mode:"symmetric",center:!1,constant_values:-1,...f})}}}),"./src/models/ultravox/processing_ultravox.js":((e,t,n)=>{n.r(t),n.d(t,{UltravoxProcessor:()=>l});var i=n("./src/models/auto/feature_extraction_auto.js"),r=n("./src/tokenizers.js"),o=n("./src/base/processing_utils.js");class l extends o.Processor{static tokenizer_class=r.AutoTokenizer;static feature_extractor_class=i.AutoFeatureExtractor;static uses_processor_config=!0;async _call(d,f=null,p={}){if(Array.isArray(d))throw new Error("Batched inputs are not supported yet.");let h={};if(f){const _=f.length,{input_features:v}=await this.feature_extractor(f,{...p,max_length:_}),b=Math.round(_/this.config.encoder_ds_factor+1e-4),D=1+Math.ceil(b/this.config.stack_factor);h.audio_token_len=[D],h.audio_values=v;const T=this.config.audio_placeholder;if(!d.includes(T))throw new Error(`The input text does not contain the image token ${T}.`);d=d.replaceAll(T,T.repeat(D))}return{...this.tokenizer(d,{add_special_tokens:!1,...p}),...h}}}}),"./src/models/vit/image_processing_vit.js":((e,t,n)=>{n.r(t),n.d(t,{ViTFeatureExtractor:()=>o,ViTImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{}class o extends r{}}),"./src/models/vitmatte/image_processing_vitmatte.js":((e,t,n)=>{n.r(t),n.d(t,{VitMatteImageProcessor:()=>o});var i=n("./src/base/image_processors_utils.js"),r=n("./src/utils/tensor.js");class o extends i.ImageProcessor{async _call(c,d){Array.isArray(c)||(c=[c]),Array.isArray(d)||(d=[d]);const f=await Promise.all(c.map(m=>this.preprocess(m))),p=await Promise.all(d.map(m=>this.preprocess(m,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,r.stack)(f.map((m,_)=>(0,r.cat)([m.pixel_values,p[_].pixel_values],0)),0),original_sizes:f.map(m=>m.original_size),reshaped_input_sizes:f.map(m=>m.reshaped_input_size)}}}}),"./src/models/vitpose/image_processing_vitpose.js":((e,t,n)=>{n.r(t),n.d(t,{VitPoseImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{post_process_pose_estimation(l,c,{threshold:d=null}={}){const f=l.tolist(),[p,h,m,_]=l.dims,v=[];for(let b=0;b<p;++b){const D=f[b],T=c[b],E=[];for(let A=0;A<T.length;++A){const $=T[A],P=[],C=[],S=[],O=$.at(-2)/_,N=$.at(-1)/m;for(let j=0;j<D.length;++j){let[X,Y]=[0,0],K=0,se=-1/0;const oe=D[j];for(let ne=0;ne<oe.length;++ne){const ae=oe[ne];for(let ge=0;ge<ae.length;++ge){const ye=ae[ge];K+=ye,se=Math.max(se,ye),X+=(ge+.5)*ye,Y+=ne*ye}}if(d!=null&&se<d)continue;const W=[O*X/K,N*Y/K];P.push(W),S.push(j),C.push(se)}E.push({bbox:$,scores:C,labels:S,keypoints:P})}v.push(E)}return v}}}),"./src/models/voxtral/processing_voxtral.js":((e,t,n)=>{n.r(t),n.d(t,{VoxtralProcessor:()=>h});var i=n("./src/models/auto/feature_extraction_auto.js"),r=n("./src/tokenizers.js"),o=n("./src/base/processing_utils.js"),l=n("./src/utils/tensor.js");const c="[AUDIO]",d="[BEGIN_AUDIO]",f=375;function p(m,_){const v=[];for(let b=0;b<m.length;b+=_)v.push(m.subarray(b,Math.min(b+_,m.length)));return v}class h extends o.Processor{static tokenizer_class=r.AutoTokenizer;static feature_extractor_class=i.AutoFeatureExtractor;static uses_processor_config=!1;async _call(_,v=null,b={}){if(Array.isArray(_))throw new Error("Batched inputs are not supported yet.");const D={};if(v){if(!_.includes(c))throw new Error(`The input text does not contain the audio token ${c}.`);Array.isArray(v)||(v=[v]);const E=_.split(c),A=E.length-1;if(A!==v.length)throw new Error(`The number of audio inputs (${v.length}) does not match the number of audio tokens in the text (${A}).`);const $=this.feature_extractor.config.n_samples,P=v.map(j=>p(j,$)),C=P.map(j=>j.length),S=P.flat(),O=(await Promise.all(S.map(j=>this.feature_extractor(j,b)))).map(j=>j.input_features);D.audio_values=O.length>1?(0,l.cat)(O,0):O[0];let N=E[0];for(let j=0;j<C.length;++j){N+=d;for(let X=0;X<C[j];++X)N+=c.repeat(f);N+=E[j+1]}_=N}return{...this.tokenizer(_,{add_special_tokens:!1,...b}),...D}}}}),"./src/models/wav2vec2/feature_extraction_wav2vec2.js":((e,t,n)=>{n.r(t),n.d(t,{Wav2Vec2FeatureExtractor:()=>o});var i=n("./src/base/feature_extraction_utils.js"),r=n("./src/utils/tensor.js");class o extends i.FeatureExtractor{_zero_mean_unit_var_norm(c){const f=c.reduce((h,m)=>h+m,0)/c.length,p=c.reduce((h,m)=>h+(m-f)**2,0)/c.length;return c.map(h=>(h-f)/Math.sqrt(p+1e-7))}async _call(c){(0,i.validate_audio_inputs)(c,"Wav2Vec2FeatureExtractor"),c instanceof Float64Array&&(c=new Float32Array(c));let d=c;this.config.do_normalize&&(d=this._zero_mean_unit_var_norm(d));const f=[1,d.length];return{input_values:new r.Tensor("float32",d,f),attention_mask:new r.Tensor("int64",new BigInt64Array(d.length).fill(1n),f)}}}}),"./src/models/wav2vec2/processing_wav2vec2.js":((e,t,n)=>{n.r(t),n.d(t,{Wav2Vec2Processor:()=>l});var i=n("./src/tokenizers.js"),r=n("./src/models/auto/feature_extraction_auto.js"),o=n("./src/base/processing_utils.js");class l extends o.Processor{static tokenizer_class=i.AutoTokenizer;static feature_extractor_class=r.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":((e,t,n)=>{n.r(t),n.d(t,{Wav2Vec2ProcessorWithLM:()=>l});var i=n("./src/tokenizers.js"),r=n("./src/models/auto/feature_extraction_auto.js"),o=n("./src/base/processing_utils.js");class l extends o.Processor{static tokenizer_class=i.AutoTokenizer;static feature_extractor_class=r.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/wespeaker/feature_extraction_wespeaker.js":((e,t,n)=>{n.r(t),n.d(t,{WeSpeakerFeatureExtractor:()=>o});var i=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var r=n("./src/utils/audio.js");class o extends i.FeatureExtractor{constructor(c){super(c);const d=this.config.sampling_rate,f=(0,r.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(d/2),d,null,"kaldi",!0);this.mel_filters=f,this.window=(0,r.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(c){return c=c.map(d=>d*32768),(0,r.spectrogram)(c,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(c){(0,i.validate_audio_inputs)(c,"WeSpeakerFeatureExtractor");const d=(await this._extract_fbank_features(c)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const f=d.mean(1).data,p=d.data,[h,m,_]=d.dims;for(let v=0;v<h;++v){const b=v*m*_,D=v*_;for(let T=0;T<m;++T){const E=b+T*_;for(let A=0;A<_;++A)p[E+A]-=f[D+A]}}}return{input_features:d}}}}),"./src/models/whisper/common_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WHISPER_LANGUAGE_MAPPING:()=>r,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>o,whisper_language_to_code:()=>l});const i=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],r=new Map(i),o=new Map([...i.map(([c,d])=>[d,c]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function l(c){c=c.toLowerCase();let d=o.get(c);if(d===void 0){const f=c.match(/^<\|([a-z]{2})\|>$/);if(f&&(c=f[1]),r.has(c))d=c;else{const h=c.length===2?r.keys():r.values();throw new Error(`Language "${c}" is not supported. Must be one of: ${JSON.stringify(Array.from(h))}`)}}return d}}),"./src/models/whisper/feature_extraction_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WhisperFeatureExtractor:()=>l});var i=n("./src/base/feature_extraction_utils.js");n("./src/utils/tensor.js");var r=n("./src/utils/audio.js"),o=n("./src/utils/maths.js");class l extends i.FeatureExtractor{constructor(d){super(d),this.config.mel_filters??=(0,r.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=(0,r.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(d){const f=await(0,r.spectrogram)(d,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(d.length/this.config.hop_length),this.config.nb_max_frames)}),p=f.data,h=(0,o.max)(p)[0];for(let m=0;m<p.length;++m)p[m]=(Math.max(p[m],h-8)+4)/4;return f}async _call(d,{max_length:f=null}={}){(0,i.validate_audio_inputs)(d,"WhisperFeatureExtractor");let p;const h=f??this.config.n_samples;return d.length>h?(d.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),p=d.slice(0,h)):(p=new Float32Array(h),p.set(d)),{input_features:(await this._extract_fbank_features(p)).unsqueeze_(0)}}}}),"./src/models/whisper/generation_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WhisperGenerationConfig:()=>r});var i=n("./src/generation/configuration_utils.js");class r extends i.GenerationConfig{return_timestamps=null;return_token_timestamps=null;num_frames=null;alignment_heads=null;task=null;language=null;no_timestamps_token_id=null;prompt_ids=null;is_multilingual=null;lang_to_id=null;task_to_id=null;max_initial_timestamp_index=1}}),"./src/models/whisper/processing_whisper.js":((e,t,n)=>{n.r(t),n.d(t,{WhisperProcessor:()=>l});var i=n("./src/models/auto/feature_extraction_auto.js"),r=n("./src/tokenizers.js"),o=n("./src/base/processing_utils.js");class l extends o.Processor{static tokenizer_class=r.AutoTokenizer;static feature_extractor_class=i.AutoFeatureExtractor;async _call(d){return await this.feature_extractor(d)}}}),"./src/models/yolos/image_processing_yolos.js":((e,t,n)=>{n.r(t),n.d(t,{YolosFeatureExtractor:()=>o,YolosImageProcessor:()=>r});var i=n("./src/base/image_processors_utils.js");class r extends i.ImageProcessor{post_process_object_detection(...c){return(0,i.post_process_object_detection)(...c)}}class o extends r{}}),"./src/ops/registry.js":((e,t,n)=>{n.r(t),n.d(t,{TensorOpRegistry:()=>l});var i=n("./src/backends/onnx.js"),r=n("./src/utils/tensor.js");const o=async(c,d,f)=>{const p=await(0,i.createInferenceSession)(new Uint8Array(c),d);return(async h=>{const m=(0,i.isONNXProxy)(),_=Object.fromEntries(Object.entries(h).map(([b,D])=>[b,(m?D.clone():D).ort_tensor])),v=await(0,i.runInferenceSession)(p,_);return Array.isArray(f)?f.map(b=>new r.Tensor(v[b])):new r.Tensor(v[f])})};class l{static session_options={};static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=o([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=o([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=o([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=o([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=o([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=o([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=o([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=o([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}}),"./src/pipelines.js":((e,t,n)=>{n.r(t),n.d(t,{AudioClassificationPipeline:()=>Y,AutomaticSpeechRecognitionPipeline:()=>se,BackgroundRemovalPipeline:()=>ae,DepthEstimationPipeline:()=>ce,DocumentQuestionAnsweringPipeline:()=>H,FeatureExtractionPipeline:()=>j,FillMaskPipeline:()=>A,ImageClassificationPipeline:()=>W,ImageFeatureExtractionPipeline:()=>X,ImageSegmentationPipeline:()=>ne,ImageToImagePipeline:()=>U,ImageToTextPipeline:()=>oe,ObjectDetectionPipeline:()=>ye,Pipeline:()=>b,QuestionAnsweringPipeline:()=>E,SummarizationPipeline:()=>P,Text2TextGenerationPipeline:()=>$,TextClassificationPipeline:()=>D,TextGenerationPipeline:()=>O,TextToAudioPipeline:()=>V,TokenClassificationPipeline:()=>T,TranslationPipeline:()=>C,ZeroShotAudioClassificationPipeline:()=>K,ZeroShotClassificationPipeline:()=>N,ZeroShotImageClassificationPipeline:()=>ge,ZeroShotObjectDetectionPipeline:()=>G,pipeline:()=>Le});var i=n("./src/tokenizers.js"),r=n("./src/models.js"),o=n("./src/models/auto/processing_auto.js");n("./src/base/processing_utils.js");var l=n("./src/utils/generic.js"),c=n("./src/utils/core.js"),d=n("./src/utils/maths.js"),f=n("./src/utils/audio.js"),p=n("./src/utils/tensor.js"),h=n("./src/utils/image.js");async function m(Be){return Array.isArray(Be)||(Be=[Be]),await Promise.all(Be.map(ue=>h.RawImage.read(ue)))}async function _(Be,ue){return Array.isArray(Be)||(Be=[Be]),await Promise.all(Be.map(Z=>typeof Z=="string"||Z instanceof URL?(0,f.read_audio)(Z,ue):Z instanceof Float64Array?new Float32Array(Z):Z))}function v(Be,ue){ue&&(Be=Be.map(Ge=>Ge|0));const[Z,Se,Re,Ve]=Be;return{xmin:Z,ymin:Se,xmax:Re,ymax:Ve}}class b extends l.Callable{constructor({task:ue,model:Z,tokenizer:Se=null,processor:Re=null}){super(),this.task=ue,this.model=Z,this.tokenizer=Se,this.processor=Re}async dispose(){await this.model.dispose()}}class D extends b{constructor(ue){super(ue)}async _call(ue,{top_k:Z=1}={}){const Se=this.tokenizer(ue,{padding:!0,truncation:!0}),Re=await this.model(Se),Ve=this.model.config.problem_type==="multi_label_classification"?Ie=>Ie.sigmoid():Ie=>new p.Tensor("float32",(0,d.softmax)(Ie.data),Ie.dims),Ge=this.model.config.id2label,Ke=[];for(const Ie of Re.logits){const nt=Ve(Ie),Ae=await(0,p.topk)(nt,Z),We=Ae[0].tolist(),Fe=Ae[1].tolist().map((ot,rt)=>({label:Ge?Ge[ot]:`LABEL_${ot}`,score:We[rt]}));Z===1?Ke.push(...Fe):Ke.push(Fe)}return Array.isArray(ue)||Z===1?Ke:Ke[0]}}class T extends b{constructor(ue){super(ue)}async _call(ue,{ignore_labels:Z=["O"]}={}){const Se=Array.isArray(ue),Re=this.tokenizer(Se?ue:[ue],{padding:!0,truncation:!0}),Ge=(await this.model(Re)).logits,Ke=this.model.config.id2label,Ie=[];for(let nt=0;nt<Ge.dims[0];++nt){const Ae=Re.input_ids[nt],We=Ge[nt],ft=[];for(let Fe=0;Fe<We.dims[0];++Fe){const ot=We[Fe],rt=(0,d.max)(ot.data)[1],St=Ke?Ke[rt]:`LABEL_${rt}`;if(Z.includes(St))continue;const Tt=this.tokenizer.decode([Ae[Fe].item()],{skip_special_tokens:!0});if(Tt==="")continue;const ut=(0,d.softmax)(ot.data);ft.push({entity:St,score:ut[rt],index:Fe,word:Tt})}Ie.push(ft)}return Se?Ie:Ie[0]}}class E extends b{constructor(ue){super(ue)}async _call(ue,Z,{top_k:Se=1}={}){const Re=this.tokenizer(ue,{text_pair:Z,padding:!0,truncation:!0}),{start_logits:Ve,end_logits:Ge}=await this.model(Re),Ke=Re.input_ids.tolist(),Ie=Re.attention_mask.tolist(),nt=this.tokenizer.all_special_ids,Ae=[];for(let We=0;We<Ve.dims[0];++We){const ft=Ke[We],Fe=ft.findIndex(et=>et==this.tokenizer.sep_token_id);Ie[We].map((et,kt)=>et==1&&(kt===0||kt>Fe&&nt.findIndex(jt=>jt==ft[kt])===-1));const ot=Ve[We].tolist(),rt=Ge[We].tolist();for(let et=1;et<ot.length;++et)(Ie[We]==0||et<=Fe||nt.findIndex(kt=>kt==ft[et])!==-1)&&(ot[et]=-1/0,rt[et]=-1/0);const St=(0,d.softmax)(ot).map((et,kt)=>[et,kt]),Tt=(0,d.softmax)(rt).map((et,kt)=>[et,kt]);St[0][0]=0,Tt[0][0]=0;const ut=(0,c.product)(St,Tt).filter(et=>et[0][1]<=et[1][1]).map(et=>[et[0][1],et[1][1],et[0][0]*et[1][0]]).sort((et,kt)=>kt[2]-et[2]);for(let et=0;et<Math.min(ut.length,Se);++et){const[kt,jt,Cn]=ut[et],Qt=ft.slice(kt,jt+1),kn=this.tokenizer.decode(Qt,{skip_special_tokens:!0});Ae.push({answer:kn,score:Cn})}}return Se===1?Ae[0]:Ae}}class A extends b{constructor(ue){super(ue)}async _call(ue,{top_k:Z=5}={}){const Se=this.tokenizer(ue,{padding:!0,truncation:!0}),{logits:Re}=await this.model(Se),Ve=[],Ge=Se.input_ids.tolist();for(let Ke=0;Ke<Ge.length;++Ke){const Ie=Ge[Ke],nt=Ie.findIndex(ot=>ot==this.tokenizer.mask_token_id);if(nt===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const Ae=Re[Ke][nt],We=await(0,p.topk)(new p.Tensor("float32",(0,d.softmax)(Ae.data),Ae.dims),Z),ft=We[0].tolist(),Fe=We[1].tolist();Ve.push(Fe.map((ot,rt)=>{const St=Ie.slice();return St[nt]=ot,{score:ft[rt],token:Number(ot),token_str:this.tokenizer.decode([ot]),sequence:this.tokenizer.decode(St,{skip_special_tokens:!0})}}))}return Array.isArray(ue)?Ve:Ve[0]}}class $ extends b{_key="generated_text";constructor(ue){super(ue)}async _call(ue,Z={}){Array.isArray(ue)||(ue=[ue]),this.model.config.prefix&&(ue=ue.map(Ie=>this.model.config.prefix+Ie));const Se=this.model.config.task_specific_params;Se&&Se[this.task]&&Se[this.task].prefix&&(ue=ue.map(Ie=>Se[this.task].prefix+Ie));const Re=this.tokenizer,Ve={padding:!0,truncation:!0};let Ge;this instanceof C&&"_build_translation_inputs"in Re?Ge=Re._build_translation_inputs(ue,Ve,Z):Ge=Re(ue,Ve);const Ke=await this.model.generate({...Ge,...Z});return Re.batch_decode(Ke,{skip_special_tokens:!0}).map(Ie=>({[this._key]:Ie}))}}class P extends ${_key="summary_text";constructor(ue){super(ue)}}class C extends ${_key="translation_text";constructor(ue){super(ue)}}function S(Be){return Array.isArray(Be)&&Be.every(ue=>"role"in ue&&"content"in ue)}class O extends b{constructor(ue){super(ue)}async _call(ue,Z={}){let Se=!1,Re=!1,Ve=Z.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1,Ge;if(typeof ue=="string")Ge=ue=[ue];else if(Array.isArray(ue)&&ue.every(Fe=>typeof Fe=="string"))Se=!0,Ge=ue;else{if(S(ue))ue=[ue];else if(Array.isArray(ue)&&ue.every(S))Se=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");Re=!0,Ge=ue.map(Fe=>this.tokenizer.apply_chat_template(Fe,{tokenize:!1,add_generation_prompt:!0})),Ve=!1}const Ke=Re?!1:Z.return_full_text??!0;this.tokenizer.padding_side="left";const Ie=this.tokenizer(Ge,{add_special_tokens:Ve,padding:!0,truncation:!0}),nt=await this.model.generate({...Ie,...Z}),Ae=this.tokenizer.batch_decode(nt,{skip_special_tokens:!0});let We;!Ke&&Ie.input_ids.dims.at(-1)>0&&(We=this.tokenizer.batch_decode(Ie.input_ids,{skip_special_tokens:!0}).map(Fe=>Fe.length));const ft=Array.from({length:ue.length},Fe=>[]);for(let Fe=0;Fe<Ae.length;++Fe){const ot=Math.floor(Fe/nt.dims[0]*ue.length);We&&(Ae[Fe]=Ae[Fe].slice(We[ot])),ft[ot].push({generated_text:Re?[...ue[ot],{role:"assistant",content:Ae[Fe]}]:Ae[Fe]})}return!Se&&ft.length===1?ft[0]:ft}}class N extends b{constructor(ue){super(ue),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([Z,Se])=>[Z.toLowerCase(),Se])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(ue,Z,{hypothesis_template:Se="This example is {}.",multi_label:Re=!1}={}){const Ve=Array.isArray(ue);Ve||(ue=[ue]),Array.isArray(Z)||(Z=[Z]);const Ge=Z.map(nt=>Se.replace("{}",nt)),Ke=Re||Z.length===1,Ie=[];for(const nt of ue){const Ae=[];for(const Fe of Ge){const ot=this.tokenizer(nt,{text_pair:Fe,padding:!0,truncation:!0}),rt=await this.model(ot);Ke?Ae.push([rt.logits.data[this.contradiction_id],rt.logits.data[this.entailment_id]]):Ae.push(rt.logits.data[this.entailment_id])}const ft=(Ke?Ae.map(Fe=>(0,d.softmax)(Fe)[1]):(0,d.softmax)(Ae)).map((Fe,ot)=>[Fe,ot]).sort((Fe,ot)=>ot[0]-Fe[0]);Ie.push({sequence:nt,labels:ft.map(Fe=>Z[Fe[1]]),scores:ft.map(Fe=>Fe[0])})}return Ve?Ie:Ie[0]}}class j extends b{constructor(ue){super(ue)}async _call(ue,{pooling:Z="none",normalize:Se=!1,quantize:Re=!1,precision:Ve="binary"}={}){const Ge=this.tokenizer(ue,{padding:!0,truncation:!0}),Ke=await this.model(Ge);let Ie=Ke.last_hidden_state??Ke.logits??Ke.token_embeddings;switch(Z){case"none":break;case"mean":Ie=(0,p.mean_pooling)(Ie,Ge.attention_mask);break;case"first_token":case"cls":Ie=Ie.slice(null,0);break;case"last_token":case"eos":Ie=Ie.slice(null,-1);break;default:throw Error(`Pooling method '${Z}' not supported.`)}return Se&&(Ie=Ie.normalize(2,-1)),Re&&(Ie=(0,p.quantize_embeddings)(Ie,Ve)),Ie}}class X extends b{constructor(ue){super(ue)}async _call(ue,{pool:Z=null}={}){const Se=await m(ue),{pixel_values:Re}=await this.processor(Se),Ve=await this.model({pixel_values:Re});let Ge;if(Z){if(!("pooler_output"in Ve))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");Ge=Ve.pooler_output}else Ge=Ve.last_hidden_state??Ve.logits??Ve.image_embeds;return Ge}}class Y extends b{constructor(ue){super(ue)}async _call(ue,{top_k:Z=5}={}){const Se=this.processor.feature_extractor.config.sampling_rate,Re=await _(ue,Se),Ve=this.model.config.id2label,Ge=[];for(const Ke of Re){const Ie=await this.processor(Ke),Ae=(await this.model(Ie)).logits[0],We=await(0,p.topk)(new p.Tensor("float32",(0,d.softmax)(Ae.data),Ae.dims),Z),ft=We[0].tolist(),ot=We[1].tolist().map((rt,St)=>({label:Ve?Ve[rt]:`LABEL_${rt}`,score:ft[St]}));Ge.push(ot)}return Array.isArray(ue)?Ge:Ge[0]}}class K extends b{constructor(ue){super(ue)}async _call(ue,Z,{hypothesis_template:Se="This is a sound of {}."}={}){const Re=!Array.isArray(ue);Re&&(ue=[ue]);const Ve=Z.map(Ae=>Se.replace("{}",Ae)),Ge=this.tokenizer(Ve,{padding:!0,truncation:!0}),Ke=this.processor.feature_extractor.config.sampling_rate,Ie=await _(ue,Ke),nt=[];for(const Ae of Ie){const We=await this.processor(Ae),ft=await this.model({...Ge,...We}),Fe=(0,d.softmax)(ft.logits_per_audio.data);nt.push([...Fe].map((ot,rt)=>({score:ot,label:Z[rt]})))}return Re?nt[0]:nt}}class se extends b{constructor(ue){super(ue)}async _call(ue,Z={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(ue,Z);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":case"parakeet_ctc":return this._call_wav2vec2(ue,Z);case"moonshine":return this._call_moonshine(ue,Z);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(ue,Z){Z.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),Z.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const Se=!Array.isArray(ue);Se&&(ue=[ue]);const Re=this.processor.feature_extractor.config.sampling_rate,Ve=await _(ue,Re),Ge=[];for(const Ke of Ve){const Ie=await this.processor(Ke),Ae=(await this.model(Ie)).logits[0],We=[];for(const Fe of Ae)We.push((0,d.max)(Fe.data)[1]);const ft=this.tokenizer.decode(We,{skip_special_tokens:!0}).trim();Ge.push({text:ft})}return Se?Ge[0]:Ge}async _call_whisper(ue,Z){const Se=Z.return_timestamps??!1,Re=Z.chunk_length_s??0,Ve=Z.force_full_sequences??!1;let Ge=Z.stride_length_s??null;const Ke={...Z};Se==="word"&&(Ke.return_token_timestamps=!0,Ke.return_timestamps=!1);const Ie=!Array.isArray(ue);Ie&&(ue=[ue]);const nt=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,Ae=this.processor.feature_extractor.config.hop_length,We=this.processor.feature_extractor.config.sampling_rate,ft=await _(ue,We),Fe=[];for(const ot of ft){let rt=[];if(Re>0){if(Ge===null)Ge=Re/6;else if(Re<=Ge)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const ut=We*Re,et=We*Ge,kt=ut-2*et;let jt=0;for(;;){const Cn=jt+ut,Qt=ot.subarray(jt,Cn),kn=await this.processor(Qt),Mr=jt===0,an=Cn>=ot.length;if(rt.push({stride:[Qt.length,Mr?0:et,an?0:et],input_features:kn.input_features,is_last:an}),an)break;jt+=kt}}else rt=[{stride:[ot.length,0,0],input_features:(await this.processor(ot)).input_features,is_last:!0}];for(const ut of rt){Ke.num_frames=Math.floor(ut.stride[0]/Ae);const et=await this.model.generate({inputs:ut.input_features,...Ke});Se==="word"?(ut.tokens=et.sequences.tolist()[0],ut.token_timestamps=et.token_timestamps.tolist()[0].map(kt=>(0,d.round)(kt,2))):ut.tokens=et[0].tolist(),ut.stride=ut.stride.map(kt=>kt/We)}const[St,Tt]=this.tokenizer._decode_asr(rt,{time_precision:nt,return_timestamps:Se,force_full_sequences:Ve});Fe.push({text:St,...Tt})}return Ie?Fe[0]:Fe}async _call_moonshine(ue,Z){const Se=!Array.isArray(ue);Se&&(ue=[ue]);const Re=this.processor.feature_extractor.config.sampling_rate,Ve=await _(ue,Re),Ge=[];for(const Ke of Ve){const Ie=await this.processor(Ke),nt=Math.floor(Ke.length/Re)*6,Ae=await this.model.generate({max_new_tokens:nt,...Z,...Ie}),We=this.processor.batch_decode(Ae,{skip_special_tokens:!0})[0];Ge.push({text:We})}return Se?Ge[0]:Ge}}class oe extends b{constructor(ue){super(ue)}async _call(ue,Z={}){const Se=Array.isArray(ue),Re=await m(ue),{pixel_values:Ve}=await this.processor(Re),Ge=[];for(const Ke of Ve){Ke.dims=[1,...Ke.dims];const Ie=await this.model.generate({inputs:Ke,...Z}),nt=this.tokenizer.batch_decode(Ie,{skip_special_tokens:!0}).map(Ae=>({generated_text:Ae.trim()}));Ge.push(nt)}return Se?Ge:Ge[0]}}class W extends b{constructor(ue){super(ue)}async _call(ue,{top_k:Z=5}={}){const Se=await m(ue),{pixel_values:Re}=await this.processor(Se),Ve=await this.model({pixel_values:Re}),Ge=this.model.config.id2label,Ke=[];for(const Ie of Ve.logits){const nt=await(0,p.topk)(new p.Tensor("float32",(0,d.softmax)(Ie.data),Ie.dims),Z),Ae=nt[0].tolist(),ft=nt[1].tolist().map((Fe,ot)=>({label:Ge?Ge[Fe]:`LABEL_${Fe}`,score:Ae[ot]}));Ke.push(ft)}return Array.isArray(ue)?Ke:Ke[0]}}class ne extends b{constructor(ue){super(ue),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(ue,{threshold:Z=.5,mask_threshold:Se=.5,overlap_mask_area_threshold:Re=.8,label_ids_to_fuse:Ve=null,target_sizes:Ge=null,subtask:Ke=null}={}){if(Array.isArray(ue)&&ue.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const nt=await m(ue),Ae=nt.map(ut=>[ut.height,ut.width]),We=await this.processor(nt),{inputNames:ft,outputNames:Fe}=this.model.sessions.model;if(!ft.includes("pixel_values")){if(ft.length!==1)throw Error(`Expected a single input name, but got ${ft.length} inputs: ${ft}.`);const ut=ft[0];if(ut in We)throw Error(`Input name ${ut} already exists in the inputs.`);We[ut]=We.pixel_values}const ot=await this.model(We);let rt=null;if(Ke!==null)rt=this.subtasks_mapping[Ke];else if(this.processor.image_processor){for(const[ut,et]of Object.entries(this.subtasks_mapping))if(et in this.processor.image_processor){rt=this.processor.image_processor[et].bind(this.processor.image_processor),Ke=ut;break}}const St=this.model.config.id2label,Tt=[];if(Ke)if(Ke==="panoptic"||Ke==="instance"){const ut=rt(ot,Z,Se,Re,Ve,Ge??Ae)[0],et=ut.segmentation;for(const kt of ut.segments_info){const jt=new Uint8ClampedArray(et.data.length);for(let Qt=0;Qt<et.data.length;++Qt)et.data[Qt]===kt.id&&(jt[Qt]=255);const Cn=new h.RawImage(jt,et.dims[1],et.dims[0],1);Tt.push({score:kt.score,label:St[kt.label_id],mask:Cn})}}else if(Ke==="semantic"){const{segmentation:ut,labels:et}=rt(ot,Ge??Ae)[0];for(const kt of et){const jt=new Uint8ClampedArray(ut.data.length);for(let Qt=0;Qt<ut.data.length;++Qt)ut.data[Qt]===kt&&(jt[Qt]=255);const Cn=new h.RawImage(jt,ut.dims[1],ut.dims[0],1);Tt.push({score:null,label:St[kt],mask:Cn})}}else throw Error(`Subtask ${Ke} not supported.`);else{const et=ot[Fe[0]];for(let kt=0;kt<Ae.length;++kt){const jt=Ae[kt],Cn=et[kt];Cn.data.some(kn=>kn<-1e-5||kn>1+1e-5)&&Cn.sigmoid_();const Qt=await h.RawImage.fromTensor(Cn.mul_(255).to("uint8")).resize(jt[1],jt[0]);Tt.push({label:null,score:null,mask:Qt})}}return Tt}}class ae extends ne{constructor(ue){super(ue)}async _call(ue,Z={}){if(Array.isArray(ue)&&ue.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const Re=await m(ue),Ve=await super._call(ue,Z);return Re.map((Ke,Ie)=>{const nt=Ke.clone();return nt.putAlpha(Ve[Ie].mask),nt})}}class ge extends b{constructor(ue){super(ue)}async _call(ue,Z,{hypothesis_template:Se="This is a photo of {}"}={}){const Re=Array.isArray(ue),Ve=await m(ue),Ge=Z.map(ft=>Se.replace("{}",ft)),Ke=this.tokenizer(Ge,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Ie}=await this.processor(Ve),nt=await this.model({...Ke,pixel_values:Ie}),Ae=this.model.config.model_type==="siglip"?ft=>ft.sigmoid().data:ft=>(0,d.softmax)(ft.data),We=[];for(const ft of nt.logits_per_image){const ot=[...Ae(ft)].map((rt,St)=>({score:rt,label:Z[St]}));ot.sort((rt,St)=>St.score-rt.score),We.push(ot)}return Re?We:We[0]}}class ye extends b{constructor(ue){super(ue)}async _call(ue,{threshold:Z=.9,percentage:Se=!1}={}){const Re=Array.isArray(ue);if(Re&&ue.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const Ve=await m(ue),Ge=Se?null:Ve.map(Fe=>[Fe.height,Fe.width]),{pixel_values:Ke,pixel_mask:Ie}=await this.processor(Ve),nt=await this.model({pixel_values:Ke,pixel_mask:Ie}),Ae=this.processor.image_processor.post_process_object_detection(nt,Z,Ge),We=this.model.config.id2label,ft=Ae.map(Fe=>Fe.boxes.map((ot,rt)=>({score:Fe.scores[rt],label:We[Fe.classes[rt]],box:v(ot,!Se)})));return Re?ft:ft[0]}}class G extends b{constructor(ue){super(ue)}async _call(ue,Z,{threshold:Se=.1,top_k:Re=null,percentage:Ve=!1}={}){const Ge=Array.isArray(ue),Ke=await m(ue),Ie=this.tokenizer(Z,{padding:!0,truncation:!0}),nt=await this.processor(Ke),Ae=[];for(let We=0;We<Ke.length;++We){const ft=Ke[We],Fe=Ve?null:[[ft.height,ft.width]],ot=nt.pixel_values[We].unsqueeze_(0),rt=await this.model({...Ie,pixel_values:ot});let St;if("post_process_grounded_object_detection"in this.processor){const Tt=this.processor.post_process_grounded_object_detection(rt,Ie.input_ids,{box_threshold:Se,text_threshold:Se,target_sizes:Fe})[0];St=Tt.boxes.map((ut,et)=>({score:Tt.scores[et],label:Tt.labels[et],box:v(ut,!Ve)}))}else{const Tt=this.processor.image_processor.post_process_object_detection(rt,Se,Fe,!0)[0];St=Tt.boxes.map((ut,et)=>({score:Tt.scores[et],label:Z[Tt.classes[et]],box:v(ut,!Ve)}))}St.sort((Tt,ut)=>ut.score-Tt.score),Re!==null&&(St=St.slice(0,Re)),Ae.push(St)}return Ge?Ae:Ae[0]}}class H extends b{constructor(ue){super(ue)}async _call(ue,Z,Se={}){const Re=(await m(ue))[0],{pixel_values:Ve}=await this.processor(Re),Ge=`<s_docvqa><s_question>${Z}</s_question><s_answer>`,Ke=this.tokenizer(Ge,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Ie=await this.model.generate({inputs:Ve,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:Ke,...Se}),Ae=this.tokenizer.batch_decode(Ie)[0].match(/<s_answer>(.*?)<\/s_answer>/);let We=null;return Ae&&Ae.length>=2&&(We=Ae[1].trim()),[{answer:We}]}}class V extends b{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(ue){super(ue),this.vocoder=ue.vocoder??null}async _prepare_speaker_embeddings(ue){if((typeof ue=="string"||ue instanceof URL)&&(ue=new Float32Array(await(await fetch(ue)).arrayBuffer())),ue instanceof Float32Array)ue=new p.Tensor("float32",ue,[ue.length]);else if(!(ue instanceof p.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");return ue}async _call(ue,{speaker_embeddings:Z=null,num_inference_steps:Se,speed:Re}={}){return this.processor?this._call_text_to_spectrogram(ue,{speaker_embeddings:Z}):this.model.config.model_type==="supertonic"?this._call_supertonic(ue,{speaker_embeddings:Z,num_inference_steps:Se,speed:Re}):this._call_text_to_waveform(ue)}async _call_supertonic(ue,{speaker_embeddings:Z,num_inference_steps:Se,speed:Re}){if(!Z)throw new Error("Speaker embeddings must be provided for Supertonic models.");Z=await this._prepare_speaker_embeddings(Z);const{sampling_rate:Ve,style_dim:Ge}=this.model.config;Z=Z.view(1,-1,Ge);const Ke=this.tokenizer(ue,{padding:!0,truncation:!0}),{waveform:Ie}=await this.model.generate_speech({...Ke,style:Z,num_inference_steps:Se,speed:Re});return new f.RawAudio(Ie.data,Ve)}async _call_text_to_waveform(ue){const Z=this.tokenizer(ue,{padding:!0,truncation:!0}),{waveform:Se}=await this.model(Z),Re=this.model.config.sampling_rate;return new f.RawAudio(Se.data,Re)}async _call_text_to_spectrogram(ue,{speaker_embeddings:Z}){this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await r.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"}));const{input_ids:Se}=this.tokenizer(ue,{padding:!0,truncation:!0});Z=await this._prepare_speaker_embeddings(Z),Z=Z.view(1,-1);const{waveform:Re}=await this.model.generate_speech(Se,Z,{vocoder:this.vocoder}),Ve=this.processor.feature_extractor.config.sampling_rate;return new f.RawAudio(Re.data,Ve)}}class U extends b{constructor(ue){super(ue)}async _call(ue){const Z=await m(ue),Se=await this.processor(Z),Re=await this.model(Se),Ve=[];for(const Ge of Re.reconstruction){const Ke=Ge.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");Ve.push(h.RawImage.fromTensor(Ke))}return Ve.length>1?Ve:Ve[0]}}class ce extends b{constructor(ue){super(ue)}async _call(ue){const Z=await m(ue),Se=await this.processor(Z),{predicted_depth:Re}=await this.model(Se),Ve=[];for(let Ge=0;Ge<Z.length;++Ge){const Ke=Re[Ge],[Ie,nt]=Ke.dims.slice(-2),[Ae,We]=Z[Ge].size,ft=(await(0,p.interpolate_4d)(Ke.view(1,1,Ie,nt),{size:[We,Ae],mode:"bilinear"})).view(We,Ae),Fe=ft.min().item(),ot=ft.max().item(),rt=ft.sub(Fe).div_(ot-Fe).mul_(255).to("uint8").unsqueeze(0),St=h.RawImage.fromTensor(rt);Ve.push({predicted_depth:ft,depth:St})}return Ve.length>1?Ve:Ve[0]}}const ve=Object.freeze({"text-classification":{tokenizer:i.AutoTokenizer,pipeline:D,model:r.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:i.AutoTokenizer,pipeline:T,model:r.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:i.AutoTokenizer,pipeline:E,model:r.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:i.AutoTokenizer,pipeline:A,model:r.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:i.AutoTokenizer,pipeline:P,model:r.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:i.AutoTokenizer,pipeline:C,model:r.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:i.AutoTokenizer,pipeline:$,model:r.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:i.AutoTokenizer,pipeline:O,model:r.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:i.AutoTokenizer,pipeline:N,model:r.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:Y,model:r.AutoModelForAudioClassification,processor:o.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:i.AutoTokenizer,pipeline:K,model:r.AutoModel,processor:o.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:i.AutoTokenizer,pipeline:se,model:[r.AutoModelForSpeechSeq2Seq,r.AutoModelForCTC],processor:o.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:i.AutoTokenizer,pipeline:V,model:[r.AutoModelForTextToWaveform,r.AutoModelForTextToSpectrogram],processor:[o.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:i.AutoTokenizer,pipeline:oe,model:r.AutoModelForVision2Seq,processor:o.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:W,model:r.AutoModelForImageClassification,processor:o.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ne,model:[r.AutoModelForImageSegmentation,r.AutoModelForSemanticSegmentation,r.AutoModelForUniversalSegmentation],processor:o.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:ae,model:[r.AutoModelForImageSegmentation,r.AutoModelForSemanticSegmentation,r.AutoModelForUniversalSegmentation],processor:o.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:i.AutoTokenizer,pipeline:ge,model:r.AutoModel,processor:o.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ye,model:r.AutoModelForObjectDetection,processor:o.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:i.AutoTokenizer,pipeline:G,model:r.AutoModelForZeroShotObjectDetection,processor:o.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:i.AutoTokenizer,pipeline:H,model:r.AutoModelForDocumentQuestionAnswering,processor:o.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:U,model:r.AutoModelForImageToImage,processor:o.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:ce,model:r.AutoModelForDepthEstimation,processor:o.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:i.AutoTokenizer,pipeline:j,model:r.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:o.AutoProcessor,pipeline:X,model:[r.AutoModelForImageFeatureExtraction,r.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),ke=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function Le(Be,ue=null,{progress_callback:Z=null,config:Se=null,cache_dir:Re=null,local_files_only:Ve=!1,revision:Ge="main",device:Ke=null,dtype:Ie=null,subfolder:nt="onnx",use_external_data_format:Ae=null,model_file_name:We=null,session_options:ft={}}={}){Be=ke[Be]??Be;const Fe=ve[Be.split("_",1)[0]];if(!Fe)throw Error(`Unsupported pipeline: ${Be}. Must be one of [${Object.keys(ve)}]`);ue||(ue=Fe.default.model,console.log(`No model specified. Using default model: "${ue}".`));const ot={progress_callback:Z,config:Se,cache_dir:Re,local_files_only:Ve,revision:Ge,device:Ke,dtype:Ie,subfolder:nt,use_external_data_format:Ae,model_file_name:We,session_options:ft},rt=new Map([["tokenizer",Fe.tokenizer],["model",Fe.model],["processor",Fe.processor]]),St=await Xe(rt,ue,ot);St.task=Be,(0,c.dispatchCallback)(Z,{status:"ready",task:Be,model:ue});const Tt=Fe.pipeline;return new Tt(St)}async function Xe(Be,ue,Z){const Se=Object.create(null),Re=[];for(const[Ve,Ge]of Be.entries()){if(!Ge)continue;let Ke;Array.isArray(Ge)?Ke=new Promise(async(Ie,nt)=>{let Ae;for(const We of Ge){if(We===null){Ie(null);return}try{Ie(await We.from_pretrained(ue,Z));return}catch(ft){if(ft.message?.includes("Unsupported model type"))Ae=ft;else if(ft.message?.includes("Could not locate file"))Ae=ft;else{nt(ft);return}}}nt(Ae)}):Ke=Ge.from_pretrained(ue,Z),Se[Ve]=Ke,Re.push(Ke)}await Promise.all(Re);for(const[Ve,Ge]of Object.entries(Se))Se[Ve]=await Ge;return Se}}),"./src/tokenizers.js":((e,t,n)=>{n.r(t),n.d(t,{AlbertTokenizer:()=>ga,AutoTokenizer:()=>Zs,BartTokenizer:()=>_t,BertTokenizer:()=>Wn,BlenderbotSmallTokenizer:()=>dt,BlenderbotTokenizer:()=>lt,BloomTokenizer:()=>cn,CLIPTokenizer:()=>qi,CamembertTokenizer:()=>fe,CodeGenTokenizer:()=>Ki,CodeLlamaTokenizer:()=>Hn,CohereTokenizer:()=>Nr,ConvBertTokenizer:()=>de,DebertaTokenizer:()=>Xt,DebertaV2Tokenizer:()=>_a,DistilBertTokenizer:()=>le,ElectraTokenizer:()=>je,EsmTokenizer:()=>ti,FalconTokenizer:()=>Or,GPT2Tokenizer:()=>Et,GPTNeoXTokenizer:()=>er,GemmaTokenizer:()=>ri,Grok1Tokenizer:()=>or,HerbertTokenizer:()=>L,LlamaTokenizer:()=>hr,M2M100Tokenizer:()=>Hi,MBart50Tokenizer:()=>yt,MBartTokenizer:()=>Gt,MPNetTokenizer:()=>Ai,MarianTokenizer:()=>$r,MgpstrTokenizer:()=>va,MobileBertTokenizer:()=>ia,NllbTokenizer:()=>Mi,NougatTokenizer:()=>An,PreTrainedTokenizer:()=>Bt,Qwen2Tokenizer:()=>ni,RoFormerTokenizer:()=>J,RobertaTokenizer:()=>rn,SiglipTokenizer:()=>ii,SpeechT5Tokenizer:()=>Ct,SqueezeBertTokenizer:()=>ei,T5Tokenizer:()=>mt,TokenizerModel:()=>X,VitsTokenizer:()=>Eo,Wav2Vec2CTCTokenizer:()=>ci,WhisperTokenizer:()=>So,XLMRobertaTokenizer:()=>mr,XLMTokenizer:()=>xe,is_chinese_char:()=>A});var i=n("./src/utils/generic.js"),r=n("./src/utils/core.js"),o=n("./src/utils/hub.js"),l=n("./src/utils/maths.js"),c=n("./src/utils/tensor.js"),d=n("./src/utils/data-structures.js"),f=n("./node_modules/@huggingface/jinja/dist/index.js"),p=n("./src/models/whisper/common_whisper.js");async function h(Me,R){const ie=await Promise.all([(0,o.getModelJSON)(Me,"tokenizer.json",!0,R),(0,o.getModelJSON)(Me,"tokenizer_config.json",!0,R)]);return R.legacy!==null&&(ie[1].legacy=R.legacy),ie}function m(Me,R){const ie=[];let he=0;for(const me of Me.matchAll(R)){const ze=me[0];he<me.index&&ie.push(Me.slice(he,me.index)),ze.length>0&&ie.push(ze),he=me.index+ze.length}return he<Me.length&&ie.push(Me.slice(he)),ie}function _(Me,R=!0){if(Me.Regex!==void 0){let ie=Me.Regex.replace(/\\([#&~])/g,"$1");for(const[he,me]of N)ie=ie.replaceAll(he,me);return new RegExp(ie,"gu")}else if(Me.String!==void 0){const ie=(0,r.escapeRegExp)(Me.String);return new RegExp(R?ie:`(${ie})`,"gu")}else return console.warn("Unknown pattern type:",Me),null}function v(Me){return new Map(Object.entries(Me))}function b(Me){const R=Me.dims;switch(R.length){case 1:return Me.tolist();case 2:if(R[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return Me.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${R.length}.`)}}function D(Me){return Me.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function T(Me){return Me.replace(new RegExp("\\p{M}","gu"),"")}function E(Me){return T(Me.toLowerCase())}function A(Me){return Me>=19968&&Me<=40959||Me>=13312&&Me<=19903||Me>=131072&&Me<=173791||Me>=173824&&Me<=177983||Me>=177984&&Me<=178207||Me>=178208&&Me<=183983||Me>=63744&&Me<=64255||Me>=194560&&Me<=195103}function $(Me,R,ie){const he=[];let me=0;for(;me<Me.length;){if(he.push(Me[me]),(R.get(Me[me])??ie)!==ie){++me;continue}for(;++me<Me.length&&(R.get(Me[me])??ie)===ie;)R.get(he.at(-1))!==ie&&(he[he.length-1]+=Me[me])}return he}function P(Me){return Me.match(/\S+/g)||[]}const C="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",S=new RegExp(`^[${C}]+$`,"gu"),O=".,!?",N=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],["(?i:[sdmt]|ll|ve|re)","(?:[sS]|[dD]|[mM]|[tT]|[lL][lL]|[vV][eE]|[rR][eE])"],["[^\\r\\n\\p{L}\\p{N}]?+","[^\\r\\n\\p{L}\\p{N}]?"],["[^\\s\\p{L}\\p{N}]++","[^\\s\\p{L}\\p{N}]+"],[` ?[^(\\s|[${O}])]+`,` ?[^\\s${O}]+`]]);class j{constructor(R){this.content=R.content,this.id=R.id,this.single_word=R.single_word??!1,this.lstrip=R.lstrip??!1,this.rstrip=R.rstrip??!1,this.special=R.special??!1,this.normalized=R.normalized??null}}class X extends i.Callable{constructor(R){super(),this.config=R,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(R,...ie){switch(R.type){case"WordPiece":return new Y(R);case"Unigram":return new K(R,...ie);case"BPE":return new W(R);default:if(R.vocab)return Array.isArray(R.vocab)?new K(R,...ie):Object.hasOwn(R,"continuing_subword_prefix")&&Object.hasOwn(R,"unk_token")?Object.hasOwn(R,"merges")?new W(R):new Y(R):new ne(R,...ie);throw new Error(`Unknown TokenizerModel type: ${R.type}`)}}_call(R){return R=this.encode(R),this.fuse_unk&&(R=$(R,this.tokens_to_ids,this.unk_token_id)),R}encode(R){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(R){return R.map(ie=>this.tokens_to_ids.get(ie)??this.unk_token_id)}convert_ids_to_tokens(R){return R.map(ie=>this.vocab[ie]??this.unk_token)}}class Y extends X{constructor(R){super(R),this.tokens_to_ids=v(R.vocab),this.unk_token_id=this.tokens_to_ids.get(R.unk_token),this.unk_token=R.unk_token,this.max_input_chars_per_word=R.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[ie,he]of this.tokens_to_ids)this.vocab[he]=ie}encode(R){const ie=[];for(const he of R){const me=[...he];if(me.length>this.max_input_chars_per_word){ie.push(this.unk_token);continue}let ze=!1,Ze=0;const xt=[];for(;Ze<me.length;){let bt=me.length,Mt=null;for(;Ze<bt;){let vt=me.slice(Ze,bt).join("");if(Ze>0&&(vt=this.config.continuing_subword_prefix+vt),this.tokens_to_ids.has(vt)){Mt=vt;break}--bt}if(Mt===null){ze=!0;break}xt.push(Mt),Ze=bt}ze?ie.push(this.unk_token):ie.push(...xt)}return ie}}class K extends X{constructor(R,ie){super(R);const he=R.vocab.length;this.vocab=new Array(he),this.scores=new Array(he);for(let me=0;me<he;++me)[this.vocab[me],this.scores[me]]=R.vocab[me];this.unk_token_id=R.unk_id,this.unk_token=this.vocab[R.unk_id],this.tokens_to_ids=new Map(this.vocab.map((me,ze)=>[me,ze])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ie.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,l.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new d.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(R){const ie=R.chars,he=1;let me=0;for(;me<ie.length;){let ze=!1;const Ze=ie.slice(me).join(""),xt=this.trie.commonPrefixSearch(Ze);for(const bt of xt){const Mt=this.tokens_to_ids.get(bt),vt=this.scores[Mt],en=(0,r.len)(bt);R.insert(me,en,vt,Mt),!ze&&en===he&&(ze=!0)}ze||R.insert(me,he,this.unk_score,this.unk_token_id),me+=he}}tokenize(R){const ie=new d.TokenLattice(R,this.bos_token_id,this.eos_token_id);return this.populateNodes(ie),ie.tokens()}encode(R){const ie=[];for(const he of R){const me=this.tokenize(he);ie.push(...me)}return ie}}const se=(()=>{const Me=[...Array.from({length:94},(me,ze)=>ze+33),...Array.from({length:12},(me,ze)=>ze+161),...Array.from({length:82},(me,ze)=>ze+174)],R=Me.slice();let ie=0;for(let me=0;me<256;++me)Me.includes(me)||(Me.push(me),R.push(256+ie),ie+=1);const he=R.map(me=>String.fromCharCode(me));return Object.fromEntries(Me.map((me,ze)=>[me,he[ze]]))})(),oe=(0,r.reverseDictionary)(se);class W extends X{constructor(R){super(R),this.tokens_to_ids=v(R.vocab),this.unk_token_id=this.tokens_to_ids.get(R.unk_token),this.unk_token=R.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[he,me]of this.tokens_to_ids)this.vocab[me]=he;const ie=Array.isArray(R.merges[0]);this.merges=ie?R.merges:R.merges.map(he=>he.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((he,me)=>[JSON.stringify(he),me])),this.end_of_word_suffix=R.end_of_word_suffix,this.continuing_subword_suffix=R.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new d.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(R){if(R.length===0)return[];const ie=this.cache.get(R);if(ie!==void 0)return ie;const he=Array.from(R);this.end_of_word_suffix&&(he[he.length-1]+=this.end_of_word_suffix);let me=[];if(he.length>1){const ze=new d.PriorityQueue((bt,Mt)=>bt.score<Mt.score);let Ze={token:he[0],bias:0,prev:null,next:null},xt=Ze;for(let bt=1;bt<he.length;++bt){const Mt={bias:bt/he.length,token:he[bt],prev:xt,next:null};xt.next=Mt,this._add_node(ze,xt),xt=Mt}for(;!ze.isEmpty();){const bt=ze.pop();if(bt.deleted||!bt.next||bt.next.deleted)continue;if(bt.deleted=!0,bt.next.deleted=!0,bt.prev){const vt={...bt.prev};bt.prev.deleted=!0,bt.prev=vt,vt.prev?vt.prev.next=vt:Ze=vt}const Mt={token:bt.token+bt.next.token,bias:bt.bias,prev:bt.prev,next:bt.next.next};Mt.prev?(Mt.prev.next=Mt,this._add_node(ze,Mt.prev)):Ze=Mt,Mt.next&&(Mt.next.prev=Mt,this._add_node(ze,Mt))}for(let bt=Ze;bt!==null;bt=bt.next)me.push(bt.token)}else me=he;if(this.continuing_subword_suffix)for(let ze=0;ze<me.length-1;++ze)me[ze]+=this.continuing_subword_suffix;return R.length<this.max_length_to_cache&&this.cache.put(R,me),me}_add_node(R,ie){const he=this.bpe_ranks.get(JSON.stringify([ie.token,ie.next.token]));he!==void 0&&(ie.score=he+ie.bias,R.push(ie))}encode(R){const ie=[];for(const he of R){if(this.ignore_merges&&this.tokens_to_ids.has(he)){ie.push(he);continue}const me=this.bpe(he);for(const ze of me)if(this.tokens_to_ids.has(ze))ie.push(ze);else if(this.byte_fallback){const Ze=Array.from(this.text_encoder.encode(ze)).map(xt=>`<0x${xt.toString(16).toUpperCase().padStart(2,"0")}>`);Ze.every(xt=>this.tokens_to_ids.has(xt))?ie.push(...Ze):ie.push(this.unk_token)}else ie.push(this.unk_token)}return ie}}class ne extends X{constructor(R,ie){super(R),this.tokens_to_ids=v(ie.target_lang?R.vocab[ie.target_lang]:R.vocab),this.bos_token=ie.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=ie.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=ie.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=ie.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[he,me]of this.tokens_to_ids)this.vocab[me]=he}encode(R){return R}}class ae extends i.Callable{constructor(R){super(),this.config=R}static fromConfig(R){if(R===null)return null;switch(R.type){case"BertNormalizer":return new Be(R);case"Precompiled":return new an(R);case"Sequence":return new Xe(R);case"Replace":return new ge(R);case"NFC":return new G(R);case"NFD":return new H(R);case"NFKC":return new V(R);case"NFKD":return new U(R);case"Strip":return new ce(R);case"StripAccents":return new ve(R);case"Lowercase":return new ke(R);case"Prepend":return new Le(R);default:throw new Error(`Unknown Normalizer type: ${R.type}`)}}normalize(R){throw Error("normalize should be implemented in subclass.")}_call(R){return this.normalize(R)}}class ge extends ae{normalize(R){const ie=_(this.config.pattern);return ie===null?R:R.replaceAll(ie,this.config.content)}}class ye extends ae{form=void 0;normalize(R){return R=R.normalize(this.form),R}}class G extends ye{form="NFC"}class H extends ye{form="NFD"}class V extends ye{form="NFKC"}class U extends ye{form="NFKD"}class ce extends ae{normalize(R){return this.config.strip_left&&this.config.strip_right?R=R.trim():(this.config.strip_left&&(R=R.trimStart()),this.config.strip_right&&(R=R.trimEnd())),R}}class ve extends ae{normalize(R){return R=T(R),R}}class ke extends ae{normalize(R){return R=R.toLowerCase(),R}}class Le extends ae{normalize(R){return R=this.config.prepend+R,R}}class Xe extends ae{constructor(R){super(R),this.normalizers=R.normalizers.map(ie=>ae.fromConfig(ie))}normalize(R){return this.normalizers.reduce((ie,he)=>he.normalize(ie),R)}}class Be extends ae{_tokenize_chinese_chars(R){const ie=[];for(let he=0;he<R.length;++he){const me=R[he],ze=me.charCodeAt(0);A(ze)?(ie.push(" "),ie.push(me),ie.push(" ")):ie.push(me)}return ie.join("")}stripAccents(R){return R.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(R){switch(R){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(R)}}_clean_text(R){const ie=[];for(const he of R){const me=he.charCodeAt(0);me===0||me===65533||this._is_control(he)||(/^\s$/.test(he)?ie.push(" "):ie.push(he))}return ie.join("")}normalize(R){return this.config.clean_text&&(R=this._clean_text(R)),this.config.handle_chinese_chars&&(R=this._tokenize_chinese_chars(R)),this.config.lowercase?(R=R.toLowerCase(),this.config.strip_accents!==!1&&(R=this.stripAccents(R))):this.config.strip_accents&&(R=this.stripAccents(R)),R}}class ue extends i.Callable{static fromConfig(R){if(R===null)return null;switch(R.type){case"BertPreTokenizer":return new Z(R);case"Sequence":return new _i(R);case"Whitespace":return new is(R);case"WhitespaceSplit":return new as(R);case"Metaspace":return new kn(R);case"ByteLevel":return new Se(R);case"Split":return new Re(R);case"Punctuation":return new Ve(R);case"Digits":return new Ge(R);case"Replace":return new pa(R);case"FixedLength":return new Jn(R);default:throw new Error(`Unknown PreTokenizer type: ${R.type}`)}}pre_tokenize_text(R,ie){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(R,ie){return(Array.isArray(R)?R.map(he=>this.pre_tokenize_text(he,ie)):this.pre_tokenize_text(R,ie)).flat()}_call(R,ie){return this.pre_tokenize(R,ie)}}class Z extends ue{constructor(R){super(),this.pattern=new RegExp(`[^\\s${C}]+|[${C}]`,"gu")}pre_tokenize_text(R,ie){return R.trim().match(this.pattern)||[]}}class Se extends ue{constructor(R){super(),this.config=R,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=se,this.text_encoder=new TextEncoder}pre_tokenize_text(R,ie){return this.add_prefix_space&&!R.startsWith(" ")&&(R=" "+R),(this.use_regex?R.match(this.pattern)||[]:[R]).map(me=>Array.from(this.text_encoder.encode(me),ze=>this.byte_encoder[ze]).join(""))}}class Re extends ue{constructor(R){super(),this.config=R,this.pattern=_(this.config.pattern,this.config.invert)}pre_tokenize_text(R,ie){return this.pattern===null?[]:this.config.invert?R.match(this.pattern)||[]:this.config.behavior?.toLowerCase()==="removed"?R.split(this.pattern).filter(he=>he):m(R,this.pattern)}}class Ve extends ue{constructor(R){super(),this.config=R,this.pattern=new RegExp(`[^${C}]+|[${C}]+`,"gu")}pre_tokenize_text(R,ie){return R.match(this.pattern)||[]}}class Ge extends ue{constructor(R){super(),this.config=R;const ie=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(ie,"gu")}pre_tokenize_text(R,ie){return R.match(this.pattern)||[]}}class Ke extends i.Callable{constructor(R){super(),this.config=R}static fromConfig(R){if(R===null)return null;switch(R.type){case"TemplateProcessing":return new Ae(R);case"ByteLevel":return new We(R);case"RobertaProcessing":return new nt(R);case"BertProcessing":return new Ie(R);case"Sequence":return new ft(R);default:throw new Error(`Unknown PostProcessor type: ${R.type}`)}}post_process(R,...ie){throw Error("post_process should be implemented in subclass.")}_call(R,...ie){return this.post_process(R,...ie)}}class Ie extends Ke{constructor(R){super(R),this.cls=R.cls[0],this.sep=R.sep[0]}post_process(R,ie=null,{add_special_tokens:he=!0}={}){he&&(R=(0,r.mergeArrays)([this.cls],R,[this.sep]));let me=new Array(R.length).fill(0);if(ie!==null){const ze=he&&this instanceof nt?[this.sep]:[],Ze=he?[this.sep]:[];R=(0,r.mergeArrays)(R,ze,ie,Ze),me=(0,r.mergeArrays)(me,new Array(ie.length+ze.length+Ze.length).fill(1))}return{tokens:R,token_type_ids:me}}}class nt extends Ie{}class Ae extends Ke{constructor(R){super(R),this.single=R.single,this.pair=R.pair}post_process(R,ie=null,{add_special_tokens:he=!0}={}){const me=ie===null?this.single:this.pair;let ze=[],Ze=[];for(const xt of me)"SpecialToken"in xt?he&&(ze.push(xt.SpecialToken.id),Ze.push(xt.SpecialToken.type_id)):"Sequence"in xt&&(xt.Sequence.id==="A"?(ze=(0,r.mergeArrays)(ze,R),Ze=(0,r.mergeArrays)(Ze,new Array(R.length).fill(xt.Sequence.type_id))):xt.Sequence.id==="B"&&(ze=(0,r.mergeArrays)(ze,ie),Ze=(0,r.mergeArrays)(Ze,new Array(ie.length).fill(xt.Sequence.type_id))));return{tokens:ze,token_type_ids:Ze}}}class We extends Ke{post_process(R,ie=null){return ie&&(R=(0,r.mergeArrays)(R,ie)),{tokens:R}}}class ft extends Ke{constructor(R){super(R),this.processors=R.processors.map(ie=>Ke.fromConfig(ie))}post_process(R,ie=null,he={}){let me;for(const ze of this.processors)if(ze instanceof We)R=ze.post_process(R).tokens,ie&&(ie=ze.post_process(ie).tokens);else{const Ze=ze.post_process(R,ie,he);R=Ze.tokens,me=Ze.token_type_ids}return{tokens:R,token_type_ids:me}}}class Fe extends i.Callable{constructor(R){super(),this.config=R,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=R.trim_offsets}static fromConfig(R){if(R===null)return null;switch(R.type){case"WordPiece":return new ut(R);case"Metaspace":return new Mr(R);case"ByteLevel":return new et(R);case"Replace":return new ot(R);case"ByteFallback":return new rt(R);case"Fuse":return new St(R);case"Strip":return new Tt(R);case"Sequence":return new jt(R);case"CTC":return new kt(R);case"BPEDecoder":return new Cn(R);default:throw new Error(`Unknown Decoder type: ${R.type}`)}}_call(R){return this.decode(R)}decode(R){return this.decode_chain(R).join("")}decode_chain(R){throw Error("`decode_chain` should be implemented in subclass.")}}class ot extends Fe{decode_chain(R){const ie=_(this.config.pattern);return ie===null?R:R.map(he=>he.replaceAll(ie,this.config.content))}}class rt extends Fe{constructor(R){super(R),this.text_decoder=new TextDecoder}decode_chain(R){const ie=[];let he=[];for(const me of R){let ze=null;if(me.length===6&&me.startsWith("<0x")&&me.endsWith(">")){const Ze=parseInt(me.slice(3,5),16);isNaN(Ze)||(ze=Ze)}if(ze!==null)he.push(ze);else{if(he.length>0){const Ze=this.text_decoder.decode(Uint8Array.from(he));ie.push(Ze),he=[]}ie.push(me)}}if(he.length>0){const me=this.text_decoder.decode(Uint8Array.from(he));ie.push(me),he=[]}return ie}}class St extends Fe{decode_chain(R){return[R.join("")]}}class Tt extends Fe{constructor(R){super(R),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(R){return R.map(ie=>{let he=0;for(let ze=0;ze<this.start&&ie[ze]===this.content;++ze){he=ze+1;continue}let me=ie.length;for(let ze=0;ze<this.stop;++ze){const Ze=ie.length-ze-1;if(ie[Ze]===this.content){me=Ze;continue}else break}return ie.slice(he,me)})}}class ut extends Fe{constructor(R){super(R),this.cleanup=R.cleanup}decode_chain(R){return R.map((ie,he)=>(he!==0&&(ie.startsWith(this.config.prefix)?ie=ie.replace(this.config.prefix,""):ie=" "+ie),this.cleanup&&(ie=D(ie)),ie))}}class et extends Fe{constructor(R){super(R),this.byte_decoder=oe,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(R){const ie=R.join(""),he=new Uint8Array([...ie].map(ze=>this.byte_decoder[ze]));return this.text_decoder.decode(he)}decode_chain(R){const ie=[];let he=[];for(const me of R)this.added_tokens.find(ze=>ze.content===me)!==void 0?(he.length>0&&(ie.push(this.convert_tokens_to_string(he)),he=[]),ie.push(me)):he.push(me);return he.length>0&&ie.push(this.convert_tokens_to_string(he)),ie}}class kt extends Fe{constructor(R){super(R),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(R){if(R.length===0)return"";const ie=[R[0]];for(let ze=1;ze<R.length;++ze)R[ze]!==ie.at(-1)&&ie.push(R[ze]);let me=ie.filter(ze=>ze!==this.pad_token).join("");return this.cleanup&&(me=D(me).replaceAll(this.word_delimiter_token," ").trim()),me}decode_chain(R){return[this.convert_tokens_to_string(R)]}}class jt extends Fe{constructor(R){super(R),this.decoders=R.decoders.map(ie=>Fe.fromConfig(ie))}decode_chain(R){return this.decoders.reduce((ie,he)=>he.decode_chain(ie),R)}}class Cn extends Fe{constructor(R){super(R),this.suffix=this.config.suffix}decode_chain(R){return R.map((ie,he)=>ie.replaceAll(this.suffix,he===R.length-1?"":" "))}}class Qt extends Fe{decode_chain(R){let ie="";for(let he=1;he<R.length;he+=2)ie+=R[he];return[ie]}}class kn extends ue{constructor(R){super(),this.replacement=R.replacement,this.strRep=R.str_rep||this.replacement,this.prepend_scheme=R.prepend_scheme??"always"}pre_tokenize_text(R,{section_index:ie=void 0}={}){let he=R.replaceAll(" ",this.strRep);return!he.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&ie===0)&&(he=this.strRep+he),[he]}}class Mr extends Fe{constructor(R){super(R),this.replacement=R.replacement}decode_chain(R){const ie=[];for(let he=0;he<R.length;++he){let me=R[he].replaceAll(this.replacement," ");he==0&&me.startsWith(" ")&&(me=me.substring(1)),ie.push(me)}return ie}}class an extends ae{constructor(R){super(R),this.charsmap=R.precompiled_charsmap}normalize(R){return R=R.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),R=R.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),R.includes("")?R=R.split("").map(he=>he.normalize("NFKC")).join(""):R=R.normalize("NFKC"),R}}class _i extends ue{constructor(R){super(),this.tokenizers=R.pretokenizers.map(ie=>ue.fromConfig(ie))}pre_tokenize_text(R,ie){return this.tokenizers.reduce((he,me)=>me.pre_tokenize(he,ie),[R])}}class is extends ue{constructor(R){super()}pre_tokenize_text(R,ie){return R.match(/\w+|[^\w\s]+/g)||[]}}class as extends ue{constructor(R){super()}pre_tokenize_text(R,ie){return P(R)}}class pa extends ue{constructor(R){super(),this.config=R,this.pattern=_(this.config.pattern),this.content=this.config.content}pre_tokenize_text(R,ie){return this.pattern===null?[R]:[R.replaceAll(this.pattern,this.config.content)]}}class Jn extends ue{constructor(R){super(),this._length=R.length}pre_tokenize_text(R,ie){const he=[];for(let me=0;me<R.length;me+=this._length)he.push(R.slice(me,me+this._length));return he}}const Ir=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function Yr(Me,R,ie,he){for(const me of Object.keys(Me)){const ze=R-Me[me].length,Ze=ie(me),xt=new Array(ze).fill(Ze);Me[me]=he==="right"?(0,r.mergeArrays)(Me[me],xt):(0,r.mergeArrays)(xt,Me[me])}}function ra(Me,R){for(const ie of Object.keys(Me))Me[ie].length=R}class Bt extends i.Callable{return_token_type_ids=!1;padding_side="right";constructor(R,ie){super(),this.config=ie,this.normalizer=ae.fromConfig(R.normalizer),this.pre_tokenizer=ue.fromConfig(R.pre_tokenizer),this.model=X.fromConfig(R.model,ie),this.post_processor=Ke.fromConfig(R.post_processor),this.decoder=Fe.fromConfig(R.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const he of R.added_tokens){const me=new j(he);this.added_tokens.push(me),this.model.tokens_to_ids.set(me.content,me.id),this.model.vocab[me.id]=me.content,me.special&&(this.special_tokens.push(me.content),this.all_special_ids.push(me.id))}if(this.additional_special_tokens=ie.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new d.DictionarySplitter(this.added_tokens.map(he=>he.content)),this.added_tokens_map=new Map(this.added_tokens.map(he=>[he.content,he])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=ie.model_max_length,this.remove_space=ie.remove_space,this.clean_up_tokenization_spaces=ie.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=ie.do_lowercase_and_remove_accent??!1,ie.padding_side&&(this.padding_side=ie.padding_side),this.add_bos_token=ie.add_bos_token,this.add_eos_token=ie.add_eos_token,this.legacy=!1,this.chat_template=ie.chat_template??null,Array.isArray(this.chat_template)){const he=Object.create(null);for(const{name:me,template:ze}of this.chat_template){if(typeof me!="string"||typeof ze!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');he[me]=ze}this.chat_template=he}this._compiled_template_cache=new Map}getToken(...R){for(const ie of R){const he=this.config[ie];if(he)if(typeof he=="object"){if(he.__type==="AddedToken")return he.content;throw Error(`Unknown token: ${he}`)}else return he}return null}static async from_pretrained(R,{progress_callback:ie=null,config:he=null,cache_dir:me=null,local_files_only:ze=!1,revision:Ze="main",legacy:xt=null}={}){const bt=await h(R,{progress_callback:ie,config:he,cache_dir:me,local_files_only:ze,revision:Ze,legacy:xt});return new this(...bt)}_call(R,{text_pair:ie=null,add_special_tokens:he=!0,padding:me=!1,truncation:ze=null,max_length:Ze=null,return_tensor:xt=!0,return_token_type_ids:bt=null}={}){const Mt=Array.isArray(R);let vt;if(Mt){if(R.length===0)throw Error("text array must be non-empty");if(ie!==null){if(Array.isArray(ie)){if(R.length!==ie.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");vt=R.map((Vt,tr)=>this._encode_plus(Vt,{text_pair:ie[tr],add_special_tokens:he,return_token_type_ids:bt}))}else vt=R.map(Vt=>this._encode_plus(Vt,{add_special_tokens:he,return_token_type_ids:bt}))}else{if(R==null)throw Error("text may not be null or undefined");if(Array.isArray(ie))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");vt=[this._encode_plus(R,{text_pair:ie,add_special_tokens:he,return_token_type_ids:bt})]}if(Ze===null?Ze=this.model_max_length:ze===null&&(me===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),Ze=this.model_max_length):me===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),ze=!0)),me===!0&&(Ze=Math.min((0,l.max)(vt.map(Vt=>Vt.input_ids.length))[0],Ze??1/0)),Ze=Math.min(Ze,this.model_max_length??1/0),me||ze)for(let Vt=0;Vt<vt.length;++Vt)vt[Vt].input_ids.length!==Ze&&(vt[Vt].input_ids.length>Ze?ze&&ra(vt[Vt],Ze):me&&Yr(vt[Vt],Ze,tr=>tr==="input_ids"?this.pad_token_id:0,this.padding_side));const en={};if(xt){if(!(me&&ze)&&vt.some(tr=>{for(const Pr of Object.keys(tr))if(tr[Pr].length!==vt[0][Pr]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const Vt=[vt.length,vt[0].input_ids.length];for(const tr of Object.keys(vt[0]))en[tr]=new c.Tensor("int64",BigInt64Array.from(vt.flatMap(Pr=>Pr[tr]).map(BigInt)),Vt)}else{for(const Vt of Object.keys(vt[0]))en[Vt]=vt.map(tr=>tr[Vt]);if(!Mt)for(const Vt of Object.keys(en))en[Vt]=en[Vt][0]}return en}_encode_text(R){if(R===null)return null;const ie=this.added_tokens_splitter.split(R);for(let me=0;me<ie.length;++me){const ze=this.added_tokens_map.get(ie[me]);ze&&(ze.lstrip&&me>0&&(ie[me-1]=ie[me-1].trimEnd()),ze.rstrip&&me<ie.length-1&&(ie[me+1]=ie[me+1].trimStart()))}return ie.flatMap((me,ze)=>{if(me.length===0)return[];if(this.added_tokens_map.has(me))return[me];if(this.remove_space===!0&&(me=me.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(me=E(me)),this.normalizer!==null&&(me=this.normalizer(me)),me.length===0)return[];const Ze=this.pre_tokenizer!==null?this.pre_tokenizer(me,{section_index:ze}):[me];return this.model(Ze)})}_encode_plus(R,{text_pair:ie=null,add_special_tokens:he=!0,return_token_type_ids:me=null}={}){const{tokens:ze,token_type_ids:Ze}=this._tokenize_helper(R,{pair:ie,add_special_tokens:he}),xt=this.model.convert_tokens_to_ids(ze),bt={input_ids:xt,attention_mask:new Array(xt.length).fill(1)};return(me??this.return_token_type_ids)&&Ze&&(bt.token_type_ids=Ze),bt}_tokenize_helper(R,{pair:ie=null,add_special_tokens:he=!1}={}){const me=this._encode_text(R),ze=this._encode_text(ie);return this.post_processor?this.post_processor(me,ze,{add_special_tokens:he}):{tokens:(0,r.mergeArrays)(me??[],ze??[])}}tokenize(R,{pair:ie=null,add_special_tokens:he=!1}={}){return this._tokenize_helper(R,{pair:ie,add_special_tokens:he}).tokens}encode(R,{text_pair:ie=null,add_special_tokens:he=!0,return_token_type_ids:me=null}={}){return this._encode_plus(R,{text_pair:ie,add_special_tokens:he,return_token_type_ids:me}).input_ids}batch_decode(R,ie={}){return R instanceof c.Tensor&&(R=R.tolist()),R.map(he=>this.decode(he,ie))}decode(R,ie={}){if(R instanceof c.Tensor&&(R=b(R)),!Array.isArray(R)||R.length===0||!(0,r.isIntegralNumber)(R[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(R,ie)}decode_single(R,{skip_special_tokens:ie=!1,clean_up_tokenization_spaces:he=null}){let me=this.model.convert_ids_to_tokens(R);ie&&(me=me.filter(Ze=>!this.special_tokens.includes(Ze)));let ze=this.decoder?this.decoder(me):me.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(ze=ze.replaceAll(this.decoder.end_of_word_suffix," "),ie&&(ze=ze.trim())),(he??this.clean_up_tokenization_spaces)&&(ze=D(ze)),ze}get_chat_template({chat_template:R=null,tools:ie=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const he=this.chat_template;if(R!==null&&Object.hasOwn(he,R))R=he[R];else if(R===null)if(ie!==null&&"tool_use"in he)R=he.tool_use;else if("default"in he)R=he.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(he).sort()}.`)}else if(R===null)if(this.chat_template)R=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return R}apply_chat_template(R,{tools:ie=null,documents:he=null,chat_template:me=null,add_generation_prompt:ze=!1,tokenize:Ze=!0,padding:xt=!1,truncation:bt=!1,max_length:Mt=null,return_tensor:vt=!0,return_dict:en=!1,tokenizer_kwargs:Vt={},...tr}={}){if(me=this.get_chat_template({chat_template:me,tools:ie}),typeof me!="string")throw Error(`chat_template must be a string, but got ${typeof me}`);let Pr=this._compiled_template_cache.get(me);Pr===void 0&&(Pr=new f.Template(me),this._compiled_template_cache.set(me,Pr));const In=Object.create(null);for(const Ln of Ir){const vi=this.getToken(Ln);vi&&(In[Ln]=vi)}const jn=Pr.render({messages:R,add_generation_prompt:ze,tools:ie,documents:he,...In,...tr});if(Ze){const Ln=this._call(jn,{add_special_tokens:!1,padding:xt,truncation:bt,max_length:Mt,return_tensor:vt,...Vt});return en?Ln:Ln.input_ids}return jn}}class Wn extends Bt{return_token_type_ids=!0}class ga extends Bt{return_token_type_ids=!0}class ia extends Bt{return_token_type_ids=!0}class ei extends Bt{return_token_type_ids=!0}class Xt extends Bt{return_token_type_ids=!0}class _a extends Bt{return_token_type_ids=!0}class L extends Bt{return_token_type_ids=!0}class de extends Bt{return_token_type_ids=!0}class J extends Bt{return_token_type_ids=!0}class le extends Bt{}class fe extends Bt{}class xe extends Bt{return_token_type_ids=!0;constructor(R,ie){super(R,ie),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class je extends Bt{return_token_type_ids=!0}class mt extends Bt{}class Et extends Bt{}class _t extends Bt{}class Gt extends Bt{constructor(R,ie){super(R,ie),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)),this.lang_to_token=he=>he}_build_translation_inputs(R,ie,he){return Tr(this,R,ie,he)}}class yt extends Gt{}class rn extends Bt{}class cn extends Bt{}const fr="";class hr extends Bt{padding_side="left";constructor(R,ie){super(R,ie),this.legacy=ie.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new kn({replacement:fr,prepend_scheme:"first"}))}_encode_text(R){if(R===null)return null;if(this.legacy||R.length===0)return super._encode_text(R);let ie=super._encode_text(fr+R.replaceAll(fr," "));return ie.length>1&&ie[0]===fr&&this.special_tokens.includes(ie[1])&&(ie=ie.slice(1)),ie}}class Hn extends Bt{}class mr extends Bt{}class Ai extends Bt{}class Or extends Bt{}class er extends Bt{}class ti extends Bt{}class ni extends Bt{}class ri extends Bt{}class or extends Bt{}function Tr(Me,R,ie,he){if(!("language_codes"in Me)||!Array.isArray(Me.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in Me)||!(Me.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in Me)||typeof Me.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const me=he.src_lang,ze=he.tgt_lang;if(!Me.language_codes.includes(ze))throw new Error(`Target language code "${ze}" is not valid. Must be one of: {${Me.language_codes.join(", ")}}`);if(me!==void 0){if(!Me.language_codes.includes(me))throw new Error(`Source language code "${me}" is not valid. Must be one of: {${Me.language_codes.join(", ")}}`);for(const Ze of Me.post_processor.config.single)if("SpecialToken"in Ze&&Me.languageRegex.test(Ze.SpecialToken.id)){Ze.SpecialToken.id=Me.lang_to_token(me);break}}return he.forced_bos_token_id=Me.model.convert_tokens_to_ids([Me.lang_to_token(ze)])[0],Me._call(R,ie)}class Mi extends Bt{constructor(R,ie){super(R,ie),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)),this.lang_to_token=he=>he}_build_translation_inputs(R,ie,he){return Tr(this,R,ie,he)}}class Hi extends Bt{constructor(R,ie){super(R,ie),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(he=>this.languageRegex.test(he)).map(he=>he.slice(2,-2)),this.lang_to_token=he=>`__${he}__`}_build_translation_inputs(R,ie,he){return Tr(this,R,ie,he)}}class So extends Bt{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(R,{return_timestamps:ie=!1,return_language:he=!1,time_precision:me=null,force_full_sequences:ze=!0}={}){if(me===null)throw Error("Must specify time_precision");let Ze=null;const xt=ie==="word";function bt(){return{language:Ze,timestamp:[null,null],text:""}}const Mt=[];let vt=bt(),en=0;const Vt=this.timestamp_begin,Pr=Vt+1500;let In=[],jn=[],Ln=!1,vi=null;const Zi=new Set(this.all_special_ids);for(const Xn of R){const sr=Xn.tokens,lr=xt?Xn.token_timestamps:null;let Ti=null,Ii=Vt;if("stride"in Xn){const[Er,nr,Sn]=Xn.stride;if(en-=nr,vi=Er-Sn,nr&&(Ii=nr/me+Vt),Sn)for(let Bn=sr.length-1;Bn>=0;--Bn){const ai=Number(sr[Bn]);if(ai>=Vt){if(Ti!==null&&(ai-Vt)*me<vi)break;Ti=ai}}}let Dr=[],Si=[];for(let Er=0;Er<sr.length;++Er){const nr=Number(sr[Er]);if(Zi.has(nr)){const Sn=this.decode([nr]),Bn=p.WHISPER_LANGUAGE_MAPPING.get(Sn.slice(2,-2));if(Bn!==void 0){if(Ze!==null&&Bn!==Ze&&!ie){In.push(Dr);const ai=this.findLongestCommonSequence(In)[0],aa=this.decode(ai);vt.text=aa,Mt.push(vt),In=[],Dr=[],vt=bt()}Ze=vt.language=Bn}}else if(nr>=Vt&&nr<=Pr){const Sn=(nr-Vt)*me+en,Bn=(0,l.round)(Sn,2);if(Ti!==null&&nr>=Ti)Ln=!0;else if(Ln||In.length>0&&nr<Ii)Ln=!1;else if(vt.timestamp[0]===null)vt.timestamp[0]=Bn;else if(Bn!==vt.timestamp[0]){vt.timestamp[1]=Bn,In.push(Dr),xt&&jn.push(Si);const[ai,aa]=this.findLongestCommonSequence(In,jn),qa=this.decode(ai);vt.text=qa,xt&&(vt.words=this.collateWordTimestamps(ai,aa,Ze)),Mt.push(vt),In=[],Dr=[],jn=[],Si=[],vt=bt()}}else if(Dr.push(nr),xt){let Sn=(0,l.round)(lr[Er]+en,2),Bn;if(Er+1<lr.length){Bn=(0,l.round)(lr[Er+1]+en,2);const ai=this.decode([nr]);S.test(ai)&&(Bn=(0,l.round)(Math.min(Sn+me,Bn),2))}else Bn=null;Si.push([Sn,Bn])}}if("stride"in Xn){const[Er,nr,Sn]=Xn.stride;en+=Er-Sn}Dr.length>0?(In.push(Dr),xt&&jn.push(Si)):In.every(Er=>Er.length===0)&&(vt=bt(),In=[],Dr=[],jn=[],Si=[])}if(In.length>0){if(ze&&ie)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Xn,sr]=this.findLongestCommonSequence(In,jn),lr=this.decode(Xn);vt.text=lr,xt&&(vt.words=this.collateWordTimestamps(Xn,sr,Ze)),Mt.push(vt)}let Sr=Object.create(null);const Jr=Mt.map(Xn=>Xn.text).join("");if(ie||he){for(let Xn=0;Xn<Mt.length;++Xn){const sr=Mt[Xn];ie||delete sr.timestamp,he||delete sr.language}if(xt){const Xn=[];for(const sr of Mt)for(const lr of sr.words)Xn.push(lr);Sr={chunks:Xn}}else Sr={chunks:Mt}}return[Jr,Sr]}findLongestCommonSequence(R,ie=null){let he=R[0],me=he.length,ze=[];const Ze=Array.isArray(ie)&&ie.length>0;let xt=Ze?[]:null,bt=Ze?ie[0]:null;for(let Mt=1;Mt<R.length;++Mt){const vt=R[Mt];let en=0,Vt=[me,me,0,0];const tr=vt.length;for(let Sr=1;Sr<me+tr;++Sr){const Jr=Math.max(0,me-Sr),Xn=Math.min(me,me+tr-Sr),sr=he.slice(Jr,Xn),lr=Math.max(0,Sr-me),Ti=Math.min(tr,Sr),Ii=vt.slice(lr,Ti);if(sr.length!==Ii.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let Dr;Ze?Dr=sr.filter((nr,Sn)=>nr===Ii[Sn]&&bt[Jr+Sn]<=ie[Mt][lr+Sn]).length:Dr=sr.filter((nr,Sn)=>nr===Ii[Sn]).length;const Si=Sr/1e4,Er=Dr/Sr+Si;Dr>1&&Er>en&&(en=Er,Vt=[Jr,Xn,lr,Ti])}const[Pr,In,jn,Ln]=Vt,vi=Math.floor((In+Pr)/2),Zi=Math.floor((Ln+jn)/2);ze.push(...he.slice(0,vi)),he=vt.slice(Zi),me=he.length,Ze&&(xt.push(...bt.slice(0,vi)),bt=ie[Mt].slice(Zi))}return ze.push(...he),Ze?(xt.push(...bt),[ze,xt]):[ze,[]]}collateWordTimestamps(R,ie,he){const[me,ze,Ze]=this.combineTokensIntoWords(R,he),xt=[];for(let bt=0;bt<me.length;++bt){const Mt=Ze[bt];xt.push({text:me[bt],timestamp:[ie[Mt.at(0)][0],ie[Mt.at(-1)][1]]})}return xt}combineTokensIntoWords(R,ie,he=`"'([{-`,me=`"'.,!?:)]}`){ie=ie??"english";let ze,Ze,xt;return["chinese","japanese","thai","lao","myanmar"].includes(ie)?[ze,Ze,xt]=this.splitTokensOnUnicode(R):[ze,Ze,xt]=this.splitTokensOnSpaces(R),this.mergePunctuations(ze,Ze,xt,he,me)}decode(R,ie){let he;return ie?.decode_with_timestamps?(R instanceof c.Tensor&&(R=b(R)),he=this.decodeWithTimestamps(R,ie)):he=super.decode(R,ie),he}decodeWithTimestamps(R,ie){const he=ie?.time_precision??.02,me=Array.from(this.all_special_ids).at(-1)+1;let ze=[[]];for(let Ze of R)if(Ze=Number(Ze),Ze>=me){const xt=((Ze-me)*he).toFixed(2);ze.push(`<|${xt}|>`),ze.push([])}else ze[ze.length-1].push(Ze);return ze=ze.map(Ze=>typeof Ze=="string"?Ze:super.decode(Ze,ie)),ze.join("")}splitTokensOnUnicode(R){const ie=this.decode(R,{decode_with_timestamps:!0}),he="",me=[],ze=[],Ze=[];let xt=[],bt=[],Mt=0;for(let vt=0;vt<R.length;++vt){const en=R[vt];xt.push(en),bt.push(vt);const Vt=this.decode(xt,{decode_with_timestamps:!0});(!Vt.includes(he)||ie[Mt+Vt.indexOf(he)]===he)&&(me.push(Vt),ze.push(xt),Ze.push(bt),xt=[],bt=[],Mt+=Vt.length)}return[me,ze,Ze]}splitTokensOnSpaces(R){const[ie,he,me]=this.splitTokensOnUnicode(R),ze=[],Ze=[],xt=[],bt=new RegExp(`^[${C}]$`,"gu");for(let Mt=0;Mt<ie.length;++Mt){const vt=ie[Mt],en=he[Mt],Vt=me[Mt],tr=en[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),Pr=vt.startsWith(" "),In=vt.trim(),jn=bt.test(In);if(tr||Pr||jn||ze.length===0)ze.push(vt),Ze.push(en),xt.push(Vt);else{const Ln=ze.length-1;ze[Ln]+=vt,Ze[Ln].push(...en),xt[Ln].push(...Vt)}}return[ze,Ze,xt]}mergePunctuations(R,ie,he,me,ze){const Ze=structuredClone(R),xt=structuredClone(ie),bt=structuredClone(he);let Mt=Ze.length-2,vt=Ze.length-1;for(;Mt>=0;)Ze[Mt].startsWith(" ")&&me.includes(Ze[Mt].trim())?(Ze[vt]=Ze[Mt]+Ze[vt],xt[vt]=(0,r.mergeArrays)(xt[Mt],xt[vt]),bt[vt]=(0,r.mergeArrays)(bt[Mt],bt[vt]),Ze[Mt]="",xt[Mt]=[],bt[Mt]=[]):vt=Mt,--Mt;for(Mt=0,vt=1;vt<Ze.length;)!Ze[Mt].endsWith(" ")&&ze.includes(Ze[vt])?(Ze[Mt]+=Ze[vt],xt[Mt]=(0,r.mergeArrays)(xt[Mt],xt[vt]),bt[Mt]=(0,r.mergeArrays)(bt[Mt],bt[vt]),Ze[vt]="",xt[vt]=[],bt[vt]=[]):Mt=vt,++vt;return[Ze.filter(en=>en),xt.filter(en=>en.length>0),bt.filter(en=>en.length>0)]}}class Ki extends Bt{}class qi extends Bt{}class ii extends Bt{}class $r extends Bt{constructor(R,ie){super(R,ie),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(he=>this.languageRegex.test(he)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(R){if(R===null)return null;const[ie,...he]=R.trim().split(this.languageRegex);if(he.length===0)return super._encode_text(ie);if(he.length===2){const[me,ze]=he;return this.supported_language_codes.includes(me)||console.warn(`Unsupported language code "${me}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,r.mergeArrays)([me],super._encode_text(ze))}}}class ci extends Bt{}class lt extends Bt{}class dt extends Bt{}class Ct extends Bt{}class An extends Bt{}class Eo extends Bt{constructor(R,ie){super(R,ie),this.decoder=new Qt({})}}class Nr extends Bt{}class va extends Bt{}class Zs{static TOKENIZER_CLASS_MAPPING={T5Tokenizer:mt,DistilBertTokenizer:le,CamembertTokenizer:fe,DebertaTokenizer:Xt,DebertaV2Tokenizer:_a,BertTokenizer:Wn,HerbertTokenizer:L,ConvBertTokenizer:de,RoFormerTokenizer:J,XLMTokenizer:xe,ElectraTokenizer:je,MobileBertTokenizer:ia,SqueezeBertTokenizer:ei,AlbertTokenizer:ga,GPT2Tokenizer:Et,BartTokenizer:_t,MBartTokenizer:Gt,MBart50Tokenizer:yt,RobertaTokenizer:rn,WhisperTokenizer:So,CodeGenTokenizer:Ki,CLIPTokenizer:qi,SiglipTokenizer:ii,MarianTokenizer:$r,BloomTokenizer:cn,NllbTokenizer:Mi,M2M100Tokenizer:Hi,LlamaTokenizer:hr,CodeLlamaTokenizer:Hn,XLMRobertaTokenizer:mr,MPNetTokenizer:Ai,FalconTokenizer:Or,GPTNeoXTokenizer:er,EsmTokenizer:ti,Wav2Vec2CTCTokenizer:ci,BlenderbotTokenizer:lt,BlenderbotSmallTokenizer:dt,SpeechT5Tokenizer:Ct,NougatTokenizer:An,VitsTokenizer:Eo,Qwen2Tokenizer:ni,GemmaTokenizer:ri,Grok1Tokenizer:or,CohereTokenizer:Nr,MgpstrTokenizer:va,PreTrainedTokenizer:Bt};static async from_pretrained(R,{progress_callback:ie=null,config:he=null,cache_dir:me=null,local_files_only:ze=!1,revision:Ze="main",legacy:xt=null}={}){const[bt,Mt]=await h(R,{progress_callback:ie,config:he,cache_dir:me,local_files_only:ze,revision:Ze,legacy:xt}),vt=Mt.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let en=this.TOKENIZER_CLASS_MAPPING[vt];return en||(console.warn(`Unknown tokenizer class "${vt}", attempting to construct from base class.`),en=Bt),new en(bt,Mt)}}}),"./src/utils/audio.js":((e,t,n)=>{n.r(t),n.d(t,{RawAudio:()=>Y,hamming:()=>m,hanning:()=>h,mel_filter_bank:()=>A,read_audio:()=>f,spectrogram:()=>O,window_function:()=>N});var i=n("./src/utils/hub.js"),r=n("./src/utils/maths.js"),o=n("./src/utils/core.js"),l=n("./src/env.js"),c=n("./src/utils/tensor.js"),d=n("?7992");async function f(K,se){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const oe=await(await(0,i.getFile)(K)).arrayBuffer(),W=new AudioContext({sampleRate:se});typeof se>"u"&&console.warn(`No sampling rate provided, using default of ${W.sampleRate}Hz.`);const ne=await W.decodeAudioData(oe);let ae;if(ne.numberOfChannels===2){const ge=Math.sqrt(2),ye=ne.getChannelData(0),G=ne.getChannelData(1);ae=new Float32Array(ye.length);for(let H=0;H<ne.length;++H)ae[H]=ge*(ye[H]+G[H])/2}else ae=ne.getChannelData(0);return ae}function p(K,se){if(K<1)return new Float64Array;if(K===1)return new Float64Array([1]);const oe=1-se,W=2*Math.PI/(K-1),ne=new Float64Array(K);for(let ae=0;ae<K;++ae)ne[ae]=se-oe*Math.cos(ae*W);return ne}function h(K){return p(K,.5)}function m(K){return p(K,.54)}const _={htk:K=>2595*Math.log10(1+K/700),kaldi:K=>1127*Math.log(1+K/700),slaney:(K,se=1e3,oe=15,W=27/Math.log(6.4))=>K>=se?oe+Math.log(K/se)*W:3*K/200};function v(K,se="htk"){const oe=_[se];if(!oe)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof K=="number"?oe(K):K.map(W=>oe(W))}const b={htk:K=>700*(10**(K/2595)-1),kaldi:K=>700*(Math.exp(K/1127)-1),slaney:(K,se=1e3,oe=15,W=Math.log(6.4)/27)=>K>=oe?se*Math.exp(W*(K-oe)):200*K/3};function D(K,se="htk"){const oe=b[se];if(!oe)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof K=="number"?oe(K):K.map(W=>oe(W))}function T(K,se){const oe=Float64Array.from({length:se.length-1},(ge,ye)=>se[ye+1]-se[ye]),W=Array.from({length:K.length},()=>new Array(se.length));for(let ge=0;ge<K.length;++ge){const ye=W[ge];for(let G=0;G<se.length;++G)ye[G]=se[G]-K[ge]}const ne=se.length-2,ae=Array.from({length:ne},()=>new Array(K.length));for(let ge=0;ge<K.length;++ge){const ye=W[ge];for(let G=0;G<ne;++G){const H=-ye[G]/oe[G],V=ye[G+2]/oe[G+1];ae[G][ge]=Math.max(0,Math.min(H,V))}}return ae}function E(K,se,oe){const W=(se-K)/(oe-1);return Float64Array.from({length:oe},(ne,ae)=>K+W*ae)}function A(K,se,oe,W,ne,ae=null,ge="htk",ye=!1){if(ae!==null&&ae!=="slaney")throw new Error('norm must be one of null or "slaney"');if(K<2)throw new Error(`Require num_frequency_bins: ${K} >= 2`);if(oe>W)throw new Error(`Require min_frequency: ${oe} <= max_frequency: ${W}`);const G=v(oe,ge),H=v(W,ge),V=E(G,H,se+2);let U=D(V,ge),ce;if(ye){const ke=ne/((K-1)*2);ce=v(Float64Array.from({length:K},(Le,Xe)=>Xe*ke),ge),U=V}else ce=E(0,Math.floor(ne/2),K);const ve=T(ce,U);if(ae!==null&&ae==="slaney")for(let ke=0;ke<se;++ke){const Le=ve[ke],Xe=2/(U[ke+2]-U[ke]);for(let Be=0;Be<K;++Be)Le[Be]*=Xe}return ve}function $(K,se,oe){const W=new K.constructor(K.length+se+oe),ne=K.length-1;for(let ae=0;ae<K.length;++ae)W[se+ae]=K[ae];for(let ae=1;ae<=se;++ae)W[se-ae]=K[(0,o.calculateReflectOffset)(ae,ne)];for(let ae=1;ae<=oe;++ae)W[ne+se+ae]=K[(0,o.calculateReflectOffset)(ne-ae,ne)];return W}function P(K,se,oe,W,ne){if(oe<=0)throw new Error("reference must be greater than zero");if(W<=0)throw new Error("min_value must be greater than zero");oe=Math.max(W,oe);const ae=Math.log10(oe);for(let ge=0;ge<K.length;++ge)K[ge]=se*Math.log10(Math.max(W,K[ge])-ae);if(ne!==null){if(ne<=0)throw new Error("db_range must be greater than zero");const ge=(0,r.max)(K)[0]-ne;for(let ye=0;ye<K.length;++ye)K[ye]=Math.max(K[ye],ge)}return K}function C(K,se=1,oe=1e-5,W=null){return P(K,20,se,oe,W)}function S(K,se=1,oe=1e-10,W=null){return P(K,10,se,oe,W)}async function O(K,se,oe,W,{fft_length:ne=null,power:ae=1,center:ge=!0,pad_mode:ye="reflect",onesided:G=!0,preemphasis:H=null,preemphasis_htk_flavor:V=!0,mel_filters:U=null,mel_floor:ce=1e-10,log_mel:ve=null,reference:ke=1,min_value:Le=1e-10,db_range:Xe=null,remove_dc_offset:Be=null,min_num_frames:ue=null,max_num_frames:Z=null,do_pad:Se=!0,transpose:Re=!1,mel_offset:Ve=0}={}){const Ge=se.length;if(ne===null&&(ne=oe),oe>ne)throw Error(`frame_length (${oe}) may not be larger than fft_length (${ne})`);if(Ge!==oe)throw new Error(`Length of the window (${Ge}) must equal frame_length (${oe})`);if(W<=0)throw new Error("hop_length must be greater than zero");if(ae===null&&U!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!V)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(ge)switch(ye){case"reflect":{const ut=Math.floor((ne-1)/2)+1;K=$(K,ut,ut);break}case"constant":{const ut=Math.floor(ne/2),et=new K.constructor(K.length+2*ut);et.set(K,ut),K=et;break}default:throw new Error(`pad_mode="${ye}" not implemented yet.`)}let Ke=Math.floor(1+Math.floor((K.length-oe)/W));ue!==null&&Ke<ue&&(Ke=ue);const Ie=G?Math.floor(ne/2)+1:ne;let nt=Ke,Ae=Ke;Z!==null&&(Z>Ke?Se&&(Ae=Z):Ae=nt=Z);const We=new r.FFT(ne),ft=new Float64Array(ne),Fe=new Float64Array(We.outputBufferSize),ot=new Float32Array(Ie*Ae);for(let ut=0;ut<nt;++ut){const et=ut*W,kt=Math.min(K.length-et,oe);kt!==oe&&ft.fill(0,0,oe);for(let jt=0;jt<kt;++jt)ft[jt]=K[et+jt];if(Be){let jt=0;for(let Qt=0;Qt<kt;++Qt)jt+=ft[Qt];const Cn=jt/kt;for(let Qt=0;Qt<kt;++Qt)ft[Qt]-=Cn}if(H!==null){for(let jt=kt-1;jt>=1;--jt)ft[jt]-=H*ft[jt-1];ft[0]*=1-H}for(let jt=0;jt<se.length;++jt)ft[jt]*=se[jt];We.realTransform(Fe,ft);for(let jt=0;jt<Ie;++jt){const Cn=jt<<1;ot[jt*Ae+ut]=Fe[Cn]**2+Fe[Cn+1]**2}}if(ae!==null&&ae!==2){const ut=ae/2;for(let et=0;et<ot.length;++et)ot[et]**=ut}const rt=U.length;let St=await(0,c.matmul)(new c.Tensor("float32",U.flat(),[rt,Ie]),new c.Tensor("float32",ot,[Ie,Ae]));Re&&(St=St.transpose(1,0));const Tt=St.data;for(let ut=0;ut<Tt.length;++ut)Tt[ut]=Ve+Math.max(ce,Tt[ut]);if(ae!==null&&ve!==null){const ut=Math.min(Tt.length,nt*rt);switch(ve){case"log":for(let et=0;et<ut;++et)Tt[et]=Math.log(Tt[et]);break;case"log10":for(let et=0;et<ut;++et)Tt[et]=Math.log10(Tt[et]);break;case"dB":if(ae===1)C(Tt,ke,Le,Xe);else if(ae===2)S(Tt,ke,Le,Xe);else throw new Error(`Cannot use log_mel option '${ve}' with power ${ae}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${ve}'`)}}return St}function N(K,se,{periodic:oe=!0,frame_length:W=null,center:ne=!0}={}){const ae=oe?K+1:K;let ge;switch(se){case"boxcar":ge=new Float64Array(ae).fill(1);break;case"hann":case"hann_window":ge=h(ae);break;case"hamming":ge=m(ae);break;case"povey":ge=h(ae).map(ye=>Math.pow(ye,.85));break;default:throw new Error(`Unknown window type ${se}.`)}if(oe&&(ge=ge.subarray(0,K)),W===null)return ge;if(K>W)throw new Error(`Length of the window (${K}) may not be larger than frame_length (${W})`);return ge}function j(K,se){let oe=44;const W=new ArrayBuffer(oe+K.length*4),ne=new DataView(W);X(ne,0,"RIFF"),ne.setUint32(4,36+K.length*4,!0),X(ne,8,"WAVE"),X(ne,12,"fmt "),ne.setUint32(16,16,!0),ne.setUint16(20,3,!0),ne.setUint16(22,1,!0),ne.setUint32(24,se,!0),ne.setUint32(28,se*4,!0),ne.setUint16(32,4,!0),ne.setUint16(34,32,!0),X(ne,36,"data"),ne.setUint32(40,K.length*4,!0);for(let ae=0;ae<K.length;++ae,oe+=4)ne.setFloat32(oe,K[ae],!0);return W}function X(K,se,oe){for(let W=0;W<oe.length;++W)K.setUint8(se+W,oe.charCodeAt(W))}class Y{constructor(se,oe){this.audio=se,this.sampling_rate=oe}toWav(){return j(this.audio,this.sampling_rate)}toBlob(){const se=this.toWav();return new Blob([se],{type:"audio/wav"})}async save(se){let oe;if(l.apis.IS_BROWSER_ENV){if(l.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");oe=o.saveBlob}else if(l.apis.IS_FS_AVAILABLE)oe=async(W,ne)=>{let ae=await ne.arrayBuffer();d.writeFileSync(W,Buffer.from(ae))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await oe(se,this.toBlob())}}}),"./src/utils/constants.js":((e,t,n)=>{n.r(t),n.d(t,{CHAT_TEMPLATE_NAME:()=>d,CONFIG_NAME:()=>r,FEATURE_EXTRACTOR_NAME:()=>o,GENERATION_CONFIG_NAME:()=>f,GITHUB_ISSUE_URL:()=>i,IMAGE_PROCESSOR_NAME:()=>l,PROCESSOR_NAME:()=>c});const i="https://github.com/huggingface/transformers.js/issues/new/choose",r="config.json",o="preprocessor_config.json",l=o,c="processor_config.json",d="chat_template.jinja",f="generation_config.json"}),"./src/utils/core.js":((e,t,n)=>{n.r(t),n.d(t,{calculateDimensions:()=>f,calculateReflectOffset:()=>_,count:()=>T,dispatchCallback:()=>i,escapeRegExp:()=>o,isIntegralNumber:()=>c,isNullishDimension:()=>d,isTypedArray:()=>l,len:()=>D,mergeArrays:()=>h,pick:()=>b,pop:()=>p,product:()=>m,reverseDictionary:()=>r,saveBlob:()=>v});function i(E,A){E&&E(A)}function r(E){return Object.fromEntries(Object.entries(E).map(([A,$])=>[$,A]))}function o(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(E){return E?.prototype?.__proto__?.constructor?.name==="TypedArray"}function c(E){return Number.isInteger(E)||typeof E=="bigint"}function d(E){return E==null||E===-1}function f(E){const A=[];let $=E;for(;Array.isArray($);)A.push($.length),$=$[0];return A}function p(E,A,$=void 0){const P=E[A];if(P!==void 0)return delete E[A],P;if($===void 0)throw Error(`Key ${A} does not exist in object.`);return $}function h(...E){return Array.prototype.concat.apply([],E)}function m(...E){return E.reduce((A,$)=>A.flatMap(P=>$.map(C=>[P,C])))}function _(E,A){return Math.abs((E+A)%(2*A)-A)}function v(E,A){const $=URL.createObjectURL(A),P=document.createElement("a");P.href=$,P.download=E,P.click(),P.remove(),URL.revokeObjectURL($)}function b(E,A){return Object.assign({},...A.map($=>{if(E[$]!==void 0)return{[$]:E[$]}}))}function D(E){let A=0;for(const $ of E)++A;return A}function T(E,A){let $=0;for(const P of E)P===A&&++$;return $}}),"./src/utils/data-structures.js":((e,t,n)=>{n.r(t),n.d(t,{CharTrie:()=>r,DictionarySplitter:()=>d,LRUCache:()=>f,PriorityQueue:()=>i,TokenLattice:()=>l});class i{constructor(h=(_,v)=>_>v,m=1/0){this._heap=[],this._comparator=h,this._maxSize=m}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...h){return this.extend(h)}extend(h){for(const m of h)if(this.size<this._maxSize)this._heap.push(m),this._siftUp();else{const _=this._smallest();this._comparator(m,this._heap[_])&&(this._heap[_]=m,this._siftUpFrom(_))}return this.size}pop(){const h=this.peek(),m=this.size-1;return m>0&&this._swap(0,m),this._heap.pop(),this._siftDown(),h}replace(h){const m=this.peek();return this._heap[0]=h,this._siftDown(),m}_parent(h){return(h+1>>>1)-1}_left(h){return(h<<1)+1}_right(h){return h+1<<1}_greater(h,m){return this._comparator(this._heap[h],this._heap[m])}_swap(h,m){const _=this._heap[h];this._heap[h]=this._heap[m],this._heap[m]=_}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(h){for(;h>0&&this._greater(h,this._parent(h));)this._swap(h,this._parent(h)),h=this._parent(h)}_siftDown(){let h=0;for(;this._left(h)<this.size&&this._greater(this._left(h),h)||this._right(h)<this.size&&this._greater(this._right(h),h);){const m=this._right(h)<this.size&&this._greater(this._right(h),this._left(h))?this._right(h):this._left(h);this._swap(h,m),h=m}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class r{constructor(){this.root=o.default()}extend(h){for(const m of h)this.push(m)}push(h){let m=this.root;for(const _ of h){let v=m.children.get(_);v===void 0&&(v=o.default(),m.children.set(_,v)),m=v}m.isLeaf=!0}*commonPrefixSearch(h){let m=this.root;if(m===void 0)return;let _="";for(const v of h){if(_+=v,m=m.children.get(v),m===void 0)return;m.isLeaf&&(yield _)}}}class o{constructor(h,m){this.isLeaf=h,this.children=m}static default(){return new o(!1,new Map)}}class l{constructor(h,m,_){this.chars=Array.from(h),this.len=this.chars.length,this.bosTokenId=m,this.eosTokenId=_,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const v=new c(this.bosTokenId,0,0,0,0),b=new c(this.eosTokenId,1,this.len,0,0);this.nodes.push(v.clone()),this.nodes.push(b.clone()),this.beginNodes[this.len].push(b),this.endNodes[0].push(v)}insert(h,m,_,v){const b=this.nodes.length,D=new c(v,b,h,m,_);this.beginNodes[h].push(D),this.endNodes[h+m].push(D),this.nodes.push(D)}viterbi(){const h=this.len;let m=0;for(;m<=h;){if(this.beginNodes[m].length==0)return[];for(let T of this.beginNodes[m]){T.prev=null;let E=0,A=null;for(let $ of this.endNodes[m]){const P=$.backtraceScore+T.score;(A===null||P>E)&&(A=$.clone(),E=P)}if(A!==null)T.prev=A,T.backtraceScore=E;else return[]}++m}const _=[],b=this.beginNodes[h][0].prev;if(b===null)return[];let D=b.clone();for(;D.prev!==null;)_.push(D.clone()),D=D.clone().prev.clone();return _.reverse(),_}piece(h){return this.chars.slice(h.pos,h.pos+h.length).join("")}tokens(){return this.viterbi().map(m=>this.piece(m))}tokenIds(){return this.viterbi().map(m=>m.tokenId)}}class c{constructor(h,m,_,v,b){this.tokenId=h,this.nodeId=m,this.pos=_,this.length=v,this.score=b,this.prev=null,this.backtraceScore=0}clone(){const h=new c(this.tokenId,this.nodeId,this.pos,this.length,this.score);return h.prev=this.prev,h.backtraceScore=this.backtraceScore,h}}class d{constructor(h){this.trie=this._buildTrie(h)}_buildTrie(h){const m=Object.create(null);for(const _ of h){let v=m;for(let b=0;b<_.length;++b)v=v[_[b]]??=Object.create(null);v.end=_}return m}split(h){const m=[],_=h.length;let v=0,b=0;for(;b<_;){let D=this.trie,T=null,E=b;for(;E<_&&(D=D[h[E]]);)D.end&&(T=D.end),++E;T?(b>v&&m.push(h.slice(v,b)),m.push(T),b+=T.length,v=b):++b}return v<_&&m.push(h.slice(v)),m}}class f{constructor(h){this.capacity=h,this.cache=new Map}get(h){if(!this.cache.has(h))return;const m=this.cache.get(h);return this.cache.delete(h),this.cache.set(h,m),m}put(h,m){this.cache.has(h)&&this.cache.delete(h),this.cache.set(h,m),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}}),"./src/utils/devices.js":((e,t,n)=>{n.r(t),n.d(t,{DEVICE_TYPES:()=>i});const i=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})}),"./src/utils/dtypes.js":((e,t,n)=>{n.r(t),n.d(t,{DATA_TYPES:()=>l,DEFAULT_DEVICE_DTYPE_MAPPING:()=>c,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>d,isWebGpuFp16Supported:()=>o});var i=n("./src/env.js"),r=n("./src/utils/devices.js");const o=(function(){let f;return async function(){if(f===void 0)if(!i.apis.IS_WEBGPU_AVAILABLE)f=!1;else try{f=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{f=!1}return f}})(),l=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),c=Object.freeze({[r.DEVICE_TYPES.wasm]:l.q8}),d=Object.freeze({[l.fp32]:"",[l.fp16]:"_fp16",[l.int8]:"_int8",[l.uint8]:"_uint8",[l.q8]:"_quantized",[l.q4]:"_q4",[l.q4f16]:"_q4f16",[l.bnb4]:"_bnb4"})}),"./src/utils/generic.js":((e,t,n)=>{n.r(t),n.d(t,{Callable:()=>i});const i=class{constructor(){let r=function(...o){return r._call(...o)};return Object.setPrototypeOf(r,new.target.prototype)}_call(...r){throw Error("Must implement _call method in subclass")}}}),"./src/utils/hub.js":((e,t,n)=>{n.r(t),n.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>c,getFile:()=>_,getModelFile:()=>E,getModelJSON:()=>$,getModelText:()=>A});var i=n("?7992"),r=n("?5af5"),o=n("./src/env.js"),l=n("./src/utils/core.js");const c=100,d={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class f{constructor(O){if(this.filePath=O,this.headers=new Headers,this.exists=i.existsSync(O),this.exists){this.status=200,this.statusText="OK";let N=i.statSync(O);this.headers.set("content-length",N.size.toString()),this.updateContentType();const j=i.createReadStream(O);this.body=new ReadableStream({start(X){j.on("data",Y=>X.enqueue(Y)),j.on("end",()=>X.close()),j.on("error",Y=>X.error(Y))},cancel(){j.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const O=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",d[O]??"application/octet-stream")}clone(){let O=new f(this.filePath);return O.exists=this.exists,O.status=this.status,O.statusText=this.statusText,O.headers=new Headers(this.headers),O}async arrayBuffer(){return(await i.promises.readFile(this.filePath)).buffer}async blob(){const O=await i.promises.readFile(this.filePath);return new Blob([O],{type:this.headers.get("content-type")})}async text(){return await i.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function p(S,O=null,N=null){let j;try{j=new URL(S)}catch{return!1}return!(O&&!O.includes(j.protocol)||N&&!N.includes(j.hostname))}const h=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function m(S){return!(!h.test(S)||S.includes("..")||S.includes("--")||S.endsWith(".git")||S.endsWith(".ipynb"))}async function _(S){if(o.env.useFS&&!p(S,["http:","https:","blob:"]))return new f(S instanceof URL?S.protocol==="file:"?S.pathname:S.toString():S);if(typeof process<"u"&&process?.release?.name==="node"){const O=!!cx?.TESTING_REMOTELY,N=o.env.version,j=new Headers;if(j.set("User-Agent",`transformers.js/${N}; is_ci/${O};`),p(S,["http:","https:"],["huggingface.co","hf.co"])){const Y=cx?.HF_TOKEN??cx?.HF_ACCESS_TOKEN;Y&&j.set("Authorization",`Bearer ${Y}`)}return fetch(S,{headers:j})}else return fetch(S)}const v={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function b(S,O,N){if(!N)return null;const j=v[S]??`Error (${S}) occurred while trying to load file`;throw Error(`${j}: "${O}".`)}class D{constructor(O){this.path=O}async match(O){let N=r.join(this.path,O),j=new f(N);if(j.exists)return j}async put(O,N,j=void 0){let X=r.join(this.path,O);try{const Y=N.headers.get("Content-Length"),K=parseInt(Y??"0");let se=0;await i.promises.mkdir(r.dirname(X),{recursive:!0});const oe=i.createWriteStream(X),W=N.body.getReader();for(;;){const{done:ne,value:ae}=await W.read();if(ne)break;await new Promise((ye,G)=>{oe.write(ae,H=>{if(H){G(H);return}ye()})}),se+=ae.length;const ge=K?se/K*100:0;j?.({progress:ge,loaded:se,total:K})}oe.close()}catch(Y){try{await i.promises.unlink(X)}catch{}throw Y}}}async function T(S,...O){for(let N of O)try{let j=await S.match(N);if(j)return j}catch{continue}}async function E(S,O,N=!0,j={},X=!1){if(!o.env.allowLocalModels){if(j.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!o.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,l.dispatchCallback)(j.progress_callback,{status:"initiate",name:S,file:O});let Y;if(!Y&&o.env.useCustomCache){if(!o.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!o.env.customCache.match||!o.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");Y=o.env.customCache}if(!Y&&o.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{Y=await caches.open("transformers-cache")}catch(ce){console.warn("An error occurred while opening the browser cache:",ce)}}if(!Y&&o.env.useFSCache){if(!o.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");Y=new D(j.cache_dir??o.env.cacheDir)}const K=j.revision??"main",se=C(S,O),oe=m(S),W=oe?C(o.env.localModelPath,se):se,ne=C(o.env.remoteHost,o.env.remotePathTemplate.replaceAll("{model}",S).replaceAll("{revision}",encodeURIComponent(K)),O);let ae;const ge=Y instanceof D?K==="main"?se:C(S,K,O):ne;let ye=!1,G;Y&&(G=await T(Y,W,ge));const H=G!==void 0;if(G===void 0){if(o.env.allowLocalModels)if(p(se,["http:","https:"])){if(j.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${se}.`);if(!o.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${se}.`)}else try{G=await _(W),ae=W}catch(ve){console.warn(`Unable to load from local path "${W}": "${ve}"`)}if(G===void 0||G.status===404){if(j.local_files_only||!o.env.allowRemoteModels){if(N)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${W}".`);return null}if(!oe)throw Error(`Local file missing at "${W}" and download aborted due to invalid model ID "${S}".`);if(G=await _(ne),G.status!==200)return b(G.status,ne,N);ae=ge}ye=Y&&typeof Response<"u"&&G instanceof Response&&G.status===200}(0,l.dispatchCallback)(j.progress_callback,{status:"download",name:S,file:O});let V;if(!(o.apis.IS_NODE_ENV&&X)){let ce;j.progress_callback?H&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(ce=new Uint8Array(await G.arrayBuffer()),(0,l.dispatchCallback)(j.progress_callback,{status:"progress",name:S,file:O,progress:100,loaded:ce.length,total:ce.length})):ce=await P(G,ve=>{(0,l.dispatchCallback)(j.progress_callback,{status:"progress",name:S,file:O,...ve})}):ce=new Uint8Array(await G.arrayBuffer()),V=ce}if(ye&&ae&&await Y.match(ae)===void 0)if(V)await Y.put(ae,new Response(V,{headers:G.headers})).catch(ce=>{console.warn(`Unable to add response to browser cache: ${ce}.`)});else{const ce=j.progress_callback?ve=>(0,l.dispatchCallback)(j.progress_callback,{status:"progress",name:S,file:O,...ve}):void 0;await Y.put(ae,G,ce)}if((0,l.dispatchCallback)(j.progress_callback,{status:"done",name:S,file:O}),V){if(!o.apis.IS_NODE_ENV&&X)throw new Error("Cannot return path in a browser environment.");return V}if(G instanceof f)return G.filePath;const U=await Y?.match(ae);if(U instanceof f)return U.filePath;if(U instanceof Response)return new Uint8Array(await U.arrayBuffer());if(typeof U=="string")return U;throw new Error("Unable to get model file path or buffer.")}async function A(S,O,N=!0,j={}){const X=await E(S,O,N,j,!1);return X===null?null:new TextDecoder("utf-8").decode(X)}async function $(S,O,N=!0,j={}){const X=await A(S,O,N,j);return X===null?{}:JSON.parse(X)}async function P(S,O){const N=S.headers.get("Content-Length");N===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let j=parseInt(N??"0"),X=new Uint8Array(j),Y=0;const K=S.body.getReader();async function se(){const{done:oe,value:W}=await K.read();if(oe)return;const ne=Y+W.length;if(ne>j){j=ne;const ge=new Uint8Array(j);ge.set(X),X=ge}X.set(W,Y),Y=ne;const ae=Y/j*100;return O({progress:ae,loaded:Y,total:j}),se()}return await se(),X}function C(...S){return S=S.map((O,N)=>(N&&(O=O.replace(new RegExp("^/"),"")),N!==S.length-1&&(O=O.replace(new RegExp("/$"),"")),O)),S.join("/")}}),"./src/utils/image.js":((e,t,n)=>{n.r(t),n.d(t,{RawImage:()=>v,load_image:()=>b});var i=n("./src/utils/core.js"),r=n("./src/utils/hub.js"),o=n("./src/env.js"),l=n("./src/utils/tensor.js"),c=n("?2b25");let d,f,p;const h=o.apis.IS_BROWSER_ENV||o.apis.IS_WEBWORKER_ENV;if(h)d=(D,T)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(D,T)},p=self.createImageBitmap,f=self.ImageData;else if(c)p=async D=>{const E=(await D.metadata()).channels,{data:A,info:$}=await D.rotate().raw().toBuffer({resolveWithObject:!0}),P=new v(new Uint8ClampedArray(A),$.width,$.height,$.channels);return E!==void 0&&E!==$.channels&&P.convert(E),P};else throw new Error("Unable to load image processing library.");const m={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},_=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class v{constructor(T,E,A,$){this.data=T,this.width=E,this.height=A,this.channels=$}get size(){return[this.width,this.height]}static async read(T){if(T instanceof v)return T;if(typeof T=="string"||T instanceof URL)return await this.fromURL(T);if(T instanceof Blob)return await this.fromBlob(T);if(typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&T instanceof OffscreenCanvas)return this.fromCanvas(T);throw new Error(`Unsupported input type: ${typeof T}`)}static fromCanvas(T){if(!h)throw new Error("fromCanvas() is only supported in browser environments.");const A=T.getContext("2d").getImageData(0,0,T.width,T.height).data;return new v(A,T.width,T.height,4)}static async fromURL(T){const E=await(0,r.getFile)(T);if(E.status!==200)throw new Error(`Unable to read image from "${T}" (${E.status} ${E.statusText})`);const A=await E.blob();return this.fromBlob(A)}static async fromBlob(T){if(h){const E=await p(T),A=d(E.width,E.height).getContext("2d");return A.drawImage(E,0,0),new this(A.getImageData(0,0,E.width,E.height).data,E.width,E.height,4)}else{const E=c(await T.arrayBuffer());return await p(E)}}static fromTensor(T,E="CHW"){if(T.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${T.dims.length} dimensions.`);if(E==="CHW")T=T.transpose(1,2,0);else if(E!=="HWC")throw new Error(`Unsupported channel format: ${E}`);if(!(T.data instanceof Uint8ClampedArray||T.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${T.type}`);switch(T.dims[2]){case 1:case 2:case 3:case 4:return new v(T.data,T.dims[1],T.dims[0],T.dims[2]);default:throw new Error(`Unsupported number of channels: ${T.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const T=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let E=0,A=0;E<this.data.length;E+=this.channels){const $=this.data[E],P=this.data[E+1],C=this.data[E+2];T[A++]=Math.round(.2989*$+.587*P+.114*C)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(T,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const T=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let E=0,A=0;E<this.data.length;++E)T[A++]=this.data[E],T[A++]=this.data[E],T[A++]=this.data[E];break;case 4:for(let E=0,A=0;E<this.data.length;E+=4)T[A++]=this.data[E],T[A++]=this.data[E+1],T[A++]=this.data[E+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(T,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const T=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let E=0,A=0;E<this.data.length;++E)T[A++]=this.data[E],T[A++]=this.data[E],T[A++]=this.data[E],T[A++]=255;break;case 3:for(let E=0,A=0;E<this.data.length;E+=3)T[A++]=this.data[E],T[A++]=this.data[E+1],T[A++]=this.data[E+2],T[A++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(T,this.width,this.height,4)}putAlpha(T){if(T.width!==this.width||T.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${T.width}x${T.height}`);if(T.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${T.channels}`);const E=this.data,A=T.data,$=this.width*this.height;if(this.channels===3){const P=new Uint8ClampedArray($*4);for(let C=0,S=0,O=0;C<$;++C)P[O++]=E[S++],P[O++]=E[S++],P[O++]=E[S++],P[O++]=A[C];return this._update(P,this.width,this.height,4)}else if(this.channels===4){for(let P=0;P<$;++P)E[4*P+3]=A[P];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(T,E,{resample:A=2}={}){if(this.width===T&&this.height===E)return this;let $=m[A]??A;const P=(0,i.isNullishDimension)(T),C=(0,i.isNullishDimension)(E);if(P&&C)return this;if(P?T=E/this.height*this.width:C&&(E=T/this.width*this.height),h){const S=this.channels,O=this.toCanvas(),N=d(T,E).getContext("2d");return N.drawImage(O,0,0,T,E),new v(N.getImageData(0,0,T,E).data,T,E,4).convert(S)}else{let S=this.toSharp();switch($){case"box":case"hamming":($==="box"||$==="hamming")&&(console.warn(`Resampling method ${$} is not yet supported. Using bilinear instead.`),$="bilinear");case"nearest":case"bilinear":case"bicubic":S=S.affine([T/this.width,0,0,E/this.height],{interpolator:$});break;case"lanczos":S=S.resize({width:T,height:E,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${$} is not supported.`)}return await p(S)}}async pad([T,E,A,$]){if(T=Math.max(T,0),E=Math.max(E,0),A=Math.max(A,0),$=Math.max($,0),T===0&&E===0&&A===0&&$===0)return this;if(h){const P=this.channels,C=this.toCanvas(),S=this.width+T+E,O=this.height+A+$,N=d(S,O).getContext("2d");return N.drawImage(C,0,0,this.width,this.height,T,A,this.width,this.height),new v(N.getImageData(0,0,S,O).data,S,O,4).convert(P)}else{const P=this.toSharp().extend({left:T,right:E,top:A,bottom:$});return await p(P)}}async crop([T,E,A,$]){if(T=Math.max(T,0),E=Math.max(E,0),A=Math.min(A,this.width-1),$=Math.min($,this.height-1),T===0&&E===0&&A===this.width-1&&$===this.height-1)return this;const P=A-T+1,C=$-E+1;if(h){const S=this.channels,O=this.toCanvas(),N=d(P,C).getContext("2d");return N.drawImage(O,T,E,P,C,0,0,P,C),new v(N.getImageData(0,0,P,C).data,P,C,4).convert(S)}else{const S=this.toSharp().extract({left:T,top:E,width:P,height:C});return await p(S)}}async center_crop(T,E){if(this.width===T&&this.height===E)return this;const A=(this.width-T)/2,$=(this.height-E)/2;if(h){const P=this.channels,C=this.toCanvas(),S=d(T,E).getContext("2d");let O=0,N=0,j=0,X=0;return A>=0?O=A:j=-A,$>=0?N=$:X=-$,S.drawImage(C,O,N,T,E,j,X,T,E),new v(S.getImageData(0,0,T,E).data,T,E,4).convert(P)}else{let P=this.toSharp();if(A>=0&&$>=0)P=P.extract({left:Math.floor(A),top:Math.floor($),width:T,height:E});else if(A<=0&&$<=0){const C=Math.floor(-$),S=Math.floor(-A);P=P.extend({top:C,left:S,right:T-this.width-S,bottom:E-this.height-C})}else{let C=[0,0],S=0;$<0?(C[0]=Math.floor(-$),C[1]=E-this.height-C[0]):S=Math.floor($);let O=[0,0],N=0;A<0?(O[0]=Math.floor(-A),O[1]=T-this.width-O[0]):N=Math.floor(A),P=P.extend({top:C[0],bottom:C[1],left:O[0],right:O[1]}).extract({left:N,top:S,width:T,height:E})}return await p(P)}}async toBlob(T="image/png",E=1){if(!h)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:T,quality:E})}toTensor(T="CHW"){let E=new l.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(T!=="HWC")if(T==="CHW")E=E.permute(2,0,1);else throw new Error(`Unsupported channel format: ${T}`);return E}toCanvas(){if(!h)throw new Error("toCanvas() is only supported in browser environments.");const T=this.clone().rgba(),E=d(T.width,T.height),A=new f(T.data,T.width,T.height);return E.getContext("2d").putImageData(A,0,0),E}split(){const{data:T,width:E,height:A,channels:$}=this,P=T.constructor,C=T.length/$,S=Array.from({length:$},()=>new P(C));for(let O=0;O<C;++O){const N=$*O;for(let j=0;j<$;++j)S[j][O]=T[N+j]}return S.map(O=>new v(O,E,A,1))}_update(T,E,A,$=null){return this.data=T,this.width=E,this.height=A,$!==null&&(this.channels=$),this}clone(){return new v(this.data.slice(),this.width,this.height,this.channels)}convert(T){if(this.channels===T)return this;switch(T){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(T){if(h){if(o.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const E=T.split(".").pop().toLowerCase(),A=_.get(E)??"image/png",$=await this.toBlob(A);(0,i.saveBlob)(T,$)}else{if(o.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(T);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(h)throw new Error("toSharp() is only supported in server-side environments.");return c(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const b=v.read.bind(v)}),"./src/utils/maths.js":((e,t,n)=>{n.r(t),n.d(t,{FFT:()=>b,bankers_round:()=>E,cos_sim:()=>d,dot:()=>c,dynamic_time_warping:()=>A,interpolate_data:()=>i,log_softmax:()=>l,magnitude:()=>f,max:()=>h,medianFilter:()=>D,min:()=>p,permute_data:()=>r,round:()=>T,softmax:()=>o});function i($,[P,C,S],[O,N],j="bilinear",X=!1){const Y=N/S,K=O/C,se=new $.constructor(O*N*P),oe=C*S,W=O*N;for(let ne=0;ne<O;++ne)for(let ae=0;ae<N;++ae){const ge=ne*N+ae,ye=(ae+.5)/Y-.5,G=(ne+.5)/K-.5;let H=Math.floor(ye),V=Math.floor(G);const U=Math.min(H+1,S-1),ce=Math.min(V+1,C-1);H=Math.max(H,0),V=Math.max(V,0);const ve=ye-H,ke=G-V,Le=(1-ve)*(1-ke),Xe=ve*(1-ke),Be=(1-ve)*ke,ue=ve*ke,Z=V*S,Se=ce*S,Re=Z+H,Ve=Z+U,Ge=Se+H,Ke=Se+U;for(let Ie=0;Ie<P;++Ie){const nt=Ie*oe;se[Ie*W+ge]=Le*$[nt+Re]+Xe*$[nt+Ve]+Be*$[nt+Ge]+ue*$[nt+Ke]}}return se}function r($,P,C){const S=new Array(C.length),O=new Array(C.length);for(let X=C.length-1,Y=1;X>=0;--X)O[X]=Y,S[X]=P[C[X]],Y*=S[X];const N=C.map((X,Y)=>O[C.indexOf(Y)]),j=new $.constructor($.length);for(let X=0;X<$.length;++X){let Y=0;for(let K=P.length-1,se=X;K>=0;--K)Y+=se%P[K]*N[K],se=Math.floor(se/P[K]);j[Y]=$[X]}return[j,S]}function o($){const P=h($)[0],C=$.map(N=>Math.exp(N-P)),S=C.reduce((N,j)=>N+j,0);return C.map(N=>N/S)}function l($){const P=h($)[0];let C=0;for(let N=0;N<$.length;++N)C+=Math.exp($[N]-P);const S=Math.log(C);return $.map(N=>N-P-S)}function c($,P){let C=0;for(let S=0;S<$.length;++S)C+=$[S]*P[S];return C}function d($,P){const C=c($,P),S=f($),O=f(P);return C/(S*O)}function f($){return Math.sqrt($.reduce((P,C)=>P+C*C,0))}function p($){if($.length===0)throw Error("Array must not be empty");let P=$[0],C=0;for(let S=1;S<$.length;++S)$[S]<P&&(P=$[S],C=S);return[P,C]}function h($){if($.length===0)throw Error("Array must not be empty");let P=$[0],C=0;for(let S=1;S<$.length;++S)$[S]>P&&(P=$[S],C=S);return[P,C]}function m($){return $>0&&($&$-1)===0}class _{constructor(P){if(this.size=P|0,this.size<=1||!m(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=P<<1,this.table=new Float64Array(this.size*2);for(let S=0;S<this.table.length;S+=2){const O=Math.PI*S/this.size;this.table[S]=Math.cos(O),this.table[S+1]=-Math.sin(O)}let C=0;for(let S=1;this.size>S;S<<=1)++C;this._width=C%2===0?C-1:C,this._bitrev=new Int32Array(1<<this._width);for(let S=0;S<this._bitrev.length;++S){this._bitrev[S]=0;for(let O=0;O<this._width;O+=2){const N=this._width-O-2;this._bitrev[S]|=(S>>>O&3)<<N}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(P,C){const S=C||new Array(P.length>>>1);for(let O=0;O<P.length;O+=2)S[O>>>1]=P[O];return S}toComplexArray(P,C){const S=C||this.createComplexArray();for(let O=0;O<S.length;O+=2)S[O]=P[O>>>1],S[O+1]=0;return S}transform(P,C){if(P===C)throw new Error("Input and output buffers must be different");this._transform4(P,C,1)}realTransform(P,C){if(P===C)throw new Error("Input and output buffers must be different");this._realTransform4(P,C,1)}inverseTransform(P,C){if(P===C)throw new Error("Input and output buffers must be different");this._transform4(P,C,-1);for(let S=0;S<P.length;++S)P[S]/=this.size}_transform4(P,C,S){const O=this._csize;let j=1<<this._width,X=O/j<<1,Y,K;const se=this._bitrev;if(X===4)for(Y=0,K=0;Y<O;Y+=X,++K){const W=se[K];this._singleTransform2(C,P,Y,W,j)}else for(Y=0,K=0;Y<O;Y+=X,++K){const W=se[K];this._singleTransform4(C,P,Y,W,j,S)}const oe=this.table;for(j>>=2;j>=2;j>>=2){X=O/j<<1;const W=X>>>2;for(Y=0;Y<O;Y+=X){const ne=Y+W-1;for(let ae=Y,ge=0;ae<ne;ae+=2,ge+=j){const ye=ae,G=ye+W,H=G+W,V=H+W,U=P[ye],ce=P[ye+1],ve=P[G],ke=P[G+1],Le=P[H],Xe=P[H+1],Be=P[V],ue=P[V+1],Z=oe[ge],Se=S*oe[ge+1],Re=ve*Z-ke*Se,Ve=ve*Se+ke*Z,Ge=oe[2*ge],Ke=S*oe[2*ge+1],Ie=Le*Ge-Xe*Ke,nt=Le*Ke+Xe*Ge,Ae=oe[3*ge],We=S*oe[3*ge+1],ft=Be*Ae-ue*We,Fe=Be*We+ue*Ae,ot=U+Ie,rt=ce+nt,St=U-Ie,Tt=ce-nt,ut=Re+ft,et=Ve+Fe,kt=S*(Re-ft),jt=S*(Ve-Fe);P[ye]=ot+ut,P[ye+1]=rt+et,P[G]=St+jt,P[G+1]=Tt-kt,P[H]=ot-ut,P[H+1]=rt-et,P[V]=St-jt,P[V+1]=Tt+kt}}}}_singleTransform2(P,C,S,O,N){const j=P[O],X=P[O+1],Y=P[O+N],K=P[O+N+1];C[S]=j+Y,C[S+1]=X+K,C[S+2]=j-Y,C[S+3]=X-K}_singleTransform4(P,C,S,O,N,j){const X=N*2,Y=N*3,K=P[O],se=P[O+1],oe=P[O+N],W=P[O+N+1],ne=P[O+X],ae=P[O+X+1],ge=P[O+Y],ye=P[O+Y+1],G=K+ne,H=se+ae,V=K-ne,U=se-ae,ce=oe+ge,ve=W+ye,ke=j*(oe-ge),Le=j*(W-ye);C[S]=G+ce,C[S+1]=H+ve,C[S+2]=V+Le,C[S+3]=U-ke,C[S+4]=G-ce,C[S+5]=H-ve,C[S+6]=V-Le,C[S+7]=U+ke}_realTransform4(P,C,S){const O=this._csize;let j=1<<this._width,X=O/j<<1,Y,K;const se=this._bitrev;if(X===4)for(Y=0,K=0;Y<O;Y+=X,++K){const ne=se[K];this._singleRealTransform2(C,P,Y,ne>>>1,j>>>1)}else for(Y=0,K=0;Y<O;Y+=X,++K){const ne=se[K];this._singleRealTransform4(C,P,Y,ne>>>1,j>>>1,S)}const oe=this.table;for(j>>=2;j>=2;j>>=2){X=O/j<<1;const ne=X>>>1,ae=ne>>>1,ge=ae>>>1;for(Y=0;Y<O;Y+=X)for(let ye=0,G=0;ye<=ge;ye+=2,G+=j){const H=Y+ye,V=H+ae,U=V+ae,ce=U+ae,ve=P[H],ke=P[H+1],Le=P[V],Xe=P[V+1],Be=P[U],ue=P[U+1],Z=P[ce],Se=P[ce+1],Re=ve,Ve=ke,Ge=oe[G],Ke=S*oe[G+1],Ie=Le*Ge-Xe*Ke,nt=Le*Ke+Xe*Ge,Ae=oe[2*G],We=S*oe[2*G+1],ft=Be*Ae-ue*We,Fe=Be*We+ue*Ae,ot=oe[3*G],rt=S*oe[3*G+1],St=Z*ot-Se*rt,Tt=Z*rt+Se*ot,ut=Re+ft,et=Ve+Fe,kt=Re-ft,jt=Ve-Fe,Cn=Ie+St,Qt=nt+Tt,kn=S*(Ie-St),Mr=S*(nt-Tt);if(P[H]=ut+Cn,P[H+1]=et+Qt,P[V]=kt+Mr,P[V+1]=jt-kn,ye===0){P[U]=ut-Cn,P[U+1]=et-Qt;continue}if(ye===ge)continue;const an=Y+ae-ye,_i=Y+ne-ye;P[an]=kt-S*Mr,P[an+1]=-jt-S*kn,P[_i]=ut-S*Cn,P[_i+1]=-et+S*Qt}}const W=O>>>1;for(let ne=2;ne<W;ne+=2)P[O-ne]=P[ne],P[O-ne+1]=-P[ne+1]}_singleRealTransform2(P,C,S,O,N){const j=P[O],X=P[O+N];C[S]=j+X,C[S+1]=0,C[S+2]=j-X,C[S+3]=0}_singleRealTransform4(P,C,S,O,N,j){const X=N*2,Y=N*3,K=P[O],se=P[O+N],oe=P[O+X],W=P[O+Y],ne=K+oe,ae=K-oe,ge=se+W,ye=j*(se-W);C[S]=ne+ge,C[S+1]=0,C[S+2]=ae,C[S+3]=-ye,C[S+4]=ne-ge,C[S+5]=0,C[S+6]=ae,C[S+7]=ye}}class v{constructor(P){const C=2*(P-1),S=2*(2*P-1),O=2**Math.ceil(Math.log2(S));this.bufferSize=O,this._a=C;const N=new Float64Array(S),j=new Float64Array(O);this._chirpBuffer=new Float64Array(O),this._buffer1=new Float64Array(O),this._buffer2=new Float64Array(O),this._outBuffer1=new Float64Array(O),this._outBuffer2=new Float64Array(O);const X=-2*Math.PI/P,Y=Math.cos(X),K=Math.sin(X);for(let se=0;se<S>>1;++se){const oe=(se+1-P)**2/2,W=Math.sqrt(Y**2+K**2)**oe,ne=oe*Math.atan2(K,Y),ae=2*se;N[ae]=W*Math.cos(ne),N[ae+1]=W*Math.sin(ne),j[ae]=N[ae],j[ae+1]=-N[ae+1]}this._slicedChirpBuffer=N.subarray(C,S),this._f=new _(O>>1),this._f.transform(this._chirpBuffer,j)}_transform(P,C,S){const O=this._buffer1,N=this._buffer2,j=this._outBuffer1,X=this._outBuffer2,Y=this._chirpBuffer,K=this._slicedChirpBuffer,se=this._a;if(S)for(let oe=0;oe<K.length;oe+=2){const W=oe+1,ne=oe>>1,ae=C[ne];O[oe]=ae*K[oe],O[W]=ae*K[W]}else for(let oe=0;oe<K.length;oe+=2){const W=oe+1;O[oe]=C[oe]*K[oe]-C[W]*K[W],O[W]=C[oe]*K[W]+C[W]*K[oe]}this._f.transform(j,O);for(let oe=0;oe<Y.length;oe+=2){const W=oe+1;N[oe]=j[oe]*Y[oe]-j[W]*Y[W],N[W]=j[oe]*Y[W]+j[W]*Y[oe]}this._f.inverseTransform(X,N);for(let oe=0;oe<X.length;oe+=2){const W=X[oe+se],ne=X[oe+se+1],ae=K[oe],ge=K[oe+1];P[oe]=W*ae-ne*ge,P[oe+1]=W*ge+ne*ae}}transform(P,C){this._transform(P,C,!1)}realTransform(P,C){this._transform(P,C,!0)}}class b{constructor(P){this.fft_length=P,this.isPowerOfTwo=m(P),this.isPowerOfTwo?(this.fft=new _(P),this.outputBufferSize=2*P):(this.fft=new v(P),this.outputBufferSize=this.fft.bufferSize)}realTransform(P,C){this.fft.realTransform(P,C)}transform(P,C){this.fft.transform(P,C)}}function D($,P){if(P%2===0||P<=0)throw new Error("Window size must be a positive odd number");const C=new $.constructor($.length),S=new $.constructor(P),O=Math.floor(P/2);for(let N=0;N<$.length;++N){let j=0;for(let X=-O;X<=O;++X){let Y=N+X;Y<0?Y=Math.abs(Y):Y>=$.length&&(Y=2*($.length-1)-Y),S[j++]=$[Y]}S.sort(),C[N]=S[O]}return C}function T($,P){const C=Math.pow(10,P);return Math.round($*C)/C}function E($){const P=Math.round($);return Math.abs($)%1===.5?P%2===0?P:P-1:P}function A($){const P=$.length,C=$[0].length,S=[P+1,C+1],O=Array.from({length:S[0]},()=>Array(S[1]).fill(1/0));O[0][0]=0;const N=Array.from({length:S[0]},()=>Array(S[1]).fill(-1));for(let se=1;se<S[1];++se)for(let oe=1;oe<S[0];++oe){const W=O[oe-1][se-1],ne=O[oe-1][se],ae=O[oe][se-1];let ge,ye;W<ne&&W<ae?(ge=W,ye=0):ne<W&&ne<ae?(ge=ne,ye=1):(ge=ae,ye=2),O[oe][se]=$[oe-1][se-1]+ge,N[oe][se]=ye}for(let se=0;se<S[1];++se)N[0][se]=2;for(let se=0;se<S[0];++se)N[se][0]=1;let j=P,X=C,Y=[],K=[];for(;j>0||X>0;)switch(Y.push(j-1),K.push(X-1),N[j][X]){case 0:--j,--X;break;case 1:--j;break;case 2:--X;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${j}, ${X}]. Please file a bug report.`)}return Y.reverse(),K.reverse(),[Y,K]}}),"./src/utils/tensor.js":((e,t,n)=>{n.r(t),n.d(t,{DataTypeMap:()=>l,Tensor:()=>c,cat:()=>C,full:()=>K,full_like:()=>se,interpolate:()=>p,interpolate_4d:()=>h,layer_norm:()=>E,matmul:()=>m,mean:()=>j,mean_pooling:()=>T,ones:()=>oe,ones_like:()=>W,permute:()=>f,quantize_embeddings:()=>G,rand:()=>ge,randn:()=>ye,rfft:()=>_,slice:()=>D,stack:()=>S,std_mean:()=>N,topk:()=>v,zeros:()=>ne,zeros_like:()=>ae});var i=n("./src/utils/maths.js"),r=n("./src/backends/onnx.js"),o=n("./src/ops/registry.js");const l=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class c{get dims(){return this.ort_tensor.dims}set dims(V){this.ort_tensor.dims=V}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}ort_tensor;constructor(...V){return(0,r.isONNXTensor)(V[0])?this.ort_tensor=V[0]:this.ort_tensor=new r.Tensor(V[0],V[1],V[2]),new Proxy(this,{get:(U,ce)=>{if(typeof ce=="string"){let ve=Number(ce);if(Number.isInteger(ve))return U._getitem(ve)}return U[ce]},set:(U,ce,ve)=>U[ce]=ve})}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[V,...U]=this.dims;if(U.length>0){const ce=U.reduce((ve,ke)=>ve*ke);for(let ve=0;ve<V;++ve)yield this._subarray(ve,ce,U)}else yield*this.data}_getitem(V){const[U,...ce]=this.dims;if(V=P(V,U),ce.length>0){const ve=ce.reduce((ke,Le)=>ke*Le);return this._subarray(V,ve,ce)}else return new c(this.type,[this.data[V]],ce)}indexOf(V){const U=this.data;for(let ce=0;ce<U.length;++ce)if(U[ce]==V)return ce;return-1}_subarray(V,U,ce){const ve=V*U,ke=(V+1)*U,Le="subarray"in this.data?this.data.subarray(ve,ke):this.data.slice(ve,ke);return new c(this.type,Le,ce)}item(){const V=this.data;if(V.length!==1)throw new Error(`a Tensor with ${V.length} elements cannot be converted to Scalar`);return V[0]}tolist(){return d(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const V=this.data;for(let U=0;U<V.length;++U)V[U]=1/(1+Math.exp(-V[U]));return this}map(V){return this.clone().map_(V)}map_(V){const U=this.data;for(let ce=0;ce<U.length;++ce)U[ce]=V(U[ce],ce,U);return this}mul(V){return this.clone().mul_(V)}mul_(V){const U=this.data;for(let ce=0;ce<U.length;++ce)U[ce]*=V;return this}div(V){return this.clone().div_(V)}div_(V){const U=this.data;for(let ce=0;ce<U.length;++ce)U[ce]/=V;return this}add(V){return this.clone().add_(V)}add_(V){const U=this.data;for(let ce=0;ce<U.length;++ce)U[ce]+=V;return this}sub(V){return this.clone().sub_(V)}sub_(V){const U=this.data;for(let ce=0;ce<U.length;++ce)U[ce]-=V;return this}clone(){return new c(this.type,this.data.slice(),this.dims.slice())}slice(...V){const U=[],ce=[];for(let Z=0;Z<this.dims.length;++Z){let Se=V[Z];if(Se==null)ce.push([0,this.dims[Z]]),U.push(this.dims[Z]);else if(typeof Se=="number")Se=P(Se,this.dims[Z],Z),ce.push([Se,Se+1]);else if(Array.isArray(Se)&&Se.length===2){let[Re,Ve]=Se;if(Re=Re===null?0:P(Re,this.dims[Z],Z,!1),Ve=Ve===null?this.dims[Z]:P(Ve,this.dims[Z],Z,!1),Re>Ve)throw new Error(`Invalid slice: ${Se}`);const Ge=[Math.max(Re,0),Math.min(Ve,this.dims[Z])];ce.push(Ge),U.push(Ge[1]-Ge[0])}else throw new Error(`Invalid slice: ${Se}`)}const ve=ce.map(([Z,Se])=>Se-Z),ke=ve.reduce((Z,Se)=>Z*Se),Le=this.data,Xe=new Le.constructor(ke),Be=this.stride();let ue=!0;for(let Z=1;Z<ve.length;++Z)if(ce[Z][0]!==0||ce[Z][1]!==this.dims[Z]){ue=!1;break}if(ue){const Z=ce[0][0]*Be[0],Se=ce[0][1]*Be[0];if(ArrayBuffer.isView(Le))Xe.set(Le.subarray(Z,Se));else if(Array.isArray(Le)){const Re=Le.slice(Z,Se);for(let Ve=0;Ve<Re.length;++Ve)Xe[Ve]=Re[Ve]}else throw new Error("Unsupported data type for slicing")}else for(let Z=0;Z<ke;++Z){let Se=0;for(let Re=ve.length-1,Ve=Z;Re>=0;--Re){const Ge=ve[Re];Se+=(Ve%Ge+ce[Re][0])*Be[Re],Ve=Math.floor(Ve/Ge)}Xe[Z]=Le[Se]}return new c(this.type,Xe,U)}permute(...V){return f(this,V)}transpose(...V){return this.permute(...V)}sum(V=null,U=!1){return this.norm(1,V,U)}norm(V="fro",U=null,ce=!1){if(V==="fro")V=2;else if(typeof V=="string")throw Error(`Unsupported norm: ${V}`);const ve=this.data,ke=(ue,Z)=>ue+Z**V;if(U===null){const ue=ve.reduce(ke,0)**(1/V);return new c(this.type,[ue],[])}const[Le,Xe,Be]=O(ke,this,U,ce);if(V!==1)for(let ue=0;ue<Xe.length;++ue)Xe[ue]=Xe[ue]**(1/V);return new c(Le,Xe,Be)}normalize_(V=2,U=1){U=P(U,this.dims.length);const ce=this.norm(V,U,!0),ve=this.data,ke=ce.data;for(let Le=0;Le<ve.length;++Le){let Xe=0;for(let Be=this.dims.length-1,ue=Le,Z=1;Be>=0;--Be){const Se=this.dims[Be];if(Be!==U){const Re=ue%Se;Xe+=Re*Z,Z*=this.dims[Be]}ue=Math.floor(ue/Se)}ve[Le]/=ke[Xe]}return this}normalize(V=2,U=1){return this.clone().normalize_(V,U)}stride(){return X(this.dims)}squeeze(V=null){return new c(this.type,this.data,A(this.dims,V))}squeeze_(V=null){return this.dims=A(this.dims,V),this}unsqueeze(V=null){return new c(this.type,this.data,$(this.dims,V))}unsqueeze_(V=null){return this.dims=$(this.dims,V),this}flatten_(V=0,U=-1){U=(U+this.dims.length)%this.dims.length;let ce=this.dims.slice(0,V),ve=this.dims.slice(V,U+1),ke=this.dims.slice(U+1);return this.dims=[...ce,ve.reduce((Le,Xe)=>Le*Xe,1),...ke],this}flatten(V=0,U=-1){return this.clone().flatten_(V,U)}view(...V){let U=-1;for(let ve=0;ve<V.length;++ve)if(V[ve]===-1){if(U!==-1)throw new Error("Only one dimension can be inferred");U=ve}const ce=this.data;if(U!==-1){const ve=V.reduce((ke,Le,Xe)=>Xe!==U?ke*Le:ke,1);V[U]=ce.length/ve}return new c(this.type,ce,V)}neg_(){const V=this.data;for(let U=0;U<V.length;++U)V[U]=-V[U];return this}neg(){return this.clone().neg_()}gt(V){const U=new Uint8Array(this.data.length),ce=this.data;for(let ve=0;ve<ce.length;++ve)U[ve]=ce[ve]>V?1:0;return new c("bool",U,this.dims)}lt(V){const U=new Uint8Array(this.data.length),ce=this.data;for(let ve=0;ve<ce.length;++ve)U[ve]=ce[ve]<V?1:0;return new c("bool",U,this.dims)}clamp_(V,U){const ce=this.data;for(let ve=0;ve<ce.length;++ve)ce[ve]=Math.min(Math.max(ce[ve],V),U);return this}clamp(V,U){return this.clone().clamp_(V,U)}round_(){const V=this.data;for(let U=0;U<V.length;++U)V[U]=Math.round(V[U]);return this}round(){return this.clone().round_()}mean(V=null,U=!1){return j(this,V,U)}min(V=null,U=!1){if(V===null){const Le=(0,i.min)(this.data)[0];return new c(this.type,[Le],[])}const[ce,ve,ke]=O((Le,Xe)=>Math.min(Le,Xe),this,V,U,1/0);return new c(ce,ve,ke)}max(V=null,U=!1){if(V===null){const Le=(0,i.max)(this.data)[0];return new c(this.type,[Le],[])}const[ce,ve,ke]=O((Le,Xe)=>Math.max(Le,Xe),this,V,U,-1/0);return new c(ce,ve,ke)}argmin(V=null,U=!1){if(V!==null)throw new Error("`dim !== null` not yet implemented.");const ce=(0,i.min)(this.data)[1];return new c("int64",[BigInt(ce)],[])}argmax(V=null,U=!1){if(V!==null)throw new Error("`dim !== null` not yet implemented.");const ce=(0,i.max)(this.data)[1];return new c("int64",[BigInt(ce)],[])}to(V){if(this.type===V)return this;if(!l.hasOwnProperty(V))throw new Error(`Unsupported type: ${V}`);let U;const ce=["int64","uint64"].includes(this.type),ve=["int64","uint64"].includes(V);return ce&&!ve?U=Number:!ce&&ve&&(["float16","float32","float64"].includes(this.type)?U=ke=>BigInt(Math.floor(ke)):U=BigInt),new c(V,l[V].from(this.data,U),this.dims)}}function d(H,V){const U=H.length,ce=V.reduce((ke,Le)=>ke*Le);if(U!==ce)throw Error(`cannot reshape array of size ${U} into shape (${V})`);let ve=H;for(let ke=V.length-1;ke>=0;ke--)ve=ve.reduce((Le,Xe)=>{let Be=Le[Le.length-1];return Be.length<V[ke]?Be.push(Xe):Le.push([Xe]),Le},[[]]);return ve[0]}function f(H,V){const[U,ce]=(0,i.permute_data)(H.data,H.dims,V);return new c(H.type,U,ce)}function p(H,[V,U],ce="bilinear",ve=!1){const ke=H.dims.at(-3)??1,Le=H.dims.at(-2),Xe=H.dims.at(-1);let Be=(0,i.interpolate_data)(H.data,[ke,Le,Xe],[V,U],ce,ve);return new c(H.type,Be,[ke,V,U])}async function h(H,{size:V=null,mode:U="bilinear"}={}){if(H.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!V)throw new Error("`interpolate_4d` requires a `size` argument.");let ce;if(V.length===2)ce=[...H.dims.slice(0,2),...V];else if(V.length===3)ce=[H.dims[0],...V];else if(V.length===4)ce=V;else throw new Error("`size` must be of length 2, 3, or 4.");let ve;if(U==="nearest")ve=await o.TensorOpRegistry.nearest_interpolate_4d;else if(U==="bilinear")ve=await o.TensorOpRegistry.bilinear_interpolate_4d;else if(U==="bicubic")ve=await o.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${U}`);const ke=new c("int64",new BigInt64Array(ce.map(BigInt)),[ce.length]);return await ve({x:H,s:ke})}async function m(H,V){return await(await o.TensorOpRegistry.matmul)({a:H,b:V})}async function _(H,V){return await(await o.TensorOpRegistry.rfft)({x:H,a:V})}async function v(H,V){const U=await o.TensorOpRegistry.top_k;return V==null?V=H.dims.at(-1):V=Math.min(V,H.dims.at(-1)),await U({x:H,k:new c("int64",[BigInt(V)],[1])})}const b=H=>new c("int64",H,[H.length]);async function D(H,V,U,ce,ve){return await(await o.TensorOpRegistry.slice)({x:H,s:b(V),e:b(U),a:b(ce),t:b(ve??new Array(ce.length).fill(1))})}function T(H,V){const U=H.data,ce=V.data,ve=[H.dims[0],H.dims[2]],ke=new U.constructor(ve[0]*ve[1]),[Le,Xe,Be]=H.dims;let ue=0;for(let Z=0;Z<Le;++Z){const Se=Z*Be*Xe;for(let Re=0;Re<Be;++Re){let Ve=0,Ge=0;const Ke=Z*Xe,Ie=Se+Re;for(let Ae=0;Ae<Xe;++Ae){const We=Number(ce[Ke+Ae]);Ge+=We,Ve+=U[Ie+Ae*Be]*We}const nt=Ve/Ge;ke[ue++]=nt}}return new c(H.type,ke,ve)}function E(H,V,{eps:U=1e-5}={}){if(H.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[ce,ve]=H.dims;if(V.length!==1&&V[0]!==ve)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[ke,Le]=N(H,1,0,!0),Xe=ke.data,Be=Le.data,ue=H.data,Z=new ue.constructor(ue.length);for(let Se=0;Se<ce;++Se){const Re=Se*ve;for(let Ve=0;Ve<ve;++Ve){const Ge=Re+Ve;Z[Ge]=(ue[Ge]-Be[Se])/(Xe[Se]+U)}}return new c(H.type,Z,H.dims)}function A(H,V){return H=H.slice(),V===null?H=H.filter(U=>U!==1):typeof V=="number"?H[V]===1&&H.splice(V,1):Array.isArray(V)&&(H=H.filter((U,ce)=>U!==1||!V.includes(ce))),H}function $(H,V){return V=P(V,H.length+1),H=H.slice(),H.splice(V,0,1),H}function P(H,V,U=null,ce=!0){if(H<-V||H>=V){if(ce)throw new Error(`IndexError: index ${H} is out of bounds for dimension${U===null?"":" "+U} with size ${V}`);return H<-V?0:V}return H<0&&(H=(H%V+V)%V),H}function C(H,V=0){V=P(V,H[0].dims.length);const U=H[0].dims.slice();U[V]=H.reduce((Le,Xe)=>Le+Xe.dims[V],0);const ce=U.reduce((Le,Xe)=>Le*Xe,1),ve=new H[0].data.constructor(ce),ke=H[0].type;if(V===0){let Le=0;for(const Xe of H){const Be=Xe.data;ve.set(Be,Le),Le+=Be.length}}else{let Le=0;for(let Xe=0;Xe<H.length;++Xe){const{data:Be,dims:ue}=H[Xe];for(let Z=0;Z<Be.length;++Z){let Se=0;for(let Re=ue.length-1,Ve=Z,Ge=1;Re>=0;--Re){const Ke=ue[Re];let Ie=Ve%Ke;Re===V&&(Ie+=Le),Se+=Ie*Ge,Ge*=U[Re],Ve=Math.floor(Ve/Ke)}ve[Se]=Be[Z]}Le+=ue[V]}}return new c(ke,ve,U)}function S(H,V=0){return C(H.map(U=>U.unsqueeze(V)),V)}function O(H,V,U=null,ce=!1,ve=null){const ke=V.data,Le=V.dims;U=P(U,Le.length);const Xe=Le.slice();Xe[U]=1;const Be=new ke.constructor(ke.length/Le[U]);ve!==null&&Be.fill(ve);for(let ue=0;ue<ke.length;++ue){let Z=0;for(let Se=Le.length-1,Re=ue,Ve=1;Se>=0;--Se){const Ge=Le[Se];if(Se!==U){const Ke=Re%Ge;Z+=Ke*Ve,Ve*=Xe[Se]}Re=Math.floor(Re/Ge)}Be[Z]=H(Be[Z],ke[ue],ue,Z)}return ce||Xe.splice(U,1),[V.type,Be,Xe]}function N(H,V=null,U=1,ce=!1){const ve=H.data,ke=H.dims;if(V===null){const Ve=ve.reduce((nt,Ae)=>nt+Ae,0)/ve.length,Ge=Math.sqrt(ve.reduce((nt,Ae)=>nt+(Ae-Ve)**2,0)/(ve.length-U)),Ke=new c(H.type,[Ve],[]);return[new c(H.type,[Ge],[]),Ke]}V=P(V,ke.length);const Le=j(H,V,ce),Xe=Le.data,[Be,ue,Z]=O((Re,Ve,Ge,Ke)=>Re+(Ve-Xe[Ke])**2,H,V,ce);for(let Re=0;Re<ue.length;++Re)ue[Re]=Math.sqrt(ue[Re]/(ke[V]-U));return[new c(Be,ue,Z),Le]}function j(H,V=null,U=!1){const ce=H.dims,ve=H.data;if(V===null){const Be=ve.reduce((ue,Z)=>ue+Z,0);return new c(H.type,[Be/ve.length],[])}V=P(V,ce.length);const[ke,Le,Xe]=O((Be,ue)=>Be+ue,H,V,U);if(ce[V]!==1)for(let Be=0;Be<Le.length;++Be)Le[Be]/=ce[V];return new c(ke,Le,Xe)}function X(H){const V=new Array(H.length);for(let U=H.length-1,ce=1;U>=0;--U)V[U]=ce,ce*=H[U];return V}function Y(H,V,U,ce){const ve=H.reduce((ke,Le)=>ke*Le,1);return new c(U,new ce(ve).fill(V),H)}function K(H,V){let U,ce;if(typeof V=="number")U="float32",ce=Float32Array;else if(typeof V=="bigint")U="int64",ce=BigInt64Array;else if(typeof V=="boolean")U="bool",ce=Uint8Array;else throw new Error(`Unsupported data type: ${typeof V}`);return Y(H,V,U,ce)}function se(H,V){return K(H.dims,V)}function oe(H){return Y(H,1n,"int64",BigInt64Array)}function W(H){return oe(H.dims)}function ne(H){return Y(H,0n,"int64",BigInt64Array)}function ae(H){return ne(H.dims)}function ge(H){const V=H.reduce((U,ce)=>U*ce,1);return new c("float32",Float32Array.from({length:V},()=>Math.random()),H)}function ye(H){const V=H.reduce((ce,ve)=>ce*ve,1);function U(){const ce=1-Math.random(),ve=1-Math.random();return Math.sqrt(-2*Math.log(ce))*Math.cos(2*Math.PI*ve)}return new c("float32",Float32Array.from({length:V},()=>U()),H)}function G(H,V){if(H.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(H.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(V))throw new Error("The precision must be either 'binary' or 'ubinary'");const U=V==="binary",ce=U?"int8":"uint8",ve=U?Int8Array:Uint8Array,ke=H.data,Le=new ve(ke.length/8);for(let Xe=0;Xe<ke.length;++Xe){const Be=ke[Xe]>0?1:0,ue=Math.floor(Xe/8),Z=Xe%8;Le[ue]|=Be<<7-Z,U&&Z===0&&(Le[ue]-=128)}return new c(ce,Le,[H.dims[0],H.dims[1]/8])}}),"./src/utils/video.js":((e,t,n)=>{n.r(t),n.d(t,{RawVideo:()=>l,RawVideoFrame:()=>o,load_video:()=>c});var i=n("./src/utils/image.js"),r=n("./src/env.js");class o{constructor(f,p){this.image=f,this.timestamp=p}}class l{constructor(f,p){f.length>0&&f[0]instanceof i.RawImage&&(f=f.map((h,m)=>new o(h,(m+1)/(f.length+1)*p))),this.frames=f,this.duration=p}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function c(d,{num_frames:f=null,fps:p=null}={}){if(!r.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(f==null&&p==null)throw new Error("Either num_frames or fps must be provided.");const h=[],m=document.createElement("video");if(m.crossOrigin="anonymous",m.muted=!0,typeof d=="string")m.src=d;else if(d instanceof Blob)m.src=URL.createObjectURL(d);else if(d instanceof HTMLVideoElement)m.src=d.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(A=>m.onloadedmetadata=A),m.seekable.start(0)===m.seekable.end(0)){const $=await(await fetch(m.src)).blob();m.src=URL.createObjectURL($),await new Promise(P=>m.onloadedmetadata=P)}const _=m.duration;let v,b;f!=null?(v=f,b=f===1?0:_/(f-1)):(b=1/p,v=Math.floor(_/b));let D=[];for(let A=0;A<v;++A)D.push(f===1?_/2:A*b);const T=document.createElement("canvas");T.width=m.videoWidth,T.height=m.videoHeight;const E=T.getContext("2d",{willReadFrequently:!0});for(const A of D){m.currentTime=A,await new Promise(S=>{m.onseeked=S}),E.drawImage(m,0,0,T.width,T.height);const $=E.getImageData(0,0,T.width,T.height),P=new i.RawImage($.data,T.width,T.height,4),C=new o(P,A);h.push(C)}return m.remove(),new l(h,_)}})},MC={};function Fn(e){var t=MC[e];if(t!==void 0)return t.exports;var n=MC[e]={exports:{}};return PH[e](n,n.exports,Fn),n.exports}(()=>{var e=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__,t;Fn.t=function(n,i){if(i&1&&(n=this(n)),i&8||typeof n=="object"&&n&&(i&4&&n.__esModule||i&16&&typeof n.then=="function"))return n;var r=Object.create(null);Fn.r(r);var o={};t=t||[null,e({}),e([]),e(e)];for(var l=i&2&&n;typeof l=="object"&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach(c=>o[c]=()=>n[c]);return o.default=()=>n,Fn.d(r,o),r}})();Fn.d=(e,t)=>{for(var n in t)Fn.o(t,n)&&!Fn.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})};Fn.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);Fn.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var M={};(()=>{Fn.r(M),Fn.d(M,{ASTFeatureExtractor:()=>h.ASTFeatureExtractor,ASTForAudioClassification:()=>n.ASTForAudioClassification,ASTModel:()=>n.ASTModel,ASTPreTrainedModel:()=>n.ASTPreTrainedModel,AlbertForMaskedLM:()=>n.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>n.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>n.AlbertForSequenceClassification,AlbertModel:()=>n.AlbertModel,AlbertPreTrainedModel:()=>n.AlbertPreTrainedModel,AlbertTokenizer:()=>i.AlbertTokenizer,ArceeForCausalLM:()=>n.ArceeForCausalLM,ArceeModel:()=>n.ArceeModel,ArceePreTrainedModel:()=>n.ArceePreTrainedModel,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>r.AutoConfig,AutoFeatureExtractor:()=>m.AutoFeatureExtractor,AutoImageProcessor:()=>b.AutoImageProcessor,AutoModel:()=>n.AutoModel,AutoModelForAudioClassification:()=>n.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>n.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>n.AutoModelForAudioTextToText,AutoModelForCTC:()=>n.AutoModelForCTC,AutoModelForCausalLM:()=>n.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>n.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>n.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>n.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>n.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>n.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>n.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>n.AutoModelForImageTextToText,AutoModelForImageToImage:()=>n.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>n.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>n.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>n.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>n.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>n.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>n.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>n.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>n.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>n.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>n.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>n.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>n.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>n.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>n.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>n.AutoModelForVision2Seq,AutoModelForXVector:()=>n.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>n.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>E.AutoProcessor,AutoTokenizer:()=>i.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>n.BartForConditionalGeneration,BartForSequenceClassification:()=>n.BartForSequenceClassification,BartModel:()=>n.BartModel,BartPretrainedModel:()=>n.BartPretrainedModel,BartTokenizer:()=>i.BartTokenizer,BaseModelOutput:()=>n.BaseModelOutput,BaseStreamer:()=>A.BaseStreamer,BeitFeatureExtractor:()=>v.BeitFeatureExtractor,BeitForImageClassification:()=>n.BeitForImageClassification,BeitModel:()=>n.BeitModel,BeitPreTrainedModel:()=>n.BeitPreTrainedModel,BertForMaskedLM:()=>n.BertForMaskedLM,BertForQuestionAnswering:()=>n.BertForQuestionAnswering,BertForSequenceClassification:()=>n.BertForSequenceClassification,BertForTokenClassification:()=>n.BertForTokenClassification,BertModel:()=>n.BertModel,BertPreTrainedModel:()=>n.BertPreTrainedModel,BertTokenizer:()=>i.BertTokenizer,BitImageProcessor:()=>v.BitImageProcessor,BlenderbotForConditionalGeneration:()=>n.BlenderbotForConditionalGeneration,BlenderbotModel:()=>n.BlenderbotModel,BlenderbotPreTrainedModel:()=>n.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>n.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>n.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>n.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>i.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>i.BlenderbotTokenizer,BloomForCausalLM:()=>n.BloomForCausalLM,BloomModel:()=>n.BloomModel,BloomPreTrainedModel:()=>n.BloomPreTrainedModel,BloomTokenizer:()=>i.BloomTokenizer,CLIPFeatureExtractor:()=>v.CLIPFeatureExtractor,CLIPImageProcessor:()=>v.CLIPImageProcessor,CLIPModel:()=>n.CLIPModel,CLIPPreTrainedModel:()=>n.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>n.CLIPSegForImageSegmentation,CLIPSegModel:()=>n.CLIPSegModel,CLIPSegPreTrainedModel:()=>n.CLIPSegPreTrainedModel,CLIPTextModel:()=>n.CLIPTextModel,CLIPTextModelWithProjection:()=>n.CLIPTextModelWithProjection,CLIPTokenizer:()=>i.CLIPTokenizer,CLIPVisionModel:()=>n.CLIPVisionModel,CLIPVisionModelWithProjection:()=>n.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>n.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>n.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>n.CamembertForSequenceClassification,CamembertForTokenClassification:()=>n.CamembertForTokenClassification,CamembertModel:()=>n.CamembertModel,CamembertPreTrainedModel:()=>n.CamembertPreTrainedModel,CamembertTokenizer:()=>i.CamembertTokenizer,CausalLMOutput:()=>n.CausalLMOutput,CausalLMOutputWithPast:()=>n.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>v.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>n.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>n.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>n.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>h.ClapFeatureExtractor,ClapModel:()=>n.ClapModel,ClapPreTrainedModel:()=>n.ClapPreTrainedModel,ClapTextModelWithProjection:()=>n.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>P.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>n.CodeGenForCausalLM,CodeGenModel:()=>n.CodeGenModel,CodeGenPreTrainedModel:()=>n.CodeGenPreTrainedModel,CodeGenTokenizer:()=>i.CodeGenTokenizer,CodeLlamaTokenizer:()=>i.CodeLlamaTokenizer,CohereForCausalLM:()=>n.CohereForCausalLM,CohereModel:()=>n.CohereModel,CoherePreTrainedModel:()=>n.CoherePreTrainedModel,CohereTokenizer:()=>i.CohereTokenizer,ConvBertForMaskedLM:()=>n.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>n.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>n.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>n.ConvBertForTokenClassification,ConvBertModel:()=>n.ConvBertModel,ConvBertPreTrainedModel:()=>n.ConvBertPreTrainedModel,ConvBertTokenizer:()=>i.ConvBertTokenizer,ConvNextFeatureExtractor:()=>v.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>n.ConvNextForImageClassification,ConvNextImageProcessor:()=>v.ConvNextImageProcessor,ConvNextModel:()=>n.ConvNextModel,ConvNextPreTrainedModel:()=>n.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>n.ConvNextV2ForImageClassification,ConvNextV2Model:()=>n.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>n.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>n.DFineForObjectDetection,DFineModel:()=>n.DFineModel,DFinePreTrainedModel:()=>n.DFinePreTrainedModel,DINOv3ConvNextModel:()=>n.DINOv3ConvNextModel,DINOv3ConvNextPreTrainedModel:()=>n.DINOv3ConvNextPreTrainedModel,DINOv3ViTImageProcessor:()=>v.DINOv3ViTImageProcessor,DINOv3ViTModel:()=>n.DINOv3ViTModel,DINOv3ViTPreTrainedModel:()=>n.DINOv3ViTPreTrainedModel,DPTFeatureExtractor:()=>v.DPTFeatureExtractor,DPTForDepthEstimation:()=>n.DPTForDepthEstimation,DPTImageProcessor:()=>v.DPTImageProcessor,DPTModel:()=>n.DPTModel,DPTPreTrainedModel:()=>n.DPTPreTrainedModel,DacDecoderModel:()=>n.DacDecoderModel,DacDecoderOutput:()=>n.DacDecoderOutput,DacEncoderModel:()=>n.DacEncoderModel,DacEncoderOutput:()=>n.DacEncoderOutput,DacFeatureExtractor:()=>h.DacFeatureExtractor,DacModel:()=>n.DacModel,DacPreTrainedModel:()=>n.DacPreTrainedModel,DataTypeMap:()=>d.DataTypeMap,DebertaForMaskedLM:()=>n.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>n.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>n.DebertaForSequenceClassification,DebertaForTokenClassification:()=>n.DebertaForTokenClassification,DebertaModel:()=>n.DebertaModel,DebertaPreTrainedModel:()=>n.DebertaPreTrainedModel,DebertaTokenizer:()=>i.DebertaTokenizer,DebertaV2ForMaskedLM:()=>n.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>n.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>n.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>n.DebertaV2ForTokenClassification,DebertaV2Model:()=>n.DebertaV2Model,DebertaV2PreTrainedModel:()=>n.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>i.DebertaV2Tokenizer,DecisionTransformerModel:()=>n.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>n.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>v.DeiTFeatureExtractor,DeiTForImageClassification:()=>n.DeiTForImageClassification,DeiTImageProcessor:()=>v.DeiTImageProcessor,DeiTModel:()=>n.DeiTModel,DeiTPreTrainedModel:()=>n.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>n.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>n.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>n.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>n.DepthProPreTrainedModel,DetrFeatureExtractor:()=>v.DetrFeatureExtractor,DetrForObjectDetection:()=>n.DetrForObjectDetection,DetrForSegmentation:()=>n.DetrForSegmentation,DetrImageProcessor:()=>v.DetrImageProcessor,DetrModel:()=>n.DetrModel,DetrObjectDetectionOutput:()=>n.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>n.DetrPreTrainedModel,DetrSegmentationOutput:()=>n.DetrSegmentationOutput,Dinov2ForImageClassification:()=>n.Dinov2ForImageClassification,Dinov2Model:()=>n.Dinov2Model,Dinov2PreTrainedModel:()=>n.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>n.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>n.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>n.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>n.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>n.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>n.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>n.DistilBertForTokenClassification,DistilBertModel:()=>n.DistilBertModel,DistilBertPreTrainedModel:()=>n.DistilBertPreTrainedModel,DistilBertTokenizer:()=>i.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>v.DonutFeatureExtractor,DonutImageProcessor:()=>v.DonutImageProcessor,DonutSwinModel:()=>n.DonutSwinModel,DonutSwinPreTrainedModel:()=>n.DonutSwinPreTrainedModel,EdgeTamModel:()=>n.EdgeTamModel,EfficientNetForImageClassification:()=>n.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>v.EfficientNetImageProcessor,EfficientNetModel:()=>n.EfficientNetModel,EfficientNetPreTrainedModel:()=>n.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>n.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>n.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>n.ElectraForSequenceClassification,ElectraForTokenClassification:()=>n.ElectraForTokenClassification,ElectraModel:()=>n.ElectraModel,ElectraPreTrainedModel:()=>n.ElectraPreTrainedModel,ElectraTokenizer:()=>i.ElectraTokenizer,EncodecFeatureExtractor:()=>h.EncodecFeatureExtractor,EosTokenCriteria:()=>$.EosTokenCriteria,Ernie4_5ForCausalLM:()=>n.Ernie4_5ForCausalLM,Ernie4_5Model:()=>n.Ernie4_5Model,Ernie4_5PreTrainedModel:()=>n.Ernie4_5PreTrainedModel,EsmForMaskedLM:()=>n.EsmForMaskedLM,EsmForSequenceClassification:()=>n.EsmForSequenceClassification,EsmForTokenClassification:()=>n.EsmForTokenClassification,EsmModel:()=>n.EsmModel,EsmPreTrainedModel:()=>n.EsmPreTrainedModel,EsmTokenizer:()=>i.EsmTokenizer,ExaoneForCausalLM:()=>n.ExaoneForCausalLM,ExaoneModel:()=>n.ExaoneModel,ExaonePreTrainedModel:()=>n.ExaonePreTrainedModel,FFT:()=>f.FFT,FalconForCausalLM:()=>n.FalconForCausalLM,FalconModel:()=>n.FalconModel,FalconPreTrainedModel:()=>n.FalconPreTrainedModel,FalconTokenizer:()=>i.FalconTokenizer,FastViTForImageClassification:()=>n.FastViTForImageClassification,FastViTModel:()=>n.FastViTModel,FastViTPreTrainedModel:()=>n.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>p.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>n.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>n.Florence2PreTrainedModel,Florence2Processor:()=>T.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>P.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>P.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>v.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>n.GLPNForDepthEstimation,GLPNModel:()=>n.GLPNModel,GLPNPreTrainedModel:()=>n.GLPNPreTrainedModel,GPT2LMHeadModel:()=>n.GPT2LMHeadModel,GPT2Model:()=>n.GPT2Model,GPT2PreTrainedModel:()=>n.GPT2PreTrainedModel,GPT2Tokenizer:()=>i.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>n.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>n.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>n.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>n.GPTJForCausalLM,GPTJModel:()=>n.GPTJModel,GPTJPreTrainedModel:()=>n.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>n.GPTNeoForCausalLM,GPTNeoModel:()=>n.GPTNeoModel,GPTNeoPreTrainedModel:()=>n.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>n.GPTNeoXForCausalLM,GPTNeoXModel:()=>n.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>n.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>i.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>n.Gemma2ForCausalLM,Gemma2Model:()=>n.Gemma2Model,Gemma2PreTrainedModel:()=>n.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>n.Gemma3ForCausalLM,Gemma3Model:()=>n.Gemma3Model,Gemma3PreTrainedModel:()=>n.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>h.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>n.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>n.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>T.Gemma3nProcessor,GemmaForCausalLM:()=>n.GemmaForCausalLM,GemmaModel:()=>n.GemmaModel,GemmaPreTrainedModel:()=>n.GemmaPreTrainedModel,GemmaTokenizer:()=>i.GemmaTokenizer,GlmForCausalLM:()=>n.GlmForCausalLM,GlmModel:()=>n.GlmModel,GlmPreTrainedModel:()=>n.GlmPreTrainedModel,GraniteForCausalLM:()=>n.GraniteForCausalLM,GraniteModel:()=>n.GraniteModel,GraniteMoeHybridForCausalLM:()=>n.GraniteMoeHybridForCausalLM,GraniteMoeHybridModel:()=>n.GraniteMoeHybridModel,GraniteMoeHybridPreTrainedModel:()=>n.GraniteMoeHybridPreTrainedModel,GranitePreTrainedModel:()=>n.GranitePreTrainedModel,Grok1Tokenizer:()=>i.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>n.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>v.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>n.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>T.GroundingDinoProcessor,GroupViTModel:()=>n.GroupViTModel,GroupViTPreTrainedModel:()=>n.GroupViTPreTrainedModel,HeliumForCausalLM:()=>n.HeliumForCausalLM,HeliumModel:()=>n.HeliumModel,HeliumPreTrainedModel:()=>n.HeliumPreTrainedModel,HerbertTokenizer:()=>i.HerbertTokenizer,HieraForImageClassification:()=>n.HieraForImageClassification,HieraModel:()=>n.HieraModel,HieraPreTrainedModel:()=>n.HieraPreTrainedModel,HubertForCTC:()=>n.HubertForCTC,HubertForSequenceClassification:()=>n.HubertForSequenceClassification,HubertModel:()=>n.HubertModel,HubertPreTrainedModel:()=>n.HubertPreTrainedModel,IJepaForImageClassification:()=>n.IJepaForImageClassification,IJepaModel:()=>n.IJepaModel,IJepaPreTrainedModel:()=>n.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>n.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>v.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>n.Idefics3PreTrainedModel,Idefics3Processor:()=>T.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>h.ImageFeatureExtractor,ImageMattingOutput:()=>n.ImageMattingOutput,ImageProcessor:()=>_.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>$.InterruptableStoppingCriteria,JAISLMHeadModel:()=>n.JAISLMHeadModel,JAISModel:()=>n.JAISModel,JAISPreTrainedModel:()=>n.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>v.JinaCLIPImageProcessor,JinaCLIPModel:()=>n.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>n.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>T.JinaCLIPProcessor,JinaCLIPTextModel:()=>n.JinaCLIPTextModel,JinaCLIPVisionModel:()=>n.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>n.Lfm2ForCausalLM,Lfm2Model:()=>n.Lfm2Model,Lfm2PreTrainedModel:()=>n.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>n.LiteWhisperForConditionalGeneration,Llama4ForCausalLM:()=>n.Llama4ForCausalLM,Llama4PreTrainedModel:()=>n.Llama4PreTrainedModel,LlamaForCausalLM:()=>n.LlamaForCausalLM,LlamaModel:()=>n.LlamaModel,LlamaPreTrainedModel:()=>n.LlamaPreTrainedModel,LlamaTokenizer:()=>i.LlamaTokenizer,LlavaForConditionalGeneration:()=>n.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>n.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>v.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>n.LlavaPreTrainedModel,LlavaProcessor:()=>T.LlavaProcessor,LlavaQwen2ForCausalLM:()=>n.LlavaQwen2ForCausalLM,LogitsProcessor:()=>P.LogitsProcessor,LogitsProcessorList:()=>P.LogitsProcessorList,LogitsWarper:()=>P.LogitsWarper,LongT5ForConditionalGeneration:()=>n.LongT5ForConditionalGeneration,LongT5Model:()=>n.LongT5Model,LongT5PreTrainedModel:()=>n.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>n.M2M100ForConditionalGeneration,M2M100Model:()=>n.M2M100Model,M2M100PreTrainedModel:()=>n.M2M100PreTrainedModel,M2M100Tokenizer:()=>i.M2M100Tokenizer,MBart50Tokenizer:()=>i.MBart50Tokenizer,MBartForCausalLM:()=>n.MBartForCausalLM,MBartForConditionalGeneration:()=>n.MBartForConditionalGeneration,MBartForSequenceClassification:()=>n.MBartForSequenceClassification,MBartModel:()=>n.MBartModel,MBartPreTrainedModel:()=>n.MBartPreTrainedModel,MBartTokenizer:()=>i.MBartTokenizer,MPNetForMaskedLM:()=>n.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>n.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>n.MPNetForSequenceClassification,MPNetForTokenClassification:()=>n.MPNetForTokenClassification,MPNetModel:()=>n.MPNetModel,MPNetPreTrainedModel:()=>n.MPNetPreTrainedModel,MPNetTokenizer:()=>i.MPNetTokenizer,MT5ForConditionalGeneration:()=>n.MT5ForConditionalGeneration,MT5Model:()=>n.MT5Model,MT5PreTrainedModel:()=>n.MT5PreTrainedModel,MarianMTModel:()=>n.MarianMTModel,MarianModel:()=>n.MarianModel,MarianPreTrainedModel:()=>n.MarianPreTrainedModel,MarianTokenizer:()=>i.MarianTokenizer,Mask2FormerImageProcessor:()=>v.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>v.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>n.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>v.MaskFormerImageProcessor,MaskFormerModel:()=>n.MaskFormerModel,MaskFormerPreTrainedModel:()=>n.MaskFormerPreTrainedModel,MaskedLMOutput:()=>n.MaskedLMOutput,MaxLengthCriteria:()=>$.MaxLengthCriteria,Metric3DForDepthEstimation:()=>n.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>n.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>n.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>n.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>n.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>n.MgpstrModelOutput,MgpstrPreTrainedModel:()=>n.MgpstrPreTrainedModel,MgpstrProcessor:()=>T.MgpstrProcessor,MgpstrTokenizer:()=>i.MgpstrTokenizer,MimiDecoderModel:()=>n.MimiDecoderModel,MimiDecoderOutput:()=>n.MimiDecoderOutput,MimiEncoderModel:()=>n.MimiEncoderModel,MimiEncoderOutput:()=>n.MimiEncoderOutput,MimiModel:()=>n.MimiModel,MimiPreTrainedModel:()=>n.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>P.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>P.MinNewTokensLengthLogitsProcessor,Ministral3ForCausalLM:()=>n.Ministral3ForCausalLM,Ministral3Model:()=>n.Ministral3Model,Ministral3PreTrainedModel:()=>n.Ministral3PreTrainedModel,MinistralForCausalLM:()=>n.MinistralForCausalLM,MinistralModel:()=>n.MinistralModel,MinistralPreTrainedModel:()=>n.MinistralPreTrainedModel,Mistral3ForConditionalGeneration:()=>n.Mistral3ForConditionalGeneration,MistralForCausalLM:()=>n.MistralForCausalLM,MistralModel:()=>n.MistralModel,MistralPreTrainedModel:()=>n.MistralPreTrainedModel,MobileBertForMaskedLM:()=>n.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>n.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>n.MobileBertForSequenceClassification,MobileBertModel:()=>n.MobileBertModel,MobileBertPreTrainedModel:()=>n.MobileBertPreTrainedModel,MobileBertTokenizer:()=>i.MobileBertTokenizer,MobileLLMForCausalLM:()=>n.MobileLLMForCausalLM,MobileLLMModel:()=>n.MobileLLMModel,MobileLLMPreTrainedModel:()=>n.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>v.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>n.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>n.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>v.MobileNetV1ImageProcessor,MobileNetV1Model:()=>n.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>n.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>v.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>n.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>n.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>v.MobileNetV2ImageProcessor,MobileNetV2Model:()=>n.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>n.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>v.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>n.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>n.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>v.MobileNetV3ImageProcessor,MobileNetV3Model:()=>n.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>n.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>v.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>n.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>n.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>v.MobileNetV4ImageProcessor,MobileNetV4Model:()=>n.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>n.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>v.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>n.MobileViTForImageClassification,MobileViTImageProcessor:()=>v.MobileViTImageProcessor,MobileViTModel:()=>n.MobileViTModel,MobileViTPreTrainedModel:()=>n.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>n.MobileViTV2ForImageClassification,MobileViTV2Model:()=>n.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>n.MobileViTV2PreTrainedModel,ModelOutput:()=>n.ModelOutput,ModernBertDecoderForCausalLM:()=>n.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>n.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>n.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>n.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>n.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>n.ModernBertForTokenClassification,ModernBertModel:()=>n.ModernBertModel,ModernBertPreTrainedModel:()=>n.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>n.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>h.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>n.MoonshineForConditionalGeneration,MoonshineModel:()=>n.MoonshineModel,MoonshinePreTrainedModel:()=>n.MoonshinePreTrainedModel,MoonshineProcessor:()=>T.MoonshineProcessor,MptForCausalLM:()=>n.MptForCausalLM,MptModel:()=>n.MptModel,MptPreTrainedModel:()=>n.MptPreTrainedModel,MultiModalityCausalLM:()=>n.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>n.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>n.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>n.MusicgenForConditionalGeneration,MusicgenModel:()=>n.MusicgenModel,MusicgenPreTrainedModel:()=>n.MusicgenPreTrainedModel,NanoChatForCausalLM:()=>n.NanoChatForCausalLM,NanoChatModel:()=>n.NanoChatModel,NanoChatPreTrainedModel:()=>n.NanoChatPreTrainedModel,NeoBertForMaskedLM:()=>n.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>n.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>n.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>n.NeoBertForTokenClassification,NeoBertModel:()=>n.NeoBertModel,NeoBertPreTrainedModel:()=>n.NeoBertPreTrainedModel,NllbTokenizer:()=>i.NllbTokenizer,NoBadWordsLogitsProcessor:()=>P.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>P.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>n.NomicBertModel,NomicBertPreTrainedModel:()=>n.NomicBertPreTrainedModel,NougatImageProcessor:()=>v.NougatImageProcessor,NougatTokenizer:()=>i.NougatTokenizer,OPTForCausalLM:()=>n.OPTForCausalLM,OPTModel:()=>n.OPTModel,OPTPreTrainedModel:()=>n.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>n.Olmo2ForCausalLM,Olmo2Model:()=>n.Olmo2Model,Olmo2PreTrainedModel:()=>n.Olmo2PreTrainedModel,OlmoForCausalLM:()=>n.OlmoForCausalLM,OlmoModel:()=>n.OlmoModel,OlmoPreTrainedModel:()=>n.OlmoPreTrainedModel,OpenELMForCausalLM:()=>n.OpenELMForCausalLM,OpenELMModel:()=>n.OpenELMModel,OpenELMPreTrainedModel:()=>n.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>v.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>n.OwlViTForObjectDetection,OwlViTImageProcessor:()=>v.OwlViTImageProcessor,OwlViTModel:()=>n.OwlViTModel,OwlViTPreTrainedModel:()=>n.OwlViTPreTrainedModel,OwlViTProcessor:()=>T.OwlViTProcessor,Owlv2ForObjectDetection:()=>n.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>v.Owlv2ImageProcessor,Owlv2Model:()=>n.Owlv2Model,Owlv2PreTrainedModel:()=>n.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>n.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>n.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>T.PaliGemmaProcessor,ParakeetFeatureExtractor:()=>h.ParakeetFeatureExtractor,ParakeetForCTC:()=>n.ParakeetForCTC,ParakeetPreTrainedModel:()=>n.ParakeetPreTrainedModel,PatchTSMixerForPrediction:()=>n.PatchTSMixerForPrediction,PatchTSMixerModel:()=>n.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>n.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>n.PatchTSTForPrediction,PatchTSTModel:()=>n.PatchTSTModel,PatchTSTPreTrainedModel:()=>n.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>n.Phi3ForCausalLM,Phi3Model:()=>n.Phi3Model,Phi3PreTrainedModel:()=>n.Phi3PreTrainedModel,Phi3VForCausalLM:()=>n.Phi3VForCausalLM,Phi3VImageProcessor:()=>v.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>n.Phi3VPreTrainedModel,Phi3VProcessor:()=>T.Phi3VProcessor,PhiForCausalLM:()=>n.PhiForCausalLM,PhiModel:()=>n.PhiModel,PhiPreTrainedModel:()=>n.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PixtralImageProcessor:()=>v.PixtralImageProcessor,PixtralProcessor:()=>T.PixtralProcessor,PreTrainedModel:()=>n.PreTrainedModel,PreTrainedTokenizer:()=>i.PreTrainedTokenizer,PretrainedConfig:()=>r.PretrainedConfig,PretrainedMixin:()=>n.PretrainedMixin,Processor:()=>D.Processor,PvtForImageClassification:()=>n.PvtForImageClassification,PvtImageProcessor:()=>v.PvtImageProcessor,PvtModel:()=>n.PvtModel,PvtPreTrainedModel:()=>n.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>h.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>n.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>n.PyAnnoteModel,PyAnnotePreTrainedModel:()=>n.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>T.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>n.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>n.Qwen2ForCausalLM,Qwen2Model:()=>n.Qwen2Model,Qwen2PreTrainedModel:()=>n.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>i.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>n.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>v.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>n.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>T.Qwen2VLProcessor,Qwen3ForCausalLM:()=>n.Qwen3ForCausalLM,Qwen3Model:()=>n.Qwen3Model,Qwen3PreTrainedModel:()=>n.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>n.RFDetrForObjectDetection,RFDetrModel:()=>n.RFDetrModel,RFDetrObjectDetectionOutput:()=>n.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>n.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>n.RTDetrForObjectDetection,RTDetrImageProcessor:()=>v.RTDetrImageProcessor,RTDetrModel:()=>n.RTDetrModel,RTDetrObjectDetectionOutput:()=>n.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>n.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>n.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>n.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>n.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>n.RTDetrV2PreTrainedModel,RawAudio:()=>o.RawAudio,RawImage:()=>l.RawImage,RawVideo:()=>c.RawVideo,RawVideoFrame:()=>c.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>P.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>n.ResNetForImageClassification,ResNetModel:()=>n.ResNetModel,ResNetPreTrainedModel:()=>n.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>n.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>n.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>n.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>n.RoFormerForTokenClassification,RoFormerModel:()=>n.RoFormerModel,RoFormerPreTrainedModel:()=>n.RoFormerPreTrainedModel,RoFormerTokenizer:()=>i.RoFormerTokenizer,RobertaForMaskedLM:()=>n.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>n.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>n.RobertaForSequenceClassification,RobertaForTokenClassification:()=>n.RobertaForTokenClassification,RobertaModel:()=>n.RobertaModel,RobertaPreTrainedModel:()=>n.RobertaPreTrainedModel,RobertaTokenizer:()=>i.RobertaTokenizer,Sam2ImageProcessor:()=>v.Sam2ImageProcessor,Sam2ImageSegmentationOutput:()=>n.Sam2ImageSegmentationOutput,Sam2Model:()=>n.Sam2Model,Sam2PreTrainedModel:()=>n.Sam2PreTrainedModel,Sam2Processor:()=>T.Sam2Processor,Sam2VideoProcessor:()=>T.Sam2VideoProcessor,Sam3ImageProcessor:()=>v.Sam3ImageProcessor,Sam3TrackerModel:()=>n.Sam3TrackerModel,SamImageProcessor:()=>v.SamImageProcessor,SamImageSegmentationOutput:()=>n.SamImageSegmentationOutput,SamModel:()=>n.SamModel,SamPreTrainedModel:()=>n.SamPreTrainedModel,SamProcessor:()=>T.SamProcessor,SapiensForDepthEstimation:()=>n.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>n.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>n.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>n.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>h.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>v.SegformerFeatureExtractor,SegformerForImageClassification:()=>n.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>n.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>v.SegformerImageProcessor,SegformerModel:()=>n.SegformerModel,SegformerPreTrainedModel:()=>n.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>n.Seq2SeqLMOutput,SequenceClassifierOutput:()=>n.SequenceClassifierOutput,SiglipImageProcessor:()=>v.SiglipImageProcessor,SiglipModel:()=>n.SiglipModel,SiglipPreTrainedModel:()=>n.SiglipPreTrainedModel,SiglipTextModel:()=>n.SiglipTextModel,SiglipTokenizer:()=>i.SiglipTokenizer,SiglipVisionModel:()=>n.SiglipVisionModel,SmolLM3ForCausalLM:()=>n.SmolLM3ForCausalLM,SmolLM3Model:()=>n.SmolLM3Model,SmolLM3PreTrainedModel:()=>n.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>n.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>v.SmolVLMImageProcessor,SmolVLMProcessor:()=>T.SmolVLMProcessor,SnacDecoderModel:()=>n.SnacDecoderModel,SnacEncoderModel:()=>n.SnacEncoderModel,SnacFeatureExtractor:()=>h.SnacFeatureExtractor,SnacModel:()=>n.SnacModel,SnacPreTrainedModel:()=>n.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>h.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>n.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>n.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>n.SpeechT5HifiGan,SpeechT5Model:()=>n.SpeechT5Model,SpeechT5PreTrainedModel:()=>n.SpeechT5PreTrainedModel,SpeechT5Processor:()=>T.SpeechT5Processor,SpeechT5Tokenizer:()=>i.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>n.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>n.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>n.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>n.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>n.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>i.SqueezeBertTokenizer,StableLmForCausalLM:()=>n.StableLmForCausalLM,StableLmModel:()=>n.StableLmModel,StableLmPreTrainedModel:()=>n.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>n.Starcoder2ForCausalLM,Starcoder2Model:()=>n.Starcoder2Model,Starcoder2PreTrainedModel:()=>n.Starcoder2PreTrainedModel,StoppingCriteria:()=>$.StoppingCriteria,StoppingCriteriaList:()=>$.StoppingCriteriaList,StyleTextToSpeech2Model:()=>n.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>n.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SupertonicForConditionalGeneration:()=>n.SupertonicForConditionalGeneration,SupertonicPreTrainedModel:()=>n.SupertonicPreTrainedModel,SuppressTokensAtBeginLogitsProcessor:()=>P.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>n.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>v.Swin2SRImageProcessor,Swin2SRModel:()=>n.Swin2SRModel,Swin2SRPreTrainedModel:()=>n.Swin2SRPreTrainedModel,SwinForImageClassification:()=>n.SwinForImageClassification,SwinForSemanticSegmentation:()=>n.SwinForSemanticSegmentation,SwinModel:()=>n.SwinModel,SwinPreTrainedModel:()=>n.SwinPreTrainedModel,T5ForConditionalGeneration:()=>n.T5ForConditionalGeneration,T5Model:()=>n.T5Model,T5PreTrainedModel:()=>n.T5PreTrainedModel,T5Tokenizer:()=>i.T5Tokenizer,TableTransformerForObjectDetection:()=>n.TableTransformerForObjectDetection,TableTransformerModel:()=>n.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>n.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>n.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>P.TemperatureLogitsWarper,Tensor:()=>d.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>A.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>n.TokenClassifierOutput,TokenizerModel:()=>i.TokenizerModel,TopKLogitsWarper:()=>P.TopKLogitsWarper,TopPLogitsWarper:()=>P.TopPLogitsWarper,TrOCRForCausalLM:()=>n.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>n.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>n.UltravoxModel,UltravoxPreTrainedModel:()=>n.UltravoxPreTrainedModel,UltravoxProcessor:()=>T.UltravoxProcessor,UniSpeechForCTC:()=>n.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>n.UniSpeechForSequenceClassification,UniSpeechModel:()=>n.UniSpeechModel,UniSpeechPreTrainedModel:()=>n.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>n.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>n.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>n.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>n.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>n.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>T.VLChatProcessor,VLMImageProcessor:()=>v.VLMImageProcessor,VaultGemmaForCausalLM:()=>n.VaultGemmaForCausalLM,VaultGemmaModel:()=>n.VaultGemmaModel,VaultGemmaPreTrainedModel:()=>n.VaultGemmaPreTrainedModel,ViTFeatureExtractor:()=>v.ViTFeatureExtractor,ViTForImageClassification:()=>n.ViTForImageClassification,ViTImageProcessor:()=>v.ViTImageProcessor,ViTMAEModel:()=>n.ViTMAEModel,ViTMAEPreTrainedModel:()=>n.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>n.ViTMSNForImageClassification,ViTMSNModel:()=>n.ViTMSNModel,ViTMSNPreTrainedModel:()=>n.ViTMSNPreTrainedModel,ViTModel:()=>n.ViTModel,ViTPreTrainedModel:()=>n.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>n.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>n.VitMatteForImageMatting,VitMatteImageProcessor:()=>v.VitMatteImageProcessor,VitMattePreTrainedModel:()=>n.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>n.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>v.VitPoseImageProcessor,VitPosePreTrainedModel:()=>n.VitPosePreTrainedModel,VitsModel:()=>n.VitsModel,VitsModelOutput:()=>n.VitsModelOutput,VitsPreTrainedModel:()=>n.VitsPreTrainedModel,VitsTokenizer:()=>i.VitsTokenizer,VoxtralForConditionalGeneration:()=>n.VoxtralForConditionalGeneration,VoxtralProcessor:()=>T.VoxtralProcessor,Wav2Vec2BertForCTC:()=>n.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>n.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>n.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>n.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>i.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>h.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>n.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>n.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>n.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>n.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>n.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>T.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>T.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>n.WavLMForAudioFrameClassification,WavLMForCTC:()=>n.WavLMForCTC,WavLMForSequenceClassification:()=>n.WavLMForSequenceClassification,WavLMForXVector:()=>n.WavLMForXVector,WavLMModel:()=>n.WavLMModel,WavLMPreTrainedModel:()=>n.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>h.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>n.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>n.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>h.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>n.WhisperForConditionalGeneration,WhisperModel:()=>n.WhisperModel,WhisperPreTrainedModel:()=>n.WhisperPreTrainedModel,WhisperProcessor:()=>T.WhisperProcessor,WhisperTextStreamer:()=>A.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>P.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>i.WhisperTokenizer,XLMForQuestionAnswering:()=>n.XLMForQuestionAnswering,XLMForSequenceClassification:()=>n.XLMForSequenceClassification,XLMForTokenClassification:()=>n.XLMForTokenClassification,XLMModel:()=>n.XLMModel,XLMPreTrainedModel:()=>n.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>n.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>n.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>n.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>n.XLMRobertaForTokenClassification,XLMRobertaModel:()=>n.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>n.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>i.XLMRobertaTokenizer,XLMTokenizer:()=>i.XLMTokenizer,XLMWithLMHeadModel:()=>n.XLMWithLMHeadModel,XVectorOutput:()=>n.XVectorOutput,YolosFeatureExtractor:()=>v.YolosFeatureExtractor,YolosForObjectDetection:()=>n.YolosForObjectDetection,YolosImageProcessor:()=>v.YolosImageProcessor,YolosModel:()=>n.YolosModel,YolosObjectDetectionOutput:()=>n.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>n.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>f.bankers_round,cat:()=>d.cat,cos_sim:()=>f.cos_sim,dot:()=>f.dot,dynamic_time_warping:()=>f.dynamic_time_warping,env:()=>e.env,full:()=>d.full,full_like:()=>d.full_like,getCacheShapes:()=>r.getCacheShapes,hamming:()=>o.hamming,hanning:()=>o.hanning,interpolate:()=>d.interpolate,interpolate_4d:()=>d.interpolate_4d,interpolate_data:()=>f.interpolate_data,is_chinese_char:()=>i.is_chinese_char,layer_norm:()=>d.layer_norm,load_image:()=>l.load_image,load_video:()=>c.load_video,log_softmax:()=>f.log_softmax,magnitude:()=>f.magnitude,matmul:()=>d.matmul,max:()=>f.max,mean:()=>d.mean,mean_pooling:()=>d.mean_pooling,medianFilter:()=>f.medianFilter,mel_filter_bank:()=>o.mel_filter_bank,min:()=>f.min,ones:()=>d.ones,ones_like:()=>d.ones_like,permute:()=>d.permute,permute_data:()=>f.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>d.quantize_embeddings,rand:()=>d.rand,randn:()=>d.randn,read_audio:()=>o.read_audio,rfft:()=>d.rfft,round:()=>f.round,slice:()=>d.slice,softmax:()=>f.softmax,spectrogram:()=>o.spectrogram,stack:()=>d.stack,std_mean:()=>d.std_mean,topk:()=>d.topk,window_function:()=>o.window_function,zeros:()=>d.zeros,zeros_like:()=>d.zeros_like});var e=Fn("./src/env.js"),t=Fn("./src/pipelines.js"),n=Fn("./src/models.js"),i=Fn("./src/tokenizers.js"),r=Fn("./src/configs.js"),o=Fn("./src/utils/audio.js"),l=Fn("./src/utils/image.js"),c=Fn("./src/utils/video.js"),d=Fn("./src/utils/tensor.js"),f=Fn("./src/utils/maths.js"),p=Fn("./src/base/feature_extraction_utils.js"),h=Fn("./src/models/feature_extractors.js"),m=Fn("./src/models/auto/feature_extraction_auto.js"),_=Fn("./src/base/image_processors_utils.js"),v=Fn("./src/models/image_processors.js"),b=Fn("./src/models/auto/image_processing_auto.js"),D=Fn("./src/base/processing_utils.js"),T=Fn("./src/models/processors.js"),E=Fn("./src/models/auto/processing_auto.js"),A=Fn("./src/generation/streamers.js"),$=Fn("./src/generation/stopping_criteria.js"),P=Fn("./src/generation/logits_process.js")})();M.ASTFeatureExtractor;M.ASTForAudioClassification;M.ASTModel;M.ASTPreTrainedModel;M.AlbertForMaskedLM;M.AlbertForQuestionAnswering;M.AlbertForSequenceClassification;M.AlbertModel;M.AlbertPreTrainedModel;M.AlbertTokenizer;M.ArceeForCausalLM;M.ArceeModel;M.ArceePreTrainedModel;M.AudioClassificationPipeline;M.AutoConfig;M.AutoFeatureExtractor;M.AutoImageProcessor;M.AutoModel;M.AutoModelForAudioClassification;M.AutoModelForAudioFrameClassification;M.AutoModelForAudioTextToText;M.AutoModelForCTC;M.AutoModelForCausalLM;M.AutoModelForDepthEstimation;M.AutoModelForDocumentQuestionAnswering;M.AutoModelForImageClassification;M.AutoModelForImageFeatureExtraction;M.AutoModelForImageMatting;M.AutoModelForImageSegmentation;M.AutoModelForImageTextToText;M.AutoModelForImageToImage;M.AutoModelForMaskGeneration;M.AutoModelForMaskedLM;M.AutoModelForNormalEstimation;M.AutoModelForObjectDetection;M.AutoModelForPoseEstimation;M.AutoModelForQuestionAnswering;M.AutoModelForSemanticSegmentation;M.AutoModelForSeq2SeqLM;M.AutoModelForSequenceClassification;M.AutoModelForSpeechSeq2Seq;M.AutoModelForTextToSpectrogram;M.AutoModelForTextToWaveform;M.AutoModelForTokenClassification;M.AutoModelForUniversalSegmentation;M.AutoModelForVision2Seq;M.AutoModelForXVector;M.AutoModelForZeroShotObjectDetection;M.AutoProcessor;M.AutoTokenizer;M.AutomaticSpeechRecognitionPipeline;M.BackgroundRemovalPipeline;M.BartForConditionalGeneration;M.BartForSequenceClassification;M.BartModel;M.BartPretrainedModel;M.BartTokenizer;M.BaseModelOutput;M.BaseStreamer;M.BeitFeatureExtractor;M.BeitForImageClassification;M.BeitModel;M.BeitPreTrainedModel;M.BertForMaskedLM;M.BertForQuestionAnswering;M.BertForSequenceClassification;M.BertForTokenClassification;M.BertModel;M.BertPreTrainedModel;M.BertTokenizer;M.BitImageProcessor;M.BlenderbotForConditionalGeneration;M.BlenderbotModel;M.BlenderbotPreTrainedModel;M.BlenderbotSmallForConditionalGeneration;M.BlenderbotSmallModel;M.BlenderbotSmallPreTrainedModel;M.BlenderbotSmallTokenizer;M.BlenderbotTokenizer;M.BloomForCausalLM;M.BloomModel;M.BloomPreTrainedModel;M.BloomTokenizer;M.CLIPFeatureExtractor;M.CLIPImageProcessor;M.CLIPModel;M.CLIPPreTrainedModel;M.CLIPSegForImageSegmentation;M.CLIPSegModel;M.CLIPSegPreTrainedModel;M.CLIPTextModel;M.CLIPTextModelWithProjection;M.CLIPTokenizer;M.CLIPVisionModel;M.CLIPVisionModelWithProjection;M.CamembertForMaskedLM;M.CamembertForQuestionAnswering;M.CamembertForSequenceClassification;M.CamembertForTokenClassification;M.CamembertModel;M.CamembertPreTrainedModel;M.CamembertTokenizer;M.CausalLMOutput;M.CausalLMOutputWithPast;M.ChineseCLIPFeatureExtractor;M.ChineseCLIPModel;M.ChineseCLIPPreTrainedModel;M.ClapAudioModelWithProjection;M.ClapFeatureExtractor;M.ClapModel;M.ClapPreTrainedModel;M.ClapTextModelWithProjection;M.ClassifierFreeGuidanceLogitsProcessor;M.CodeGenForCausalLM;M.CodeGenModel;M.CodeGenPreTrainedModel;M.CodeGenTokenizer;M.CodeLlamaTokenizer;M.CohereForCausalLM;M.CohereModel;M.CoherePreTrainedModel;M.CohereTokenizer;M.ConvBertForMaskedLM;M.ConvBertForQuestionAnswering;M.ConvBertForSequenceClassification;M.ConvBertForTokenClassification;M.ConvBertModel;M.ConvBertPreTrainedModel;M.ConvBertTokenizer;M.ConvNextFeatureExtractor;M.ConvNextForImageClassification;M.ConvNextImageProcessor;M.ConvNextModel;M.ConvNextPreTrainedModel;M.ConvNextV2ForImageClassification;M.ConvNextV2Model;M.ConvNextV2PreTrainedModel;M.DFineForObjectDetection;M.DFineModel;M.DFinePreTrainedModel;M.DINOv3ConvNextModel;M.DINOv3ConvNextPreTrainedModel;M.DINOv3ViTImageProcessor;M.DINOv3ViTModel;M.DINOv3ViTPreTrainedModel;M.DPTFeatureExtractor;M.DPTForDepthEstimation;M.DPTImageProcessor;M.DPTModel;M.DPTPreTrainedModel;M.DacDecoderModel;M.DacDecoderOutput;M.DacEncoderModel;M.DacEncoderOutput;M.DacFeatureExtractor;M.DacModel;M.DacPreTrainedModel;M.DataTypeMap;M.DebertaForMaskedLM;M.DebertaForQuestionAnswering;M.DebertaForSequenceClassification;M.DebertaForTokenClassification;M.DebertaModel;M.DebertaPreTrainedModel;M.DebertaTokenizer;M.DebertaV2ForMaskedLM;M.DebertaV2ForQuestionAnswering;M.DebertaV2ForSequenceClassification;M.DebertaV2ForTokenClassification;M.DebertaV2Model;M.DebertaV2PreTrainedModel;M.DebertaV2Tokenizer;M.DecisionTransformerModel;M.DecisionTransformerPreTrainedModel;M.DeiTFeatureExtractor;M.DeiTForImageClassification;M.DeiTImageProcessor;M.DeiTModel;M.DeiTPreTrainedModel;M.DepthAnythingForDepthEstimation;M.DepthAnythingPreTrainedModel;M.DepthEstimationPipeline;M.DepthProForDepthEstimation;M.DepthProPreTrainedModel;M.DetrFeatureExtractor;M.DetrForObjectDetection;M.DetrForSegmentation;M.DetrImageProcessor;M.DetrModel;M.DetrObjectDetectionOutput;M.DetrPreTrainedModel;M.DetrSegmentationOutput;M.Dinov2ForImageClassification;M.Dinov2Model;M.Dinov2PreTrainedModel;M.Dinov2WithRegistersForImageClassification;M.Dinov2WithRegistersModel;M.Dinov2WithRegistersPreTrainedModel;M.DistilBertForMaskedLM;M.DistilBertForQuestionAnswering;M.DistilBertForSequenceClassification;M.DistilBertForTokenClassification;M.DistilBertModel;M.DistilBertPreTrainedModel;M.DistilBertTokenizer;M.DocumentQuestionAnsweringPipeline;M.DonutFeatureExtractor;M.DonutImageProcessor;M.DonutSwinModel;M.DonutSwinPreTrainedModel;M.EdgeTamModel;M.EfficientNetForImageClassification;M.EfficientNetImageProcessor;M.EfficientNetModel;M.EfficientNetPreTrainedModel;M.ElectraForMaskedLM;M.ElectraForQuestionAnswering;M.ElectraForSequenceClassification;M.ElectraForTokenClassification;M.ElectraModel;M.ElectraPreTrainedModel;M.ElectraTokenizer;M.EncodecFeatureExtractor;M.EosTokenCriteria;M.Ernie4_5ForCausalLM;M.Ernie4_5Model;M.Ernie4_5PreTrainedModel;M.EsmForMaskedLM;M.EsmForSequenceClassification;M.EsmForTokenClassification;M.EsmModel;M.EsmPreTrainedModel;M.EsmTokenizer;M.ExaoneForCausalLM;M.ExaoneModel;M.ExaonePreTrainedModel;M.FFT;M.FalconForCausalLM;M.FalconModel;M.FalconPreTrainedModel;M.FalconTokenizer;M.FastViTForImageClassification;M.FastViTModel;M.FastViTPreTrainedModel;M.FeatureExtractionPipeline;M.FeatureExtractor;M.FillMaskPipeline;M.Florence2ForConditionalGeneration;M.Florence2PreTrainedModel;M.Florence2Processor;M.ForcedBOSTokenLogitsProcessor;M.ForcedEOSTokenLogitsProcessor;M.GLPNFeatureExtractor;M.GLPNForDepthEstimation;M.GLPNModel;M.GLPNPreTrainedModel;M.GPT2LMHeadModel;M.GPT2Model;M.GPT2PreTrainedModel;M.GPT2Tokenizer;M.GPTBigCodeForCausalLM;M.GPTBigCodeModel;M.GPTBigCodePreTrainedModel;M.GPTJForCausalLM;M.GPTJModel;M.GPTJPreTrainedModel;M.GPTNeoForCausalLM;M.GPTNeoModel;M.GPTNeoPreTrainedModel;M.GPTNeoXForCausalLM;M.GPTNeoXModel;M.GPTNeoXPreTrainedModel;M.GPTNeoXTokenizer;M.Gemma2ForCausalLM;M.Gemma2Model;M.Gemma2PreTrainedModel;M.Gemma3ForCausalLM;M.Gemma3Model;M.Gemma3PreTrainedModel;M.Gemma3nAudioFeatureExtractor;M.Gemma3nForConditionalGeneration;M.Gemma3nPreTrainedModel;M.Gemma3nProcessor;M.GemmaForCausalLM;M.GemmaModel;M.GemmaPreTrainedModel;M.GemmaTokenizer;M.GlmForCausalLM;M.GlmModel;M.GlmPreTrainedModel;M.GraniteForCausalLM;M.GraniteModel;M.GraniteMoeHybridForCausalLM;M.GraniteMoeHybridModel;M.GraniteMoeHybridPreTrainedModel;M.GranitePreTrainedModel;M.Grok1Tokenizer;M.GroundingDinoForObjectDetection;M.GroundingDinoImageProcessor;M.GroundingDinoPreTrainedModel;M.GroundingDinoProcessor;M.GroupViTModel;M.GroupViTPreTrainedModel;M.HeliumForCausalLM;M.HeliumModel;M.HeliumPreTrainedModel;M.HerbertTokenizer;M.HieraForImageClassification;M.HieraModel;M.HieraPreTrainedModel;M.HubertForCTC;M.HubertForSequenceClassification;M.HubertModel;M.HubertPreTrainedModel;M.IJepaForImageClassification;M.IJepaModel;M.IJepaPreTrainedModel;M.Idefics3ForConditionalGeneration;M.Idefics3ImageProcessor;M.Idefics3PreTrainedModel;M.Idefics3Processor;M.ImageClassificationPipeline;M.ImageFeatureExtractionPipeline;M.ImageFeatureExtractor;M.ImageMattingOutput;M.ImageProcessor;M.ImageSegmentationPipeline;M.ImageToImagePipeline;M.ImageToTextPipeline;M.InterruptableStoppingCriteria;M.JAISLMHeadModel;M.JAISModel;M.JAISPreTrainedModel;M.JinaCLIPImageProcessor;M.JinaCLIPModel;M.JinaCLIPPreTrainedModel;M.JinaCLIPProcessor;M.JinaCLIPTextModel;M.JinaCLIPVisionModel;M.Lfm2ForCausalLM;M.Lfm2Model;M.Lfm2PreTrainedModel;M.LiteWhisperForConditionalGeneration;M.Llama4ForCausalLM;M.Llama4PreTrainedModel;M.LlamaForCausalLM;M.LlamaModel;M.LlamaPreTrainedModel;M.LlamaTokenizer;M.LlavaForConditionalGeneration;M.LlavaOnevisionForConditionalGeneration;M.LlavaOnevisionImageProcessor;M.LlavaPreTrainedModel;M.LlavaProcessor;M.LlavaQwen2ForCausalLM;M.LogitsProcessor;M.LogitsProcessorList;M.LogitsWarper;M.LongT5ForConditionalGeneration;M.LongT5Model;M.LongT5PreTrainedModel;M.M2M100ForConditionalGeneration;M.M2M100Model;M.M2M100PreTrainedModel;M.M2M100Tokenizer;M.MBart50Tokenizer;M.MBartForCausalLM;M.MBartForConditionalGeneration;M.MBartForSequenceClassification;M.MBartModel;M.MBartPreTrainedModel;M.MBartTokenizer;M.MPNetForMaskedLM;M.MPNetForQuestionAnswering;M.MPNetForSequenceClassification;M.MPNetForTokenClassification;M.MPNetModel;M.MPNetPreTrainedModel;M.MPNetTokenizer;M.MT5ForConditionalGeneration;M.MT5Model;M.MT5PreTrainedModel;M.MarianMTModel;M.MarianModel;M.MarianPreTrainedModel;M.MarianTokenizer;M.Mask2FormerImageProcessor;M.MaskFormerFeatureExtractor;M.MaskFormerForInstanceSegmentation;M.MaskFormerImageProcessor;M.MaskFormerModel;M.MaskFormerPreTrainedModel;M.MaskedLMOutput;M.MaxLengthCriteria;M.Metric3DForDepthEstimation;M.Metric3DPreTrainedModel;M.Metric3Dv2ForDepthEstimation;M.Metric3Dv2PreTrainedModel;M.MgpstrForSceneTextRecognition;M.MgpstrModelOutput;M.MgpstrPreTrainedModel;M.MgpstrProcessor;M.MgpstrTokenizer;M.MimiDecoderModel;M.MimiDecoderOutput;M.MimiEncoderModel;M.MimiEncoderOutput;M.MimiModel;M.MimiPreTrainedModel;M.MinLengthLogitsProcessor;M.MinNewTokensLengthLogitsProcessor;M.Ministral3ForCausalLM;M.Ministral3Model;M.Ministral3PreTrainedModel;M.MinistralForCausalLM;M.MinistralModel;M.MinistralPreTrainedModel;M.Mistral3ForConditionalGeneration;M.MistralForCausalLM;M.MistralModel;M.MistralPreTrainedModel;M.MobileBertForMaskedLM;M.MobileBertForQuestionAnswering;M.MobileBertForSequenceClassification;M.MobileBertModel;M.MobileBertPreTrainedModel;M.MobileBertTokenizer;M.MobileLLMForCausalLM;M.MobileLLMModel;M.MobileLLMPreTrainedModel;M.MobileNetV1FeatureExtractor;M.MobileNetV1ForImageClassification;M.MobileNetV1ForSemanticSegmentation;M.MobileNetV1ImageProcessor;M.MobileNetV1Model;M.MobileNetV1PreTrainedModel;M.MobileNetV2FeatureExtractor;M.MobileNetV2ForImageClassification;M.MobileNetV2ForSemanticSegmentation;M.MobileNetV2ImageProcessor;M.MobileNetV2Model;M.MobileNetV2PreTrainedModel;M.MobileNetV3FeatureExtractor;M.MobileNetV3ForImageClassification;M.MobileNetV3ForSemanticSegmentation;M.MobileNetV3ImageProcessor;M.MobileNetV3Model;M.MobileNetV3PreTrainedModel;M.MobileNetV4FeatureExtractor;M.MobileNetV4ForImageClassification;M.MobileNetV4ForSemanticSegmentation;M.MobileNetV4ImageProcessor;M.MobileNetV4Model;M.MobileNetV4PreTrainedModel;M.MobileViTFeatureExtractor;M.MobileViTForImageClassification;M.MobileViTImageProcessor;M.MobileViTModel;M.MobileViTPreTrainedModel;M.MobileViTV2ForImageClassification;M.MobileViTV2Model;M.MobileViTV2PreTrainedModel;M.ModelOutput;M.ModernBertDecoderForCausalLM;M.ModernBertDecoderModel;M.ModernBertDecoderPreTrainedModel;M.ModernBertForMaskedLM;M.ModernBertForSequenceClassification;M.ModernBertForTokenClassification;M.ModernBertModel;M.ModernBertPreTrainedModel;M.Moondream1ForConditionalGeneration;M.MoonshineFeatureExtractor;M.MoonshineForConditionalGeneration;M.MoonshineModel;M.MoonshinePreTrainedModel;M.MoonshineProcessor;M.MptForCausalLM;M.MptModel;M.MptPreTrainedModel;M.MultiModalityCausalLM;M.MultiModalityPreTrainedModel;M.MusicgenForCausalLM;M.MusicgenForConditionalGeneration;M.MusicgenModel;M.MusicgenPreTrainedModel;M.NanoChatForCausalLM;M.NanoChatModel;M.NanoChatPreTrainedModel;M.NeoBertForMaskedLM;M.NeoBertForQuestionAnswering;M.NeoBertForSequenceClassification;M.NeoBertForTokenClassification;M.NeoBertModel;M.NeoBertPreTrainedModel;M.NllbTokenizer;M.NoBadWordsLogitsProcessor;M.NoRepeatNGramLogitsProcessor;M.NomicBertModel;M.NomicBertPreTrainedModel;M.NougatImageProcessor;M.NougatTokenizer;M.OPTForCausalLM;M.OPTModel;M.OPTPreTrainedModel;M.ObjectDetectionPipeline;M.Olmo2ForCausalLM;M.Olmo2Model;M.Olmo2PreTrainedModel;M.OlmoForCausalLM;M.OlmoModel;M.OlmoPreTrainedModel;M.OpenELMForCausalLM;M.OpenELMModel;M.OpenELMPreTrainedModel;M.OwlViTFeatureExtractor;M.OwlViTForObjectDetection;M.OwlViTImageProcessor;M.OwlViTModel;M.OwlViTPreTrainedModel;M.OwlViTProcessor;M.Owlv2ForObjectDetection;M.Owlv2ImageProcessor;M.Owlv2Model;M.Owlv2PreTrainedModel;M.PaliGemmaForConditionalGeneration;M.PaliGemmaPreTrainedModel;M.PaliGemmaProcessor;M.ParakeetFeatureExtractor;M.ParakeetForCTC;M.ParakeetPreTrainedModel;M.PatchTSMixerForPrediction;M.PatchTSMixerModel;M.PatchTSMixerPreTrainedModel;M.PatchTSTForPrediction;M.PatchTSTModel;M.PatchTSTPreTrainedModel;M.Phi3ForCausalLM;M.Phi3Model;M.Phi3PreTrainedModel;M.Phi3VForCausalLM;M.Phi3VImageProcessor;M.Phi3VPreTrainedModel;M.Phi3VProcessor;M.PhiForCausalLM;M.PhiModel;M.PhiPreTrainedModel;M.Pipeline;M.PixtralImageProcessor;M.PixtralProcessor;M.PreTrainedModel;M.PreTrainedTokenizer;M.PretrainedConfig;M.PretrainedMixin;M.Processor;M.PvtForImageClassification;M.PvtImageProcessor;M.PvtModel;M.PvtPreTrainedModel;M.PyAnnoteFeatureExtractor;M.PyAnnoteForAudioFrameClassification;M.PyAnnoteModel;M.PyAnnotePreTrainedModel;M.PyAnnoteProcessor;M.QuestionAnsweringModelOutput;M.QuestionAnsweringPipeline;M.Qwen2ForCausalLM;M.Qwen2Model;M.Qwen2PreTrainedModel;M.Qwen2Tokenizer;M.Qwen2VLForConditionalGeneration;M.Qwen2VLImageProcessor;M.Qwen2VLPreTrainedModel;M.Qwen2VLProcessor;M.Qwen3ForCausalLM;M.Qwen3Model;M.Qwen3PreTrainedModel;M.RFDetrForObjectDetection;M.RFDetrModel;M.RFDetrObjectDetectionOutput;M.RFDetrPreTrainedModel;M.RTDetrForObjectDetection;M.RTDetrImageProcessor;M.RTDetrModel;M.RTDetrObjectDetectionOutput;M.RTDetrPreTrainedModel;M.RTDetrV2ForObjectDetection;M.RTDetrV2Model;M.RTDetrV2ObjectDetectionOutput;M.RTDetrV2PreTrainedModel;M.RawAudio;M.RawImage;M.RawVideo;M.RawVideoFrame;M.RepetitionPenaltyLogitsProcessor;M.ResNetForImageClassification;M.ResNetModel;M.ResNetPreTrainedModel;M.RoFormerForMaskedLM;M.RoFormerForQuestionAnswering;M.RoFormerForSequenceClassification;M.RoFormerForTokenClassification;M.RoFormerModel;M.RoFormerPreTrainedModel;M.RoFormerTokenizer;M.RobertaForMaskedLM;M.RobertaForQuestionAnswering;M.RobertaForSequenceClassification;M.RobertaForTokenClassification;M.RobertaModel;M.RobertaPreTrainedModel;M.RobertaTokenizer;M.Sam2ImageProcessor;M.Sam2ImageSegmentationOutput;M.Sam2Model;M.Sam2PreTrainedModel;M.Sam2Processor;M.Sam2VideoProcessor;M.Sam3ImageProcessor;M.Sam3TrackerModel;M.SamImageProcessor;M.SamImageSegmentationOutput;M.SamModel;M.SamPreTrainedModel;M.SamProcessor;M.SapiensForDepthEstimation;M.SapiensForNormalEstimation;M.SapiensForSemanticSegmentation;M.SapiensPreTrainedModel;M.SeamlessM4TFeatureExtractor;M.SegformerFeatureExtractor;M.SegformerForImageClassification;M.SegformerForSemanticSegmentation;M.SegformerImageProcessor;M.SegformerModel;M.SegformerPreTrainedModel;M.Seq2SeqLMOutput;M.SequenceClassifierOutput;M.SiglipImageProcessor;M.SiglipModel;M.SiglipPreTrainedModel;M.SiglipTextModel;M.SiglipTokenizer;M.SiglipVisionModel;M.SmolLM3ForCausalLM;M.SmolLM3Model;M.SmolLM3PreTrainedModel;M.SmolVLMForConditionalGeneration;M.SmolVLMImageProcessor;M.SmolVLMProcessor;M.SnacDecoderModel;M.SnacEncoderModel;M.SnacFeatureExtractor;M.SnacModel;M.SnacPreTrainedModel;M.SpeechT5FeatureExtractor;M.SpeechT5ForSpeechToText;M.SpeechT5ForTextToSpeech;M.SpeechT5HifiGan;M.SpeechT5Model;M.SpeechT5PreTrainedModel;M.SpeechT5Processor;M.SpeechT5Tokenizer;M.SqueezeBertForMaskedLM;M.SqueezeBertForQuestionAnswering;M.SqueezeBertForSequenceClassification;M.SqueezeBertModel;M.SqueezeBertPreTrainedModel;M.SqueezeBertTokenizer;M.StableLmForCausalLM;M.StableLmModel;M.StableLmPreTrainedModel;M.Starcoder2ForCausalLM;M.Starcoder2Model;M.Starcoder2PreTrainedModel;M.StoppingCriteria;M.StoppingCriteriaList;M.StyleTextToSpeech2Model;M.StyleTextToSpeech2PreTrainedModel;M.SummarizationPipeline;M.SupertonicForConditionalGeneration;M.SupertonicPreTrainedModel;M.SuppressTokensAtBeginLogitsProcessor;M.Swin2SRForImageSuperResolution;M.Swin2SRImageProcessor;M.Swin2SRModel;M.Swin2SRPreTrainedModel;M.SwinForImageClassification;M.SwinForSemanticSegmentation;M.SwinModel;M.SwinPreTrainedModel;M.T5ForConditionalGeneration;M.T5Model;M.T5PreTrainedModel;M.T5Tokenizer;M.TableTransformerForObjectDetection;M.TableTransformerModel;M.TableTransformerObjectDetectionOutput;M.TableTransformerPreTrainedModel;M.TemperatureLogitsWarper;M.Tensor;M.Text2TextGenerationPipeline;M.TextClassificationPipeline;M.TextGenerationPipeline;M.TextStreamer;M.TextToAudioPipeline;M.TokenClassificationPipeline;M.TokenClassifierOutput;M.TokenizerModel;M.TopKLogitsWarper;M.TopPLogitsWarper;M.TrOCRForCausalLM;M.TrOCRPreTrainedModel;M.TranslationPipeline;M.UltravoxModel;M.UltravoxPreTrainedModel;M.UltravoxProcessor;M.UniSpeechForCTC;M.UniSpeechForSequenceClassification;M.UniSpeechModel;M.UniSpeechPreTrainedModel;M.UniSpeechSatForAudioFrameClassification;M.UniSpeechSatForCTC;M.UniSpeechSatForSequenceClassification;M.UniSpeechSatModel;M.UniSpeechSatPreTrainedModel;M.VLChatProcessor;M.VLMImageProcessor;M.VaultGemmaForCausalLM;M.VaultGemmaModel;M.VaultGemmaPreTrainedModel;M.ViTFeatureExtractor;M.ViTForImageClassification;M.ViTImageProcessor;M.ViTMAEModel;M.ViTMAEPreTrainedModel;M.ViTMSNForImageClassification;M.ViTMSNModel;M.ViTMSNPreTrainedModel;M.ViTModel;M.ViTPreTrainedModel;M.VisionEncoderDecoderModel;M.VitMatteForImageMatting;M.VitMatteImageProcessor;M.VitMattePreTrainedModel;M.VitPoseForPoseEstimation;M.VitPoseImageProcessor;M.VitPosePreTrainedModel;M.VitsModel;M.VitsModelOutput;M.VitsPreTrainedModel;M.VitsTokenizer;M.VoxtralForConditionalGeneration;M.VoxtralProcessor;M.Wav2Vec2BertForCTC;M.Wav2Vec2BertForSequenceClassification;M.Wav2Vec2BertModel;M.Wav2Vec2BertPreTrainedModel;M.Wav2Vec2CTCTokenizer;M.Wav2Vec2FeatureExtractor;M.Wav2Vec2ForAudioFrameClassification;M.Wav2Vec2ForCTC;M.Wav2Vec2ForSequenceClassification;M.Wav2Vec2Model;M.Wav2Vec2PreTrainedModel;M.Wav2Vec2Processor;M.Wav2Vec2ProcessorWithLM;M.WavLMForAudioFrameClassification;M.WavLMForCTC;M.WavLMForSequenceClassification;M.WavLMForXVector;M.WavLMModel;M.WavLMPreTrainedModel;M.WeSpeakerFeatureExtractor;M.WeSpeakerResNetModel;M.WeSpeakerResNetPreTrainedModel;M.WhisperFeatureExtractor;M.WhisperForConditionalGeneration;M.WhisperModel;M.WhisperPreTrainedModel;M.WhisperProcessor;M.WhisperTextStreamer;M.WhisperTimeStampLogitsProcessor;M.WhisperTokenizer;M.XLMForQuestionAnswering;M.XLMForSequenceClassification;M.XLMForTokenClassification;M.XLMModel;M.XLMPreTrainedModel;M.XLMRobertaForMaskedLM;M.XLMRobertaForQuestionAnswering;M.XLMRobertaForSequenceClassification;M.XLMRobertaForTokenClassification;M.XLMRobertaModel;M.XLMRobertaPreTrainedModel;M.XLMRobertaTokenizer;M.XLMTokenizer;M.XLMWithLMHeadModel;M.XVectorOutput;M.YolosFeatureExtractor;M.YolosForObjectDetection;M.YolosImageProcessor;M.YolosModel;M.YolosObjectDetectionOutput;M.YolosPreTrainedModel;M.ZeroShotAudioClassificationPipeline;M.ZeroShotClassificationPipeline;M.ZeroShotImageClassificationPipeline;M.ZeroShotObjectDetectionPipeline;M.bankers_round;M.cat;M.cos_sim;M.dot;M.dynamic_time_warping;M.env;M.full;M.full_like;M.getCacheShapes;M.hamming;M.hanning;M.interpolate;M.interpolate_4d;M.interpolate_data;M.is_chinese_char;M.layer_norm;M.load_image;M.load_video;M.log_softmax;M.magnitude;M.matmul;M.max;M.mean;M.mean_pooling;M.medianFilter;M.mel_filter_bank;M.min;M.ones;M.ones_like;M.permute;M.permute_data;var CH=M.pipeline;M.quantize_embeddings;M.rand;M.randn;M.read_audio;M.rfft;M.round;M.slice;M.softmax;M.spectrogram;M.stack;M.std_mean;M.topk;M.window_function;M.zeros;M.zeros_like;let ry=null;const Rz=async e=>ry||(ry=await CH("feature-extraction","Xenova/multilingual-e5-small",{dtype:"int8",progress_callback:e}),ry),Fz=Object.freeze({status:"aborted"});function Pe(e,t,n){function i(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(e))return;c._zod.traits.add(e),t(c,d);const f=l.prototype,p=Object.keys(f);for(let h=0;h<p.length;h++){const m=p[h];m in c||(c[m]=f[m].bind(c))}}const r=n?.Parent??Object;class o extends r{}Object.defineProperty(o,"name",{value:e});function l(c){var d;const f=n?.Parent?new o:this;i(f,c),(d=f._zod).deferred??(d.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(l,"init",{value:i}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(e)}),Object.defineProperty(l,"name",{value:e}),l}const Nz=Symbol("zod_brand");class Ad extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class bb extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Hy={};function Wi(e){return e&&Object.assign(Hy,e),Hy}function kH(e){return e}function AH(e){return e}function IH(e){}function OH(e){throw new Error("Unexpected value in exhaustive check")}function DH(e){}function wb(e){const t=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,r])=>t.indexOf(+i)===-1).map(([i,r])=>r)}function gt(e,t="|"){return e.map(n=>nn(n)).join(t)}function Ky(e,t){return typeof t=="bigint"?t.toString():t}function w_(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Wd(e){return e==null}function xb(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function jz(e,t){const n=(e.toString().split(".")[1]||"").length,i=t.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const d=i.match(/\d?e-(\d?)/);d?.[1]&&(r=Number.parseInt(d[1]))}const o=n>r?n:r,l=Number.parseInt(e.toFixed(o).replace(".","")),c=Number.parseInt(t.toFixed(o).replace(".",""));return l%c/10**o}const TC=Symbol("evaluating");function bn(e,t,n){let i;Object.defineProperty(e,t,{get(){if(i!==TC)return i===void 0&&(i=TC,i=n()),i},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function zH(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function fu(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function qs(...e){const t={};for(const n of e){const i=Object.getOwnPropertyDescriptors(n);Object.assign(t,i)}return Object.defineProperties({},t)}function LH(e){return qs(e._zod.def)}function RH(e,t){return t?t.reduce((n,i)=>n?.[i],e):e}function FH(e){const t=Object.keys(e),n=t.map(i=>e[i]);return Promise.all(n).then(i=>{const r={};for(let o=0;o<t.length;o++)r[t[o]]=i[o];return r})}function NH(e=10){const t="abcdefghijklmnopqrstuvwxyz";let n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n}function Xx(e){return JSON.stringify(e)}function Bz(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const w1="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Hh(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Uz=w_(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Nd(e){if(Hh(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(Hh(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Mb(e){return Nd(e)?{...e}:Array.isArray(e)?[...e]:e}function jH(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}const BH=e=>{const t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},qy=new Set(["string","number","symbol"]),Vz=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Vl(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function To(e,t,n){const i=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(i._zod.parent=e),i}function at(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function UH(e){let t;return new Proxy({},{get(n,i,r){return t??(t=e()),Reflect.get(t,i,r)},set(n,i,r,o){return t??(t=e()),Reflect.set(t,i,r,o)},has(n,i){return t??(t=e()),Reflect.has(t,i)},deleteProperty(n,i){return t??(t=e()),Reflect.deleteProperty(t,i)},ownKeys(n){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(n,i){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,i)},defineProperty(n,i,r){return t??(t=e()),Reflect.defineProperty(t,i,r)}})}function nn(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function Gz(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Wz={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Hz={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Kz(e,t){const n=e._zod.def,i=n.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=qs(e._zod.def,{get shape(){const l={};for(const c in t){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&(l[c]=n.shape[c])}return fu(this,"shape",l),l},checks:[]});return To(e,o)}function qz(e,t){const n=e._zod.def,i=n.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=qs(e._zod.def,{get shape(){const l={...e._zod.def.shape};for(const c in t){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&delete l[c]}return fu(this,"shape",l),l},checks:[]});return To(e,o)}function Zz(e,t){if(!Nd(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const o=e._zod.def.shape;for(const l in t)if(Object.getOwnPropertyDescriptor(o,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=qs(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return fu(this,"shape",o),o}});return To(e,r)}function Qz(e,t){if(!Nd(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=qs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t};return fu(this,"shape",i),i}});return To(e,n)}function Xz(e,t){const n=qs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t._zod.def.shape};return fu(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return To(e,n)}function Yz(e,t,n){const r=t._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=qs(t._zod.def,{get shape(){const c=t._zod.def.shape,d={...c};if(n)for(const f in n){if(!(f in c))throw new Error(`Unrecognized key: "${f}"`);n[f]&&(d[f]=e?new e({type:"optional",innerType:c[f]}):c[f])}else for(const f in c)d[f]=e?new e({type:"optional",innerType:c[f]}):c[f];return fu(this,"shape",d),d},checks:[]});return To(t,l)}function Jz(e,t,n){const i=qs(t._zod.def,{get shape(){const r=t._zod.def.shape,o={...r};if(n)for(const l in n){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=new e({type:"nonoptional",innerType:r[l]}))}else for(const l in r)o[l]=new e({type:"nonoptional",innerType:r[l]});return fu(this,"shape",o),o}});return To(t,i)}function $d(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Yo(e,t){return t.map(n=>{var i;return(i=n).path??(i.path=[]),n.path.unshift(e),n})}function Hg(e){return typeof e=="string"?e:e?.message}function xo(e,t,n){const i={...e,path:e.path??[]};if(!e.message){const r=Hg(e.inst?._zod.def?.error?.(e))??Hg(t?.error?.(e))??Hg(n.customError?.(e))??Hg(n.localeError?.(e))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function Tb(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Sb(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function on(e){const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":{if(e===null)return"null";if(Array.isArray(e))return"array";const n=e;if(n&&Object.getPrototypeOf(n)!==Object.prototype&&"constructor"in n&&n.constructor)return n.constructor.name}}return t}function Kh(...e){const[t,n,i]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:i}:{...t}}function VH(e){return Object.entries(e).filter(([t,n])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}function e3(e){const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function t3(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function GH(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n="=".repeat((4-t.length%4)%4);return e3(t+n)}function WH(e){return t3(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function HH(e){const t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");const n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i/2]=Number.parseInt(t.slice(i,i+2),16);return n}function KH(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}class qH{constructor(...t){}}const n3=Object.freeze(Object.defineProperty({__proto__:null,BIGINT_FORMAT_RANGES:Hz,Class:qH,NUMBER_FORMAT_RANGES:Wz,aborted:$d,allowsEval:Uz,assert:DH,assertEqual:kH,assertIs:IH,assertNever:OH,assertNotEqual:AH,assignProp:fu,base64ToUint8Array:e3,base64urlToUint8Array:GH,cached:w_,captureStackTrace:w1,cleanEnum:VH,cleanRegex:xb,clone:To,cloneDef:LH,createTransparentProxy:UH,defineLazy:bn,esc:Xx,escapeRegex:Vl,extend:Zz,finalizeIssue:xo,floatSafeRemainder:jz,getElementAtPath:RH,getEnumValues:wb,getLengthableOrigin:Sb,getParsedType:BH,getSizableOrigin:Tb,hexToUint8Array:HH,isObject:Hh,isPlainObject:Nd,issue:Kh,joinValues:gt,jsonStringifyReplacer:Ky,merge:Xz,mergeDefs:qs,normalizeParams:at,nullish:Wd,numKeys:jH,objectClone:zH,omit:qz,optionalKeys:Gz,parsedType:on,partial:Yz,pick:Kz,prefixIssues:Yo,primitiveTypes:Vz,promiseAllObject:FH,propertyKeyTypes:qy,randomString:NH,required:Jz,safeExtend:Qz,shallowClone:Mb,slugify:Bz,stringifyPrimitive:nn,uint8ArrayToBase64:t3,uint8ArrayToBase64url:WH,uint8ArrayToHex:KH,unwrapMessage:Hg},Symbol.toStringTag,{value:"Module"})),r3=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Ky,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},x1=Pe("$ZodError",r3),Ha=Pe("$ZodError",r3,{Parent:Error});function M1(e,t=n=>n.message){const n={},i=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):i.push(t(r));return{formErrors:i,fieldErrors:n}}function T1(e,t=n=>n.message){const n={_errors:[]},i=r=>{for(const o of r.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>i({issues:l}));else if(o.code==="invalid_key")i({issues:o.issues});else if(o.code==="invalid_element")i({issues:o.issues});else if(o.path.length===0)n._errors.push(t(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(e),n}function i3(e,t=n=>n.message){const n={errors:[]},i=(r,o=[])=>{var l,c;for(const d of r.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>i({issues:f},d.path));else if(d.code==="invalid_key")i({issues:d.issues},d.path);else if(d.code==="invalid_element")i({issues:d.issues},d.path);else{const f=[...o,...d.path];if(f.length===0){n.errors.push(t(d));continue}let p=n,h=0;for(;h<f.length;){const m=f[h],_=h===f.length-1;typeof m=="string"?(p.properties??(p.properties={}),(l=p.properties)[m]??(l[m]={errors:[]}),p=p.properties[m]):(p.items??(p.items=[]),(c=p.items)[m]??(c[m]={errors:[]}),p=p.items[m]),_&&p.errors.push(t(d)),h++}}};return i(e),n}function a3(e){const t=[],n=e.map(i=>typeof i=="object"?i.key:i);for(const i of n)typeof i=="number"?t.push(`[${i}]`):typeof i=="symbol"?t.push(`[${JSON.stringify(String(i))}]`):/[^\w$]/.test(i)?t.push(`[${JSON.stringify(i)}]`):(t.length&&t.push("."),t.push(i));return t.join("")}function o3(e){const t=[],n=[...e.issues].sort((i,r)=>(i.path??[]).length-(r.path??[]).length);for(const i of n)t.push(` ${i.message}`),i.path?.length&&t.push(`   at ${a3(i.path)}`);return t.join(`
`)}const x_=e=>(t,n,i,r)=>{const o=i?Object.assign(i,{async:!1}):{async:!1},l=t._zod.run({value:n,issues:[]},o);if(l instanceof Promise)throw new Ad;if(l.issues.length){const c=new(r?.Err??e)(l.issues.map(d=>xo(d,o,Wi())));throw w1(c,r?.callee),c}return l.value},Yx=x_(Ha),M_=e=>async(t,n,i,r)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let l=t._zod.run({value:n,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(r?.Err??e)(l.issues.map(d=>xo(d,o,Wi())));throw w1(c,r?.callee),c}return l.value},Jx=M_(Ha),T_=e=>(t,n,i)=>{const r=i?{...i,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},r);if(o instanceof Promise)throw new Ad;return o.issues.length?{success:!1,error:new(e??x1)(o.issues.map(l=>xo(l,r,Wi())))}:{success:!0,data:o.value}},s3=T_(Ha),S_=e=>async(t,n,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},r);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(l=>xo(l,r,Wi())))}:{success:!0,data:o.value}},l3=S_(Ha),S1=e=>(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return x_(e)(t,n,r)},ZH=S1(Ha),E1=e=>(t,n,i)=>x_(e)(t,n,i),QH=E1(Ha),$1=e=>async(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return M_(e)(t,n,r)},XH=$1(Ha),P1=e=>async(t,n,i)=>M_(e)(t,n,i),YH=P1(Ha),C1=e=>(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return T_(e)(t,n,r)},JH=C1(Ha),k1=e=>(t,n,i)=>T_(e)(t,n,i),e9=k1(Ha),A1=e=>async(t,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return S_(e)(t,n,r)},t9=A1(Ha),I1=e=>async(t,n,i)=>S_(e)(t,n,i),n9=I1(Ha),c3=/^[cC][^\s-]{8,}$/,u3=/^[0-9a-z]+$/,d3=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,f3=/^[0-9a-vA-V]{20}$/,h3=/^[A-Za-z0-9]{27}$/,m3=/^[a-zA-Z0-9_-]{21}$/,p3=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,r9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,g3=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,qh=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,i9=qh(4),a9=qh(6),o9=qh(7),_3=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,s9=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,l9=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,v3=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,c9=v3,u9=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,d9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function y3(){return new RegExp(d9,"u")}const b3=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,w3=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,x3=e=>{const t=Vl(e??":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},M3=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,T3=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,S3=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,O1=/^[A-Za-z0-9_-]*$/,E3=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,$3=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,P3=/^\+[1-9]\d{6,14}$/,C3="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",k3=new RegExp(`^${C3}$`);function A3(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function I3(e){return new RegExp(`^${A3(e)}$`)}function O3(e){const t=A3({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${n.join("|")})`;return new RegExp(`^${C3}T(?:${i})$`)}const D3=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},z3=/^-?\d+n?$/,L3=/^-?\d+$/,D1=/^-?\d+(?:\.\d+)?$/,R3=/^(?:true|false)$/i,F3=/^null$/i,N3=/^undefined$/i,j3=/^[^A-Z]*$/,B3=/^[^a-z]*$/,U3=/^[0-9a-fA-F]*$/;function E_(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function $_(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}const f9=/^[0-9a-fA-F]{32}$/,h9=E_(22,"=="),m9=$_(22),p9=/^[0-9a-fA-F]{40}$/,g9=E_(27,"="),_9=$_(27),v9=/^[0-9a-fA-F]{64}$/,y9=E_(43,"="),b9=$_(43),w9=/^[0-9a-fA-F]{96}$/,x9=E_(64,""),M9=$_(64),T9=/^[0-9a-fA-F]{128}$/,S9=E_(86,"=="),E9=$_(86),z1=Object.freeze(Object.defineProperty({__proto__:null,base64:S3,base64url:O1,bigint:z3,boolean:R3,browserEmail:u9,cidrv4:M3,cidrv6:T3,cuid:c3,cuid2:u3,date:k3,datetime:O3,domain:$3,duration:p3,e164:P3,email:_3,emoji:y3,extendedDuration:r9,guid:g3,hex:U3,hostname:E3,html5Email:s9,idnEmail:c9,integer:L3,ipv4:b3,ipv6:w3,ksuid:h3,lowercase:j3,mac:x3,md5_base64:h9,md5_base64url:m9,md5_hex:f9,nanoid:m3,null:F3,number:D1,rfc5322Email:l9,sha1_base64:g9,sha1_base64url:_9,sha1_hex:p9,sha256_base64:y9,sha256_base64url:b9,sha256_hex:v9,sha384_base64:x9,sha384_base64url:M9,sha384_hex:w9,sha512_base64:S9,sha512_base64url:E9,sha512_hex:T9,string:D3,time:I3,ulid:d3,undefined:N3,unicodeEmail:v3,uppercase:B3,uuid:qh,uuid4:i9,uuid6:a9,uuid7:o9,xid:f3},Symbol.toStringTag,{value:"Module"})),Fr=Pe("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),V3={number:"number",bigint:"bigint",object:"date"},L1=Pe("$ZodCheckLessThan",(e,t)=>{Fr.init(e,t);const n=V3[typeof t.value];e._zod.onattach.push(i=>{const r=i._zod.bag,o=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value<=t.value:i.value<t.value)||i.issues.push({origin:n,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),R1=Pe("$ZodCheckGreaterThan",(e,t)=>{Fr.init(e,t);const n=V3[typeof t.value];e._zod.onattach.push(i=>{const r=i._zod.bag,o=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value>=t.value:i.value>t.value)||i.issues.push({origin:n,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),G3=Pe("$ZodCheckMultipleOf",(e,t)=>{Fr.init(e,t),e._zod.onattach.push(n=>{var i;(i=n._zod.bag).multipleOf??(i.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):jz(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),W3=Pe("$ZodCheckNumberFormat",(e,t)=>{Fr.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),i=n?"int":"number",[r,o]=Wz[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=r,c.maximum=o,n&&(c.pattern=L3)}),e._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:i,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!t.abort});return}}c<r&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),c>o&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),H3=Pe("$ZodCheckBigIntFormat",(e,t)=>{Fr.init(e,t);const[n,i]=Hz[t.format];e._zod.onattach.push(r=>{const o=r._zod.bag;o.format=t.format,o.minimum=n,o.maximum=i}),e._zod.check=r=>{const o=r.value;o<n&&r.issues.push({origin:"bigint",input:o,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),o>i&&r.issues.push({origin:"bigint",input:o,code:"too_big",maximum:i,inclusive:!0,inst:e,continue:!t.abort})}}),K3=Pe("$ZodCheckMaxSize",(e,t)=>{var n;Fr.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!Wd(r)&&r.size!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{const r=i.value;r.size<=t.maximum||i.issues.push({origin:Tb(r),code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),q3=Pe("$ZodCheckMinSize",(e,t)=>{var n;Fr.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!Wd(r)&&r.size!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{const r=i.value;r.size>=t.minimum||i.issues.push({origin:Tb(r),code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Z3=Pe("$ZodCheckSizeEquals",(e,t)=>{var n;Fr.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!Wd(r)&&r.size!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=i=>{const r=i.value,o=r.size;if(o===t.size)return;const l=o>t.size;i.issues.push({origin:Tb(r),...l?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),Q3=Pe("$ZodCheckMaxLength",(e,t)=>{var n;Fr.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!Wd(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{const r=i.value;if(r.length<=t.maximum)return;const l=Sb(r);i.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),X3=Pe("$ZodCheckMinLength",(e,t)=>{var n;Fr.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!Wd(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{const r=i.value;if(r.length>=t.minimum)return;const l=Sb(r);i.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Y3=Pe("$ZodCheckLengthEquals",(e,t)=>{var n;Fr.init(e,t),(n=e._zod.def).when??(n.when=i=>{const r=i.value;return!Wd(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=i=>{const r=i.value,o=r.length;if(o===t.length)return;const l=Sb(r),c=o>t.length;i.issues.push({origin:l,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),P_=Pe("$ZodCheckStringFormat",(e,t)=>{var n,i;Fr.init(e,t),e._zod.onattach.push(r=>{const o=r._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),J3=Pe("$ZodCheckRegex",(e,t)=>{P_.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),eL=Pe("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=j3),P_.init(e,t)}),tL=Pe("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=B3),P_.init(e,t)}),nL=Pe("$ZodCheckIncludes",(e,t)=>{Fr.init(e,t);const n=Vl(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=i,e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),rL=Pe("$ZodCheckStartsWith",(e,t)=>{Fr.init(e,t);const n=new RegExp(`^${Vl(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),iL=Pe("$ZodCheckEndsWith",(e,t)=>{Fr.init(e,t);const n=new RegExp(`.*${Vl(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}});function SC(e,t,n){e.issues.length&&t.issues.push(...Yo(n,e.issues))}const aL=Pe("$ZodCheckProperty",(e,t)=>{Fr.init(e,t),e._zod.check=n=>{const i=t.schema._zod.run({value:n.value[t.property],issues:[]},{});if(i instanceof Promise)return i.then(r=>SC(r,n,t.property));SC(i,n,t.property)}}),oL=Pe("$ZodCheckMimeType",(e,t)=>{Fr.init(e,t);const n=new Set(t.mime);e._zod.onattach.push(i=>{i._zod.bag.mime=t.mime}),e._zod.check=i=>{n.has(i.value.type)||i.issues.push({code:"invalid_value",values:t.mime,input:i.value.type,inst:e,continue:!t.abort})}}),sL=Pe("$ZodCheckOverwrite",(e,t)=>{Fr.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class lL{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const i=t.split(`
`).filter(l=>l),r=Math.min(...i.map(l=>l.length-l.trimStart().length)),o=i.map(l=>l.slice(r)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const t=Function,n=this?.args,r=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...n,r.join(`
`))}}const cL={major:4,minor:3,patch:3},hn=Pe("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=cL;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const r of i)for(const o of r._zod.onattach)o(e);if(i.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(l,c,d)=>{let f=$d(l),p;for(const h of c){if(h._zod.def.when){if(!h._zod.def.when(l))continue}else if(f)continue;const m=l.issues.length,_=h._zod.check(l);if(_ instanceof Promise&&d?.async===!1)throw new Ad;if(p||_ instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await _,l.issues.length!==m&&(f||(f=$d(l,m)))});else{if(l.issues.length===m)continue;f||(f=$d(l,m))}}return p?p.then(()=>l):l},o=(l,c,d)=>{if($d(l))return l.aborted=!0,l;const f=r(c,i,d);if(f instanceof Promise){if(d.async===!1)throw new Ad;return f.then(p=>e._zod.parse(p,d))}return e._zod.parse(f,d)};e._zod.run=(l,c)=>{if(c.skipChecks)return e._zod.parse(l,c);if(c.direction==="backward"){const f=e._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return f instanceof Promise?f.then(p=>o(p,l,c)):o(f,l,c)}const d=e._zod.parse(l,c);if(d instanceof Promise){if(c.async===!1)throw new Ad;return d.then(f=>r(f,i,c))}return r(d,i,c)}}bn(e,"~standard",()=>({validate:r=>{try{const o=s3(e,r);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return l3(e,r).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),C_=Pe("$ZodString",(e,t)=>{hn.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??D3(e._zod.bag),e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),wr=Pe("$ZodStringFormat",(e,t)=>{P_.init(e,t),C_.init(e,t)}),uL=Pe("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=g3),wr.init(e,t)}),dL=Pe("$ZodUUID",(e,t)=>{if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=qh(i))}else t.pattern??(t.pattern=qh());wr.init(e,t)}),fL=Pe("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=_3),wr.init(e,t)}),hL=Pe("$ZodURL",(e,t)=>{wr.init(e,t),e._zod.check=n=>{try{const i=n.value.trim(),r=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=r.href:n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),mL=Pe("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=y3()),wr.init(e,t)}),pL=Pe("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=m3),wr.init(e,t)}),gL=Pe("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=c3),wr.init(e,t)}),_L=Pe("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=u3),wr.init(e,t)}),vL=Pe("$ZodULID",(e,t)=>{t.pattern??(t.pattern=d3),wr.init(e,t)}),yL=Pe("$ZodXID",(e,t)=>{t.pattern??(t.pattern=f3),wr.init(e,t)}),bL=Pe("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=h3),wr.init(e,t)}),wL=Pe("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=O3(t)),wr.init(e,t)}),xL=Pe("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=k3),wr.init(e,t)}),ML=Pe("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=I3(t)),wr.init(e,t)}),TL=Pe("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=p3),wr.init(e,t)}),SL=Pe("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=b3),wr.init(e,t),e._zod.bag.format="ipv4"}),EL=Pe("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=w3),wr.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),$L=Pe("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=x3(t.delimiter)),wr.init(e,t),e._zod.bag.format="mac"}),PL=Pe("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=M3),wr.init(e,t)}),CL=Pe("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=T3),wr.init(e,t),e._zod.check=n=>{const i=n.value.split("/");try{if(i.length!==2)throw new Error;const[r,o]=i;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function F1(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const kL=Pe("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=S3),wr.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{F1(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function AL(e){if(!O1.test(e))return!1;const t=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return F1(n)}const IL=Pe("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=O1),wr.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{AL(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),OL=Pe("$ZodE164",(e,t)=>{t.pattern??(t.pattern=P3),wr.init(e,t)});function DL(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[i]=n;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const zL=Pe("$ZodJWT",(e,t)=>{wr.init(e,t),e._zod.check=n=>{DL(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),LL=Pe("$ZodCustomStringFormat",(e,t)=>{wr.init(e,t),e._zod.check=n=>{t.fn(n.value)||n.issues.push({code:"invalid_format",format:t.format,input:n.value,inst:e,continue:!t.abort})}}),N1=Pe("$ZodNumber",(e,t)=>{hn.init(e,t),e._zod.pattern=e._zod.bag.pattern??D1,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const o=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...o?{received:o}:{}}),n}}),RL=Pe("$ZodNumberFormat",(e,t)=>{W3.init(e,t),N1.init(e,t)}),j1=Pe("$ZodBoolean",(e,t)=>{hn.init(e,t),e._zod.pattern=R3,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),B1=Pe("$ZodBigInt",(e,t)=>{hn.init(e,t),e._zod.pattern=z3,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:e}),n}}),FL=Pe("$ZodBigIntFormat",(e,t)=>{H3.init(e,t),B1.init(e,t)}),NL=Pe("$ZodSymbol",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;return typeof r=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:r,inst:e}),n}}),jL=Pe("$ZodUndefined",(e,t)=>{hn.init(e,t),e._zod.pattern=N3,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(n,i)=>{const r=n.value;return typeof r>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:r,inst:e}),n}}),BL=Pe("$ZodNull",(e,t)=>{hn.init(e,t),e._zod.pattern=F3,e._zod.values=new Set([null]),e._zod.parse=(n,i)=>{const r=n.value;return r===null||n.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),n}}),UL=Pe("$ZodAny",(e,t)=>{hn.init(e,t),e._zod.parse=n=>n}),VL=Pe("$ZodUnknown",(e,t)=>{hn.init(e,t),e._zod.parse=n=>n}),GL=Pe("$ZodNever",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)}),WL=Pe("$ZodVoid",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;return typeof r>"u"||n.issues.push({expected:"void",code:"invalid_type",input:r,inst:e}),n}}),HL=Pe("$ZodDate",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=new Date(n.value)}catch{}const r=n.value,o=r instanceof Date;return o&&!Number.isNaN(r.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:r,...o?{received:"Invalid Date"}:{},inst:e}),n}});function EC(e,t,n){e.issues.length&&t.issues.push(...Yo(n,e.issues)),t.value[n]=e.value}const KL=Pe("$ZodArray",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const o=[];for(let l=0;l<r.length;l++){const c=r[l],d=t.element._zod.run({value:c,issues:[]},i);d instanceof Promise?o.push(d.then(f=>EC(f,n,l))):EC(d,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function Zy(e,t,n,i,r){if(e.issues.length){if(r&&!(n in i))return;t.issues.push(...Yo(n,e.issues))}e.value===void 0?n in i&&(t.value[n]=void 0):t.value[n]=e.value}function qL(e){const t=Object.keys(e.shape);for(const i of t)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const n=Gz(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function ZL(e,t,n,i,r,o){const l=[],c=r.keySet,d=r.catchall._zod,f=d.def.type,p=d.optout==="optional";for(const h in t){if(c.has(h))continue;if(f==="never"){l.push(h);continue}const m=d.run({value:t[h],issues:[]},i);m instanceof Promise?e.push(m.then(_=>Zy(_,n,h,t,p))):Zy(m,n,h,t,p)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:t,inst:o}),e.length?Promise.all(e).then(()=>n):n}const QL=Pe("$ZodObject",(e,t)=>{if(hn.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const c=t.shape;Object.defineProperty(t,"shape",{get:()=>{const d={...c};return Object.defineProperty(t,"shape",{value:d}),d}})}const i=w_(()=>qL(t));bn(e._zod,"propValues",()=>{const c=t.shape,d={};for(const f in c){const p=c[f]._zod;if(p.values){d[f]??(d[f]=new Set);for(const h of p.values)d[f].add(h)}}return d});const r=Hh,o=t.catchall;let l;e._zod.parse=(c,d)=>{l??(l=i.value);const f=c.value;if(!r(f))return c.issues.push({expected:"object",code:"invalid_type",input:f,inst:e}),c;c.value={};const p=[],h=l.shape;for(const m of l.keys){const _=h[m],v=_._zod.optout==="optional",b=_._zod.run({value:f[m],issues:[]},d);b instanceof Promise?p.push(b.then(D=>Zy(D,c,m,f,v))):Zy(b,c,m,f,v)}return o?ZL(p,f,c,d,i.value,e):p.length?Promise.all(p).then(()=>c):c}}),XL=Pe("$ZodObjectJIT",(e,t)=>{QL.init(e,t);const n=e._zod.parse,i=w_(()=>qL(t)),r=m=>{const _=new lL(["shape","payload","ctx"]),v=i.value,b=A=>{const $=Xx(A);return`shape[${$}]._zod.run({ value: input[${$}], issues: [] }, ctx)`};_.write("const input = payload.value;");const D=Object.create(null);let T=0;for(const A of v.keys)D[A]=`key_${T++}`;_.write("const newResult = {};");for(const A of v.keys){const $=D[A],P=Xx(A),S=m[A]?._zod?.optout==="optional";_.write(`const ${$} = ${b(A)};`),S?_.write(`
        if (${$}.issues.length) {
          if (${P} in input) {
            payload.issues = payload.issues.concat(${$}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${P}, ...iss.path] : [${P}]
            })));
          }
        }
        
        if (${$}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${$}.value;
        }
        
      `):_.write(`
        if (${$}.issues.length) {
          payload.issues = payload.issues.concat(${$}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        if (${$}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${$}.value;
        }
        
      `)}_.write("payload.value = newResult;"),_.write("return payload;");const E=_.compile();return(A,$)=>E(m,A,$)};let o;const l=Hh,c=!Hy.jitless,f=c&&Uz.value,p=t.catchall;let h;e._zod.parse=(m,_)=>{h??(h=i.value);const v=m.value;return l(v)?c&&f&&_?.async===!1&&_.jitless!==!0?(o||(o=r(t.shape)),m=o(m,_),p?ZL([],v,m,_,h,e):m):n(m,_):(m.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),m)}});function $C(e,t,n,i){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const r=e.filter(o=>!$d(o));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(l=>xo(l,i,Wi())))}),t)}const Eb=Pe("$ZodUnion",(e,t)=>{hn.init(e,t),bn(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),bn(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),bn(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),bn(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${r.map(o=>xb(o.source)).join("|")})$`)}});const n=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(r,o)=>{if(n)return i(r,o);let l=!1;const c=[];for(const d of t.options){const f=d._zod.run({value:r.value,issues:[]},o);if(f instanceof Promise)c.push(f),l=!0;else{if(f.issues.length===0)return f;c.push(f)}}return l?Promise.all(c).then(d=>$C(d,r,e,o)):$C(c,r,e,o)}});function PC(e,t,n,i){const r=e.filter(o=>o.issues.length===0);return r.length===1?(t.value=r[0].value,t):(r.length===0?t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(l=>xo(l,i,Wi())))}):t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:[],inclusive:!1}),t)}const YL=Pe("$ZodXor",(e,t)=>{Eb.init(e,t),t.inclusive=!1;const n=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(r,o)=>{if(n)return i(r,o);let l=!1;const c=[];for(const d of t.options){const f=d._zod.run({value:r.value,issues:[]},o);f instanceof Promise?(c.push(f),l=!0):c.push(f)}return l?Promise.all(c).then(d=>PC(d,r,e,o)):PC(c,r,e,o)}}),JL=Pe("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,Eb.init(e,t);const n=e._zod.parse;bn(e._zod,"propValues",()=>{const r={};for(const o of t.options){const l=o._zod.propValues;if(!l||Object.keys(l).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const[c,d]of Object.entries(l)){r[c]||(r[c]=new Set);for(const f of d)r[c].add(f)}}return r});const i=w_(()=>{const r=t.options,o=new Map;for(const l of r){const c=l._zod.propValues?.[t.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(l)}"`);for(const d of c){if(o.has(d))throw new Error(`Duplicate discriminator value "${String(d)}"`);o.set(d,l)}}return o});e._zod.parse=(r,o)=>{const l=r.value;if(!Hh(l))return r.issues.push({code:"invalid_type",expected:"object",input:l,inst:e}),r;const c=i.value.get(l?.[t.discriminator]);return c?c._zod.run(r,o):t.unionFallback?n(r,o):(r.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:l,path:[t.discriminator],inst:e}),r)}}),eR=Pe("$ZodIntersection",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value,o=t.left._zod.run({value:r,issues:[]},i),l=t.right._zod.run({value:r,issues:[]},i);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([d,f])=>CC(n,d,f)):CC(n,o,l)}});function eM(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Nd(e)&&Nd(t)){const n=Object.keys(t),i=Object.keys(e).filter(o=>n.indexOf(o)!==-1),r={...e,...t};for(const o of i){const l=eM(e[o],t[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};r[o]=l.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let i=0;i<e.length;i++){const r=e[i],o=t[i],l=eM(r,o);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function CC(e,t,n){const i=new Map;let r;for(const c of t.issues)if(c.code==="unrecognized_keys"){r??(r=c);for(const d of c.keys)i.has(d)||i.set(d,{}),i.get(d).l=!0}else e.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const d of c.keys)i.has(d)||i.set(d,{}),i.get(d).r=!0;else e.issues.push(c);const o=[...i].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(o.length&&r&&e.issues.push({...r,keys:o}),$d(e))return e;const l=eM(t.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return e.value=l.data,e}const U1=Pe("$ZodTuple",(e,t)=>{hn.init(e,t);const n=t.items;e._zod.parse=(i,r)=>{const o=i.value;if(!Array.isArray(o))return i.issues.push({input:o,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];const l=[],c=[...n].reverse().findIndex(p=>p._zod.optin!=="optional"),d=c===-1?0:n.length-c;if(!t.rest){const p=o.length>n.length,h=o.length<d-1;if(p||h)return i.issues.push({...p?{code:"too_big",maximum:n.length,inclusive:!0}:{code:"too_small",minimum:n.length},input:o,inst:e,origin:"array"}),i}let f=-1;for(const p of n){if(f++,f>=o.length&&f>=d)continue;const h=p._zod.run({value:o[f],issues:[]},r);h instanceof Promise?l.push(h.then(m=>iy(m,i,f))):iy(h,i,f)}if(t.rest){const p=o.slice(n.length);for(const h of p){f++;const m=t.rest._zod.run({value:h,issues:[]},r);m instanceof Promise?l.push(m.then(_=>iy(_,i,f))):iy(m,i,f)}}return l.length?Promise.all(l).then(()=>i):i}});function iy(e,t,n){e.issues.length&&t.issues.push(...Yo(n,e.issues)),t.value[n]=e.value}const tR=Pe("$ZodRecord",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;if(!Nd(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),n;const o=[],l=t.keyType._zod.values;if(l){n.value={};const c=new Set;for(const f of l)if(typeof f=="string"||typeof f=="number"||typeof f=="symbol"){c.add(typeof f=="number"?f.toString():f);const p=t.valueType._zod.run({value:r[f],issues:[]},i);p instanceof Promise?o.push(p.then(h=>{h.issues.length&&n.issues.push(...Yo(f,h.issues)),n.value[f]=h.value})):(p.issues.length&&n.issues.push(...Yo(f,p.issues)),n.value[f]=p.value)}let d;for(const f in r)c.has(f)||(d=d??[],d.push(f));d&&d.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:d})}else{n.value={};for(const c of Reflect.ownKeys(r)){if(c==="__proto__")continue;let d=t.keyType._zod.run({value:c,issues:[]},i);if(d instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof c=="string"&&D1.test(c)&&d.issues.length&&d.issues.some(h=>h.code==="invalid_type"&&h.expected==="number")){const h=t.keyType._zod.run({value:Number(c),issues:[]},i);if(h instanceof Promise)throw new Error("Async schemas not supported in object keys currently");h.issues.length===0&&(d=h)}if(d.issues.length){t.mode==="loose"?n.value[c]=r[c]:n.issues.push({code:"invalid_key",origin:"record",issues:d.issues.map(h=>xo(h,i,Wi())),input:c,path:[c],inst:e});continue}const p=t.valueType._zod.run({value:r[c],issues:[]},i);p instanceof Promise?o.push(p.then(h=>{h.issues.length&&n.issues.push(...Yo(c,h.issues)),n.value[d.value]=h.value})):(p.issues.length&&n.issues.push(...Yo(c,p.issues)),n.value[d.value]=p.value)}}return o.length?Promise.all(o).then(()=>n):n}}),nR=Pe("$ZodMap",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;if(!(r instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:r,inst:e}),n;const o=[];n.value=new Map;for(const[l,c]of r){const d=t.keyType._zod.run({value:l,issues:[]},i),f=t.valueType._zod.run({value:c,issues:[]},i);d instanceof Promise||f instanceof Promise?o.push(Promise.all([d,f]).then(([p,h])=>{kC(p,h,n,l,r,e,i)})):kC(d,f,n,l,r,e,i)}return o.length?Promise.all(o).then(()=>n):n}});function kC(e,t,n,i,r,o,l){e.issues.length&&(qy.has(typeof i)?n.issues.push(...Yo(i,e.issues)):n.issues.push({code:"invalid_key",origin:"map",input:r,inst:o,issues:e.issues.map(c=>xo(c,l,Wi()))})),t.issues.length&&(qy.has(typeof i)?n.issues.push(...Yo(i,t.issues)):n.issues.push({origin:"map",code:"invalid_element",input:r,inst:o,key:i,issues:t.issues.map(c=>xo(c,l,Wi()))})),n.value.set(e.value,t.value)}const rR=Pe("$ZodSet",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;if(!(r instanceof Set))return n.issues.push({input:r,inst:e,expected:"set",code:"invalid_type"}),n;const o=[];n.value=new Set;for(const l of r){const c=t.valueType._zod.run({value:l,issues:[]},i);c instanceof Promise?o.push(c.then(d=>AC(d,n))):AC(c,n)}return o.length?Promise.all(o).then(()=>n):n}});function AC(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}const iR=Pe("$ZodEnum",(e,t)=>{hn.init(e,t);const n=wb(t.entries),i=new Set(n);e._zod.values=i,e._zod.pattern=new RegExp(`^(${n.filter(r=>qy.has(typeof r)).map(r=>typeof r=="string"?Vl(r):r.toString()).join("|")})$`),e._zod.parse=(r,o)=>{const l=r.value;return i.has(l)||r.issues.push({code:"invalid_value",values:n,input:l,inst:e}),r}}),aR=Pe("$ZodLiteral",(e,t)=>{if(hn.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(i=>typeof i=="string"?Vl(i):i?Vl(i.toString()):String(i)).join("|")})$`),e._zod.parse=(i,r)=>{const o=i.value;return n.has(o)||i.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),i}}),oR=Pe("$ZodFile",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{const r=n.value;return r instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:r,inst:e}),n}}),sR=Pe("$ZodTransform",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new bb(e.constructor.name);const r=t.transform(n.value,n);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(l=>(n.value=l,n));if(r instanceof Promise)throw new Ad;return n.value=r,n}});function IC(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const V1=Pe("$ZodOptional",(e,t)=>{hn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",bn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),bn(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${xb(n.source)})?$`):void 0}),e._zod.parse=(n,i)=>{if(t.innerType._zod.optin==="optional"){const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>IC(o,n.value)):IC(r,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,i)}}),lR=Pe("$ZodExactOptional",(e,t)=>{V1.init(e,t),bn(e._zod,"values",()=>t.innerType._zod.values),bn(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,i)=>t.innerType._zod.run(n,i)}),cR=Pe("$ZodNullable",(e,t)=>{hn.init(e,t),bn(e._zod,"optin",()=>t.innerType._zod.optin),bn(e._zod,"optout",()=>t.innerType._zod.optout),bn(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${xb(n.source)}|null)$`):void 0}),bn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,i)=>n.value===null?n:t.innerType._zod.run(n,i)}),uR=Pe("$ZodDefault",(e,t)=>{hn.init(e,t),e._zod.optin="optional",bn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>OC(o,t)):OC(r,t)}});function OC(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const dR=Pe("$ZodPrefault",(e,t)=>{hn.init(e,t),e._zod.optin="optional",bn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>(i.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,i))}),fR=Pe("$ZodNonOptional",(e,t)=>{hn.init(e,t),bn(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(i=>i!==void 0)):void 0}),e._zod.parse=(n,i)=>{const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>DC(o,e)):DC(r,e)}});function DC(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const hR=Pe("$ZodSuccess",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new bb("ZodSuccess");const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>(n.value=o.issues.length===0,n)):(n.value=r.issues.length===0,n)}}),mR=Pe("$ZodCatch",(e,t)=>{hn.init(e,t),bn(e._zod,"optin",()=>t.innerType._zod.optin),bn(e._zod,"optout",()=>t.innerType._zod.optout),bn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(l=>xo(l,i,Wi()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(o=>xo(o,i,Wi()))},input:n.value}),n.issues=[]),n)}}),pR=Pe("$ZodNaN",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>((typeof n.value!="number"||!Number.isNaN(n.value))&&n.issues.push({input:n.value,inst:e,expected:"nan",code:"invalid_type"}),n)}),gR=Pe("$ZodPipe",(e,t)=>{hn.init(e,t),bn(e._zod,"values",()=>t.in._zod.values),bn(e._zod,"optin",()=>t.in._zod.optin),bn(e._zod,"optout",()=>t.out._zod.optout),bn(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,i)=>{if(i.direction==="backward"){const o=t.out._zod.run(n,i);return o instanceof Promise?o.then(l=>ay(l,t.in,i)):ay(o,t.in,i)}const r=t.in._zod.run(n,i);return r instanceof Promise?r.then(o=>ay(o,t.out,i)):ay(r,t.out,i)}});function ay(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const G1=Pe("$ZodCodec",(e,t)=>{hn.init(e,t),bn(e._zod,"values",()=>t.in._zod.values),bn(e._zod,"optin",()=>t.in._zod.optin),bn(e._zod,"optout",()=>t.out._zod.optout),bn(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,i)=>{if((i.direction||"forward")==="forward"){const o=t.in._zod.run(n,i);return o instanceof Promise?o.then(l=>oy(l,t,i)):oy(o,t,i)}else{const o=t.out._zod.run(n,i);return o instanceof Promise?o.then(l=>oy(l,t,i)):oy(o,t,i)}}});function oy(e,t,n){if(e.issues.length)return e.aborted=!0,e;if((n.direction||"forward")==="forward"){const r=t.transform(e.value,e);return r instanceof Promise?r.then(o=>sy(e,o,t.out,n)):sy(e,r,t.out,n)}else{const r=t.reverseTransform(e.value,e);return r instanceof Promise?r.then(o=>sy(e,o,t.in,n)):sy(e,r,t.in,n)}}function sy(e,t,n,i){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:t,issues:e.issues},i)}const _R=Pe("$ZodReadonly",(e,t)=>{hn.init(e,t),bn(e._zod,"propValues",()=>t.innerType._zod.propValues),bn(e._zod,"values",()=>t.innerType._zod.values),bn(e._zod,"optin",()=>t.innerType?._zod?.optin),bn(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);const r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(zC):zC(r)}});function zC(e){return e.value=Object.freeze(e.value),e}const vR=Pe("$ZodTemplateLiteral",(e,t)=>{hn.init(e,t);const n=[];for(const i of t.parts)if(typeof i=="object"&&i!==null){if(!i._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...i._zod.traits].shift()}`);const r=i._zod.pattern instanceof RegExp?i._zod.pattern.source:i._zod.pattern;if(!r)throw new Error(`Invalid template literal part: ${i._zod.traits}`);const o=r.startsWith("^")?1:0,l=r.endsWith("$")?r.length-1:r.length;n.push(r.slice(o,l))}else if(i===null||Vz.has(typeof i))n.push(Vl(`${i}`));else throw new Error(`Invalid template literal part: ${i}`);e._zod.pattern=new RegExp(`^${n.join("")}$`),e._zod.parse=(i,r)=>typeof i.value!="string"?(i.issues.push({input:i.value,inst:e,expected:"string",code:"invalid_type"}),i):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(i.value)||i.issues.push({input:i.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),i)}),yR=Pe("$ZodFunction",(e,t)=>(hn.init(e,t),e._def=t,e._zod.def=t,e.implement=n=>{if(typeof n!="function")throw new Error("implement() must be called with a function");return function(...i){const r=e._def.input?Yx(e._def.input,i):i,o=Reflect.apply(n,this,r);return e._def.output?Yx(e._def.output,o):o}},e.implementAsync=n=>{if(typeof n!="function")throw new Error("implementAsync() must be called with a function");return async function(...i){const r=e._def.input?await Jx(e._def.input,i):i,o=await Reflect.apply(n,this,r);return e._def.output?await Jx(e._def.output,o):o}},e._zod.parse=(n,i)=>typeof n.value!="function"?(n.issues.push({code:"invalid_type",expected:"function",input:n.value,inst:e}),n):(e._def.output&&e._def.output._zod.def.type==="promise"?n.value=e.implementAsync(n.value):n.value=e.implement(n.value),n),e.input=(...n)=>{const i=e.constructor;return Array.isArray(n[0])?new i({type:"function",input:new U1({type:"tuple",items:n[0],rest:n[1]}),output:e._def.output}):new i({type:"function",input:n[0],output:e._def.output})},e.output=n=>{const i=e.constructor;return new i({type:"function",input:e._def.input,output:n})},e)),bR=Pe("$ZodPromise",(e,t)=>{hn.init(e,t),e._zod.parse=(n,i)=>Promise.resolve(n.value).then(r=>t.innerType._zod.run({value:r,issues:[]},i))}),wR=Pe("$ZodLazy",(e,t)=>{hn.init(e,t),bn(e._zod,"innerType",()=>t.getter()),bn(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),bn(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),bn(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),bn(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(n,i)=>e._zod.innerType._zod.run(n,i)}),xR=Pe("$ZodCustom",(e,t)=>{Fr.init(e,t),hn.init(e,t),e._zod.parse=(n,i)=>n,e._zod.check=n=>{const i=n.value,r=t.fn(i);if(r instanceof Promise)return r.then(o=>LC(o,n,i,e));LC(r,n,i,e)}});function LC(e,t,n,i){if(!e){const r={code:"custom",input:n,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),t.issues.push(Kh(r))}}const $9=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(r){return e[r]??null}const n={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`  :   instanceof ${r.expected}    ${c}`:`  :   ${o}    ${c}`}case"invalid_value":return r.values.length===1?`  :   ${nn(r.values[0])}`:`  :     : ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`   :    ${r.origin??""} ${o} ${r.maximum.toString()} ${l.unit??""}`:`  :    ${r.origin??""} ${o} ${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`  :   ${r.origin}   ${o} ${r.minimum.toString()} ${l.unit}`:`  :   ${r.origin}   ${o} ${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`  :     "${r.prefix}"`:o.format==="ends_with"?`  :     "${o.suffix}"`:o.format==="includes"?`  :    "${o.includes}"`:o.format==="regex"?`  :     ${o.pattern}`:`${n[o.format]??r.format}  `}case"not_multiple_of":return`  :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${gt(r.keys," ")}`;case"invalid_key":return`    ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`    ${r.origin}`;default:return"  "}}};function P9(){return{localeError:$9()}}const C9=()=>{const e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}};function t(r){return e[r]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Yanl dyr: gzlniln instanceof ${r.expected}, daxil olan ${c}`:`Yanl dyr: gzlniln ${o}, daxil olan ${c}`}case"invalid_value":return r.values.length===1?`Yanl dyr: gzlniln ${nn(r.values[0])}`:`Yanl seim: aadaklardan biri olmaldr: ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`ox byk: gzlniln ${r.origin??"dyr"} ${o}${r.maximum.toString()} ${l.unit??"element"}`:`ox byk: gzlniln ${r.origin??"dyr"} ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`ox kiik: gzlniln ${r.origin} ${o}${r.minimum.toString()} ${l.unit}`:`ox kiik: gzlniln ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Yanl mtn: "${o.prefix}" il balamaldr`:o.format==="ends_with"?`Yanl mtn: "${o.suffix}" il bitmlidir`:o.format==="includes"?`Yanl mtn: "${o.includes}" daxil olmaldr`:o.format==="regex"?`Yanl mtn: ${o.pattern} ablonuna uyun olmaldr`:`Yanl ${n[o.format]??r.format}`}case"not_multiple_of":return`Yanl dd: ${r.divisor} il bln biln olmaldr`;case"unrecognized_keys":return`Tannmayan aar${r.keys.length>1?"lar":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`${r.origin} daxilind yanl aar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${r.origin} daxilind yanl dyr`;default:return"Yanl dyr"}}};function k9(){return{localeError:C9()}}function RC(e,t,n,i){const r=Math.abs(e),o=r%10,l=r%100;return l>=11&&l<=19?i:o===1?t:o>=2&&o<=4?n:i}const A9=()=>{const e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :  instanceof ${r.expected},  ${c}`:` :  ${o},  ${c}`}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])}`:` :    ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);if(l){const c=Number(r.maximum),d=RC(c,l.unit.one,l.unit.few,l.unit.many);return` : ,  ${r.origin??""}  ${l.verb} ${o}${r.maximum.toString()} ${d}`}return` : ,  ${r.origin??""}   ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);if(l){const c=Number(r.minimum),d=RC(c,l.unit.one,l.unit.few,l.unit.many);return` : ,  ${r.origin}  ${l.verb} ${o}${r.minimum.toString()} ${d}`}return` : ,  ${r.origin}   ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` :    "${o.prefix}"`:o.format==="ends_with"?` :    "${o.suffix}"`:o.format==="includes"?` :   "${o.includes}"`:o.format==="regex"?` :    ${o.pattern}`:` ${n[o.format]??r.format}`}case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return" "}}};function I9(){return{localeError:A9()}}const O9=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(r){return e[r]??null}const n={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :  instanceof ${r.expected},  ${c}`:` :  ${o},  ${c}`}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])}`:` :    ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` :   ${r.origin??""}   ${o}${r.maximum.toString()} ${l.unit??""}`:` :   ${r.origin??""}   ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` :   ${r.origin}   ${o}${r.minimum.toString()} ${l.unit}`:` :   ${r.origin}   ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;if(o.format==="starts_with")return` :     "${o.prefix}"`;if(o.format==="ends_with")return` :     "${o.suffix}"`;if(o.format==="includes")return` :    "${o.includes}"`;if(o.format==="regex")return` :     ${o.pattern}`;let l="";return o.format==="emoji"&&(l=""),o.format==="datetime"&&(l=""),o.format==="date"&&(l=""),o.format==="time"&&(l=""),o.format==="duration"&&(l=""),`${l} ${n[o.format]??r.format}`}case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return" "}}};function D9(){return{localeError:O9()}}const z9=()=>{const e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(r){return e[r]??null}const n={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Tipus invlid: s'esperava instanceof ${r.expected}, s'ha rebut ${c}`:`Tipus invlid: s'esperava ${o}, s'ha rebut ${c}`}case"invalid_value":return r.values.length===1?`Valor invlid: s'esperava ${nn(r.values[0])}`:`Opci invlida: s'esperava una de ${gt(r.values," o ")}`;case"too_big":{const o=r.inclusive?"com a mxim":"menys de",l=t(r.origin);return l?`Massa gran: s'esperava que ${r.origin??"el valor"} contingus ${o} ${r.maximum.toString()} ${l.unit??"elements"}`:`Massa gran: s'esperava que ${r.origin??"el valor"} fos ${o} ${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?"com a mnim":"ms de",l=t(r.origin);return l?`Massa petit: s'esperava que ${r.origin} contingus ${o} ${r.minimum.toString()} ${l.unit}`:`Massa petit: s'esperava que ${r.origin} fos ${o} ${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Format invlid: ha de comenar amb "${o.prefix}"`:o.format==="ends_with"?`Format invlid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format invlid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format invlid: ha de coincidir amb el patr ${o.pattern}`:`Format invlid per a ${n[o.format]??r.format}`}case"not_multiple_of":return`Nmero invlid: ha de ser mltiple de ${r.divisor}`;case"unrecognized_keys":return`Clau${r.keys.length>1?"s":""} no reconeguda${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Clau invlida a ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Element invlid a ${r.origin}`;default:return"Entrada invlida"}}};function L9(){return{localeError:z9()}}const R9=()=>{const e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}};function t(r){return e[r]??null}const n={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"},i={nan:"NaN",number:"slo",string:"etzec",function:"funkce",array:"pole"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Neplatn vstup: oekvno instanceof ${r.expected}, obdreno ${c}`:`Neplatn vstup: oekvno ${o}, obdreno ${c}`}case"invalid_value":return r.values.length===1?`Neplatn vstup: oekvno ${nn(r.values[0])}`:`Neplatn monost: oekvna jedna z hodnot ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Hodnota je pli velk: ${r.origin??"hodnota"} mus mt ${o}${r.maximum.toString()} ${l.unit??"prvk"}`:`Hodnota je pli velk: ${r.origin??"hodnota"} mus bt ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Hodnota je pli mal: ${r.origin??"hodnota"} mus mt ${o}${r.minimum.toString()} ${l.unit??"prvk"}`:`Hodnota je pli mal: ${r.origin??"hodnota"} mus bt ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Neplatn etzec: mus zanat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn etzec: mus konit na "${o.suffix}"`:o.format==="includes"?`Neplatn etzec: mus obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn etzec: mus odpovdat vzoru ${o.pattern}`:`Neplatn formt ${n[o.format]??r.format}`}case"not_multiple_of":return`Neplatn slo: mus bt nsobkem ${r.divisor}`;case"unrecognized_keys":return`Neznm kle: ${gt(r.keys,", ")}`;case"invalid_key":return`Neplatn kl v ${r.origin}`;case"invalid_union":return"Neplatn vstup";case"invalid_element":return`Neplatn hodnota v ${r.origin}`;default:return"Neplatn vstup"}}};function F9(){return{localeError:R9()}}const N9=()=>{const e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}};function t(r){return e[r]??null}const n={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},i={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Ugyldigt input: forventede instanceof ${r.expected}, fik ${c}`:`Ugyldigt input: forventede ${o}, fik ${c}`}case"invalid_value":return r.values.length===1?`Ugyldig vrdi: forventede ${nn(r.values[0])}`:`Ugyldigt valg: forventede en af flgende ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin),c=i[r.origin]??r.origin;return l?`For stor: forventede ${c??"value"} ${l.verb} ${o} ${r.maximum.toString()} ${l.unit??"elementer"}`:`For stor: forventede ${c??"value"} havde ${o} ${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin),c=i[r.origin]??r.origin;return l?`For lille: forventede ${c} ${l.verb} ${o} ${r.minimum.toString()} ${l.unit}`:`For lille: forventede ${c} havde ${o} ${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Ugyldig streng: skal starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: skal ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: skal indeholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: skal matche mnsteret ${o.pattern}`:`Ugyldig ${n[o.format]??r.format}`}case"not_multiple_of":return`Ugyldigt tal: skal vre deleligt med ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${gt(r.keys,", ")}`;case"invalid_key":return`Ugyldig ngle i ${r.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig vrdi i ${r.origin}`;default:return"Ugyldigt input"}}};function j9(){return{localeError:N9()}}const B9=()=>{const e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(r){return e[r]??null}const n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},i={nan:"NaN",number:"Zahl",array:"Array"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Ungltige Eingabe: erwartet instanceof ${r.expected}, erhalten ${c}`:`Ungltige Eingabe: erwartet ${o}, erhalten ${c}`}case"invalid_value":return r.values.length===1?`Ungltige Eingabe: erwartet ${nn(r.values[0])}`:`Ungltige Option: erwartet eine von ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Zu gro: erwartet, dass ${r.origin??"Wert"} ${o}${r.maximum.toString()} ${l.unit??"Elemente"} hat`:`Zu gro: erwartet, dass ${r.origin??"Wert"} ${o}${r.maximum.toString()} ist`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Zu klein: erwartet, dass ${r.origin} ${o}${r.minimum.toString()} ${l.unit} hat`:`Zu klein: erwartet, dass ${r.origin} ${o}${r.minimum.toString()} ist`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Ungltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ungltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ungltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ungltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ungltig: ${n[o.format]??r.format}`}case"not_multiple_of":return`Ungltige Zahl: muss ein Vielfaches von ${r.divisor} sein`;case"unrecognized_keys":return`${r.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${gt(r.keys,", ")}`;case"invalid_key":return`Ungltiger Schlssel in ${r.origin}`;case"invalid_union":return"Ungltige Eingabe";case"invalid_element":return`Ungltiger Wert in ${r.origin}`;default:return"Ungltige Eingabe"}}};function U9(){return{localeError:B9()}}const V9=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function t(r){return e[r]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return`Invalid input: expected ${o}, received ${c}`}case"invalid_value":return r.values.length===1?`Invalid input: expected ${nn(r.values[0])}`:`Invalid option: expected one of ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Too big: expected ${r.origin??"value"} to have ${o}${r.maximum.toString()} ${l.unit??"elements"}`:`Too big: expected ${r.origin??"value"} to be ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Too small: expected ${r.origin} to have ${o}${r.minimum.toString()} ${l.unit}`:`Too small: expected ${r.origin} to be ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${n[o.format]??r.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`;default:return"Invalid input"}}};function MR(){return{localeError:V9()}}const G9=()=>{const e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(r){return e[r]??null}const n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},i={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Nevalida enigo: atendiis instanceof ${r.expected}, riceviis ${c}`:`Nevalida enigo: atendiis ${o}, riceviis ${c}`}case"invalid_value":return r.values.length===1?`Nevalida enigo: atendiis ${nn(r.values[0])}`:`Nevalida opcio: atendiis unu el ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${o}${r.maximum.toString()} ${l.unit??"elementojn"}`:`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Tro malgranda: atendiis ke ${r.origin} havu ${o}${r.minimum.toString()} ${l.unit}`:`Tro malgranda: atendiis ke ${r.origin} estu ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Nevalida karaktraro: devas komencii per "${o.prefix}"`:o.format==="ends_with"?`Nevalida karaktraro: devas finii per "${o.suffix}"`:o.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${o.includes}"`:o.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${o.pattern}`:`Nevalida ${n[o.format]??r.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} losilo${r.keys.length>1?"j":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${r.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`;default:return"Nevalida enigo"}}};function W9(){return{localeError:G9()}}const H9=()=>{const e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function t(r){return e[r]??null}const n={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN",string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Entrada invlida: se esperaba instanceof ${r.expected}, recibido ${c}`:`Entrada invlida: se esperaba ${o}, recibido ${c}`}case"invalid_value":return r.values.length===1?`Entrada invlida: se esperaba ${nn(r.values[0])}`:`Opcin invlida: se esperaba una de ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin),c=i[r.origin]??r.origin;return l?`Demasiado grande: se esperaba que ${c??"valor"} tuviera ${o}${r.maximum.toString()} ${l.unit??"elementos"}`:`Demasiado grande: se esperaba que ${c??"valor"} fuera ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin),c=i[r.origin]??r.origin;return l?`Demasiado pequeo: se esperaba que ${c} tuviera ${o}${r.minimum.toString()} ${l.unit}`:`Demasiado pequeo: se esperaba que ${c} fuera ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Cadena invlida: debe comenzar con "${o.prefix}"`:o.format==="ends_with"?`Cadena invlida: debe terminar en "${o.suffix}"`:o.format==="includes"?`Cadena invlida: debe incluir "${o.includes}"`:o.format==="regex"?`Cadena invlida: debe coincidir con el patrn ${o.pattern}`:`Invlido ${n[o.format]??r.format}`}case"not_multiple_of":return`Nmero invlido: debe ser mltiplo de ${r.divisor}`;case"unrecognized_keys":return`Llave${r.keys.length>1?"s":""} desconocida${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Llave invlida en ${i[r.origin]??r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor invlido en ${i[r.origin]??r.origin}`;default:return"Entrada invlida"}}};function K9(){return{localeError:H9()}}const q9=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(r){return e[r]??null}const n={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :  instanceof ${r.expected}  ${c}  `:` :  ${o}  ${c}  `}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])} `:` :    ${gt(r.values,"|")} `;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` : ${r.origin??""}  ${o}${r.maximum.toString()} ${l.unit??""} `:` : ${r.origin??""}  ${o}${r.maximum.toString()} `}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` : ${r.origin}  ${o}${r.minimum.toString()} ${l.unit} `:` : ${r.origin}  ${o}${r.minimum.toString()} `}case"invalid_format":{const o=r;return o.format==="starts_with"?` :   "${o.prefix}"  `:o.format==="ends_with"?` :   "${o.suffix}"  `:o.format==="includes"?` :   "${o.includes}" `:o.format==="regex"?` :    ${o.pattern}   `:`${n[o.format]??r.format} `}case"not_multiple_of":return` :   ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""} : ${gt(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return" "}}};function Z9(){return{localeError:q9()}}const Q9=()=>{const e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}};function t(r){return e[r]??null}const n={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Virheellinen tyyppi: odotettiin instanceof ${r.expected}, oli ${c}`:`Virheellinen tyyppi: odotettiin ${o}, oli ${c}`}case"invalid_value":return r.values.length===1?`Virheellinen syte: tytyy olla ${nn(r.values[0])}`:`Virheellinen valinta: tytyy olla yksi seuraavista: ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Liian suuri: ${l.subject} tytyy olla ${o}${r.maximum.toString()} ${l.unit}`.trim():`Liian suuri: arvon tytyy olla ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Liian pieni: ${l.subject} tytyy olla ${o}${r.minimum.toString()} ${l.unit}`.trim():`Liian pieni: arvon tytyy olla ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Virheellinen syte: tytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen syte: tytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen syte: tytyy sislt "${o.includes}"`:o.format==="regex"?`Virheellinen syte: tytyy vastata snnllist lauseketta ${o.pattern}`:`Virheellinen ${n[o.format]??r.format}`}case"not_multiple_of":return`Virheellinen luku: tytyy olla luvun ${r.divisor} monikerta`;case"unrecognized_keys":return`${r.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${gt(r.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syte"}}};function X9(){return{localeError:Q9()}}const Y9=()=>{const e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(r){return e[r]??null}const n={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},i={nan:"NaN",number:"nombre",array:"tableau"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Entre invalide : instanceof ${r.expected} attendu, ${c} reu`:`Entre invalide : ${o} attendu, ${c} reu`}case"invalid_value":return r.values.length===1?`Entre invalide : ${nn(r.values[0])} attendu`:`Option invalide : une valeur parmi ${gt(r.values,"|")} attendue`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Trop grand : ${r.origin??"valeur"} doit ${l.verb} ${o}${r.maximum.toString()} ${l.unit??"lment(s)"}`:`Trop grand : ${r.origin??"valeur"} doit tre ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Trop petit : ${r.origin} doit ${l.verb} ${o}${r.minimum.toString()} ${l.unit}`:`Trop petit : ${r.origin} doit tre ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Chane invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Chane invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Chane invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Chane invalide : doit correspondre au modle ${o.pattern}`:`${n[o.format]??r.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${gt(r.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return"Entre invalide"}}};function J9(){return{localeError:Y9()}}const eK=()=>{const e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(r){return e[r]??null}const n={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Entre invalide : attendu instanceof ${r.expected}, reu ${c}`:`Entre invalide : attendu ${o}, reu ${c}`}case"invalid_value":return r.values.length===1?`Entre invalide : attendu ${nn(r.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"":"<",l=t(r.origin);return l?`Trop grand : attendu que ${r.origin??"la valeur"} ait ${o}${r.maximum.toString()} ${l.unit}`:`Trop grand : attendu que ${r.origin??"la valeur"} soit ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?"":">",l=t(r.origin);return l?`Trop petit : attendu que ${r.origin} ait ${o}${r.minimum.toString()} ${l.unit}`:`Trop petit : attendu que ${r.origin} soit ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Chane invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Chane invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Chane invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Chane invalide : doit correspondre au motif ${o.pattern}`:`${n[o.format]??r.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${gt(r.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return"Entre invalide"}}};function tK(){return{localeError:eK()}}const nK=()=>{const e={string:{label:"",gender:"f"},number:{label:"",gender:"m"},boolean:{label:" ",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"",gender:"m"},array:{label:"",gender:"m"},object:{label:"",gender:"m"},null:{label:"  (null)",gender:"m"},undefined:{label:"   (undefined)",gender:"m"},symbol:{label:" (Symbol)",gender:"m"},function:{label:"",gender:"f"},map:{label:" (Map)",gender:"f"},set:{label:" (Set)",gender:"f"},file:{label:"",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"  ",gender:"m"},value:{label:"",gender:"m"}},t={string:{unit:"",shortLabel:"",longLabel:""},file:{unit:"",shortLabel:"",longLabel:""},array:{unit:"",shortLabel:"",longLabel:""},set:{unit:"",shortLabel:"",longLabel:""},number:{unit:"",shortLabel:"",longLabel:""}},n=f=>f?e[f]:void 0,i=f=>{const p=n(f);return p?p.label:f??e.unknown.label},r=f=>`${i(f)}`,o=f=>(n(f)?.gender??"m")==="f"?" ":" ",l=f=>f?t[f]??null:null,c={regex:{label:"",gender:"m"},email:{label:" ",gender:"f"},url:{label:" ",gender:"f"},emoji:{label:"'",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"  ISO",gender:"m"},date:{label:" ISO",gender:"m"},time:{label:" ISO",gender:"m"},duration:{label:"  ISO",gender:"m"},ipv4:{label:" IPv4",gender:"f"},ipv6:{label:" IPv6",gender:"f"},cidrv4:{label:" IPv4",gender:"m"},cidrv6:{label:" IPv6",gender:"m"},base64:{label:"  64",gender:"f"},base64url:{label:"  64  ",gender:"f"},json_string:{label:" JSON",gender:"f"},e164:{label:" E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"",gender:"m"},includes:{label:"",gender:"m"},lowercase:{label:"",gender:"m"},starts_with:{label:"",gender:"m"},uppercase:{label:"",gender:"m"}},d={nan:"NaN"};return f=>{switch(f.code){case"invalid_type":{const p=f.expected,h=d[p??""]??i(p),m=on(f.input),_=d[m]??e[m]?.label??m;return/^[A-Z]/.test(f.expected)?`  :   instanceof ${f.expected},  ${_}`:`  :   ${h},  ${_}`}case"invalid_value":{if(f.values.length===1)return`  :    ${nn(f.values[0])}`;const p=f.values.map(_=>nn(_));if(f.values.length===2)return`  :    ${p[0]}  ${p[1]}`;const h=p[p.length-1];return`  :    ${p.slice(0,-1).join(", ")}  ${h}`}case"too_big":{const p=l(f.origin),h=r(f.origin??"value");if(f.origin==="string")return`${p?.longLabel??""} : ${h}   ${f.maximum.toString()} ${p?.unit??""} ${f.inclusive?" ":" "}`.trim();if(f.origin==="number"){const v=f.inclusive?`   -${f.maximum}`:` -${f.maximum}`;return` : ${h}   ${v}`}if(f.origin==="array"||f.origin==="set"){const v=f.origin==="set"?"":"",b=f.inclusive?`${f.maximum} ${p?.unit??""}  `:` -${f.maximum} ${p?.unit??""}`;return` : ${h} ${v}  ${b}`.trim()}const m=f.inclusive?"<=":"<",_=o(f.origin??"value");return p?.unit?`${p.longLabel} : ${h} ${_} ${m}${f.maximum.toString()} ${p.unit}`:`${p?.longLabel??""} : ${h} ${_} ${m}${f.maximum.toString()}`}case"too_small":{const p=l(f.origin),h=r(f.origin??"value");if(f.origin==="string")return`${p?.shortLabel??""} : ${h}   ${f.minimum.toString()} ${p?.unit??""} ${f.inclusive?" ":""}`.trim();if(f.origin==="number"){const v=f.inclusive?`   -${f.minimum}`:` -${f.minimum}`;return` : ${h}   ${v}`}if(f.origin==="array"||f.origin==="set"){const v=f.origin==="set"?"":"";if(f.minimum===1&&f.inclusive){const D=(f.origin==="set","  ");return` : ${h} ${v}  ${D}`}const b=f.inclusive?`${f.minimum} ${p?.unit??""}  `:` -${f.minimum} ${p?.unit??""}`;return` : ${h} ${v}  ${b}`.trim()}const m=f.inclusive?">=":">",_=o(f.origin??"value");return p?.unit?`${p.shortLabel} : ${h} ${_} ${m}${f.minimum.toString()} ${p.unit}`:`${p?.shortLabel??""} : ${h} ${_} ${m}${f.minimum.toString()}`}case"invalid_format":{const p=f;if(p.format==="starts_with")return`    "${p.prefix}"`;if(p.format==="ends_with")return`    "${p.suffix}"`;if(p.format==="includes")return`   "${p.includes}"`;if(p.format==="regex")return`    ${p.pattern}`;const h=c[p.format],m=h?.label??p.format,v=(h?.gender??"m")==="f"?"":"";return`${m}  ${v}`}case"not_multiple_of":return`  :     ${f.divisor}`;case"unrecognized_keys":return`${f.keys.length>1?"":""}  ${f.keys.length>1?"":""}: ${gt(f.keys,", ")}`;case"invalid_key":return"   ";case"invalid_union":return"  ";case"invalid_element":return`   ${r(f.origin??"array")}`;default:return"  "}}};function rK(){return{localeError:nK()}}const iK=()=>{const e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(r){return e[r]??null}const n={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"},i={nan:"NaN",number:"szm",array:"tmb"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`rvnytelen bemenet: a vrt rtk instanceof ${r.expected}, a kapott rtk ${c}`:`rvnytelen bemenet: a vrt rtk ${o}, a kapott rtk ${c}`}case"invalid_value":return r.values.length===1?`rvnytelen bemenet: a vrt rtk ${nn(r.values[0])}`:`rvnytelen opci: valamelyik rtk vrt ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Tl nagy: ${r.origin??"rtk"} mrete tl nagy ${o}${r.maximum.toString()} ${l.unit??"elem"}`:`Tl nagy: a bemeneti rtk ${r.origin??"rtk"} tl nagy: ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Tl kicsi: a bemeneti rtk ${r.origin} mrete tl kicsi ${o}${r.minimum.toString()} ${l.unit}`:`Tl kicsi: a bemeneti rtk ${r.origin} tl kicsi ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`rvnytelen string: "${o.prefix}" rtkkel kell kezddnie`:o.format==="ends_with"?`rvnytelen string: "${o.suffix}" rtkkel kell vgzdnie`:o.format==="includes"?`rvnytelen string: "${o.includes}" rtket kell tartalmaznia`:o.format==="regex"?`rvnytelen string: ${o.pattern} mintnak kell megfelelnie`:`rvnytelen ${n[o.format]??r.format}`}case"not_multiple_of":return`rvnytelen szm: ${r.divisor} tbbszrsnek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`rvnytelen kulcs ${r.origin}`;case"invalid_union":return"rvnytelen bemenet";case"invalid_element":return`rvnytelen rtk: ${r.origin}`;default:return"rvnytelen bemenet"}}};function aK(){return{localeError:iK()}}function FC(e,t,n){return Math.abs(e)===1?t:n}function Ch(e){if(!e)return"";const t=["","","","","","",""],n=e[e.length-1];return e+(t.includes(n)?"":"")}const oK=()=>{const e={string:{unit:{one:"",many:""},verb:""},file:{unit:{one:"",many:""},verb:""},array:{unit:{one:"",many:""},verb:""},set:{unit:{one:"",many:""},verb:""}};function t(r){return e[r]??null}const n={regex:"",email:". ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`    instanceof ${r.expected},   ${c}`:`    ${o},   ${c}`}case"invalid_value":return r.values.length===1?`    ${nn(r.values[1])}`:`      ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);if(l){const c=Number(r.maximum),d=FC(c,l.unit.one,l.unit.many);return`    ,  ${Ch(r.origin??"")}  ${o}${r.maximum.toString()} ${d}`}return`    ,  ${Ch(r.origin??"")}  ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);if(l){const c=Number(r.minimum),d=FC(c,l.unit.one,l.unit.many);return`    ,  ${Ch(r.origin)}  ${o}${r.minimum.toString()} ${d}`}return`    ,  ${Ch(r.origin)}  ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`     "${o.prefix}"-`:o.format==="ends_with"?`     "${o.suffix}"-`:o.format==="includes"?`     "${o.includes}"`:o.format==="regex"?`     ${o.pattern} `:` ${n[o.format]??r.format}`}case"not_multiple_of":return`      ${r.divisor}-`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}. ${gt(r.keys,", ")}`;case"invalid_key":return`  ${Ch(r.origin)}-`;case"invalid_union":return" ";case"invalid_element":return`  ${Ch(r.origin)}-`;default:return" "}}};function sK(){return{localeError:oK()}}const lK=()=>{const e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(r){return e[r]??null}const n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Input tidak valid: diharapkan instanceof ${r.expected}, diterima ${c}`:`Input tidak valid: diharapkan ${o}, diterima ${c}`}case"invalid_value":return r.values.length===1?`Input tidak valid: diharapkan ${nn(r.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Terlalu besar: diharapkan ${r.origin??"value"} memiliki ${o}${r.maximum.toString()} ${l.unit??"elemen"}`:`Terlalu besar: diharapkan ${r.origin??"value"} menjadi ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Terlalu kecil: diharapkan ${r.origin} memiliki ${o}${r.minimum.toString()} ${l.unit}`:`Terlalu kecil: diharapkan ${r.origin} menjadi ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${n[o.format]??r.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${r.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${r.origin}`;default:return"Input tidak valid"}}};function cK(){return{localeError:lK()}}const uK=()=>{const e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}};function t(r){return e[r]??null}const n={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"},i={nan:"NaN",number:"nmer",array:"fylki"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Rangt gildi:  slst inn ${c} ar sem  a vera instanceof ${r.expected}`:`Rangt gildi:  slst inn ${c} ar sem  a vera ${o}`}case"invalid_value":return r.values.length===1?`Rangt gildi: gert r fyrir ${nn(r.values[0])}`:`gilt val: m vera eitt af eftirfarandi ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Of strt: gert er r fyrir a ${r.origin??"gildi"} hafi ${o}${r.maximum.toString()} ${l.unit??"hluti"}`:`Of strt: gert er r fyrir a ${r.origin??"gildi"} s ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Of lti: gert er r fyrir a ${r.origin} hafi ${o}${r.minimum.toString()} ${l.unit}`:`Of lti: gert er r fyrir a ${r.origin} s ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`gildur strengur: verur a byrja  "${o.prefix}"`:o.format==="ends_with"?`gildur strengur: verur a enda  "${o.suffix}"`:o.format==="includes"?`gildur strengur: verur a innihalda "${o.includes}"`:o.format==="regex"?`gildur strengur: verur a fylgja mynstri ${o.pattern}`:`Rangt ${n[o.format]??r.format}`}case"not_multiple_of":return`Rng tala: verur a vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`ekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${gt(r.keys,", ")}`;case"invalid_key":return`Rangur lykill  ${r.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi  ${r.origin}`;default:return"Rangt gildi"}}};function dK(){return{localeError:uK()}}const fK=()=>{const e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(r){return e[r]??null}const n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"numero",array:"vettore"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Input non valido: atteso instanceof ${r.expected}, ricevuto ${c}`:`Input non valido: atteso ${o}, ricevuto ${c}`}case"invalid_value":return r.values.length===1?`Input non valido: atteso ${nn(r.values[0])}`:`Opzione non valida: atteso uno tra ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Troppo grande: ${r.origin??"valore"} deve avere ${o}${r.maximum.toString()} ${l.unit??"elementi"}`:`Troppo grande: ${r.origin??"valore"} deve essere ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Troppo piccolo: ${r.origin} deve avere ${o}${r.minimum.toString()} ${l.unit}`:`Troppo piccolo: ${r.origin} deve essere ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${n[o.format]??r.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${r.divisor}`;case"unrecognized_keys":return`Chiav${r.keys.length>1?"i":"e"} non riconosciut${r.keys.length>1?"e":"a"}: ${gt(r.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${r.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${r.origin}`;default:return"Input non valido"}}};function hK(){return{localeError:fK()}}const mK=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`: instanceof ${r.expected}${c}`:`: ${o}${c}`}case"invalid_value":return r.values.length===1?`: ${nn(r.values[0])}`:`: ${gt(r.values,"")}`;case"too_big":{const o=r.inclusive?"":"",l=t(r.origin);return l?`: ${r.origin??""}${r.maximum.toString()}${l.unit??""}${o}`:`: ${r.origin??""}${r.maximum.toString()}${o}`}case"too_small":{const o=r.inclusive?"":"",l=t(r.origin);return l?`: ${r.origin}${r.minimum.toString()}${l.unit}${o}`:`: ${r.origin}${r.minimum.toString()}${o}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`: "${o.prefix}"`:o.format==="ends_with"?`: "${o.suffix}"`:o.format==="includes"?`: "${o.includes}"`:o.format==="regex"?`: ${o.pattern}`:`${n[o.format]??r.format}`}case"not_multiple_of":return`: ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""}: ${gt(r.keys,"")}`;case"invalid_key":return`${r.origin}`;case"invalid_union":return"";case"invalid_element":return`${r.origin}`;default:return""}}};function pK(){return{localeError:mK()}}const gK=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(r){return e[r]??null}const n={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",string:"",boolean:"",function:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :  instanceof ${r.expected},  ${c}`:` :  ${o},  ${c}`}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])}`:` :  - ${gt(r.values,"|")}-`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` :  ${r.origin??""} ${l.verb} ${o}${r.maximum.toString()} ${l.unit}`:` :  ${r.origin??""}  ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` :  ${r.origin} ${l.verb} ${o}${r.minimum.toString()} ${l.unit}`:` :  ${r.origin}  ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` :   "${o.prefix}"-`:o.format==="ends_with"?` :   "${o.suffix}"-`:o.format==="includes"?` :   "${o.includes}"-`:o.format==="regex"?` :    ${o.pattern}`:` ${n[o.format]??r.format}`}case"not_multiple_of":return` :   ${r.divisor}- `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`  ${r.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${r.origin}-`;default:return" "}}};function _K(){return{localeError:gK()}}const vK=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`  instanceof ${r.expected}  ${c}`:`  ${o}  ${c}`}case"invalid_value":return r.values.length===1?`  ${nn(r.values[0])}`:`  ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`  ${r.origin??""} ${o} ${r.maximum.toString()} ${l.unit??""}`:`  ${r.origin??""} ${o} ${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`  ${r.origin} ${o} ${r.minimum.toString()} ${l.unit}`:`  ${r.origin} ${o} ${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`  "${o.prefix}"`:o.format==="ends_with"?`  "${o.suffix}"`:o.format==="includes"?`  "${o.includes}"`:o.format==="regex"?`  ${o.pattern}`:` ${n[o.format]??r.format}`}case"not_multiple_of":return`  ${r.divisor}`;case"unrecognized_keys":return` ${gt(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":return"";case"invalid_element":return` ${r.origin}`;default:return""}}};function TR(){return{localeError:vK()}}function yK(){return TR()}const bK=()=>{const e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}};function t(r){return e[r]??null}const n={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :   instanceof ${r.expected},   ${c}`:` :   ${o},   ${c}`}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])}  `:` : ${gt(r.values," ")}   `;case"too_big":{const o=r.inclusive?"":"",l=o===""?" ":" ",c=t(r.origin),d=c?.unit??"";return c?`${r.origin??""}  : ${r.maximum.toString()}${d} ${o}${l}`:`${r.origin??""}  : ${r.maximum.toString()} ${o}${l}`}case"too_small":{const o=r.inclusive?"":"",l=o===""?" ":" ",c=t(r.origin),d=c?.unit??"";return c?`${r.origin??""}  : ${r.minimum.toString()}${d} ${o}${l}`:`${r.origin??""}  : ${r.minimum.toString()} ${o}${l}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` : "${o.prefix}"()  `:o.format==="ends_with"?` : "${o.suffix}"()  `:o.format==="includes"?` : "${o.includes}"()  `:o.format==="regex"?` :  ${o.pattern}   `:` ${n[o.format]??r.format}`}case"not_multiple_of":return` : ${r.divisor}  `;case"unrecognized_keys":return`   : ${gt(r.keys,", ")}`;case"invalid_key":return` : ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return` : ${r.origin}`;default:return" "}}};function wK(){return{localeError:bK()}}const Ng=e=>e.charAt(0).toUpperCase()+e.slice(1);function NC(e){const t=Math.abs(e),n=t%10,i=t%100;return i>=11&&i<=19||n===0?"many":n===1?"one":"few"}const xK=()=>{const e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(r,o,l,c){const d=e[r]??null;return d===null?d:{unit:d.unit[o],verb:d.verb[c][l?"inclusive":"notInclusive"]}}const n={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"},i={nan:"NaN",number:"skaiius",bigint:"sveikasis skaiius",string:"eilut",boolean:"login reikm",undefined:"neapibrta reikm",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin reikm"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Gautas tipas ${c}, o tiktasi - instanceof ${r.expected}`:`Gautas tipas ${c}, o tiktasi - ${o}`}case"invalid_value":return r.values.length===1?`Privalo bti ${nn(r.values[0])}`:`Privalo bti vienas i ${gt(r.values,"|")} pasirinkim`;case"too_big":{const o=i[r.origin]??r.origin,l=t(r.origin,NC(Number(r.maximum)),r.inclusive??!1,"smaller");if(l?.verb)return`${Ng(o??r.origin??"reikm")} ${l.verb} ${r.maximum.toString()} ${l.unit??"element"}`;const c=r.inclusive?"ne didesnis kaip":"maesnis kaip";return`${Ng(o??r.origin??"reikm")} turi bti ${c} ${r.maximum.toString()} ${l?.unit}`}case"too_small":{const o=i[r.origin]??r.origin,l=t(r.origin,NC(Number(r.minimum)),r.inclusive??!1,"bigger");if(l?.verb)return`${Ng(o??r.origin??"reikm")} ${l.verb} ${r.minimum.toString()} ${l.unit??"element"}`;const c=r.inclusive?"ne maesnis kaip":"didesnis kaip";return`${Ng(o??r.origin??"reikm")} turi bti ${c} ${r.minimum.toString()} ${l?.unit}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Eilut privalo prasidti "${o.prefix}"`:o.format==="ends_with"?`Eilut privalo pasibaigti "${o.suffix}"`:o.format==="includes"?`Eilut privalo traukti "${o.includes}"`:o.format==="regex"?`Eilut privalo atitikti ${o.pattern}`:`Neteisingas ${n[o.format]??r.format}`}case"not_multiple_of":return`Skaiius privalo bti ${r.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${r.keys.length>1?"i":"as"} rakt${r.keys.length>1?"ai":"as"}: ${gt(r.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga vestis";case"invalid_element":{const o=i[r.origin]??r.origin;return`${Ng(o??r.origin??"reikm")} turi klaiding vest`}default:return"Klaidinga vestis"}}};function MK(){return{localeError:xK()}}const TK=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(r){return e[r]??null}const n={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :   instanceof ${r.expected},  ${c}`:` :   ${o},  ${c}`}case"invalid_value":return r.values.length===1?`Invalid input: expected ${nn(r.values[0])}`:` :    ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` :   ${r.origin??""}   ${o}${r.maximum.toString()} ${l.unit??""}`:` :   ${r.origin??""}   ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` :   ${r.origin}   ${o}${r.minimum.toString()} ${l.unit}`:` :   ${r.origin}   ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` :     "${o.prefix}"`:o.format==="ends_with"?` :     "${o.suffix}"`:o.format==="includes"?` :    "${o.includes}"`:o.format==="regex"?` :      ${o.pattern}`:`Invalid ${n[o.format]??r.format}`}case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?" ":" "}: ${gt(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return" "}}};function SK(){return{localeError:TK()}}const EK=()=>{const e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(r){return e[r]??null}const n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"nombor"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Input tidak sah: dijangka instanceof ${r.expected}, diterima ${c}`:`Input tidak sah: dijangka ${o}, diterima ${c}`}case"invalid_value":return r.values.length===1?`Input tidak sah: dijangka ${nn(r.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Terlalu besar: dijangka ${r.origin??"nilai"} ${l.verb} ${o}${r.maximum.toString()} ${l.unit??"elemen"}`:`Terlalu besar: dijangka ${r.origin??"nilai"} adalah ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Terlalu kecil: dijangka ${r.origin} ${l.verb} ${o}${r.minimum.toString()} ${l.unit}`:`Terlalu kecil: dijangka ${r.origin} adalah ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${n[o.format]??r.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${gt(r.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${r.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${r.origin}`;default:return"Input tidak sah"}}};function $K(){return{localeError:EK()}}const PK=()=>{const e={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}};function t(r){return e[r]??null}const n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},i={nan:"NaN",number:"getal"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Ongeldige invoer: verwacht instanceof ${r.expected}, ontving ${c}`:`Ongeldige invoer: verwacht ${o}, ontving ${c}`}case"invalid_value":return r.values.length===1?`Ongeldige invoer: verwacht ${nn(r.values[0])}`:`Ongeldige optie: verwacht n van ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin),c=r.origin==="date"?"laat":r.origin==="string"?"lang":"groot";return l?`Te ${c}: verwacht dat ${r.origin??"waarde"} ${o}${r.maximum.toString()} ${l.unit??"elementen"} ${l.verb}`:`Te ${c}: verwacht dat ${r.origin??"waarde"} ${o}${r.maximum.toString()} is`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin),c=r.origin==="date"?"vroeg":r.origin==="string"?"kort":"klein";return l?`Te ${c}: verwacht dat ${r.origin} ${o}${r.minimum.toString()} ${l.unit} ${l.verb}`:`Te ${c}: verwacht dat ${r.origin} ${o}${r.minimum.toString()} is`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${n[o.format]??r.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${r.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${r.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${r.origin}`;default:return"Ongeldige invoer"}}};function CK(){return{localeError:PK()}}const kK=()=>{const e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}};function t(r){return e[r]??null}const n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"tall",array:"liste"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Ugyldig input: forventet instanceof ${r.expected}, fikk ${c}`:`Ugyldig input: forventet ${o}, fikk ${c}`}case"invalid_value":return r.values.length===1?`Ugyldig verdi: forventet ${nn(r.values[0])}`:`Ugyldig valg: forventet en av ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`For stor(t): forventet ${r.origin??"value"} til  ha ${o}${r.maximum.toString()} ${l.unit??"elementer"}`:`For stor(t): forventet ${r.origin??"value"} til  ha ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`For lite(n): forventet ${r.origin} til  ha ${o}${r.minimum.toString()} ${l.unit}`:`For lite(n): forventet ${r.origin} til  ha ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Ugyldig streng: m starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m matche mnsteret ${o.pattern}`:`Ugyldig ${n[o.format]??r.format}`}case"not_multiple_of":return`Ugyldig tall: m vre et multiplum av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${gt(r.keys,", ")}`;case"invalid_key":return`Ugyldig nkkel i ${r.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${r.origin}`;default:return"Ugyldig input"}}};function AK(){return{localeError:kK()}}const IK=()=>{const e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}};function t(r){return e[r]??null}const n={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},i={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Fsit giren: umulan instanceof ${r.expected}, alnan ${c}`:`Fsit giren: umulan ${o}, alnan ${c}`}case"invalid_value":return r.values.length===1?`Fsit giren: umulan ${nn(r.values[0])}`:`Fsit tercih: mteberler ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Fazla byk: ${r.origin??"value"}, ${o}${r.maximum.toString()} ${l.unit??"elements"} sahip olmalyd.`:`Fazla byk: ${r.origin??"value"}, ${o}${r.maximum.toString()} olmalyd.`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Fazla kk: ${r.origin}, ${o}${r.minimum.toString()} ${l.unit} sahip olmalyd.`:`Fazla kk: ${r.origin}, ${o}${r.minimum.toString()} olmalyd.`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Fsit metin: "${o.prefix}" ile balamal.`:o.format==="ends_with"?`Fsit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`Fsit metin: "${o.includes}" ihtiv etmeli.`:o.format==="regex"?`Fsit metin: ${o.pattern} nakna uymal.`:`Fsit ${n[o.format]??r.format}`}case"not_multiple_of":return`Fsit say: ${r.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`${r.origin} iin tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${r.origin} iin tannmayan kymet var.`;default:return"Kymet tannamad."}}};function OK(){return{localeError:IK()}}const DK=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :  instanceof ${r.expected} ,  ${c}  `:` :  ${o} ,  ${c}  `}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])} `:` :    ${gt(r.values,"|")}  `;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` : ${r.origin??""}  ${o}${r.maximum.toString()} ${l.unit??""} `:` : ${r.origin??""}  ${o}${r.maximum.toString()} `}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` : ${r.origin}  ${o}${r.minimum.toString()} ${l.unit} `:` : ${r.origin}  ${o}${r.minimum.toString()} `}case"invalid_format":{const o=r;return o.format==="starts_with"?` :   "${o.prefix}"   `:o.format==="ends_with"?` :   "${o.suffix}"    `:o.format==="includes"?` :  "${o.includes}" `:o.format==="regex"?` :   ${o.pattern}   `:`${n[o.format]??r.format}  `}case"not_multiple_of":return` :   ${r.divisor}  `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`   ${r.origin} `;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin} `;default:return" "}}};function zK(){return{localeError:DK()}}const LK=()=>{const e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}};function t(r){return e[r]??null}const n={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},i={nan:"NaN",number:"liczba",array:"tablica"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Nieprawidowe dane wejciowe: oczekiwano instanceof ${r.expected}, otrzymano ${c}`:`Nieprawidowe dane wejciowe: oczekiwano ${o}, otrzymano ${c}`}case"invalid_value":return r.values.length===1?`Nieprawidowe dane wejciowe: oczekiwano ${nn(r.values[0])}`:`Nieprawidowa opcja: oczekiwano jednej z wartoci ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Za dua warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${o}${r.maximum.toString()} ${l.unit??"elementw"}`:`Zbyt du(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Za maa warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${o}${r.minimum.toString()} ${l.unit??"elementw"}`:`Zbyt ma(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Nieprawidowy cig znakw: musi zaczyna si od "${o.prefix}"`:o.format==="ends_with"?`Nieprawidowy cig znakw: musi koczy si na "${o.suffix}"`:o.format==="includes"?`Nieprawidowy cig znakw: musi zawiera "${o.includes}"`:o.format==="regex"?`Nieprawidowy cig znakw: musi odpowiada wzorcowi ${o.pattern}`:`Nieprawidow(y/a/e) ${n[o.format]??r.format}`}case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${r.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${r.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${r.origin}`;default:return"Nieprawidowe dane wejciowe"}}};function RK(){return{localeError:LK()}}const FK=()=>{const e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(r){return e[r]??null}const n={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN",number:"nmero",null:"nulo"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Tipo invlido: esperado instanceof ${r.expected}, recebido ${c}`:`Tipo invlido: esperado ${o}, recebido ${c}`}case"invalid_value":return r.values.length===1?`Entrada invlida: esperado ${nn(r.values[0])}`:`Opo invlida: esperada uma das ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Muito grande: esperado que ${r.origin??"valor"} tivesse ${o}${r.maximum.toString()} ${l.unit??"elementos"}`:`Muito grande: esperado que ${r.origin??"valor"} fosse ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Muito pequeno: esperado que ${r.origin} tivesse ${o}${r.minimum.toString()} ${l.unit}`:`Muito pequeno: esperado que ${r.origin} fosse ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Texto invlido: deve comear com "${o.prefix}"`:o.format==="ends_with"?`Texto invlido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto invlido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto invlido: deve corresponder ao padro ${o.pattern}`:`${n[o.format]??r.format} invlido`}case"not_multiple_of":return`Nmero invlido: deve ser mltiplo de ${r.divisor}`;case"unrecognized_keys":return`Chave${r.keys.length>1?"s":""} desconhecida${r.keys.length>1?"s":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`Chave invlida em ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor invlido em ${r.origin}`;default:return"Campo invlido"}}};function NK(){return{localeError:FK()}}function jC(e,t,n,i){const r=Math.abs(e),o=r%10,l=r%100;return l>=11&&l<=19?i:o===1?t:o>=2&&o<=4?n:i}const jK=()=>{const e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :  instanceof ${r.expected},  ${c}`:` :  ${o},  ${c}`}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])}`:` :    ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);if(l){const c=Number(r.maximum),d=jC(c,l.unit.one,l.unit.few,l.unit.many);return`  : ,  ${r.origin??""}   ${o}${r.maximum.toString()} ${d}`}return`  : ,  ${r.origin??""}  ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);if(l){const c=Number(r.minimum),d=jC(c,l.unit.one,l.unit.few,l.unit.many);return`  : ,  ${r.origin}   ${o}${r.minimum.toString()} ${d}`}return`  : ,  ${r.origin}  ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` :    "${o.prefix}"`:o.format==="ends_with"?` :    "${o.suffix}"`:o.format==="includes"?` :   "${o.includes}"`:o.format==="regex"?` :    ${o.pattern}`:` ${n[o.format]??r.format}`}case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return"  "}}};function BK(){return{localeError:jK()}}const UK=()=>{const e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(r){return e[r]??null}const n={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},i={nan:"NaN",number:"tevilo",array:"tabela"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Neveljaven vnos: priakovano instanceof ${r.expected}, prejeto ${c}`:`Neveljaven vnos: priakovano ${o}, prejeto ${c}`}case"invalid_value":return r.values.length===1?`Neveljaven vnos: priakovano ${nn(r.values[0])}`:`Neveljavna monost: priakovano eno izmed ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Preveliko: priakovano, da bo ${r.origin??"vrednost"} imelo ${o}${r.maximum.toString()} ${l.unit??"elementov"}`:`Preveliko: priakovano, da bo ${r.origin??"vrednost"} ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Premajhno: priakovano, da bo ${r.origin} imelo ${o}${r.minimum.toString()} ${l.unit}`:`Premajhno: priakovano, da bo ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Neveljaven niz: mora se zaeti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se konati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${n[o.format]??r.format}`}case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${r.divisor}`;case"unrecognized_keys":return`Neprepoznan${r.keys.length>1?"i kljui":" klju"}: ${gt(r.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${r.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${r.origin}`;default:return"Neveljaven vnos"}}};function VK(){return{localeError:UK()}}const GK=()=>{const e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}};function t(r){return e[r]??null}const n={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},i={nan:"NaN",number:"antal",array:"lista"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Ogiltig inmatning: frvntat instanceof ${r.expected}, fick ${c}`:`Ogiltig inmatning: frvntat ${o}, fick ${c}`}case"invalid_value":return r.values.length===1?`Ogiltig inmatning: frvntat ${nn(r.values[0])}`:`Ogiltigt val: frvntade en av ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Fr stor(t): frvntade ${r.origin??"vrdet"} att ha ${o}${r.maximum.toString()} ${l.unit??"element"}`:`Fr stor(t): frvntat ${r.origin??"vrdet"} att ha ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Fr lite(t): frvntade ${r.origin??"vrdet"} att ha ${o}${r.minimum.toString()} ${l.unit}`:`Fr lite(t): frvntade ${r.origin??"vrdet"} att ha ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Ogiltig strng: mste brja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig strng: mste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig strng: mste innehlla "${o.includes}"`:o.format==="regex"?`Ogiltig strng: mste matcha mnstret "${o.pattern}"`:`Ogiltig(t) ${n[o.format]??r.format}`}case"not_multiple_of":return`Ogiltigt tal: mste vara en multipel av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${gt(r.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${r.origin??"vrdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt vrde i ${r.origin??"vrdet"}`;default:return"Ogiltig input"}}};function WK(){return{localeError:GK()}}const HK=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(r){return e[r]??null}const n={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"",array:"",null:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` :  instanceof ${r.expected},  ${c}`:` :  ${o},  ${c}`}case"invalid_value":return r.values.length===1?` :  ${nn(r.values[0])}`:` :  ${gt(r.values,"|")}  `;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` :  ${r.origin??""} ${o}${r.maximum.toString()} ${l.unit??""}   `:` :  ${r.origin??""} ${o}${r.maximum.toString()}   `}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` :  ${r.origin} ${o}${r.minimum.toString()} ${l.unit}   `:` :  ${r.origin} ${o}${r.minimum.toString()}   `}case"invalid_format":{const o=r;return o.format==="starts_with"?` : "${o.prefix}"   `:o.format==="ends_with"?` : "${o.suffix}"   `:o.format==="includes"?` : "${o.includes}"   `:o.format==="regex"?` : ${o.pattern}   `:` ${n[o.format]??r.format}`}case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`  ${r.keys.length>1?"":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${r.origin}   `;default:return" "}}};function KK(){return{localeError:HK()}}const qK=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},i={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`:  instanceof ${r.expected}  ${c}`:`:  ${o}  ${c}`}case"invalid_value":return r.values.length===1?`:  ${nn(r.values[0])}`:`:  ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"":"",l=t(r.origin);return l?`: ${r.origin??""} ${o} ${r.maximum.toString()} ${l.unit??""}`:`: ${r.origin??""} ${o} ${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?"":"",l=t(r.origin);return l?`: ${r.origin} ${o} ${r.minimum.toString()} ${l.unit}`:`: ${r.origin} ${o} ${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`:  "${o.prefix}"`:o.format==="ends_with"?`:  "${o.suffix}"`:o.format==="includes"?`:  "${o.includes}" `:o.format==="regex"?`:  ${o.pattern}`:`: ${n[o.format]??r.format}`}case"not_multiple_of":return`:  ${r.divisor} `;case"unrecognized_keys":return`: ${gt(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${r.origin}`;default:return""}}};function ZK(){return{localeError:qK()}}const QK=()=>{const e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}};function t(r){return e[r]??null}const n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Geersiz deer: beklenen instanceof ${r.expected}, alnan ${c}`:`Geersiz deer: beklenen ${o}, alnan ${c}`}case"invalid_value":return r.values.length===1?`Geersiz deer: beklenen ${nn(r.values[0])}`:`Geersiz seenek: aadakilerden biri olmal: ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`ok byk: beklenen ${r.origin??"deer"} ${o}${r.maximum.toString()} ${l.unit??"e"}`:`ok byk: beklenen ${r.origin??"deer"} ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`ok kk: beklenen ${r.origin} ${o}${r.minimum.toString()} ${l.unit}`:`ok kk: beklenen ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Geersiz metin: "${o.prefix}" ile balamal`:o.format==="ends_with"?`Geersiz metin: "${o.suffix}" ile bitmeli`:o.format==="includes"?`Geersiz metin: "${o.includes}" iermeli`:o.format==="regex"?`Geersiz metin: ${o.pattern} desenine uymal`:`Geersiz ${n[o.format]??r.format}`}case"not_multiple_of":return`Geersiz say: ${r.divisor} ile tam blnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${r.keys.length>1?"lar":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`${r.origin} iinde geersiz anahtar`;case"invalid_union":return"Geersiz deer";case"invalid_element":return`${r.origin} iinde geersiz deer`;default:return"Geersiz deer"}}};function XK(){return{localeError:QK()}}const YK=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},i={nan:"NaN",number:"",array:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`  :  instanceof ${r.expected},  ${c}`:`  :  ${o},  ${c}`}case"invalid_value":return r.values.length===1?`  :  ${nn(r.values[0])}`:` :    ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` : ,  ${r.origin??""} ${l.verb} ${o}${r.maximum.toString()} ${l.unit??""}`:` : ,  ${r.origin??""}  ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` : ,  ${r.origin} ${l.verb} ${o}${r.minimum.toString()} ${l.unit}`:` : ,  ${r.origin}  ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` :    "${o.prefix}"`:o.format==="ends_with"?` :    "${o.suffix}"`:o.format==="includes"?` :   "${o.includes}"`:o.format==="regex"?` :    ${o.pattern}`:` ${n[o.format]??r.format}`}case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return"  "}}};function SR(){return{localeError:YK()}}function JK(){return SR()}const eq=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},i={nan:"NaN",number:"",array:"",null:""};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`  : instanceof ${r.expected}   ${c}  `:`  : ${o}   ${c}  `}case"invalid_value":return r.values.length===1?`  : ${nn(r.values[0])}  `:` : ${gt(r.values,"|")}     `;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` : ${r.origin??""}  ${o}${r.maximum.toString()} ${l.unit??""}   `:` : ${r.origin??""}  ${o}${r.maximum.toString()}   `}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` : ${r.origin}  ${o}${r.minimum.toString()} ${l.unit}   `:` : ${r.origin}  ${o}${r.minimum.toString()}   `}case"invalid_format":{const o=r;return o.format==="starts_with"?` : "${o.prefix}"    `:o.format==="ends_with"?` : "${o.suffix}"    `:o.format==="includes"?` : "${o.includes}"   `:o.format==="regex"?` :  ${o.pattern}    `:` ${n[o.format]??r.format}`}case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`   ${r.keys.length>1?"":""}: ${gt(r.keys," ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${r.origin}   `;default:return"  "}}};function tq(){return{localeError:eq()}}const nq=()=>{const e={string:{unit:"belgi",verb:"bolishi kerak"},file:{unit:"bayt",verb:"bolishi kerak"},array:{unit:"element",verb:"bolishi kerak"},set:{unit:"element",verb:"bolishi kerak"}};function t(r){return e[r]??null}const n={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},i={nan:"NaN",number:"raqam",array:"massiv"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`Notogri kirish: kutilgan instanceof ${r.expected}, qabul qilingan ${c}`:`Notogri kirish: kutilgan ${o}, qabul qilingan ${c}`}case"invalid_value":return r.values.length===1?`Notogri kirish: kutilgan ${nn(r.values[0])}`:`Notogri variant: quyidagilardan biri kutilgan ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Juda katta: kutilgan ${r.origin??"qiymat"} ${o}${r.maximum.toString()} ${l.unit} ${l.verb}`:`Juda katta: kutilgan ${r.origin??"qiymat"} ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Juda kichik: kutilgan ${r.origin} ${o}${r.minimum.toString()} ${l.unit} ${l.verb}`:`Juda kichik: kutilgan ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Notogri satr: "${o.prefix}" bilan boshlanishi kerak`:o.format==="ends_with"?`Notogri satr: "${o.suffix}" bilan tugashi kerak`:o.format==="includes"?`Notogri satr: "${o.includes}" ni oz ichiga olishi kerak`:o.format==="regex"?`Notogri satr: ${o.pattern} shabloniga mos kelishi kerak`:`Notogri ${n[o.format]??r.format}`}case"not_multiple_of":return`Notogri raqam: ${r.divisor} ning karralisi bolishi kerak`;case"unrecognized_keys":return`Nomalum kalit${r.keys.length>1?"lar":""}: ${gt(r.keys,", ")}`;case"invalid_key":return`${r.origin} dagi kalit notogri`;case"invalid_union":return"Notogri kirish";case"invalid_element":return`${r.origin} da notogri qiymat`;default:return"Notogri kirish"}}};function rq(){return{localeError:nq()}}const iq=()=>{const e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}};function t(r){return e[r]??null}const n={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"},i={nan:"NaN",number:"s",array:"mng"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`u vo khng hp l: mong i instanceof ${r.expected}, nhn c ${c}`:`u vo khng hp l: mong i ${o}, nhn c ${c}`}case"invalid_value":return r.values.length===1?`u vo khng hp l: mong i ${nn(r.values[0])}`:`Ty chn khng hp l: mong i mt trong cc gi tr ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`Qu ln: mong i ${r.origin??"gi tr"} ${l.verb} ${o}${r.maximum.toString()} ${l.unit??"phn t"}`:`Qu ln: mong i ${r.origin??"gi tr"} ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Qu nh: mong i ${r.origin} ${l.verb} ${o}${r.minimum.toString()} ${l.unit}`:`Qu nh: mong i ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`Chui khng hp l: phi bt u bng "${o.prefix}"`:o.format==="ends_with"?`Chui khng hp l: phi kt thc bng "${o.suffix}"`:o.format==="includes"?`Chui khng hp l: phi bao gm "${o.includes}"`:o.format==="regex"?`Chui khng hp l: phi khp vi mu ${o.pattern}`:`${n[o.format]??r.format} khng hp l`}case"not_multiple_of":return`S khng hp l: phi l bi s ca ${r.divisor}`;case"unrecognized_keys":return`Kha khng c nhn dng: ${gt(r.keys,", ")}`;case"invalid_key":return`Kha khng hp l trong ${r.origin}`;case"invalid_union":return"u vo khng hp l";case"invalid_element":return`Gi tr khng hp l trong ${r.origin}`;default:return"u vo khng hp l"}}};function aq(){return{localeError:iq()}}const oq=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:"",null:"(null)"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` instanceof ${r.expected} ${c}`:` ${o} ${c}`}case"invalid_value":return r.values.length===1?` ${nn(r.values[0])}`:` ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` ${r.origin??""} ${o}${r.maximum.toString()} ${l.unit??""}`:` ${r.origin??""} ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` ${r.origin} ${o}${r.minimum.toString()} ${l.unit}`:` ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` "${o.prefix}" `:o.format==="ends_with"?` "${o.suffix}" `:o.format==="includes"?` "${o.includes}"`:o.format==="regex"?` ${o.pattern}`:`${n[o.format]??r.format}`}case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`(key): ${gt(r.keys,", ")}`;case"invalid_key":return`${r.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${r.origin} (value)`;default:return""}}};function sq(){return{localeError:oq()}}const lq=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(r){return e[r]??null}const n={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?` instanceof ${r.expected} ${c}`:` ${o} ${c}`}case"invalid_value":return r.values.length===1?` ${nn(r.values[0])}`:` ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?` ${r.origin??""}  ${o}${r.maximum.toString()} ${l.unit??""}`:` ${r.origin??""}  ${o}${r.maximum.toString()}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?` ${r.origin}  ${o}${r.minimum.toString()} ${l.unit}`:` ${r.origin}  ${o}${r.minimum.toString()}`}case"invalid_format":{const o=r;return o.format==="starts_with"?` "${o.prefix}" `:o.format==="ends_with"?` "${o.suffix}" `:o.format==="includes"?` "${o.includes}"`:o.format==="regex"?` ${o.pattern}`:` ${n[o.format]??r.format}`}case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""}${gt(r.keys,"")}`;case"invalid_key":return`${r.origin} `;case"invalid_union":return"";case"invalid_element":return`${r.origin} `;default:return""}}};function cq(){return{localeError:lq()}}const uq=()=>{const e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}};function t(r){return e[r]??null}const n={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"},i={nan:"NaN",number:"nmb",array:"akop"};return r=>{switch(r.code){case"invalid_type":{const o=i[r.expected]??r.expected,l=on(r.input),c=i[l]??l;return/^[A-Z]/.test(r.expected)?`bwl ae: a n lti fi instanceof ${r.expected}, m a r ${c}`:`bwl ae: a n lti fi ${o}, m a r ${c}`}case"invalid_value":return r.values.length===1?`bwl ae: a n lti fi ${nn(r.values[0])}`:`yn ae: yan kan lra ${gt(r.values,"|")}`;case"too_big":{const o=r.inclusive?"<=":"<",l=t(r.origin);return l?`T p j: a n lti j p ${r.origin??"iye"} ${l.verb} ${o}${r.maximum} ${l.unit}`:`T p j: a n lti j ${o}${r.maximum}`}case"too_small":{const o=r.inclusive?">=":">",l=t(r.origin);return l?`Kr ju: a n lti j p ${r.origin} ${l.verb} ${o}${r.minimum} ${l.unit}`:`Kr ju: a n lti j ${o}${r.minimum}`}case"invalid_format":{const o=r;return o.format==="starts_with"?`r ae: gbd br pl "${o.prefix}"`:o.format==="ends_with"?`r ae: gbd par pl "${o.suffix}"`:o.format==="includes"?`r ae: gbd n "${o.includes}"`:o.format==="regex"?`r ae: gbd b pr mu ${o.pattern}`:`Ae: ${n[o.format]??r.format}`}case"not_multiple_of":return`Nmb ae: gbd j y ppn ti ${r.divisor}`;case"unrecognized_keys":return`Btn m: ${gt(r.keys,", ")}`;case"invalid_key":return`Btn ae nn ${r.origin}`;case"invalid_union":return"bwl ae";case"invalid_element":return`Iye ae nn ${r.origin}`;default:return"bwl ae"}}};function dq(){return{localeError:uq()}}const ER=Object.freeze(Object.defineProperty({__proto__:null,ar:P9,az:k9,be:I9,bg:D9,ca:L9,cs:F9,da:j9,de:U9,en:MR,eo:W9,es:K9,fa:Z9,fi:X9,fr:J9,frCA:tK,he:rK,hu:aK,hy:sK,id:cK,is:dK,it:hK,ja:pK,ka:_K,kh:yK,km:TR,ko:wK,lt:MK,mk:SK,ms:$K,nl:CK,no:AK,ota:OK,pl:RK,ps:zK,pt:NK,ru:BK,sl:VK,sv:WK,ta:KK,th:ZK,tr:XK,ua:JK,uk:SR,ur:tq,uz:rq,vi:aq,yo:dq,zhCN:sq,zhTW:cq},Symbol.toStringTag,{value:"Module"}));var BC;const $R=Symbol("ZodOutput"),PR=Symbol("ZodInput");class CR{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const i=n[0];return this._map.set(t,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const i={...this.get(n)??{}};delete i.id;const r={...i,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function W1(){return new CR}(BC=globalThis).__zod_globalRegistry??(BC.__zod_globalRegistry=W1());const vo=globalThis.__zod_globalRegistry;function kR(e,t){return new e({type:"string",...at(t)})}function AR(e,t){return new e({type:"string",coerce:!0,...at(t)})}function H1(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...at(t)})}function Qy(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...at(t)})}function K1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...at(t)})}function q1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...at(t)})}function Z1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...at(t)})}function Q1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...at(t)})}function $b(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...at(t)})}function X1(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...at(t)})}function Y1(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...at(t)})}function J1(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...at(t)})}function eT(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...at(t)})}function tT(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...at(t)})}function nT(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...at(t)})}function rT(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...at(t)})}function iT(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...at(t)})}function aT(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...at(t)})}function IR(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...at(t)})}function oT(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...at(t)})}function sT(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...at(t)})}function lT(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...at(t)})}function cT(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...at(t)})}function uT(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...at(t)})}function dT(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...at(t)})}const OR={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function DR(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...at(t)})}function zR(e,t){return new e({type:"string",format:"date",check:"string_format",...at(t)})}function LR(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...at(t)})}function RR(e,t){return new e({type:"string",format:"duration",check:"string_format",...at(t)})}function FR(e,t){return new e({type:"number",checks:[],...at(t)})}function NR(e,t){return new e({type:"number",coerce:!0,checks:[],...at(t)})}function jR(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...at(t)})}function BR(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...at(t)})}function UR(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...at(t)})}function VR(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...at(t)})}function GR(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...at(t)})}function WR(e,t){return new e({type:"boolean",...at(t)})}function HR(e,t){return new e({type:"boolean",coerce:!0,...at(t)})}function KR(e,t){return new e({type:"bigint",...at(t)})}function qR(e,t){return new e({type:"bigint",coerce:!0,...at(t)})}function ZR(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...at(t)})}function QR(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...at(t)})}function XR(e,t){return new e({type:"symbol",...at(t)})}function YR(e,t){return new e({type:"undefined",...at(t)})}function JR(e,t){return new e({type:"null",...at(t)})}function eF(e){return new e({type:"any"})}function tF(e){return new e({type:"unknown"})}function nF(e,t){return new e({type:"never",...at(t)})}function rF(e,t){return new e({type:"void",...at(t)})}function iF(e,t){return new e({type:"date",...at(t)})}function aF(e,t){return new e({type:"date",coerce:!0,...at(t)})}function oF(e,t){return new e({type:"nan",...at(t)})}function au(e,t){return new L1({check:"less_than",...at(t),value:e,inclusive:!1})}function bo(e,t){return new L1({check:"less_than",...at(t),value:e,inclusive:!0})}function ou(e,t){return new R1({check:"greater_than",...at(t),value:e,inclusive:!1})}function ha(e,t){return new R1({check:"greater_than",...at(t),value:e,inclusive:!0})}function fT(e){return ou(0,e)}function hT(e){return au(0,e)}function mT(e){return bo(0,e)}function pT(e){return ha(0,e)}function Zh(e,t){return new G3({check:"multiple_of",...at(t),value:e})}function rm(e,t){return new K3({check:"max_size",...at(t),maximum:e})}function su(e,t){return new q3({check:"min_size",...at(t),minimum:e})}function k_(e,t){return new Z3({check:"size_equals",...at(t),size:e})}function A_(e,t){return new Q3({check:"max_length",...at(t),maximum:e})}function jd(e,t){return new X3({check:"min_length",...at(t),minimum:e})}function I_(e,t){return new Y3({check:"length_equals",...at(t),length:e})}function Pb(e,t){return new J3({check:"string_format",format:"regex",...at(t),pattern:e})}function Cb(e){return new eL({check:"string_format",format:"lowercase",...at(e)})}function kb(e){return new tL({check:"string_format",format:"uppercase",...at(e)})}function Ab(e,t){return new nL({check:"string_format",format:"includes",...at(t),includes:e})}function Ib(e,t){return new rL({check:"string_format",format:"starts_with",...at(t),prefix:e})}function Ob(e,t){return new iL({check:"string_format",format:"ends_with",...at(t),suffix:e})}function gT(e,t,n){return new aL({check:"property",property:e,schema:t,...at(n)})}function Db(e,t){return new oL({check:"mime_type",mime:e,...at(t)})}function Wl(e){return new sL({check:"overwrite",tx:e})}function zb(e){return Wl(t=>t.normalize(e))}function Lb(){return Wl(e=>e.trim())}function Rb(){return Wl(e=>e.toLowerCase())}function Fb(){return Wl(e=>e.toUpperCase())}function Nb(){return Wl(e=>Bz(e))}function sF(e,t,n){return new e({type:"array",element:t,...at(n)})}function fq(e,t,n){return new e({type:"union",options:t,...at(n)})}function hq(e,t,n){return new e({type:"union",options:t,inclusive:!1,...at(n)})}function mq(e,t,n,i){return new e({type:"union",options:n,discriminator:t,...at(i)})}function pq(e,t,n){return new e({type:"intersection",left:t,right:n})}function gq(e,t,n,i){const r=n instanceof hn,o=r?i:n,l=r?n:null;return new e({type:"tuple",items:t,rest:l,...at(o)})}function _q(e,t,n,i){return new e({type:"record",keyType:t,valueType:n,...at(i)})}function vq(e,t,n,i){return new e({type:"map",keyType:t,valueType:n,...at(i)})}function yq(e,t,n){return new e({type:"set",valueType:t,...at(n)})}function bq(e,t,n){const i=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new e({type:"enum",entries:i,...at(n)})}function wq(e,t,n){return new e({type:"enum",entries:t,...at(n)})}function xq(e,t,n){return new e({type:"literal",values:Array.isArray(t)?t:[t],...at(n)})}function lF(e,t){return new e({type:"file",...at(t)})}function Mq(e,t){return new e({type:"transform",transform:t})}function Tq(e,t){return new e({type:"optional",innerType:t})}function Sq(e,t){return new e({type:"nullable",innerType:t})}function Eq(e,t,n){return new e({type:"default",innerType:t,get defaultValue(){return typeof n=="function"?n():Mb(n)}})}function $q(e,t,n){return new e({type:"nonoptional",innerType:t,...at(n)})}function Pq(e,t){return new e({type:"success",innerType:t})}function Cq(e,t,n){return new e({type:"catch",innerType:t,catchValue:typeof n=="function"?n:()=>n})}function kq(e,t,n){return new e({type:"pipe",in:t,out:n})}function Aq(e,t){return new e({type:"readonly",innerType:t})}function Iq(e,t,n){return new e({type:"template_literal",parts:t,...at(n)})}function Oq(e,t){return new e({type:"lazy",getter:t})}function Dq(e,t){return new e({type:"promise",innerType:t})}function cF(e,t,n){const i=at(n);return i.abort??(i.abort=!0),new e({type:"custom",check:"custom",fn:t,...i})}function uF(e,t,n){return new e({type:"custom",check:"custom",fn:t,...at(n)})}function dF(e){const t=fF(n=>(n.addIssue=i=>{if(typeof i=="string")n.issues.push(Kh(i,n.value,t._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Kh(r))}},e(n.value,n)));return t}function fF(e,t){const n=new Fr({check:"custom",...at(t)});return n._zod.check=e,n}function hF(e){const t=new Fr({check:"describe"});return t._zod.onattach=[n=>{const i=vo.get(n)??{};vo.add(n,{...i,description:e})}],t._zod.check=()=>{},t}function mF(e){const t=new Fr({check:"meta"});return t._zod.onattach=[n=>{const i=vo.get(n)??{};vo.add(n,{...i,...e})}],t._zod.check=()=>{},t}function pF(e,t){const n=at(t);let i=n.truthy??["true","1","yes","on","y","enabled"],r=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(i=i.map(_=>typeof _=="string"?_.toLowerCase():_),r=r.map(_=>typeof _=="string"?_.toLowerCase():_));const o=new Set(i),l=new Set(r),c=e.Codec??G1,d=e.Boolean??j1,f=e.String??C_,p=new f({type:"string",error:n.error}),h=new d({type:"boolean",error:n.error}),m=new c({type:"pipe",in:p,out:h,transform:((_,v)=>{let b=_;return n.case!=="sensitive"&&(b=b.toLowerCase()),o.has(b)?!0:l.has(b)?!1:(v.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...l],input:v.value,inst:m,continue:!1}),{})}),reverseTransform:((_,v)=>_===!0?i[0]||"true":r[0]||"false"),error:n.error});return m}function O_(e,t,n,i={}){const r=at(i),o={...at(i),check:"string_format",type:"string",format:t,fn:typeof n=="function"?n:c=>n.test(c),...r};return n instanceof RegExp&&(o.pattern=n),new e(o)}function Qh(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??vo,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function br(e,t,n={path:[],schemaPath:[]}){var i;const r=e._zod.def,o=t.seen.get(e);if(o)return o.count++,n.schemaPath.includes(e)&&(o.cycle=n.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,l);const c=e._zod.toJSONSchema?.();if(c)l.schema=c;else{const p={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,l.schema,p);else{const m=l.schema,_=t.processors[r.type];if(!_)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);_(e,t,m,p)}const h=e._zod.parent;h&&(l.ref||(l.ref=h),br(h,t,p),t.seen.get(h).isParent=!0)}const d=t.metadataRegistry.get(e);return d&&Object.assign(l.schema,d),t.io==="input"&&ta(e)&&(delete l.schema.examples,delete l.schema.default),t.io==="input"&&l.schema._prefault&&((i=l.schema).default??(i.default=l.schema._prefault)),delete l.schema._prefault,t.seen.get(e).schema}function Xh(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const l of e.seen.entries()){const c=e.metadataRegistry.get(l[0])?.id;if(c){const d=i.get(c);if(d&&d!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(c,l[0])}}const r=l=>{const c=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const h=e.external.registry.get(l[0])?.id,m=e.external.uri??(v=>v);if(h)return{ref:m(h)};const _=l[1].defId??l[1].schema.id??`schema${e.counter++}`;return l[1].defId=_,{defId:_,ref:`${m("__shared")}#/${c}/${_}`}}if(l[1]===n)return{ref:"#"};const f=`#/${c}/`,p=l[1].schema.id??`__schema${e.counter++}`;return{defId:p,ref:f+p}},o=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:d,defId:f}=r(l);c.def={...c.schema},f&&(c.defId=f);const p=c.schema;for(const h in p)delete p[h];p.$ref=d};if(e.cycles==="throw")for(const l of e.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of e.seen.entries()){const c=l[1];if(t===l[0]){o(l);continue}if(e.external){const f=e.external.registry.get(l[0])?.id;if(t!==l[0]&&f){o(l);continue}}if(e.metadataRegistry.get(l[0])?.id){o(l);continue}if(c.cycle){o(l);continue}if(c.count>1&&e.reused==="ref"){o(l);continue}}}function Yh(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=l=>{const c=e.seen.get(l);if(c.ref===null)return;const d=c.def??c.schema,f={...d},p=c.ref;if(c.ref=null,p){i(p);const m=e.seen.get(p),_=m.schema;if(_.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(d.allOf=d.allOf??[],d.allOf.push(_)):Object.assign(d,_),Object.assign(d,f),l._zod.parent===p)for(const b in d)b==="$ref"||b==="allOf"||b in f||delete d[b];if(_.$ref)for(const b in d)b==="$ref"||b==="allOf"||b in m.def&&JSON.stringify(d[b])===JSON.stringify(m.def[b])&&delete d[b]}const h=l._zod.parent;if(h&&h!==p){i(h);const m=e.seen.get(h);if(m?.schema.$ref&&(d.$ref=m.schema.$ref,m.def))for(const _ in d)_==="$ref"||_==="allOf"||_ in m.def&&JSON.stringify(d[_])===JSON.stringify(m.def[_])&&delete d[_]}e.override({zodSchema:l,jsonSchema:d,path:c.path??[]})};for(const l of[...e.seen.entries()].reverse())i(l[0]);const r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const l=e.external.registry.get(t)?.id;if(!l)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(l)}Object.assign(r,n.def??n.schema);const o=e.external?.defs??{};for(const l of e.seen.entries()){const c=l[1];c.def&&c.defId&&(o[c.defId]=c.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?r.$defs=o:r.definitions=o);try{const l=JSON.parse(JSON.stringify(r));return Object.defineProperty(l,"~standard",{value:{...t["~standard"],jsonSchema:{input:u_(t,"input",e.processors),output:u_(t,"output",e.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function ta(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const i=e._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return ta(i.element,n);if(i.type==="set")return ta(i.valueType,n);if(i.type==="lazy")return ta(i.getter(),n);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return ta(i.innerType,n);if(i.type==="intersection")return ta(i.left,n)||ta(i.right,n);if(i.type==="record"||i.type==="map")return ta(i.keyType,n)||ta(i.valueType,n);if(i.type==="pipe")return ta(i.in,n)||ta(i.out,n);if(i.type==="object"){for(const r in i.shape)if(ta(i.shape[r],n))return!0;return!1}if(i.type==="union"){for(const r of i.options)if(ta(r,n))return!0;return!1}if(i.type==="tuple"){for(const r of i.items)if(ta(r,n))return!0;return!!(i.rest&&ta(i.rest,n))}return!1}const gF=(e,t={})=>n=>{const i=Qh({...n,processors:t});return br(e,i),Xh(i,e),Yh(i,e)},u_=(e,t,n={})=>i=>{const{libraryOptions:r,target:o}=i??{},l=Qh({...r??{},target:o,io:t,processors:n});return br(e,l),Xh(l,e),Yh(l,e)},zq={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},_F=(e,t,n,i)=>{const r=n;r.type="string";const{minimum:o,maximum:l,format:c,patterns:d,contentEncoding:f}=e._zod.bag;if(typeof o=="number"&&(r.minLength=o),typeof l=="number"&&(r.maxLength=l),c&&(r.format=zq[c]??c,r.format===""&&delete r.format,c==="time"&&delete r.format),f&&(r.contentEncoding=f),d&&d.size>0){const p=[...d];p.length===1?r.pattern=p[0].source:p.length>1&&(r.allOf=[...p.map(h=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:h.source}))])}},vF=(e,t,n,i)=>{const r=n,{minimum:o,maximum:l,format:c,multipleOf:d,exclusiveMaximum:f,exclusiveMinimum:p}=e._zod.bag;typeof c=="string"&&c.includes("int")?r.type="integer":r.type="number",typeof p=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.minimum=p,r.exclusiveMinimum=!0):r.exclusiveMinimum=p),typeof o=="number"&&(r.minimum=o,typeof p=="number"&&t.target!=="draft-04"&&(p>=o?delete r.minimum:delete r.exclusiveMinimum)),typeof f=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.maximum=f,r.exclusiveMaximum=!0):r.exclusiveMaximum=f),typeof l=="number"&&(r.maximum=l,typeof f=="number"&&t.target!=="draft-04"&&(f<=l?delete r.maximum:delete r.exclusiveMaximum)),typeof d=="number"&&(r.multipleOf=d)},yF=(e,t,n,i)=>{n.type="boolean"},bF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},wF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},xF=(e,t,n,i)=>{t.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},MF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},TF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},SF=(e,t,n,i)=>{n.not={}},EF=(e,t,n,i)=>{},$F=(e,t,n,i)=>{},PF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},CF=(e,t,n,i)=>{const r=e._zod.def,o=wb(r.entries);o.every(l=>typeof l=="number")&&(n.type="number"),o.every(l=>typeof l=="string")&&(n.type="string"),n.enum=o},kF=(e,t,n,i)=>{const r=e._zod.def,o=[];for(const l of r.values)if(l===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof l=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(l))}else o.push(l);if(o.length!==0)if(o.length===1){const l=o[0];n.type=l===null?"null":typeof l,t.target==="draft-04"||t.target==="openapi-3.0"?n.enum=[l]:n.const=l}else o.every(l=>typeof l=="number")&&(n.type="number"),o.every(l=>typeof l=="string")&&(n.type="string"),o.every(l=>typeof l=="boolean")&&(n.type="boolean"),o.every(l=>l===null)&&(n.type="null"),n.enum=o},AF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},IF=(e,t,n,i)=>{const r=n,o=e._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");r.type="string",r.pattern=o.source},OF=(e,t,n,i)=>{const r=n,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:l,maximum:c,mime:d}=e._zod.bag;l!==void 0&&(o.minLength=l),c!==void 0&&(o.maxLength=c),d?d.length===1?(o.contentMediaType=d[0],Object.assign(r,o)):(Object.assign(r,o),r.anyOf=d.map(f=>({contentMediaType:f}))):Object.assign(r,o)},DF=(e,t,n,i)=>{n.type="boolean"},zF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},LF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},RF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},FF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},NF=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},jF=(e,t,n,i)=>{const r=n,o=e._zod.def,{minimum:l,maximum:c}=e._zod.bag;typeof l=="number"&&(r.minItems=l),typeof c=="number"&&(r.maxItems=c),r.type="array",r.items=br(o.element,t,{...i,path:[...i.path,"items"]})},BF=(e,t,n,i)=>{const r=n,o=e._zod.def;r.type="object",r.properties={};const l=o.shape;for(const f in l)r.properties[f]=br(l[f],t,{...i,path:[...i.path,"properties",f]});const c=new Set(Object.keys(l)),d=new Set([...c].filter(f=>{const p=o.shape[f]._zod;return t.io==="input"?p.optin===void 0:p.optout===void 0}));d.size>0&&(r.required=Array.from(d)),o.catchall?._zod.def.type==="never"?r.additionalProperties=!1:o.catchall?o.catchall&&(r.additionalProperties=br(o.catchall,t,{...i,path:[...i.path,"additionalProperties"]})):t.io==="output"&&(r.additionalProperties=!1)},_T=(e,t,n,i)=>{const r=e._zod.def,o=r.inclusive===!1,l=r.options.map((c,d)=>br(c,t,{...i,path:[...i.path,o?"oneOf":"anyOf",d]}));o?n.oneOf=l:n.anyOf=l},UF=(e,t,n,i)=>{const r=e._zod.def,o=br(r.left,t,{...i,path:[...i.path,"allOf",0]}),l=br(r.right,t,{...i,path:[...i.path,"allOf",1]}),c=f=>"allOf"in f&&Object.keys(f).length===1,d=[...c(o)?o.allOf:[o],...c(l)?l.allOf:[l]];n.allOf=d},VF=(e,t,n,i)=>{const r=n,o=e._zod.def;r.type="array";const l=t.target==="draft-2020-12"?"prefixItems":"items",c=t.target==="draft-2020-12"||t.target==="openapi-3.0"?"items":"additionalItems",d=o.items.map((m,_)=>br(m,t,{...i,path:[...i.path,l,_]})),f=o.rest?br(o.rest,t,{...i,path:[...i.path,c,...t.target==="openapi-3.0"?[o.items.length]:[]]}):null;t.target==="draft-2020-12"?(r.prefixItems=d,f&&(r.items=f)):t.target==="openapi-3.0"?(r.items={anyOf:d},f&&r.items.anyOf.push(f),r.minItems=d.length,f||(r.maxItems=d.length)):(r.items=d,f&&(r.additionalItems=f));const{minimum:p,maximum:h}=e._zod.bag;typeof p=="number"&&(r.minItems=p),typeof h=="number"&&(r.maxItems=h)},GF=(e,t,n,i)=>{const r=n,o=e._zod.def;r.type="object",(t.target==="draft-07"||t.target==="draft-2020-12")&&(r.propertyNames=br(o.keyType,t,{...i,path:[...i.path,"propertyNames"]})),r.additionalProperties=br(o.valueType,t,{...i,path:[...i.path,"additionalProperties"]});const l=o.keyType._zod.def;if(l.type==="enum"){const d=wb(l.entries).filter(f=>typeof f=="string"||typeof f=="number");d.length>0&&(r.required=d)}},WF=(e,t,n,i)=>{const r=e._zod.def,o=br(r.innerType,t,i),l=t.seen.get(e);t.target==="openapi-3.0"?(l.ref=r.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},HF=(e,t,n,i)=>{const r=e._zod.def;br(r.innerType,t,i);const o=t.seen.get(e);o.ref=r.innerType},KF=(e,t,n,i)=>{const r=e._zod.def;br(r.innerType,t,i);const o=t.seen.get(e);o.ref=r.innerType,n.default=JSON.parse(JSON.stringify(r.defaultValue))},qF=(e,t,n,i)=>{const r=e._zod.def;br(r.innerType,t,i);const o=t.seen.get(e);o.ref=r.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},ZF=(e,t,n,i)=>{const r=e._zod.def;br(r.innerType,t,i);const o=t.seen.get(e);o.ref=r.innerType;let l;try{l=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},QF=(e,t,n,i)=>{const r=e._zod.def,o=t.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;br(o,t,i);const l=t.seen.get(e);l.ref=o},XF=(e,t,n,i)=>{const r=e._zod.def;br(r.innerType,t,i);const o=t.seen.get(e);o.ref=r.innerType,n.readOnly=!0},YF=(e,t,n,i)=>{const r=e._zod.def;br(r.innerType,t,i);const o=t.seen.get(e);o.ref=r.innerType},vT=(e,t,n,i)=>{const r=e._zod.def;br(r.innerType,t,i);const o=t.seen.get(e);o.ref=r.innerType},JF=(e,t,n,i)=>{const r=e._zod.innerType;br(r,t,i);const o=t.seen.get(e);o.ref=r},tM={string:_F,number:vF,boolean:yF,bigint:bF,symbol:wF,null:xF,undefined:MF,void:TF,never:SF,any:EF,unknown:$F,date:PF,enum:CF,literal:kF,nan:AF,template_literal:IF,file:OF,success:DF,custom:zF,function:LF,transform:RF,map:FF,set:NF,array:jF,object:BF,union:_T,intersection:UF,tuple:VF,record:GF,nullable:WF,nonoptional:HF,default:KF,prefault:qF,catch:ZF,pipe:QF,readonly:XF,promise:YF,optional:vT,lazy:JF};function e4(e,t){if("_idmap"in e){const i=e,r=Qh({...t,processors:tM}),o={};for(const d of i._idmap.entries()){const[f,p]=d;br(p,r)}const l={},c={registry:i,uri:t?.uri,defs:o};r.external=c;for(const d of i._idmap.entries()){const[f,p]=d;Xh(r,p),l[f]=Yh(r,p)}if(Object.keys(o).length>0){const d=r.target==="draft-2020-12"?"$defs":"definitions";l.__shared={[d]:o}}return{schemas:l}}const n=Qh({...t,processors:tM});return br(e,n),Xh(n,e),Yh(n,e)}class Lq{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(t){this.ctx.counter=t}get seen(){return this.ctx.seen}constructor(t){let n=t?.target??"draft-2020-12";n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),this.ctx=Qh({processors:tM,target:n,...t?.metadata&&{metadata:t.metadata},...t?.unrepresentable&&{unrepresentable:t.unrepresentable},...t?.override&&{override:t.override},...t?.io&&{io:t.io}})}process(t,n={path:[],schemaPath:[]}){return br(t,this.ctx,n)}emit(t,n){n&&(n.cycles&&(this.ctx.cycles=n.cycles),n.reused&&(this.ctx.reused=n.reused),n.external&&(this.ctx.external=n.external)),Xh(this.ctx,t);const i=Yh(this.ctx,t),{"~standard":r,...o}=i;return o}}const Rq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Fq=Object.freeze(Object.defineProperty({__proto__:null,$ZodAny:UL,$ZodArray:KL,$ZodAsyncError:Ad,$ZodBase64:kL,$ZodBase64URL:IL,$ZodBigInt:B1,$ZodBigIntFormat:FL,$ZodBoolean:j1,$ZodCIDRv4:PL,$ZodCIDRv6:CL,$ZodCUID:gL,$ZodCUID2:_L,$ZodCatch:mR,$ZodCheck:Fr,$ZodCheckBigIntFormat:H3,$ZodCheckEndsWith:iL,$ZodCheckGreaterThan:R1,$ZodCheckIncludes:nL,$ZodCheckLengthEquals:Y3,$ZodCheckLessThan:L1,$ZodCheckLowerCase:eL,$ZodCheckMaxLength:Q3,$ZodCheckMaxSize:K3,$ZodCheckMimeType:oL,$ZodCheckMinLength:X3,$ZodCheckMinSize:q3,$ZodCheckMultipleOf:G3,$ZodCheckNumberFormat:W3,$ZodCheckOverwrite:sL,$ZodCheckProperty:aL,$ZodCheckRegex:J3,$ZodCheckSizeEquals:Z3,$ZodCheckStartsWith:rL,$ZodCheckStringFormat:P_,$ZodCheckUpperCase:tL,$ZodCodec:G1,$ZodCustom:xR,$ZodCustomStringFormat:LL,$ZodDate:HL,$ZodDefault:uR,$ZodDiscriminatedUnion:JL,$ZodE164:OL,$ZodEmail:fL,$ZodEmoji:mL,$ZodEncodeError:bb,$ZodEnum:iR,$ZodError:x1,$ZodExactOptional:lR,$ZodFile:oR,$ZodFunction:yR,$ZodGUID:uL,$ZodIPv4:SL,$ZodIPv6:EL,$ZodISODate:xL,$ZodISODateTime:wL,$ZodISODuration:TL,$ZodISOTime:ML,$ZodIntersection:eR,$ZodJWT:zL,$ZodKSUID:bL,$ZodLazy:wR,$ZodLiteral:aR,$ZodMAC:$L,$ZodMap:nR,$ZodNaN:pR,$ZodNanoID:pL,$ZodNever:GL,$ZodNonOptional:fR,$ZodNull:BL,$ZodNullable:cR,$ZodNumber:N1,$ZodNumberFormat:RL,$ZodObject:QL,$ZodObjectJIT:XL,$ZodOptional:V1,$ZodPipe:gR,$ZodPrefault:dR,$ZodPromise:bR,$ZodReadonly:_R,$ZodRealError:Ha,$ZodRecord:tR,$ZodRegistry:CR,$ZodSet:rR,$ZodString:C_,$ZodStringFormat:wr,$ZodSuccess:hR,$ZodSymbol:NL,$ZodTemplateLiteral:vR,$ZodTransform:sR,$ZodTuple:U1,$ZodType:hn,$ZodULID:vL,$ZodURL:hL,$ZodUUID:dL,$ZodUndefined:jL,$ZodUnion:Eb,$ZodUnknown:VL,$ZodVoid:WL,$ZodXID:yL,$ZodXor:YL,$brand:Nz,$constructor:Pe,$input:PR,$output:$R,Doc:lL,JSONSchema:Rq,JSONSchemaGenerator:Lq,NEVER:Fz,TimePrecision:OR,_any:eF,_array:sF,_base64:lT,_base64url:cT,_bigint:KR,_boolean:WR,_catch:Cq,_check:fF,_cidrv4:oT,_cidrv6:sT,_coercedBigint:qR,_coercedBoolean:HR,_coercedDate:aF,_coercedNumber:NR,_coercedString:AR,_cuid:J1,_cuid2:eT,_custom:cF,_date:iF,_decode:E1,_decodeAsync:P1,_default:Eq,_discriminatedUnion:mq,_e164:uT,_email:H1,_emoji:X1,_encode:S1,_encodeAsync:$1,_endsWith:Ob,_enum:bq,_file:lF,_float32:BR,_float64:UR,_gt:ou,_gte:ha,_guid:Qy,_includes:Ab,_int:jR,_int32:VR,_int64:ZR,_intersection:pq,_ipv4:iT,_ipv6:aT,_isoDate:zR,_isoDateTime:DR,_isoDuration:RR,_isoTime:LR,_jwt:dT,_ksuid:rT,_lazy:Oq,_length:I_,_literal:xq,_lowercase:Cb,_lt:au,_lte:bo,_mac:IR,_map:vq,_max:bo,_maxLength:A_,_maxSize:rm,_mime:Db,_min:ha,_minLength:jd,_minSize:su,_multipleOf:Zh,_nan:oF,_nanoid:Y1,_nativeEnum:wq,_negative:hT,_never:nF,_nonnegative:pT,_nonoptional:$q,_nonpositive:mT,_normalize:zb,_null:JR,_nullable:Sq,_number:FR,_optional:Tq,_overwrite:Wl,_parse:x_,_parseAsync:M_,_pipe:kq,_positive:fT,_promise:Dq,_property:gT,_readonly:Aq,_record:_q,_refine:uF,_regex:Pb,_safeDecode:k1,_safeDecodeAsync:I1,_safeEncode:C1,_safeEncodeAsync:A1,_safeParse:T_,_safeParseAsync:S_,_set:yq,_size:k_,_slugify:Nb,_startsWith:Ib,_string:kR,_stringFormat:O_,_stringbool:pF,_success:Pq,_superRefine:dF,_symbol:XR,_templateLiteral:Iq,_toLowerCase:Rb,_toUpperCase:Fb,_transform:Mq,_trim:Lb,_tuple:gq,_uint32:GR,_uint64:QR,_ulid:tT,_undefined:YR,_union:fq,_unknown:tF,_uppercase:kb,_url:$b,_uuid:K1,_uuidv4:q1,_uuidv6:Z1,_uuidv7:Q1,_void:rF,_xid:nT,_xor:hq,clone:To,config:Wi,createStandardJSONSchemaMethod:u_,createToJSONSchemaMethod:gF,decode:QH,decodeAsync:YH,describe:hF,encode:ZH,encodeAsync:XH,extractDefs:Xh,finalize:Yh,flattenError:M1,formatError:T1,globalConfig:Hy,globalRegistry:vo,initializeContext:Qh,isValidBase64:F1,isValidBase64URL:AL,isValidJWT:DL,locales:ER,meta:mF,parse:Yx,parseAsync:Jx,prettifyError:o3,process:br,regexes:z1,registry:W1,safeDecode:e9,safeDecodeAsync:n9,safeEncode:JH,safeEncodeAsync:t9,safeParse:s3,safeParseAsync:l3,toDotPath:a3,toJSONSchema:e4,treeifyError:i3,util:n3,version:cL},Symbol.toStringTag,{value:"Module"})),Nq=Object.freeze(Object.defineProperty({__proto__:null,endsWith:Ob,gt:ou,gte:ha,includes:Ab,length:I_,lowercase:Cb,lt:au,lte:bo,maxLength:A_,maxSize:rm,mime:Db,minLength:jd,minSize:su,multipleOf:Zh,negative:hT,nonnegative:pT,nonpositive:mT,normalize:zb,overwrite:Wl,positive:fT,property:gT,regex:Pb,size:k_,slugify:Nb,startsWith:Ib,toLowerCase:Rb,toUpperCase:Fb,trim:Lb,uppercase:kb},Symbol.toStringTag,{value:"Module"})),yT=Pe("ZodISODateTime",(e,t)=>{wL.init(e,t),xr.init(e,t)});function t4(e){return DR(yT,e)}const bT=Pe("ZodISODate",(e,t)=>{xL.init(e,t),xr.init(e,t)});function n4(e){return zR(bT,e)}const wT=Pe("ZodISOTime",(e,t)=>{ML.init(e,t),xr.init(e,t)});function r4(e){return LR(wT,e)}const xT=Pe("ZodISODuration",(e,t)=>{TL.init(e,t),xr.init(e,t)});function i4(e){return RR(xT,e)}const a4=Object.freeze(Object.defineProperty({__proto__:null,ZodISODate:bT,ZodISODateTime:yT,ZodISODuration:xT,ZodISOTime:wT,date:n4,datetime:t4,duration:i4,time:r4},Symbol.toStringTag,{value:"Module"})),o4=(e,t)=>{x1.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>T1(e,n)},flatten:{value:n=>M1(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Ky,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Ky,2)}},isEmpty:{get(){return e.issues.length===0}}})},jq=Pe("ZodError",o4),Ka=Pe("ZodError",o4,{Parent:Error}),s4=x_(Ka),l4=M_(Ka),c4=T_(Ka),u4=S_(Ka),d4=S1(Ka),f4=E1(Ka),h4=$1(Ka),m4=P1(Ka),p4=C1(Ka),g4=k1(Ka),_4=A1(Ka),v4=I1(Ka),pn=Pe("ZodType",(e,t)=>(hn.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:u_(e,"input"),output:u_(e,"output")}}),e.toJSONSchema=gF(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(qs(t,{checks:[...t.checks??[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),e.with=e.check,e.clone=(n,i)=>To(e,n,i),e.brand=()=>e,e.register=((n,i)=>(n.add(e,i),e)),e.parse=(n,i)=>s4(e,n,i,{callee:e.parse}),e.safeParse=(n,i)=>c4(e,n,i),e.parseAsync=async(n,i)=>l4(e,n,i,{callee:e.parseAsync}),e.safeParseAsync=async(n,i)=>u4(e,n,i),e.spa=e.safeParseAsync,e.encode=(n,i)=>d4(e,n,i),e.decode=(n,i)=>f4(e,n,i),e.encodeAsync=async(n,i)=>h4(e,n,i),e.decodeAsync=async(n,i)=>m4(e,n,i),e.safeEncode=(n,i)=>p4(e,n,i),e.safeDecode=(n,i)=>g4(e,n,i),e.safeEncodeAsync=async(n,i)=>_4(e,n,i),e.safeDecodeAsync=async(n,i)=>v4(e,n,i),e.refine=(n,i)=>e.check(fS(n,i)),e.superRefine=n=>e.check(hS(n)),e.overwrite=n=>e.check(Wl(n)),e.optional=()=>f_(e),e.exactOptional=()=>qT(e),e.nullable=()=>h_(e),e.nullish=()=>f_(h_(e)),e.nonoptional=n=>eS(e,n),e.array=()=>N_(e),e.or=n=>o0([e,n]),e.and=n=>FT(e,n),e.transform=n=>m_(e,l0(n)),e.default=n=>XT(e,n),e.prefault=n=>JT(e,n),e.catch=n=>rS(e,n),e.pipe=n=>m_(e,n),e.readonly=()=>oS(e),e.describe=n=>{const i=e.clone();return vo.add(i,{description:n}),i},Object.defineProperty(e,"description",{get(){return vo.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return vo.get(e);const i=e.clone();return vo.add(i,n[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),jb=Pe("_ZodString",(e,t)=>{C_.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(i,r,o)=>_F(e,i,r);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...i)=>e.check(Pb(...i)),e.includes=(...i)=>e.check(Ab(...i)),e.startsWith=(...i)=>e.check(Ib(...i)),e.endsWith=(...i)=>e.check(Ob(...i)),e.min=(...i)=>e.check(jd(...i)),e.max=(...i)=>e.check(A_(...i)),e.length=(...i)=>e.check(I_(...i)),e.nonempty=(...i)=>e.check(jd(1,...i)),e.lowercase=i=>e.check(Cb(i)),e.uppercase=i=>e.check(kb(i)),e.trim=()=>e.check(Lb()),e.normalize=(...i)=>e.check(zb(...i)),e.toLowerCase=()=>e.check(Rb()),e.toUpperCase=()=>e.check(Fb()),e.slugify=()=>e.check(Nb())}),D_=Pe("ZodString",(e,t)=>{C_.init(e,t),jb.init(e,t),e.email=n=>e.check(H1(Bb,n)),e.url=n=>e.check($b(z_,n)),e.jwt=n=>e.check(dT(n0,n)),e.emoji=n=>e.check(X1(Ub,n)),e.guid=n=>e.check(Qy(d_,n)),e.uuid=n=>e.check(K1(Bs,n)),e.uuidv4=n=>e.check(q1(Bs,n)),e.uuidv6=n=>e.check(Z1(Bs,n)),e.uuidv7=n=>e.check(Q1(Bs,n)),e.nanoid=n=>e.check(Y1(Vb,n)),e.guid=n=>e.check(Qy(d_,n)),e.cuid=n=>e.check(J1(Gb,n)),e.cuid2=n=>e.check(eT(Wb,n)),e.ulid=n=>e.check(tT(Hb,n)),e.base64=n=>e.check(lT(Jb,n)),e.base64url=n=>e.check(cT(e0,n)),e.xid=n=>e.check(nT(Kb,n)),e.ksuid=n=>e.check(rT(qb,n)),e.ipv4=n=>e.check(iT(Zb,n)),e.ipv6=n=>e.check(aT(Qb,n)),e.cidrv4=n=>e.check(oT(Xb,n)),e.cidrv6=n=>e.check(sT(Yb,n)),e.e164=n=>e.check(uT(t0,n)),e.datetime=n=>e.check(t4(n)),e.date=n=>e.check(n4(n)),e.time=n=>e.check(r4(n)),e.duration=n=>e.check(i4(n))});function Xy(e){return kR(D_,e)}const xr=Pe("ZodStringFormat",(e,t)=>{wr.init(e,t),jb.init(e,t)}),Bb=Pe("ZodEmail",(e,t)=>{fL.init(e,t),xr.init(e,t)});function y4(e){return H1(Bb,e)}const d_=Pe("ZodGUID",(e,t)=>{uL.init(e,t),xr.init(e,t)});function b4(e){return Qy(d_,e)}const Bs=Pe("ZodUUID",(e,t)=>{dL.init(e,t),xr.init(e,t)});function w4(e){return K1(Bs,e)}function x4(e){return q1(Bs,e)}function M4(e){return Z1(Bs,e)}function T4(e){return Q1(Bs,e)}const z_=Pe("ZodURL",(e,t)=>{hL.init(e,t),xr.init(e,t)});function S4(e){return $b(z_,e)}function E4(e){return $b(z_,{protocol:/^https?$/,hostname:$3,...at(e)})}const Ub=Pe("ZodEmoji",(e,t)=>{mL.init(e,t),xr.init(e,t)});function $4(e){return X1(Ub,e)}const Vb=Pe("ZodNanoID",(e,t)=>{pL.init(e,t),xr.init(e,t)});function P4(e){return Y1(Vb,e)}const Gb=Pe("ZodCUID",(e,t)=>{gL.init(e,t),xr.init(e,t)});function C4(e){return J1(Gb,e)}const Wb=Pe("ZodCUID2",(e,t)=>{_L.init(e,t),xr.init(e,t)});function k4(e){return eT(Wb,e)}const Hb=Pe("ZodULID",(e,t)=>{vL.init(e,t),xr.init(e,t)});function A4(e){return tT(Hb,e)}const Kb=Pe("ZodXID",(e,t)=>{yL.init(e,t),xr.init(e,t)});function I4(e){return nT(Kb,e)}const qb=Pe("ZodKSUID",(e,t)=>{bL.init(e,t),xr.init(e,t)});function O4(e){return rT(qb,e)}const Zb=Pe("ZodIPv4",(e,t)=>{SL.init(e,t),xr.init(e,t)});function D4(e){return iT(Zb,e)}const MT=Pe("ZodMAC",(e,t)=>{$L.init(e,t),xr.init(e,t)});function z4(e){return IR(MT,e)}const Qb=Pe("ZodIPv6",(e,t)=>{EL.init(e,t),xr.init(e,t)});function L4(e){return aT(Qb,e)}const Xb=Pe("ZodCIDRv4",(e,t)=>{PL.init(e,t),xr.init(e,t)});function R4(e){return oT(Xb,e)}const Yb=Pe("ZodCIDRv6",(e,t)=>{CL.init(e,t),xr.init(e,t)});function F4(e){return sT(Yb,e)}const Jb=Pe("ZodBase64",(e,t)=>{kL.init(e,t),xr.init(e,t)});function N4(e){return lT(Jb,e)}const e0=Pe("ZodBase64URL",(e,t)=>{IL.init(e,t),xr.init(e,t)});function j4(e){return cT(e0,e)}const t0=Pe("ZodE164",(e,t)=>{OL.init(e,t),xr.init(e,t)});function B4(e){return uT(t0,e)}const n0=Pe("ZodJWT",(e,t)=>{zL.init(e,t),xr.init(e,t)});function U4(e){return dT(n0,e)}const im=Pe("ZodCustomStringFormat",(e,t)=>{LL.init(e,t),xr.init(e,t)});function V4(e,t,n={}){return O_(im,e,t,n)}function G4(e){return O_(im,"hostname",E3,e)}function W4(e){return O_(im,"hex",U3,e)}function H4(e,t){const n=t?.enc??"hex",i=`${e}_${n}`,r=z1[i];if(!r)throw new Error(`Unrecognized hash format: ${i}`);return O_(im,i,r,t)}const L_=Pe("ZodNumber",(e,t)=>{N1.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(i,r,o)=>vF(e,i,r),e.gt=(i,r)=>e.check(ou(i,r)),e.gte=(i,r)=>e.check(ha(i,r)),e.min=(i,r)=>e.check(ha(i,r)),e.lt=(i,r)=>e.check(au(i,r)),e.lte=(i,r)=>e.check(bo(i,r)),e.max=(i,r)=>e.check(bo(i,r)),e.int=i=>e.check(Yy(i)),e.safe=i=>e.check(Yy(i)),e.positive=i=>e.check(ou(0,i)),e.nonnegative=i=>e.check(ha(0,i)),e.negative=i=>e.check(au(0,i)),e.nonpositive=i=>e.check(bo(0,i)),e.multipleOf=(i,r)=>e.check(Zh(i,r)),e.step=(i,r)=>e.check(Zh(i,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function TT(e){return FR(L_,e)}const Hd=Pe("ZodNumberFormat",(e,t)=>{RL.init(e,t),L_.init(e,t)});function Yy(e){return jR(Hd,e)}function K4(e){return BR(Hd,e)}function q4(e){return UR(Hd,e)}function Z4(e){return VR(Hd,e)}function Q4(e){return GR(Hd,e)}const R_=Pe("ZodBoolean",(e,t)=>{j1.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>yF(e,n,i)});function ST(e){return WR(R_,e)}const F_=Pe("ZodBigInt",(e,t)=>{B1.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(i,r,o)=>bF(e,i),e.gte=(i,r)=>e.check(ha(i,r)),e.min=(i,r)=>e.check(ha(i,r)),e.gt=(i,r)=>e.check(ou(i,r)),e.gte=(i,r)=>e.check(ha(i,r)),e.min=(i,r)=>e.check(ha(i,r)),e.lt=(i,r)=>e.check(au(i,r)),e.lte=(i,r)=>e.check(bo(i,r)),e.max=(i,r)=>e.check(bo(i,r)),e.positive=i=>e.check(ou(BigInt(0),i)),e.negative=i=>e.check(au(BigInt(0),i)),e.nonpositive=i=>e.check(bo(BigInt(0),i)),e.nonnegative=i=>e.check(ha(BigInt(0),i)),e.multipleOf=(i,r)=>e.check(Zh(i,r));const n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function X4(e){return KR(F_,e)}const r0=Pe("ZodBigIntFormat",(e,t)=>{FL.init(e,t),F_.init(e,t)});function Y4(e){return ZR(r0,e)}function J4(e){return QR(r0,e)}const ET=Pe("ZodSymbol",(e,t)=>{NL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>wF(e,n)});function eN(e){return XR(ET,e)}const $T=Pe("ZodUndefined",(e,t)=>{jL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>MF(e,n)});function tN(e){return YR($T,e)}const PT=Pe("ZodNull",(e,t)=>{BL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>xF(e,n,i)});function CT(e){return JR(PT,e)}const kT=Pe("ZodAny",(e,t)=>{UL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>EF()});function nN(){return eF(kT)}const AT=Pe("ZodUnknown",(e,t)=>{VL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>$F()});function Bd(){return tF(AT)}const IT=Pe("ZodNever",(e,t)=>{GL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>SF(e,n,i)});function i0(e){return nF(IT,e)}const OT=Pe("ZodVoid",(e,t)=>{WL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>TF(e,n)});function rN(e){return rF(OT,e)}const a0=Pe("ZodDate",(e,t)=>{HL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(i,r,o)=>PF(e,i),e.min=(i,r)=>e.check(ha(i,r)),e.max=(i,r)=>e.check(bo(i,r));const n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function iN(e){return iF(a0,e)}const DT=Pe("ZodArray",(e,t)=>{KL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>jF(e,n,i,r),e.element=t.element,e.min=(n,i)=>e.check(jd(n,i)),e.nonempty=n=>e.check(jd(1,n)),e.max=(n,i)=>e.check(A_(n,i)),e.length=(n,i)=>e.check(I_(n,i)),e.unwrap=()=>e.element});function N_(e,t){return sF(DT,e,t)}function aN(e){const t=e._zod.def.shape;return s0(Object.keys(t))}const j_=Pe("ZodObject",(e,t)=>{XL.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>BF(e,n,i,r),bn(e,"shape",()=>t.shape),e.keyof=()=>s0(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Bd()}),e.loose=()=>e.clone({...e._zod.def,catchall:Bd()}),e.strict=()=>e.clone({...e._zod.def,catchall:i0()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>Zz(e,n),e.safeExtend=n=>Qz(e,n),e.merge=n=>Xz(e,n),e.pick=n=>Kz(e,n),e.omit=n=>qz(e,n),e.partial=(...n)=>Yz(c0,e,n[0]),e.required=(...n)=>Jz(u0,e,n[0])});function oN(e,t){const n={type:"object",shape:e??{},...at(t)};return new j_(n)}function sN(e,t){return new j_({type:"object",shape:e,catchall:i0(),...at(t)})}function lN(e,t){return new j_({type:"object",shape:e,catchall:Bd(),...at(t)})}const B_=Pe("ZodUnion",(e,t)=>{Eb.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>_T(e,n,i,r),e.options=t.options});function o0(e,t){return new B_({type:"union",options:e,...at(t)})}const zT=Pe("ZodXor",(e,t)=>{B_.init(e,t),YL.init(e,t),e._zod.processJSONSchema=(n,i,r)=>_T(e,n,i,r),e.options=t.options});function cN(e,t){return new zT({type:"union",options:e,inclusive:!1,...at(t)})}const LT=Pe("ZodDiscriminatedUnion",(e,t)=>{B_.init(e,t),JL.init(e,t)});function uN(e,t,n){return new LT({type:"union",options:t,discriminator:e,...at(n)})}const RT=Pe("ZodIntersection",(e,t)=>{eR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>UF(e,n,i,r)});function FT(e,t){return new RT({type:"intersection",left:e,right:t})}const NT=Pe("ZodTuple",(e,t)=>{U1.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>VF(e,n,i,r),e.rest=n=>e.clone({...e._zod.def,rest:n})});function jT(e,t,n){const i=t instanceof hn,r=i?n:t,o=i?t:null;return new NT({type:"tuple",items:e,rest:o,...at(r)})}const U_=Pe("ZodRecord",(e,t)=>{tR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>GF(e,n,i,r),e.keyType=t.keyType,e.valueType=t.valueType});function BT(e,t,n){return new U_({type:"record",keyType:e,valueType:t,...at(n)})}function dN(e,t,n){const i=To(e);return i._zod.values=void 0,new U_({type:"record",keyType:i,valueType:t,...at(n)})}function fN(e,t,n){return new U_({type:"record",keyType:e,valueType:t,mode:"loose",...at(n)})}const UT=Pe("ZodMap",(e,t)=>{nR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>FF(e,n),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...n)=>e.check(su(...n)),e.nonempty=n=>e.check(su(1,n)),e.max=(...n)=>e.check(rm(...n)),e.size=(...n)=>e.check(k_(...n))});function hN(e,t,n){return new UT({type:"map",keyType:e,valueType:t,...at(n)})}const VT=Pe("ZodSet",(e,t)=>{rR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>NF(e,n),e.min=(...n)=>e.check(su(...n)),e.nonempty=n=>e.check(su(1,n)),e.max=(...n)=>e.check(rm(...n)),e.size=(...n)=>e.check(k_(...n))});function mN(e,t){return new VT({type:"set",valueType:e,...at(t)})}const Jh=Pe("ZodEnum",(e,t)=>{iR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(i,r,o)=>CF(e,i,r),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(i,r)=>{const o={};for(const l of i)if(n.has(l))o[l]=t.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Jh({...t,checks:[],...at(r),entries:o})},e.exclude=(i,r)=>{const o={...t.entries};for(const l of i)if(n.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new Jh({...t,checks:[],...at(r),entries:o})}});function s0(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Jh({type:"enum",entries:n,...at(t)})}function pN(e,t){return new Jh({type:"enum",entries:e,...at(t)})}const GT=Pe("ZodLiteral",(e,t)=>{aR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>kF(e,n,i),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function gN(e,t){return new GT({type:"literal",values:Array.isArray(e)?e:[e],...at(t)})}const WT=Pe("ZodFile",(e,t)=>{oR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>OF(e,n,i),e.min=(n,i)=>e.check(su(n,i)),e.max=(n,i)=>e.check(rm(n,i)),e.mime=(n,i)=>e.check(Db(Array.isArray(n)?n:[n],i))});function _N(e){return lF(WT,e)}const HT=Pe("ZodTransform",(e,t)=>{sR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>RF(e,n),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new bb(e.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(Kh(o,n.value,t));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=e),n.issues.push(Kh(l))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(o=>(n.value=o,n)):(n.value=r,n)}});function l0(e){return new HT({type:"transform",transform:e})}const c0=Pe("ZodOptional",(e,t)=>{V1.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>vT(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function f_(e){return new c0({type:"optional",innerType:e})}const KT=Pe("ZodExactOptional",(e,t)=>{lR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>vT(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function qT(e){return new KT({type:"optional",innerType:e})}const ZT=Pe("ZodNullable",(e,t)=>{cR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>WF(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function h_(e){return new ZT({type:"nullable",innerType:e})}function vN(e){return f_(h_(e))}const QT=Pe("ZodDefault",(e,t)=>{uR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>KF(e,n,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function XT(e,t){return new QT({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Mb(t)}})}const YT=Pe("ZodPrefault",(e,t)=>{dR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>qF(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function JT(e,t){return new YT({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Mb(t)}})}const u0=Pe("ZodNonOptional",(e,t)=>{fR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>HF(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function eS(e,t){return new u0({type:"nonoptional",innerType:e,...at(t)})}const tS=Pe("ZodSuccess",(e,t)=>{hR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>DF(e,n,i),e.unwrap=()=>e._zod.def.innerType});function yN(e){return new tS({type:"success",innerType:e})}const nS=Pe("ZodCatch",(e,t)=>{mR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>ZF(e,n,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function rS(e,t){return new nS({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const iS=Pe("ZodNaN",(e,t)=>{pR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>AF(e,n)});function bN(e){return oF(iS,e)}const d0=Pe("ZodPipe",(e,t)=>{gR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>QF(e,n,i,r),e.in=t.in,e.out=t.out});function m_(e,t){return new d0({type:"pipe",in:e,out:t})}const f0=Pe("ZodCodec",(e,t)=>{d0.init(e,t),G1.init(e,t)});function wN(e,t,n){return new f0({type:"pipe",in:e,out:t,transform:n.decode,reverseTransform:n.encode})}const aS=Pe("ZodReadonly",(e,t)=>{_R.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>XF(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function oS(e){return new aS({type:"readonly",innerType:e})}const sS=Pe("ZodTemplateLiteral",(e,t)=>{vR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>IF(e,n,i)});function xN(e,t){return new sS({type:"template_literal",parts:e,...at(t)})}const lS=Pe("ZodLazy",(e,t)=>{wR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>JF(e,n,i,r),e.unwrap=()=>e._zod.def.getter()});function cS(e){return new lS({type:"lazy",getter:e})}const uS=Pe("ZodPromise",(e,t)=>{bR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>YF(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function MN(e){return new uS({type:"promise",innerType:e})}const dS=Pe("ZodFunction",(e,t)=>{yR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>LF(e,n)});function Jy(e){return new dS({type:"function",input:Array.isArray(e?.input)?jT(e?.input):e?.input??N_(Bd()),output:e?.output??Bd()})}const V_=Pe("ZodCustom",(e,t)=>{xR.init(e,t),pn.init(e,t),e._zod.processJSONSchema=(n,i,r)=>zF(e,n)});function TN(e){const t=new Fr({check:"custom"});return t._zod.check=e,t}function SN(e,t){return cF(V_,e??(()=>!0),t)}function fS(e,t={}){return uF(V_,e,t)}function hS(e){return dF(e)}const EN=hF,$N=mF;function PN(e,t={}){const n=new V_({type:"custom",check:"custom",fn:i=>i instanceof e,abort:!0,...at(t)});return n._zod.bag.Class=e,n._zod.check=i=>{i.value instanceof e||i.issues.push({code:"invalid_type",expected:e.name,input:i.value,inst:n,path:[...n._zod.def.path??[]]})},n}const CN=(...e)=>pF({Codec:f0,Boolean:R_,String:D_},...e);function kN(e){const t=cS(()=>o0([Xy(e),TT(),ST(),CT(),N_(t),BT(Xy(),t)]));return t}function AN(e,t){return m_(l0(e),t)}const Bq=Object.freeze(Object.defineProperty({__proto__:null,ZodAny:kT,ZodArray:DT,ZodBase64:Jb,ZodBase64URL:e0,ZodBigInt:F_,ZodBigIntFormat:r0,ZodBoolean:R_,ZodCIDRv4:Xb,ZodCIDRv6:Yb,ZodCUID:Gb,ZodCUID2:Wb,ZodCatch:nS,ZodCodec:f0,ZodCustom:V_,ZodCustomStringFormat:im,ZodDate:a0,ZodDefault:QT,ZodDiscriminatedUnion:LT,ZodE164:t0,ZodEmail:Bb,ZodEmoji:Ub,ZodEnum:Jh,ZodExactOptional:KT,ZodFile:WT,ZodFunction:dS,ZodGUID:d_,ZodIPv4:Zb,ZodIPv6:Qb,ZodIntersection:RT,ZodJWT:n0,ZodKSUID:qb,ZodLazy:lS,ZodLiteral:GT,ZodMAC:MT,ZodMap:UT,ZodNaN:iS,ZodNanoID:Vb,ZodNever:IT,ZodNonOptional:u0,ZodNull:PT,ZodNullable:ZT,ZodNumber:L_,ZodNumberFormat:Hd,ZodObject:j_,ZodOptional:c0,ZodPipe:d0,ZodPrefault:YT,ZodPromise:uS,ZodReadonly:aS,ZodRecord:U_,ZodSet:VT,ZodString:D_,ZodStringFormat:xr,ZodSuccess:tS,ZodSymbol:ET,ZodTemplateLiteral:sS,ZodTransform:HT,ZodTuple:NT,ZodType:pn,ZodULID:Hb,ZodURL:z_,ZodUUID:Bs,ZodUndefined:$T,ZodUnion:B_,ZodUnknown:AT,ZodVoid:OT,ZodXID:Kb,ZodXor:zT,_ZodString:jb,_default:XT,_function:Jy,any:nN,array:N_,base64:N4,base64url:j4,bigint:X4,boolean:ST,catch:rS,check:TN,cidrv4:R4,cidrv6:F4,codec:wN,cuid:C4,cuid2:k4,custom:SN,date:iN,describe:EN,discriminatedUnion:uN,e164:B4,email:y4,emoji:$4,enum:s0,exactOptional:qT,file:_N,float32:K4,float64:q4,function:Jy,guid:b4,hash:H4,hex:W4,hostname:G4,httpUrl:E4,instanceof:PN,int:Yy,int32:Z4,int64:Y4,intersection:FT,ipv4:D4,ipv6:L4,json:kN,jwt:U4,keyof:aN,ksuid:O4,lazy:cS,literal:gN,looseObject:lN,looseRecord:fN,mac:z4,map:hN,meta:$N,nan:bN,nanoid:P4,nativeEnum:pN,never:i0,nonoptional:eS,null:CT,nullable:h_,nullish:vN,number:TT,object:oN,optional:f_,partialRecord:dN,pipe:m_,prefault:JT,preprocess:AN,promise:MN,readonly:oS,record:BT,refine:fS,set:mN,strictObject:sN,string:Xy,stringFormat:V4,stringbool:CN,success:yN,superRefine:hS,symbol:eN,templateLiteral:xN,transform:l0,tuple:jT,uint32:Q4,uint64:J4,ulid:A4,undefined:tN,union:o0,unknown:Bd,url:S4,uuid:w4,uuidv4:x4,uuidv6:M4,uuidv7:T4,void:rN,xid:I4,xor:cN},Symbol.toStringTag,{value:"Module"})),Uq={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function Vq(e){Wi({customError:e})}function Gq(){return Wi().customError}var nM;nM||(nM={});const Pt={...Bq,...Nq,iso:a4},Wq=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function Hq(e,t){const n=e.$schema;return n==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":n==="http://json-schema.org/draft-07/schema#"?"draft-7":n==="http://json-schema.org/draft-04/schema#"?"draft-4":t??"draft-2020-12"}function Kq(e,t){if(!e.startsWith("#"))throw new Error("External $ref is not supported, only local refs (#/...) are allowed");const n=e.slice(1).split("/").filter(Boolean);if(n.length===0)return t.rootSchema;const i=t.version==="draft-2020-12"?"$defs":"definitions";if(n[0]===i){const r=n[1];if(!r||!t.defs[r])throw new Error(`Reference not found: ${e}`);return t.defs[r]}throw new Error(`Reference not found: ${e}`)}function IN(e,t){if(e.not!==void 0){if(typeof e.not=="object"&&Object.keys(e.not).length===0)return Pt.never();throw new Error("not is not supported in Zod (except { not: {} } for never)")}if(e.unevaluatedItems!==void 0)throw new Error("unevaluatedItems is not supported");if(e.unevaluatedProperties!==void 0)throw new Error("unevaluatedProperties is not supported");if(e.if!==void 0||e.then!==void 0||e.else!==void 0)throw new Error("Conditional schemas (if/then/else) are not supported");if(e.dependentSchemas!==void 0||e.dependentRequired!==void 0)throw new Error("dependentSchemas and dependentRequired are not supported");if(e.$ref){const r=e.$ref;if(t.refs.has(r))return t.refs.get(r);if(t.processing.has(r))return Pt.lazy(()=>{if(!t.refs.has(r))throw new Error(`Circular reference not resolved: ${r}`);return t.refs.get(r)});t.processing.add(r);const o=Kq(r,t),l=Ui(o,t);return t.refs.set(r,l),t.processing.delete(r),l}if(e.enum!==void 0){const r=e.enum;if(t.version==="openapi-3.0"&&e.nullable===!0&&r.length===1&&r[0]===null)return Pt.null();if(r.length===0)return Pt.never();if(r.length===1)return Pt.literal(r[0]);if(r.every(l=>typeof l=="string"))return Pt.enum(r);const o=r.map(l=>Pt.literal(l));return o.length<2?o[0]:Pt.union([o[0],o[1],...o.slice(2)])}if(e.const!==void 0)return Pt.literal(e.const);const n=e.type;if(Array.isArray(n)){const r=n.map(o=>{const l={...e,type:o};return IN(l,t)});return r.length===0?Pt.never():r.length===1?r[0]:Pt.union(r)}if(!n)return Pt.any();let i;switch(n){case"string":{let r=Pt.string();if(e.format){const o=e.format;o==="email"?r=r.check(Pt.email()):o==="uri"||o==="uri-reference"?r=r.check(Pt.url()):o==="uuid"||o==="guid"?r=r.check(Pt.uuid()):o==="date-time"?r=r.check(Pt.iso.datetime()):o==="date"?r=r.check(Pt.iso.date()):o==="time"?r=r.check(Pt.iso.time()):o==="duration"?r=r.check(Pt.iso.duration()):o==="ipv4"?r=r.check(Pt.ipv4()):o==="ipv6"?r=r.check(Pt.ipv6()):o==="mac"?r=r.check(Pt.mac()):o==="cidr"?r=r.check(Pt.cidrv4()):o==="cidr-v6"?r=r.check(Pt.cidrv6()):o==="base64"?r=r.check(Pt.base64()):o==="base64url"?r=r.check(Pt.base64url()):o==="e164"?r=r.check(Pt.e164()):o==="jwt"?r=r.check(Pt.jwt()):o==="emoji"?r=r.check(Pt.emoji()):o==="nanoid"?r=r.check(Pt.nanoid()):o==="cuid"?r=r.check(Pt.cuid()):o==="cuid2"?r=r.check(Pt.cuid2()):o==="ulid"?r=r.check(Pt.ulid()):o==="xid"?r=r.check(Pt.xid()):o==="ksuid"&&(r=r.check(Pt.ksuid()))}typeof e.minLength=="number"&&(r=r.min(e.minLength)),typeof e.maxLength=="number"&&(r=r.max(e.maxLength)),e.pattern&&(r=r.regex(new RegExp(e.pattern))),i=r;break}case"number":case"integer":{let r=n==="integer"?Pt.number().int():Pt.number();typeof e.minimum=="number"&&(r=r.min(e.minimum)),typeof e.maximum=="number"&&(r=r.max(e.maximum)),typeof e.exclusiveMinimum=="number"?r=r.gt(e.exclusiveMinimum):e.exclusiveMinimum===!0&&typeof e.minimum=="number"&&(r=r.gt(e.minimum)),typeof e.exclusiveMaximum=="number"?r=r.lt(e.exclusiveMaximum):e.exclusiveMaximum===!0&&typeof e.maximum=="number"&&(r=r.lt(e.maximum)),typeof e.multipleOf=="number"&&(r=r.multipleOf(e.multipleOf)),i=r;break}case"boolean":{i=Pt.boolean();break}case"null":{i=Pt.null();break}case"object":{const r={},o=e.properties||{},l=new Set(e.required||[]);for(const[d,f]of Object.entries(o)){const p=Ui(f,t);r[d]=l.has(d)?p:p.optional()}if(e.propertyNames){const d=Ui(e.propertyNames,t),f=e.additionalProperties&&typeof e.additionalProperties=="object"?Ui(e.additionalProperties,t):Pt.any();if(Object.keys(r).length===0){i=Pt.record(d,f);break}const p=Pt.object(r).passthrough(),h=Pt.looseRecord(d,f);i=Pt.intersection(p,h);break}if(e.patternProperties){const d=e.patternProperties,f=Object.keys(d),p=[];for(const m of f){const _=Ui(d[m],t),v=Pt.string().regex(new RegExp(m));p.push(Pt.looseRecord(v,_))}const h=[];if(Object.keys(r).length>0&&h.push(Pt.object(r).passthrough()),h.push(...p),h.length===0)i=Pt.object({}).passthrough();else if(h.length===1)i=h[0];else{let m=Pt.intersection(h[0],h[1]);for(let _=2;_<h.length;_++)m=Pt.intersection(m,h[_]);i=m}break}const c=Pt.object(r);e.additionalProperties===!1?i=c.strict():typeof e.additionalProperties=="object"?i=c.catchall(Ui(e.additionalProperties,t)):i=c.passthrough();break}case"array":{const r=e.prefixItems,o=e.items;if(r&&Array.isArray(r)){const l=r.map(d=>Ui(d,t)),c=o&&typeof o=="object"&&!Array.isArray(o)?Ui(o,t):void 0;c?i=Pt.tuple(l).rest(c):i=Pt.tuple(l),typeof e.minItems=="number"&&(i=i.check(Pt.minLength(e.minItems))),typeof e.maxItems=="number"&&(i=i.check(Pt.maxLength(e.maxItems)))}else if(Array.isArray(o)){const l=o.map(d=>Ui(d,t)),c=e.additionalItems&&typeof e.additionalItems=="object"?Ui(e.additionalItems,t):void 0;c?i=Pt.tuple(l).rest(c):i=Pt.tuple(l),typeof e.minItems=="number"&&(i=i.check(Pt.minLength(e.minItems))),typeof e.maxItems=="number"&&(i=i.check(Pt.maxLength(e.maxItems)))}else if(o!==void 0){const l=Ui(o,t);let c=Pt.array(l);typeof e.minItems=="number"&&(c=c.min(e.minItems)),typeof e.maxItems=="number"&&(c=c.max(e.maxItems)),i=c}else i=Pt.array(Pt.any());break}default:throw new Error(`Unsupported type: ${n}`)}return e.description&&(i=i.describe(e.description)),e.default!==void 0&&(i=i.default(e.default)),i}function Ui(e,t){if(typeof e=="boolean")return e?Pt.any():Pt.never();let n=IN(e,t);const i=e.type||e.enum!==void 0||e.const!==void 0;if(e.anyOf&&Array.isArray(e.anyOf)){const c=e.anyOf.map(f=>Ui(f,t)),d=Pt.union(c);n=i?Pt.intersection(n,d):d}if(e.oneOf&&Array.isArray(e.oneOf)){const c=e.oneOf.map(f=>Ui(f,t)),d=Pt.xor(c);n=i?Pt.intersection(n,d):d}if(e.allOf&&Array.isArray(e.allOf))if(e.allOf.length===0)n=i?n:Pt.any();else{let c=i?n:Ui(e.allOf[0],t);const d=i?0:1;for(let f=d;f<e.allOf.length;f++)c=Pt.intersection(c,Ui(e.allOf[f],t));n=c}e.nullable===!0&&t.version==="openapi-3.0"&&(n=Pt.nullable(n)),e.readOnly===!0&&(n=Pt.readonly(n));const r={},o=["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"];for(const c of o)c in e&&(r[c]=e[c]);const l=["contentEncoding","contentMediaType","contentSchema"];for(const c of l)c in e&&(r[c]=e[c]);for(const c of Object.keys(e))Wq.has(c)||(r[c]=e[c]);return Object.keys(r).length>0&&t.registry.add(n,r),n}function qq(e,t){if(typeof e=="boolean")return e?Pt.any():Pt.never();const n=Hq(e,t?.defaultTarget),i=e.$defs||e.definitions||{},r={version:n,defs:i,refs:new Map,processing:new Set,rootSchema:e,registry:t?.registry??vo};return Ui(e,r)}function Zq(e){return AR(D_,e)}function Qq(e){return NR(L_,e)}function Xq(e){return HR(R_,e)}function Yq(e){return qR(F_,e)}function Jq(e){return aF(a0,e)}const e7=Object.freeze(Object.defineProperty({__proto__:null,bigint:Yq,boolean:Xq,date:Jq,number:Qq,string:Zq},Symbol.toStringTag,{value:"Module"}));Wi(MR());const Fs=Object.freeze(Object.defineProperty({__proto__:null,$brand:Nz,$input:PR,$output:$R,NEVER:Fz,TimePrecision:OR,ZodAny:kT,ZodArray:DT,ZodBase64:Jb,ZodBase64URL:e0,ZodBigInt:F_,ZodBigIntFormat:r0,ZodBoolean:R_,ZodCIDRv4:Xb,ZodCIDRv6:Yb,ZodCUID:Gb,ZodCUID2:Wb,ZodCatch:nS,ZodCodec:f0,ZodCustom:V_,ZodCustomStringFormat:im,ZodDate:a0,ZodDefault:QT,ZodDiscriminatedUnion:LT,ZodE164:t0,ZodEmail:Bb,ZodEmoji:Ub,ZodEnum:Jh,ZodError:jq,ZodExactOptional:KT,ZodFile:WT,get ZodFirstPartyTypeKind(){return nM},ZodFunction:dS,ZodGUID:d_,ZodIPv4:Zb,ZodIPv6:Qb,ZodISODate:bT,ZodISODateTime:yT,ZodISODuration:xT,ZodISOTime:wT,ZodIntersection:RT,ZodIssueCode:Uq,ZodJWT:n0,ZodKSUID:qb,ZodLazy:lS,ZodLiteral:GT,ZodMAC:MT,ZodMap:UT,ZodNaN:iS,ZodNanoID:Vb,ZodNever:IT,ZodNonOptional:u0,ZodNull:PT,ZodNullable:ZT,ZodNumber:L_,ZodNumberFormat:Hd,ZodObject:j_,ZodOptional:c0,ZodPipe:d0,ZodPrefault:YT,ZodPromise:uS,ZodReadonly:aS,ZodRealError:Ka,ZodRecord:U_,ZodSet:VT,ZodString:D_,ZodStringFormat:xr,ZodSuccess:tS,ZodSymbol:ET,ZodTemplateLiteral:sS,ZodTransform:HT,ZodTuple:NT,ZodType:pn,ZodULID:Hb,ZodURL:z_,ZodUUID:Bs,ZodUndefined:$T,ZodUnion:B_,ZodUnknown:AT,ZodVoid:OT,ZodXID:Kb,ZodXor:zT,_ZodString:jb,_default:XT,_function:Jy,any:nN,array:N_,base64:N4,base64url:j4,bigint:X4,boolean:ST,catch:rS,check:TN,cidrv4:R4,cidrv6:F4,clone:To,codec:wN,coerce:e7,config:Wi,core:Fq,cuid:C4,cuid2:k4,custom:SN,date:iN,decode:f4,decodeAsync:m4,describe:EN,discriminatedUnion:uN,e164:B4,email:y4,emoji:$4,encode:d4,encodeAsync:h4,endsWith:Ob,enum:s0,exactOptional:qT,file:_N,flattenError:M1,float32:K4,float64:q4,formatError:T1,fromJSONSchema:qq,function:Jy,getErrorMap:Gq,globalRegistry:vo,gt:ou,gte:ha,guid:b4,hash:H4,hex:W4,hostname:G4,httpUrl:E4,includes:Ab,instanceof:PN,int:Yy,int32:Z4,int64:Y4,intersection:FT,ipv4:D4,ipv6:L4,iso:a4,json:kN,jwt:U4,keyof:aN,ksuid:O4,lazy:cS,length:I_,literal:gN,locales:ER,looseObject:lN,looseRecord:fN,lowercase:Cb,lt:au,lte:bo,mac:z4,map:hN,maxLength:A_,maxSize:rm,meta:$N,mime:Db,minLength:jd,minSize:su,multipleOf:Zh,nan:bN,nanoid:P4,nativeEnum:pN,negative:hT,never:i0,nonnegative:pT,nonoptional:eS,nonpositive:mT,normalize:zb,null:CT,nullable:h_,nullish:vN,number:TT,object:oN,optional:f_,overwrite:Wl,parse:s4,parseAsync:l4,partialRecord:dN,pipe:m_,positive:fT,prefault:JT,preprocess:AN,prettifyError:o3,promise:MN,property:gT,readonly:oS,record:BT,refine:fS,regex:Pb,regexes:z1,registry:W1,safeDecode:g4,safeDecodeAsync:v4,safeEncode:p4,safeEncodeAsync:_4,safeParse:c4,safeParseAsync:u4,set:mN,setErrorMap:Vq,size:k_,slugify:Nb,startsWith:Ib,strictObject:sN,string:Xy,stringFormat:V4,stringbool:CN,success:yN,superRefine:hS,symbol:eN,templateLiteral:xN,toJSONSchema:e4,toLowerCase:Rb,toUpperCase:Fb,transform:l0,treeifyError:i3,trim:Lb,tuple:jT,uint32:Q4,uint64:J4,ulid:A4,undefined:tN,union:o0,unknown:Bd,uppercase:kb,url:S4,util:n3,uuid:w4,uuidv4:x4,uuidv6:M4,uuidv7:T4,void:rN,xid:I4,xor:cN},Symbol.toStringTag,{value:"Module"})),t7=Fs.object({type:Fs.literal("tag"),name:Fs.string(),genre:Fs.number(),popularity:Fs.number()}),n7=Fs.object({type:Fs.literal("alias"),name:Fs.string(),redirect:Fs.string()}),r7=Fs.discriminatedUnion("type",[t7,n7]),ON="vecbooru-db-v1",DN="/index.bin";let ly=null;const i7=async()=>await(await caches.open(ON)).match(DN)!==void 0;async function a7(e){const t=await caches.open(ON),n=await t.match(e);if(n)return console.log("Using cached database"),n.arrayBuffer();console.log("Fetching database from network");const i=await fetch(e);if(!i.ok)throw new Error(`Failed to fetch ${e}`);return await t.put(e,i.clone()),i.arrayBuffer()}const zN=()=>ly||(ly=(async()=>{await Rz();const e=await a7(DN);return GM.load(new Uint8Array(e),{schema:r7,compress:"gzip"})})(),ly),o7=async e=>{const t=await zN(),i=await(await Rz())(`query: ${e.replaceAll(/[^\\]_/g," ")}`,{pooling:"mean",normalize:!0}),r=new Float32Array(i.tolist()[0]);return t.search(r,100)};function LN(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}var s7=["color"],l7=Q.forwardRef(function(e,t){var n=e.color,i=n===void 0?"currentColor":n,r=LN(e,s7);return Q.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:t}),Q.createElement("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),c7=["color"],RN=Q.forwardRef(function(e,t){var n=e.color,i=n===void 0?"currentColor":n,r=LN(e,c7);return Q.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r,{ref:t}),Q.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))});const u7=({query:e,onQueryChange:t,onBlur:n,isSearching:i})=>Te.jsxs(fa,{gap:"2",align:"center",children:[Te.jsx(PA,{placeholder:"...",size:"3",style:{flexGrow:1},value:e,onChange:r=>t(r.target.value),onBlur:n,children:Te.jsx(CA,{children:Te.jsx(RN,{height:"16",width:"16"})})}),i&&Te.jsx(_b,{size:"2"})]}),d7={0:"general",1:"artist",3:"copyright",4:"character",5:"meta"},f7={0:"gray",1:"purple",3:"orange",4:"green",5:"blue"},h7=e=>{const t=e.replaceAll("_"," ");navigator.clipboard.writeText(t),tG.success(`: ${t}`)},UC=({text:e})=>Te.jsx(zM,{content:"",children:Te.jsx(DM,{size:"2",variant:"solid",onClick:()=>h7(e),children:Te.jsx(l7,{})})}),m7=({text:e,onSearch:t})=>Te.jsx(zM,{content:"",children:Te.jsx(DM,{size:"2",variant:"solid",onClick:()=>t(e),children:Te.jsx(RN,{})})}),p7=({metadata:e,score:t,onSearch:n})=>Te.jsx(Xg,{children:Te.jsxs(fa,{justify:"between",align:"center",gap:"4",children:[Te.jsx(fa,{align:"center",gap:"2",style:{minWidth:0},children:e.type==="tag"?Te.jsxs(Te.Fragment,{children:[Te.jsx(UC,{text:e.name}),Te.jsx(Rs,{size:"4",weight:"bold",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})]}):Te.jsxs(Te.Fragment,{children:[Te.jsx(UC,{text:e.redirect}),Te.jsxs(Rs,{size:"4",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.name,Te.jsx(Rs,{color:"gray",children:"  "}),Te.jsx(Rs,{weight:"bold",children:e.redirect})]})]})}),Te.jsxs(fa,{align:"center",gap:"3",style:{flexShrink:0},children:[e.type==="tag"&&Te.jsxs(Te.Fragment,{children:[Te.jsx(MA,{size:"2",color:f7[e.genre]??"gray",variant:"solid",children:d7[e.genre]??`genre:${e.genre}`}),Te.jsxs(Rs,{size:"2",color:"gray",children:[": ",e.popularity]})]}),e.type==="alias"&&Te.jsx(m7,{text:e.redirect,onSearch:n}),Te.jsxs(Rs,{size:"1",color:"gray",children:[(t*100).toFixed(1),"%"]})]})]})}),g7=({results:e,onSearch:t})=>Te.jsx(OM,{size:"2",px:"4",pb:"4",children:Te.jsx(fa,{direction:"column",gap:"3",children:e.map((n,i)=>Te.jsx(p7,{metadata:n.metadata,score:n.score,onSearch:t},i))})}),_7=({initialQuery:e="",onQueryChange:t})=>{const[n,i]=Q.useState(!1),[r,o]=Q.useState(e),l=Q.useDeferredValue(r);Q.useEffect(()=>{i7().then(h=>{h&&i(!0)})},[]);const c=NE({queryKey:["engine"],queryFn:zN,staleTime:1/0,gcTime:1/0,enabled:n}),d=NE({queryKey:["search",l],queryFn:()=>o7(l),enabled:c.isSuccess&&l.trim().length>0,placeholderData:h=>h}),f=l.trim().length>0?d.data??[]:[],p=()=>{t?.(r)};return Te.jsxs(fa,{direction:"column",style:{height:"100%"},children:[Te.jsx(OM,{size:"2",p:"4",style:{flexShrink:0},children:Te.jsxs(fa,{direction:"column",gap:"4",children:[Te.jsx(Bg,{size:"8",mb:"2",children:"VecBooru"}),n?c.isPending?Te.jsx(Xg,{size:"3",children:Te.jsxs(fa,{direction:"column",gap:"4",align:"center",children:[Te.jsx(Bg,{size:"4",children:""}),Te.jsx(_b,{size:"3"})]})}):c.isError?Te.jsx(Xg,{size:"3",children:Te.jsxs(fa,{direction:"column",gap:"4",align:"center",children:[Te.jsx(Bg,{size:"4",color:"red",children:""}),Te.jsx(Rs,{align:"center",color:"red",children:c.error?.message??""}),Te.jsx(bx,{size:"3",onClick:()=>c.refetch(),children:""})]})}):Te.jsx(u7,{query:r,onQueryChange:o,onBlur:p,isSearching:d.isFetching}):Te.jsx(Xg,{size:"3",children:Te.jsxs(fa,{direction:"column",gap:"4",align:"center",children:[Te.jsx(Bg,{size:"4",children:""}),Te.jsx(Rs,{align:"center",color:"yellow",children:": 250MB"}),Te.jsx(bx,{size:"3",onClick:()=>i(!0),children:""})]})})]})}),c.isSuccess&&Te.jsx($A,{children:Te.jsx(g7,{results:f,onSearch:o})})]})};function v7(){const{q:e}=FN.useSearch(),t=ib(),n=Q.useCallback(i=>{t({to:"/",search:i?{q:i}:{},replace:!0})},[t]);return Te.jsx(_7,{initialQuery:e??"",onQueryChange:n})}const FN=lk({getParentRoute:()=>HA,path:"/",validateSearch:e=>({q:typeof e.q=="string"?e.q:void 0}),component:v7}),y7=HA.addChildren([FN]),b7=UB({routeTree:y7}),w7=()=>Te.jsx(WB,{router:b7}),NN=document.getElementById("root");if(NN===null)throw new Error("Failed to initialize application.");lj.createRoot(NN).render(Te.jsx(Q.StrictMode,{children:Te.jsx(w7,{})}));
